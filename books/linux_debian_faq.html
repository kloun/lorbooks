<HTML>
<HEAD>
<TITLE>Debian FAQ.</TITLE>
</HEAD>
<BODY>
<?php include("/home/maxcom/linux_html/books/head.php3") ?>
<CENTER><H1>Debian FAQ.</H1>
Часто задаваемые вопросы при работе с Linux и дистрибутивом Debian.
<P>Patch level 14, 11 октября 1998, 14:30.</CENTER>
<HR>
<H3>Авторские права</H3>
Автором является <A HREF="mailto:victor_v@permonline.ru">Виктор Вислобоков</A>
<BR>
Fidonet: 2:5054/69.34@Fidonet.org<BR>
<HR>
<H3>Замечания</H3>
<NL>
<LI>Автор не несет никакой ответственности за какой-либо ущерб,
который может быть причинен при использовании данной информации.
<LI>      
Все замечания, исправления, дополнения,  пожелания  описать
что-либо поподробней и другие, просьба направлять по данному
выше адресу компьютерной сети Fidonet или E-mail.
<LI>      
Разрешается копирование,  модификация и распостранения данного
FAQ  в любых целях, кроме коммерческих при  сохранении в документе
секций "Авторские права", "Замечания" и "Благодарности".
<LI>      
Коммерческое  использование только с письменного разрешения автора.
</NL>
<H3>Благодарности</H3>
<B>Косте Кудрину</B> (2:5054/69@Fidonet.org) за патч к вопросу 6.2
за большую помощь в вопросе 2.7 и за моральную поддержку.
<BR>	  
<B>Алексею Выскубову</B> (2:5030/5.914@Fidonet.org) за справедливую
критику и вопрос 4.4.
<BR>
<B>Leon B. Kanter</B> (2:465/148.1@Fidonet.org) за вопрос 6.1
<BR>
<B>Максиму Лобашову</B> <A HREF="mailto:max@t37.nevod.perm.su">max@t37.nevod.perm.su</A> за
замечание к вопросу 2.1.
<HR>    
<H3>Перечень вопросов, на которые даны ответы в данном FAQ</H3>
<IMG SRC="http://www.linux.org.ru/images/mod.jpg"> - Ответ на вопрос изменен или дополнен
<BR>
<IMG SRC="http://www.linux.org.ru/images/new.jpg"> - Новый вопрос
<BR>

<OL>
<LH><B>1. Общие вопросы по дистрибутиву</B>
<LI><A HREF="linux_debian_faq.html#P1Q1">Что такое Debian?</A>
<LI><A HREF="linux_debian_faq.html#P1Q2">Чем отличается Debian от других дистрибутивов Linux?</A>
<LI><A HREF="linux_debian_faq.html#P1Q3">Какими способами можно установить Debian?</A>
<LI><A HREF="linux_debian_faq.html#P1Q4">Какая версия Debian на сегодня самая свежая?</A>
<LI><A HREF="linux_debian_faq.html#P1Q5">Как мне сделать собственный .deb пакет?</A>
</OL>
<OL>
<LH><B>2. Русификация</B>
<LI><A HREF="linux_debian_faq.html#P2Q1">Что нужно сделать, чтобы в текстовом режиме можно было читать и писать по русски?</A>
<LI><A HREF="linux_debian_faq.html#P2Q2">Как сделать так, чтобы в моем mc (Midnight Commander) были видны русские
буквы и чтобы я мог их там набирать, а то лезет всякая ерунда?</A>
<LI><A HREF="linux_debian_faq.html#P2Q3">Как  получить  возможность  вводить  и  читать русские буквы в X Window?</A>
<LI><A HREF="linux_debian_faq.html#P2Q4">Как заставить писать по русски мой любимый редактор joe?</A>
<LI><A HREF="linux_debian_faq.html#P2Q5">Захотел прочитать текстовый файл на русском языке, который я сделал в 
DOS'е, а там русских букв нет, вместо них почему-то псевдографика. Каким
образом можно прочитать текстовые файлы из DOS'а?</A>
<LI><A HREF="linux_debian_faq.html#P2Q6">Почему у меня программа для работы с электронной почтой elm говорит 
Unknown charset, когда я пишу письма на русском языке? Как с этим бороться?</A>
<LI><A HREF="linux_debian_faq.html#P2Q7">Как заставить Netscape Navigator показывать русские буквы в
кодировках KOI-8 и CP1251?</A>
</OL>
<OL>
<LH><B>3. Конфигурирование и настройка приложений</B>
<LI><A HREF="linux_debian_faq.html#P3Q1">А почему, когда я работаю  под X Window в эмуляторе
терминала rxvt мой mc (Midnight Commander) при нажатии
клавиш Home и End вместо выполнения перемещения по 
каталогу выдает мусор вида 1~ и 4~? Как сделать, чтобы
все было нормально?</A>
<LI><A HREF="linux_debian_faq.html#P3Q2">У  меня  на  первом  винте стоит Linux но есть и второй 
винт, на котором стоит DOS, как мне добится чтобы LILO грузил мне DOS?</A>
<LI><A HREF="linux_debian_faq.html#P3Q3">Говорят, что якобы можно грузить Linux напрямую из DOS'а
не пользуясь LILO. Это действительно так? Если да, то как это сделать?</A>
<LI><A HREF="linux_debian_faq.html#P3Q4">У меня стоят три менеждера окон к X Window. Куда мне прописать чтобы
грузился fvwm95?</A>
<LI><A HREF="linux_debian_faq.html#P3Q5">Как соединятся с провайдером для выхода в Internet через модем, по 
протоколу PPP?</A>
</OL>
<OL>
<LH><B>4. Система и приложения</B>
<LI><A HREF="linux_debian_faq.html#P4Q1">Как создавать и удалять новых пользователей?</A>
<LI><A HREF="linux_debian_faq.html#P4Q2">Как монтировать и демонтировать файловые системы?</A>
<LI><A HREF="linux_debian_faq.html#P4Q3">При архивировании командой tar получается архив, который не влазит на
одну дискету. Как мне разбить такой архив по дискетам?</A>
<LI><A HREF="linux_debian_faq.html#P4Q4">Как обновлять софт, если у меня есть подключение к Интернету?
Hеужели выкачивать новые пакеты, а потом руками ставить?</A>
<LI><A HREF="linux_debian_faq.html#P4Q5">У меня старая версия ядра, но я достал исходники новой
версии, а также патчи. Что мне делать с патчами и как мне теперь собрать
ядро и сделать его загружаемым?</A>
</OL>
<OL>
<LH><B>5. Поддержка различного железа</B>
<LI><A HREF="linux_debian_faq.html#P5Q1">У меня есть второй винт, который зацеплен на один шлейф с первым.
Какому устройству он соответствует?</A>
<LI><IMG SRC="http://www.linux.org.ru/images/new.jpg"><A HREF="linux_debian_faq.html#P5Q2">Как можно заставить работать под Linux звуковую карточку на
чипсете OPTi 930xx?</A>
</OL>
<OL>
<LH><B>6. Баги, фиксы и рекомендации по обходу некоторых "узких" мест.</B>
<LI><A HREF="linux_debian_faq.html#P6Q1">Почему, когда я переключаюсь из текстовой консоли в
X Window и двигаю своей PS/2 мышкой X Window Server 
падает с сообщением: psaux: device resource is busy?</A>
<LI><A HREF="linux_debian_faq.html#P6Q2">При добавлении нового пользователя в систему командой
adduser возникла проблема - почему-то скопировалась
только одна первая строка из файлов, которые лежат в
/etc/skel, а вообще-то файлы должны были скопироваться
полностью! В чем дело?</A>
<LI><A HREF="linux_debian_faq.html#P6Q3">Почему, когда groff форматирует текст с ключем -Tlatin1
вместо символов переноса ("-") видны какие-то прямоугольники?
Как сделать, чтобы все было нормально?</A>
<LI><IMG SRC="http://www.linux.org.ru/images/mod.jpg"><A HREF="linux_debian_faq.html#P6Q4">А почему у меня системное время какое-то левое? Разница с тем, что
должно быть составляет 5 часов. Время на часах в CMOS'е нормальное.В чем дело?</A>
</OL>	 

<HR>      	 
<A NAME="P1Q1"><H3>Что такое Debian?</H3></A>
Debian это один из дистрибутивов  Linux (UNIX  подобной  сетевой
операционной системы).
<HR>
<A NAME="P1Q2"><H3>Чем отличается Debian от других дистрибутивов Linux?</H3></A>
Форматом пакетов и программой которая обслуживает данные пакеты,
процедурой  инсталляции. Кроме  того  есть отличия и в структуре
каталогов, и в месте расположения конфигурационных файлов. Кроме
того  в  Debian'е  сделана  попытка  подогнать все под UNIX'овый 
стандарт System V.
<P>
Самое   мощное  отличие -  это   конечно   пакеты. Теперь  в них 
включается  контрольная  информация зависимости одних пакетов от
других, комментарии  к  пакету,  информация  о  сервисе, который
предоставляет пакет. Кроме  того  в пакете имеются сценарии, что
позволяют произвести настройку пакета сразу  после  установки  и
кроме того произвести обновление старой версии пакета  на  новую
при сохранении конфигурационных файлов.
<P>
В Debian 2.0 появилась новая команда для работы с пакетами. Теперь
вы можете снять уже поставленный пакет. Это значит, что вы можете
из установленных файлов пакета снова сделать .deb пакет.
<HR>
<A NAME="P1Q3"><H3>Какими способами можно установить Debian?</H3></A>
<NL>
<LH>Несколькими способами
<LI>с загрузочного CD ROM
<LI>с CD ROM с помощью дискет
<LI>с одного из разделов жесткого диска
<LI>по FTP
<LI>по сети
</NL>
<P>
В Debian 2.0 появилась новая утилита <I>dpkg-http</B> которая позволяет
ставить пакеты через HTTP.
<HR>
<A NAME="P1Q4"><H3>Какая версия Debian'а на сегодня самая свежая?</H3></A>
24 июля был официально выпущен Debian 2.0, который имеет название Hamm. 
Хотя версия считается стабильной, дальнейшая работа по выявлению и
устранению ошибок продолжается.
<P>
По моим впечатлениям дистрибуция Debian 2.0 продумана хуже, чем у Debian 1.3.1:
недоложены многие нужные пакеты, уже есть сообщения о багах в процедуре
инсталляции дистрибутива.
<HR>
<A NAME="P1Q5"><H3>Как мне сделать собственный .deb пакет?</H3></A>
Я рассмотрю здесь простой способ, основанный на ручной сборке пакета, без
использования специфических утилит типа deb-make и других.
<P>
Для начала, вы должны иметь, то что вам нужно установить с помощью собираемого
вами пакета. Путь это будет какая-либо утилита, расширяющие возможности 
системы. (С тем же успехом - это могут быть дополнительные файлы шрифтов или еще
что-нибудь). Пусть эта утилита назвается <B><I>probe</I></B>. Положим, что к 
этой утилите вы написали страничку руководства man с названием <B><I>probe.1
</I></B> и кроме того положим, что есть какой-либо файл, где разобран пример
работы с данной утилитой с именем <B><I>example</I></B>. Путь файл с примером
и страничка руководства называются <I>сопровождающими</I> файлами.
<P>
Важно, чтобы вы представляли, где должна быть размещена эта утилита и 
сопровождающие ее файлы. Обычно исполняемые файлы размещают в <I>/usr/bin</I>.
Странички руководства man размещают в <I>/usr/man/man.1</I>, а всякие примеры
в <I>/usr/lib/&lt;имя утилиты&gt;</I>. Пусть так будет и в нашем случае.
<P>
Итак, выполняем следующие шаги:
<OL>
<LI>Создаем временный каталог с именем <B>DEB</B>
<LI>Создаем в этом каталоге подкаталоги, в которые нужно поместить утилиту и
сопровождающие файлы. При этом каталоги создаются так, как будто <B>DEB</B>
является корневым каталогом. Таким образом, в нашем случае, файлы должны быть
размещены следующим образом:
<PRE>
    DEB/usr/bin/probe
    DEB/usr/man/man1/probe.1
    DEB/usr/lib/probe/example
</PRE>
<LI>Создаем в каталоге <B>DEB</B> служебный каталог с именем <B><I>DEBIAN</I></B>
<LI>В этом каталоге создаем обязательный файл <B><I>control</B></I> и
по вашему желанию также могут быть добавлены файлы <B><I>preinst, postinst,
prerm, postrm</B></I> и <B><I>conffiles</B></I>. Вот для чего они нужны:
<P>
<TABLE BORDER=1>
<TR><TD>control<TD>Служебная информация о пакете
<TR><TD>conffiles<TD>Список конфигурационных файлов
<TR><TD>preinst<TD>Скрипт, выполнеяемый перед началом устновки пакета
<TR><TD>postinst<TD>Скрипт, выполняемый после установки пакета
<TR><TD>prerm<TD>Скрипт, выполняемый перед удалением пакета
<TR><TD>postrm<TD>Скрипт, выполняемый после удаления пакета
</TABLE>
<P>
Нелишним будет напомнить, что скрипты должны иметь права на выполнение,
иначе ничего выполняется у вас не будет.
<LI>Теперь заполняем файл <B><I>control</I></B> служебной информацией. Эту
информацию впоследствии будет использовать менеджер пакетов dpkg и программа
dselect. Инофрмацию можно занести в любом текстовом редакторе. Для нашего
случая я привожу уже готовый файл:
<PRE>
    Package: probe
    Version: 1.0
    Architecture: i386
    Maintainer: Ivan Ivanov &lt;ivan@perm.ru&gt;
    Description: My probe utility
     This is my utility
</PRE>
Теперь поясним, что к чему. Слова с двоеточиями являются служебными и выполняют
закрепленные за ними функции. Здесь даны далеко не все возможные слова - 
остальные найдете на страничке руководства man с названием <B>deb-control(5)</B>.
За словом <B>Package:</B> должно идти имя пакета. В этом имени не должно быть
заглавных букв или небуквенных символов типа "!", "?" и т.д. За словом
<B>Version:</B> должен идти номер версии. За словом <B>Architecture:</B>
архитектура машины для которой собирается пакет. Для платформы Intel это i386.
За словом <B>Maintainer:</B> должно следовать имя автора пакета, с 
необязательным адресом электронной почты (в нашем случае ivan@perm.ru). За
словом <B>Description:</B> должно следовать краткое, или полное описание
пакета (можно использовать русские буквы, но тогда в dselect'е вы будете
иметь проблемы). Краткое описание следует непосредственно за словом. Полное
описание начинается со следующей строки. <B>Обратите внимание:</B> перед
фразой <I>This is my utility</I> стоит пробел. Он указывает, что данная
фраза является продолжением описания. Если его не поставить, то при сборке
пакета вы получите сообщение об ошибке.
<LI>Создайте и заполните остальные файлы, указанные в таблице, если ВАШЕМУ
пакету это нужно (в данном случае они не нужны).
<LI>Выйдите из каталога <B>DEB</I>
<LI>Для генерации .deb пакета наберите команду <B>dpkg -b &lt;имя каталога&gt;
&lt;имя пакета .deb&gt</B>. В нашем случае эта команда будет выглядеть так:
<PRE>
    dpkg -b DEB probe-1.0.deb
</PRE>
Если вы правильно выполнили все описанные выше инструкции, то вы получите
файл <B><I>probe-1.0.deb</I></B>, который вы можете теперь установить
через команду <B>dpkg -i probe-1.0.deb</B>.
</OL>
<P>
Не правда ли все это довольно просто. Вы можете пойти дальше, создав свое
собственное дополнение к стандартному дистрибутиву в стиле Debian и подключать
его через каталог <B>local</B> в программе dselect. Однако создание такого
дополнения, с генерацией файла <B>Packages</B> будет посложнее. По этому я
настоятельно рекомендую вам почитать страницы руководства man с названиями:
<B>dpkg(8), dpkg-deb(1), deb-control(5) и dpkg-scanpackages(8)</B>.



<HR>
<A NAME="P2Q1"><H3>Что нужно сделать,  чтобы в текстовом режиме можно было читать и
писать по-русски?</H3></A>
Для этого вы  должны  получить  права  суперпользователя (root),
либо  зарегистрировавшись  в  системе  как root,  либо  выполнив
команду su.
<P>
Вашему вниманию предлагается  маленький сценарий, который должен
быть помещен в /etc/init.d под именем russian и который является
необходимой частью русификации текстового режима:
<PRE>
#--------------------------------------------------------------------------
#                                 russian
#--------------------------------------------------------------------------

# Set leds and META for terminals
for t in 1 2 3 4
do
   setleds -num </dev/tty$t >/dev/null
done

# Load russian fonts
echo -e "			\033[1;34;47m      Loading Russian Font      \033[36;40m"
setfont Cyr_a8x16 >/dev/null 2>/dev/null

# Load russian keys
echo -e "			\033[1;37;44m      Loading Russian Keys      \033[36;40m"
loadkeys ru1.map >/dev/null 2>/dev/null

# Map screen 
echo -e "			\033[1;33;41m      Loading  Map  Screen      \033[36;40m"
mapscrn koi2alt > /dev/null 2>/dev/null

# Enable mapping on tty
for t in 1 2 3 4
do
   echo -e "\033(K" >/dev/tty$t
   echo -e "			\033[0;30;42m  Enable mapping on \033[0;31;42m /dev/tty$t  \033[0;36;40m"
done
#-------------------------------end of file---------------------------------
</PRE>
<B>Не могу не упомянуть ценное замечание Максима Лобашова.</B>
Оно заключается в том, что данный выше сценарий расчитан на
русификацию только первых четрых консолей. Однако обычно при
установке дистрибутива устанавливается шесть консолей. И таким
образом две оставшиеся русифицированны не будут. Однако это можно
легко поправить - добавте цифры в строке с <B><I>for</B></I> например
так:
<PRE>
        for t in 1 2 3 4 5 6
</PRE>
и проблемы решаться.
<P>
После установки сценария вы должны сделать ссылки на этот файл из каталогов,
содержащих  сценарии, выполняемые  при  установке уровня запуска
(run level)  системы  командой  init. Это  каталоги  /etc/rc*.d.
Многопользовательскому   режиму   работы  системы  соответствует
каталог /etc/rc2.d. Когда вы переместитесь туда, то увидите, что
в нем уже есть множество  ссылок, каждая  из  которых имеет имя,
начинающееся с  буквы ``S'', за  которой  следует  цифра. Ссылки
указывают на исполняемые файлы в каталоге /etc/init.d. Вам нужно
создать  ссылку  на  /etc/init.d/russian, при  этом  для  нашего 
случая нужно выбрать номер после ``S'', который бы был постарше.
У меня например это 88 (файлы выполняются по старшинству - более
малые номера выполняются раньше). Итак делаем ссылку, находясь в
каталоге /etc/rc2.d:
<PRE>
         ln -sf /etc/init.d/russian S88russian
</PRE>
Чтобы этот сценарий выполнился  вам  нужно  перегрузить  машину,
или перезапустить систему в многопользовательском режиме. Однако
не торопитесь. Сперва  создайте  у себя в домашнем каталоге файл 
.inputrc  (я  рассматриваю  случай,  когда  в  качестве  shell'а 
используется bash - обычно он и устанавливается по умолчанию при
инсталляции системы) который я привожу ниже:
<PRE>
		set meta-flag On
		set convert-meta Off
		set output-meta On
		"\e[1~": beginning-of-line
		"\e[3~": delete-char
		"\e[4~": end-of-line
		"\e[C": forward-char
		"\e[D": backward-char
		"\e[A": previous-history
		"\e[B": next-history
</PRE>
благодаря  этому  файлу  вы  сможете  набирать в shell'е русские
буквы,  в  противном  случае  вместо них  будет писк в динамике.
Если в системе  уже  существует  несколько  пользоватлей, то  не
забудьте поместить  этот  файл в  их домашние каталоги и сделать
его доступным для чтения этим пользователям. Кроме того я  очень
рекомендую поместить данный файл в каталог /etc/skel, тогда  при
создании новых пользователей  он  будет помещен к ним в домашние
директории автоматически.
<P>
Далее  переместитесь  в  директорию  /etc  и  найдите  там  файл 
profile. Это файл, который  выполняется  при  регистрации любого
пользователя в системе. Загрузите любой редактор (мне, например,
очень нравится joe) и добавте в этот файл следующие строки:
<PRE>
      export LANG=ru_RU
      export PAGER=less
      export LESSCHARSET=koi8-r
</PRE>
Переменная LANG говорит системе о  региональных  установках (это
работает пока криво, но лучше так, чем никак). Переменная  PAGER
определяет программу, которая будет  показывать  вам  текст  при
вызове man (по умолчанию устновлено more).less более мощная программа,
озволяющая  использовать  для  перемещения  по  тексту
стрелки, клавиши PgUp, PgDn, а также поиск  образца в  тексте  и
т.д. Переменная LESSCHARSET нужна  программе less  для  корректного
вывода русских букв в кодировке KOI-8.
<P>
Теперь  вы  можете  перегрузить машину или перезапустить систему
в многопользовательском режиме.
<OL>
<LH>Перегрузить машину можно тремя способами:
<LI>нажать клавиши Ctrl-Alt-Del (на некоторых машинах не работает)
<LI>ввести команду reboot
<LI>ввести команду  shutdown -g0 и после сообщения "System halted"
нажать reset (самый правильный способ).
</OL>
Перезапустить  систему  в многопользовательском режиме можно
введя команду 
<PRE>
       init S
</PRE>       
которая перегрузит систему в однопользовательский режим, и после
выдачи сообщения
<PRE>
       Give root password for maintenance
       (or type Control-D for normal startup):
</PRE>       
нужно нажать Ctrl-D,  что  приведет  к загрузке системы в 
многопользовательском режиме.
<P>
После перезагрузки,до выдачи приглашения к регистрации в системе
(login)  вы  должны  увидеть  изображение  российского  флага на 
каждом из  цветов которого будет запись о загрузке определенного
сервиса. Если этого не будет, то  посмотрите  внимательно все ли
вы сделали как было указано выше. Если изображение появилось, то
после регистрации в системе при нажатии на правый Alt вы сможете
вводить русские буквы.
<HR>
<A NAME="P2Q2"><H3>Как сделать так, чтобы в моем mc (Midnight Commander) были видны
русские  буквы  и чтобы я мог их там набирать, а то лезет всякая
ерунда?</H3></A>
Сначала нужно включить работу с восьмью битами.Для этого нажмите 
F9  затем  выберите  Option, далее Display bits и наконец Full 8 
bit. Не забудте потом сохранить  эту  конфигурацию. Далее  нужно
выйти из mc и запустить  его  снова с  параметром  -m.  Если  не
работает, то значит у вас криво собранный  mc. Далее, чтобы  вам
каждый раз не маятся с указанием параметра введите:
<PRE>
         alias mc="mc -m"
</PRE>
Данную строчку можно потом поместить  в файл .profile в домашнем
каталоге или в /etc/profile.
<P>   
Замечу однако, что  для просмотра файлов с русским текстом, имеющих
в качестве расширения цифры или ``.man'' этого мало. Вместо
русского текста в  таких  случаях  вы  можете увидеть мусор. Это
связано   с  тем,  что  такие  файлы  трактуются  mc  как файлы, 
содержащие  гипертекст,  на  языке  groff. Для  просмотра  таких
файлов mc  вызывает  форматер  текста  с  этого  языка: nroff, с
параметром -Tascii. Наша  с  вами беда состоит в том, что в этом
ascii русских букв нет. Нужно сделать следующее. Переместиться в
каталог /etc/mc и в файле mc.ext  с  помощью  редактора заменить
все строки -Tascii на -Tlatin1.
<P>   
В заключении скажу, что  Midnight Commander версии старше  4.0
не поддерживает опцию -m, а поддержка русского языка  включается
Options->Display bits->Full 8 bit + 8 bit input. Кроме того 
недавно вышла версия 4.1.35, которая имеет русифицированные меню
и диалоги.
<HR>
<A NAME="P2Q3"><H3>Как  получить  возможность  вводить  и  читать  русские  буквы в 
X Window?</H3></A>
Перво наперво, когда будете пользоваться  программой  XF86Setup,
где вам предложат установить русскую клавиатуру,не обольщайтесь,
это рассчитано на оптимистов. Конечно, есть специалисты, которые
довели до  ума  и  этот вариант, но они использовали самодельные
прилады и таблицы, которых  в  стандартном  дистрибутиве  просто 
нет. То что там есть, увы не работает. По этому я предлагаю  вам
старый добрый вариант проверенный на X Window  версий 3.1, 3.2 и
3.3. Естественно русификацией нужно заниматься после того как вы
настроите запуск X Window  и  нужные  видеорежимы, а также после
установки русских шрифтов (пакет fntcyr) и устанвки и  настройки
какого-нибудь менеджера окон (например fvwm). Итак  правим  файл
/etc/X11/XF86Config (вы  будете  смеятся, но  я обнаружил, что в 
Debian'е 1.2.7 от Mo'Linux этот файл  ни  что иное как .bak файл
нужного нам XF86Config, который находился в /usr/X11R6/lib/X11).
Убедитесь, что один из FontPath указывает на каталог с  русскими
шрифтами (обычно это /usr/X11R6/lib/X11/fonts/cyrillic). Далее в
секции  Keyboard  закоментарьте   все   строки,  где   параметры 
начинанаются с ``Xkb''. После всех этих строк напишите:
<PRE>
        XkbDisable
</PRE>
Затем в каталоге /etc/X11 поправте файл  Xmodmap. Он  пустой, но
вы должны наполнить его следующими строками:
<PRE>
keycode 0x71 = Mode_switch
keysym  0x71 = Alt_R
keycode 78 = Scroll_Lock
add mod3 = Mode_switch
add mod3 = Scroll_Lock
keycode 22 = BackSpace
keycode 107 = Delete

  keysym  4             = 4               dollar          4       quotedbl
  keysym  5             = 5               percent         5       colon
  keysym  6             = 6               asciicircum     6       comma
  keysym  7             = 7               ampersand       7       period
  keysym  q             = q               Q               0xCA    0xEA
  keysym  w             = w               W               0xC3    0xE3
  keysym  e             = e               E               0xD5    0xF5
  keysym  r             = r               R               0xCB    0xEB
  keysym  t             = t               T               0xC5    0xE5
  keysym  y             = y               Y               0xCE    0xEE
  keysym  u             = u               U               0xC7    0xE7
  keysym  i             = i               I               0xDB    0xFB
  keysym  o             = o               O               0xDD    0xFD
  keysym  p             = p               P               0xDA    0xFA
  keysym  bracketleft   = bracketleft     braceleft       0xC8    0xE8
  keysym  bracketright  = bracketright    braceright      0xDF    0xFF
  keysym  a             = a               A               0xC6    0xE6
  keysym  s             = s               S               0xD9    0xF9
  keysym  d             = d               D               0xD7    0xF7
  keysym  f             = f               F               0xC1    0xE1
  keysym  g             = g               G               0xD0    0xF0
  keysym  h             = h               H               0xD2    0xF2
  keysym  j             = j               J               0xCF    0xEF
  keysym  k             = k               K               0xCC    0xEC
  keysym  l             = l               L               0xC4    0xE4
  keysym  semicolon     = semicolon       colon           0xD6    0xF6
  keysym  apostrophe    = apostrophe      quotedbl        0xDC    0xFC
  keysym  grave         = grave           asciitilde      0xA3    0xB3
  keysym  z             = z               Z               0xD1    0xF1
  keysym  x             = x               X               0xDE    0xFE
  keysym  c             = c               C               0xD3    0xF3
  keysym  v             = v               V               0xCD    0xED
  keysym  b             = b               B               0xC9    0xE9
  keysym  n             = n               N               0xD4    0xF4
  keysym  m             = m               M               0xD8    0xF8
  keysym  comma         = comma           less            0xC2    0xE2
  keysym  period        = period          greater         0xC0    0xE0
</PRE>
Теперь для правильного понимания в X Window клавиши Del поправте
файл Xresources в этом же каталоге. Закоментарьте там все. Ну  а
теперь  можно запускать X Window вашим любимым  способом.  Чтобы
проверить, что получилось запустите Xterm или Rxvt с  параметром
-fn <полное_имя_русского_шрифта> (В полном имени не должно  быть
никаких  ``*'', все  должно  быть  задано.  См. файл font.dir  в
каталоге /usr/X11R6/lib/X11/fonts/cyrillic). После того как окно
появится введите  для  пробы  несколько английских букв, а затем
нажмите   Scroll  Lock (должна  загорется  лампочка)  и  вводите 
русские буквы. Если ничего не вводится значит вы плохо выполнили
инструкции по XkbDisable.  Если  вместо  русских  букв выводятся
греческие значит вы задали неправильный  шрифт  для  терминала в
параметре -fn.
<P>
<B>Хочу отдельно повесилится над Debian 2.0</B>. В нем вы можете
заставить работать Xkb без особого труда: в XF86Setup нужно поставить
русскую клавиатуру и выбрать переключатель. Затем нужно совместить
значения переменной окружения LANG с значением ru_RU.KOI8-R в файле
/usr/X11/lib/X11/locale/locale.alias и вы получите возможность
работать с русскими буквами. Однако самое смешное, что эти русские
буквы будут вводится у вас только в xterm или rxvt, а в остальных
программах вы не сможете их ввести (проверенно в Netscape, gzilla
и некоторых других). Я даже представить себе не могу какими
соображениями руководствовались разработчики Debian'а, когда
делали нам такой "подарок". Вывод из сказанного один - пользуйтесь
Xmodmap, как описано выще, а Xkb давайте только одну команду:
Xkbdisable.
<HR>
<A NAME="P2Q4"><H3>Как заставить писать по русски мой любимый редактор joe?</H3></A>
В директорию /etc/joe положить файлы из архива 
<A HREF="http://www.linux.org.ru/books/joe28rus.tar.gz">joe28rus.tar.gz</A> (имейте ввиду, что
все это делалось для joe версии 2.8).
<P>
В этом архиве дан русифицированный файл ресурсов и база termcap,
которую  joe  использует  при  работе  с  терминалом. База  была
настроена на два типа терминалов: linux - для корректной  работы
в текстовом режиме и xterm - для  корректной  работы  через rxvt
(эмулятор терминала в X Window).
<P>
В  файл  ресурсов  добавлены такие устновки фукциональных клавиш
как:
<PRE>
        F1 - Помощь
	F2 - Записать
	F3 - Открыть
	F7 - Искать
	F6 - Искать следующий
	F10 - Выход с записью
</PRE>   
Формат директив там простой,по этому если чего еще сами захотите
сделать - разберетесь.
<HR>
<A NAME="P2Q5"><H3>Захотел  прочитать  текстовый  файл  на русском языке, который я 
сделал в DOS'е, а  там  русских  букв  нет, вместо них почему-то 
псевдографика.  Каким образом можно прочитать текстовые файлы из
DOS'а?</H3></A>
В операционной системе DOS используется альтернативная кодировка
русских букв. В  UNIX'ах и в Linux используется кодировка KOI-8.
Для  того  чтобы работать с тектовыми файлами на русском языке в
Linux можно либо настроить Linux так, чтобы он работал в альтернативной
кодировке  как  DOS, а  можно  перекодировать  файл  из альтернативной
кодировки в KOI-8.
<P>   
Первый  способ  я рассматривать не буду, поскольку обычно так не
принято в кругу людей, работающих в  UNIX'ах - это  дурной  тон,
хотя возможно кое-кто со мной и не согласится.
<P>   
Что касается второго  способа, то  предлагаю вашему вниманию два
перекодировщика, написанные на shell'е с использованием стандартных
команд системы. Автор этих перекодировщиков мне не известен
<H4>файл altkoi8</H4>
<PRE>
#!/bin/sh
# -----------------------------------------------------------------
#  altkoi8 - перекодировщик из альтернативной кодировки в KOI-8
# -----------------------------------------------------------------
tr \
'\240''\241''\242''\243''\244''\245''\246''\247''\250'\
'\251''\252''\253''\254''\255''\256''\257''\340''\341'\
'\342''\343''\344''\345''\346''\347''\350''\351''\352'\
'\353''\354''\355''\356''\357''\200''\201''\202''\203'\
'\204''\205''\206''\207''\210''\211''\212''\213''\214'\
'\215''\216''\217''\220''\221''\222''\223''\224''\225'\
'\226''\227''\230''\231''\232''\233''\234''\235''\236''\237''\304' \
'\301''\302''\327''\307''\304''\305''\326''\332''\311'\
'\312''\313''\314''\315''\316''\317''\320''\322''\323'\
'\324''\325''\306''\310''\303''\336''\333''\335''\337'\
'\331''\330''\334''\300''\321''\341''\342''\367''\347'\
'\344''\345''\366''\372''\351''\352''\353''\354''\355'\
'\356''\357''\360''\362''\363''\364''\365''\346''\350'\
'\343''\376''\373''\375''\377''\371''\370''\374''\340''\361''_'  |
tr -d '\r' #вот эта фигня предназначена исключительно для того,
	   #чтобы полностью подогнать формат доса к unix - это
	   #аналог флага -t в команде mcopy,mwrite,mread.
</PRE>	   
<H4>файл koi8alt</H4>
<PRE>
#!/bin/sh
# -----------------------------------------------------------------
#  koi8alt - перекодировщик из KOI-8 в альтенативную кодировку
# -----------------------------------------------------------------
tr \
'\301''\302''\327''\307''\304''\305''\326''\332''\311''\312''\313'\
'\314''\315''\316''\317''\320''\322''\323''\324''\325''\306''\310'\
'\303''\336''\333''\335''\337''\331''\330''\334''\300''\321''\341'\
'\342''\367''\347''\344''\345''\366''\372''\351''\352''\353''\354'\
'\355''\356''\357''\360''\362''\363''\364''\365''\346''\350''\343'\
'\376''\373''\375''\377''\371''\370''\374''\340''\361'  \
'\240''\241''\242''\243''\244''\245''\246''\247''\250''\251''\252'\
'\253''\254''\255''\256''\257''\340''\341''\342''\343''\344''\345'\
'\346''\347''\350''\351''\352''\353''\354''\355''\356''\357''\200'\
'\201''\202''\203''\204''\205''\206''\207''\210''\211''\212''\213'\
'\214''\215''\216''\217''\220''\221''\222''\223''\224''\225''\226'\
'\227''\230''\231''\232''\233''\234''\235''\236''\237'  |
sed -e s/$// #подстановка cr в конец строки для глупого позорного
	       #msdos - сильно замедляет работу программы, но ничего
	       #другого с ходу не придумал. осторожнее с символом
	       #  - нет у меня толкового описания sed - приходится так.
	       #еще раз - у меня red показывает курсор со звездой внутри и
	       #букву M
</PRE>
Сразу  оговорюсь. В  настоящее время имеются 2 или 3 "стандарта"
KOI-8. Расположение русских букв в них совпадает, но  отличается
расположение символов псевдографики. Так  что  если  у  вас  при
перекодировке возникнут проблемы с псевдографикой, то...
<P>
Видя живой интерес начинающих к перекодировщикам я помещаю здесь
еще два: из Win1251 в Koi8-r и обратно, написанных на Perl
<H4>файл win2koi8</H4>
<PRE>
#!/usr/bin/perl -p

tr/\0\1\2\3\4\5\6\7\10\11\12\13\14\15\16\17\20\21\22\23\24\25\26\27\30\31\32\33\34\35\36\37\40\41\42\43\44\45\46\47\50\51\52\53\54\55\56\57\60\61\62\63\64\65\66\67\70\71\72\73\74\75\76\77\100\101\102\103\104\105\106\107\110\111\112\113\114\115\116\117\120\121\122\123\124\125\126\127\130\131\132\133\134\135\136\137\140\141\142\143\144\145\146\147\150\151\152\153\154\155\156\157\160\161\162\163\164\165\166\167\170\171\172\173\174\175\176\177\200\201\202\203\204\205\206\207\210\211\212\213\214\215\216\217\220\221\222\223\224\225\226\227\230\231\232\233\234\235\236\237\240\241\242\243\244\245\246\247\250\251\252\253\254\255\256\257\260\261\262\263\264\265\266\267\270\271\272\273\274\275\276\277\300\301\302\303\304\305\306\307\310\311\312\313\314\315\316\317\320\321\322\323\324\325\326\327\330\331\332\333\334\335\336\337\340\341\342\343\344\345\346\347\350\351\352\353\354\355\356\357\360\361\362\363\364\365\366\367\370\371\372\373\374\375\376\377/\0\1\2\3\4\5\6\7\10\11\12\13\14\15\16\17\20\21\22\23\24\25\26\27\30\31\32\33\34\35\36\37\40\41\42\43\44\45\46\47\50\51\52\53\54\55\56\57\60\61\62\63\64\65\66\67\70\71\72\73\74\75\76\77\100\101\102\103\104\105\106\107\110\111\112\113\114\115\116\117\120\121\122\123\124\125\126\127\130\131\132\133\134\135\136\137\140\141\142\143\144\145\146\147\150\151\152\153\154\155\156\157\160\161\162\163\164\165\166\167\170\171\172\173\174\175\176\177\200\201\202\203\204\205\206\207\210\211\212\213\214\215\216\217\220\221\222\223\224\225\226\227\230\231\232\233\234\235\236\237\240\241\242\243\244\245\246\247\250\251\252\253\254\255\256\257\260\261\262\263\264\265\266\267\270\271\272\273\274\275\276\277\341\342\367\347\344\345\366\372\351\352\353\354\355\356\357\360\362\363\364\365\346\350\343\376\373\375\377\371\370\374\340\361\301\302\327\307\304\305\326\332\311\312\313\314\315\316\317\320\322\323\324\325\306\310\303\336\333\335\337\331\330\334\300\321/;

</PRE>	   
<H4>файл koi8win</H4>
<PRE>
#!/usr/bin/perl -p

tr/\0\1\2\3\4\5\6\7\10\11\12\13\14\15\16\17\20\21\22\23\24\25\26\27\30\31\32\33\34\35\36\37\40\41\42\43\44\45\46\47\50\51\52\53\54\55\56\57\60\61\62\63\64\65\66\67\70\71\72\73\74\75\76\77\100\101\102\103\104\105\106\107\110\111\112\113\114\115\116\117\120\121\122\123\124\125\126\127\130\131\132\133\134\135\136\137\140\141\142\143\144\145\146\147\150\151\152\153\154\155\156\157\160\161\162\163\164\165\166\167\170\171\172\173\174\175\176\177\200\201\202\203\204\205\206\207\210\211\212\213\214\215\216\217\220\221\222\223\224\225\226\227\230\231\232\233\234\235\236\237\240\241\242\243\244\245\246\247\250\251\252\253\254\255\256\257\260\261\262\263\264\265\266\267\270\271\272\273\274\275\276\277\341\342\367\347\344\345\366\372\351\352\353\354\355\356\357\360\362\363\364\365\346\350\343\376\373\375\377\371\370\374\340\361\301\302\327\307\304\305\326\332\311\312\313\314\315\316\317\320\322\323\324\325\306\310\303\336\333\335\337\331\330\334\300\321/\0\1\2\3\4\5\6\7\10\11\12\13\14\15\16\17\20\21\22\23\24\25\26\27\30\31\32\33\34\35\36\37\40\41\42\43\44\45\46\47\50\51\52\53\54\55\56\57\60\61\62\63\64\65\66\67\70\71\72\73\74\75\76\77\100\101\102\103\104\105\106\107\110\111\112\113\114\115\116\117\120\121\122\123\124\125\126\127\130\131\132\133\134\135\136\137\140\141\142\143\144\145\146\147\150\151\152\153\154\155\156\157\160\161\162\163\164\165\166\167\170\171\172\173\174\175\176\177\200\201\202\203\204\205\206\207\210\211\212\213\214\215\216\217\220\221\222\223\224\225\226\227\230\231\232\233\234\235\236\237\240\241\242\243\244\245\246\247\250\251\252\253\254\255\256\257\260\261\262\263\264\265\266\267\270\271\272\273\274\275\276\277\300\301\302\303\304\305\306\307\310\311\312\313\314\315\316\317\320\321\322\323\324\325\326\327\330\331\332\333\334\335\336\337\340\341\342\343\344\345\346\347\350\351\352\353\354\355\356\357\360\361\362\363\364\365\366\367\370\371\372\373\374\375\376\377/;
</PRE>
<HR>
<A NAME="P2Q6"><H3>Почему у меня программа для работы с электронной почтой elm говорит
Unknown charset, когда я пишу письма на русском языке? Как с этим бороться?
</H3></A>
Дело опять таки в русификации.
<OL>
<LH>Известный мне способ это победить таков:
<LI>в домашнем каталоге создается каталог .elm
<LI>в этом каталоге создается файл elmrc
<LI>в этот файл прописывается строчка
<PRE>
         CHARSET=koi8-r
</PRE>
</OL>
<HR>
<A NAME="P2Q7"><H3>Как заставить Netscape Navigator показывать русские буквы в
кодировках KOI-8 и CP1251?</H3></A>
<P>
Этот вопрос неизменно занимает сегодня умы многих начинающих. Несмотря на
некоторое количество достаточно древних решений этот вопрос поднимается снова
и снова. Ответ на него таков: на данный момент русифицировать Netscape Navigator
<I>корректно</I> невозможно. Однако есть несколько хитрых приемов, которые хотя и не
являются 100% корректными, но тем не менее позволяют вам добится тех целей,
которые ставит перед нами данный выше вопрос. Что же касается <I>корректной</I>
русификации, то будем надеятся, что в скором времени она появится благодаря
тому, что Netscape начинает распостранять свои исходники бесплатно. Однако
владельцам старых версий все равно придется жить по старому.
<P>
Начнем с кодировки KOI-8. Здесь особых проблем быть не должно. В дистрибутив
входят кирилистрические (русские) шрифты для X Windows, которые вам нужно
установить перед тем как мы продолжим. Пакет с этими шрифтами называется
в Debian 1.3 <B>xfntcyr_3.3-3.deb</B> и находится в секции <B>x11</B>.
Естественно, что версия пакета может отличаться от приведенной мной.
<P>
Итак, установите данный пакет командой
<PRE>
	dpkg -i xfntcyr_3.3-3.deb
</PRE>
После чего поправте файл <B>/etc/X11/XF86Config</B>. В этом файле вам нужно
найти слова <B>Section "Files"</B> и в этой секции добавить строчку вида
<PRE>
	FontPath  "/usr/X11R6/lib/X11/fonts/cyrillic"
</PRE>
Это нужно, чтобы X Windows "увидела" ваши свежеустановленные шрифты. Затем,
вам нужно перезапустить X Windows если вы уже находитесь там и запустить
X Windows, в противном случае. Это нужно для того, чтобы X Windows
при запуске перечитала файл конфигурации <B>/etc/X11/XF86Config</B> куда
вы внесли изменения.
<P>
Теперь, когда запуск X Windows произошел, вы можете запустить Netscape
Navigator. Зайдите в меню <B>Options</B>, затем <B>General Preferences</B>
и наконец в <B>Fonts</B>. Выберите среди доступных кодировок 
<B>Cyrillic(koi8-r)</B>, а затем установите для ее отображения какие-нибудь
<B>cronyx</B> шрифты: рекомендую Helvetica и Courier.
<P>
Далее выйдите из меню настроек и зайдите в <B>Options</B> в подменю
<B>Document Encoding</B>. В этом подменю выберите <B>Cyrillic(KOI8-R)</B>.
Теперь Netscape Navigator должен показывать вам русские буквы на страничках
в кодировке KOI-8. Но здесь есть некоторые <A HREF="linux_debian_faq.html#ZAM">замечания</A>, о
которых читайте ниже.
<P>
С кодировкой CP1251 будет посложнее. Во-первых, в дистрибутивах шрифты для
X Windows в этой кодировке просто отсутствуют и вам их потребуется где-то
достать. Правда для вас я подготовил Debian'овский пакет с этими шрифтам
и вы можете его взять прямо отсюда, если нажмете на
<A HREF="http://www.linux.org.ru/books/xfnt1251_1.1-1.deb">xfnt1251_1.1-1.deb</A>.
<P>
Если по какой-то причине вам не понравятся эти шрифты или этот пакет, то
ищите их в Internet'е.
<P>
Далее вы проделываете те же манипуляции с установкой пакета, правкой файла
<B>/etc/X11/XF86Config</B> и перезапуском (или запуском) X Windows как и
для случая с кодировкой KOI-8. Так же как и в случае с KOI-8 вы должны
затем запустить Netscape Navigator, зайдити в меню <B>Options</B>, затем
<B>General Preferences</B> и наконец в <B>Fonts</B>. Но вот здесь начинаются
различия. Среди доступных кодировок вам нужно выбрать <B>User defined</B>,
так как создатели Netscape Navigator не предусмотрели в меню наличия 
кодировки CP1251. Для кодировки <B>User defined</B> (при условии установки
пакета xfnt1251_1.1-1.deb) выберите какие-либо <B>iccm</B> шрифты.
<P>
Далее выйдите из меню настроек и зайдите в <B>Options</B> в подменю
<B>Document Encoding</B>. В этом подменю выберите <B>User defined</B>.
Теперь Netscape Navigator должен показывать вам русские буквы на страничках
в кодировке CP1251. Но здесь есть некоторые <A HREF="linux_debian_faq.html#ZAM">замечания</A>, о
которых читайте ниже.
<P>
Финальной частью установки шрифтов как для KOI-8 так и для CP1251 является
сохранение опций: зайдите в меню <B>Options</B> и выберите <B>Save Options</B>.
Если вы этого не сделаете, то при следующем запуске Netscape Navigator вам
придется задавать шрифты для кодировок и <B>Document Encoding</B> заново.
<P>
<A NAME="ZAM"><B>ЗАМЕЧАНИЯ.</B></A>
<OL>
<LI>Для переключения между кодировками нужно зайти в <B>Options</B> и
подменю <B>Document Encoding</B> и выбрать <B>Cyrillic (KOI8-R)</B> для
кодировки KOI-8 и <B>User defined</B> для кодировки CP1251.
<LI>Не удивляйтесь, если на страничке в тэгах FORM языка HTML (таких
как Button, TextArea и т.д.) вы не увидите русских букв). Виноват
Netscape, но поделать тут вряд ли что-то можно (хотя и здесь есть свои
лазейки).
<LI>В Netscape Navigator версий 3.x были проблемы с Java при включении
кодировки KOI-8 (и вообще любой отличной от кодировки по умолчанию).
<LI>Есть чудаки, которые жестко прописывают charset в тегах html. В
том случае, если charset был установлен в cp1251, вы не сможете посмотреть
эту страничку, несмотря на установленные шрифты в кодировке 1251, поскольку
Netscape автоматически будет переключаться на cp1251, а не на User Defined.
<LI>Данные способы русификации были опробованы на версиях 3.00-4.04,
за остальные я не ручаюсь.
</OL>








<HR>
<A NAME="P3Q1"><H3>А почему, когда я работаю   под X Window в  эмуляторе  терминала
rxvt  мой  mc (Midnight Commander) при нажатии клавиш Home и End
вместо перемещения по  каталогу  выдает  мусор вида 1~ и 4~? Как
сделать, чтобы все было нормально?</H3></A>
Дело в криво скомпиленой базе по настройками терминала terminfo.
Из-за нее mc неправильно воспринимает в  rxvt  нажатые  клавиши.
<OL>
<LH>Известный мне способ правки один:
<LI>создается  временная  директория,  например  /tmp1
<LI>в shell'е (выйти из mc) устанавливается переменная окружения:
<PRE>
        export TERMINFO=/tmp1
</PRE>
<LI>затем  в  эту  созданную директорию кладется файл, полученный из
данного ниже архива <A HREF="http://www.linux.org.ru/books/xterm.tic.gz">xterm.tic.gz</A>(после обработки
вы должны получить файл xterm.tic).
<LI>после этого вы должны запустить компилятор terminfo:
<PRE>
           tic xterm.tic
</PRE>
<LI>если вам выдаст сообщение о многократном использовании
псевдонима vs100, то вы должны переместится в  каталог
/usr/lib/terminfo/v и стереть там файл vs100
<LI>если компиляция завершилась  успешно, то  в директории
появились  каталоги  v и  x. В них лежат файлы vs100 и xterm.
<LI>скопируйте полученные файлы: xterm  в /etc/terminfo/x,
а vs100 в /usr/terminfo/v.
<LI>удалите нашу директорию - она нам больше не нужна.
</OL>
Если все выполнено правильно, то теперь в rxvt все  должно  быть
в порядке.
<HR>
<A NAME="P3Q2"><H3>У  меня  на  первом  винте стоит Linux но есть и второй винт, на 
котором стоит DOS, как мне добится чтобы LILO грузил мне DOS?</H3></A>
Если вы хотите грузить операционную систему с винта отличного от
Master на первом IDE порту, то  вам  необходимо  определить  так
называемый  chain  загрузчик  для  этого винта. Вот пример файла
/etc/lilo.conf, в котором  прописана  загрузка  Linux  с  Master 
винта, а DOS со Slave.
<PRE>
# устройство откуда берется LILO   
boot=/dev/hda
# раздел, где находится главная(корневая) файловай система
root=/dev/hda1
# спецификация compact работает не везде   
compact
# определяет нормальный текстовый режим 80x25
# можно задать слово ask, чтобы при загрузке спрашивало
# номер видеорежима. Можно просто подставить цифру
# видеорежима
vga=normal
# при prompt выдается приглашение boot: и ожидается
# ввод метки для выбора операционной системы на
# загрузку или Enter для загрузки первой по порядку.
# Можно определить delay <n>, где n десятые
# секунды, которые LILO будет ждать, после чего произведет
# загрузку первой по порядку операционной системы.
# Во время ожидания можно нажать Ctrl и перейти в режим
# prompt
prompt
# ------------- секция загрузки Linux -------------
# образ ядра Linux
image=/vmlinuz
# метка, вводимая на приглашение boot:
label=Linux
read-only
# -------------- секция загрузки DOS --------------
# DOS раздел
other=/dev/hdb1
# chain загрузчик
loader=/boot/any_d.b
# метка, вводимая на приглашение boot:
label=dos
# таблица разделов, которая будет отдана DOS
table=/dev/hda
</PRE>   
<HR>
<A NAME="P3Q3"><H3>
Говорят,  что  якобы  можно  грузить  Linux напрямую из DOS'а не 
пользуясь  LILO. Это  действительно  так? Если  да, то  как  это 
сделать?</H3></A>
Действительно вполне можно загружать Linux из DOS'а, хотя  такой
метод и не пользуется популярностью, так как из-за  ненадежности
файловой системы FAT у DOS'а и подверженности ее влиянию вирусов
вы можете испортить файлы, необходимые для загрузки.
<OL>   
<LH>Для загрузки из DOS'а вам понадобятся только два файла:
<LI>программа loadlin.exe из дистрибутива.
<LI>ядро собранное для вашей машины (подойдет и из дистрибутива,
если в ядре есть поддержка аппаратуры, которая  представлена
на вашей машине).
</OL>       
Заметим, что ядро должно быть обработано командой rdev.Например,
если мы имеем образ ядра в файле vmlinuz в  текущем  каталоге, а
ваша корневая файловая система размещена на устройстве /dev/hda1
необходимо выполнить:
<PRE>
         rdev vmlinuz /dev/hda1 
</PRE>	 
чтобы  ядро  после  загрузки знало, где  ваша корневая (главная)
файловая система (/), затем
<PRE>
         rdev -R vmlinuz 1
</PRE>	 
что установит флаг первоначального монтирования файловой системы
как  read-only,  что  необходимо  программе  fsck  для  проверки
файловой системы, затем можно (но не обязательно)
<PRE>
        rdev -v vmlinuz <n>
</PRE>	
для установки текстового видеорежима, отличного от  стандартного
80x25, где n - это номер режима.
<P>   
После  выполнения данных действий положите файл vmlinuz вместе с
loadlin.exe  куда-нибудь  на  диск  DOS. Для  загрузки, в  DOS'е
достаточно  переместится  в  тот  каталог, где находятся эти два
файла и ввести команду:
<PRE>
        loadlin vmlinuz
</PRE>
<HR>
<A NAME="P3Q4"><H3>У  меня стоят три менеждера окон к X Window. Куда  мне прописать
чтобы грузился fvwm95?</H3></A>
В Debian'е  запуск  менеджера  окон  осуществляется на основании
файла /etc/X11/window-managers. Запустится  тот  менеджер  окон,
чей вызов указан первым. У меня например это выглядит так:
<PRE>
	/usr/local/bin/fvwm95
	/usr/bin/X11/twm
</PRE>
при старте X Window запускается fvwm95.
<HR>
<A NAME="P3Q5"><H3>Как  соединятся  с  провайдером для выхода в Internet через модем,
по протоколу PPP?</H3></A>
<P>   
Для  начала, если ядро у вас собрано  без поддержки протоколов PPP
и SLIP вам нужно собрать его заново с  поддержкой этих протоколов.
Как собирать ядро описано в этом же FAQ. См. список вопросов.
<P>   
Еще недавно я бы сказал, что готовой программы нет, но как раз недавно я
нашел таковую. В ней был маленький и досадный глюк, но я его пофиксил. Более
того, специально для дистрибутива Debian я сделал пакет, который вы можете
забрать прямо отсюда и который называется
<A HREF="http://www.linux.org.ru/books/pppsetup-1.43-1.deb">pppsetup-1.43-1.deb</A>. Итак, забирайте
пакет и устанавите его командой
<PRE>
    dpkg -i pppsetup-1.43-1.deb
</PRE>
<P>
После установки пакета запустите команду <B>pppsetup</B> находясь в режиме
суперпользователя root и честно ответьте на все вопросы. После того как программа закончит свою работу вы будете
готовы к соединению со своим провайдером.
<P>
Соединение осуществляется командой <B>ppp-go</B>. В процессе работы эта
программа показывает процесс набора номера и соединения. Если появится
сообщение
<PRE>
    YES! you are connected
</PRE>
то соединение успешно установлено и вы можете запускать ваше любимое
программное обеспечение для работы с Internet, например <B>Netscape</B>.
<P>
Если же вы такого сообщения не получили или получили сообщение
<PRE>
    NO! you are not connected
</PRE>
то соединение у вас не получилось. Почему? Вопрос нетривиальный и ответов
на него может быть довольно много. Поэтому здесь я вам помоч не могу. Если
же вы поборете это сами и поймете в чем дело - не поленитесь отписать мне,
дабы я включил ваше решение сюда в назидание потомкам. Однако в большинстве
случаев проблем не будет.
<P>
Завершение соединения с провайдером осуществляется вызовом команды <B>ppp-off</B>,
которая убивает демон, отвечающий за связь и заставляет его положить "трубку"
модема.
<P>
Как вы уже поняли - это решение далеко не самое красивое. Например, можно
воспользоваться diald - о чем ниже. Однако это очень простое решение,
<H3>Установление соединения при помощи демона diald</B>
<P>
Прежде всего хочу заметить, что данные здесь конфигурационные файлы могут
для вас не подойти, хотя у меня они работают. Все описанное ниже дает скорее
понятие о том как все это настраивать, чем конкретное готовое решение. В
любом случае очень рекомендую тщательно изучить страницы руководства <B>man</B>
по <B>pppd</B> и <B>diald</B>, а также <B>PPP-HOWTO</B>.
<P>
Пакет diald входит в состав дистрибутива <B>Debian</B>, да и по моему
в другие дистрибутивы тоже. Ну а если у вас все-таки его не оказалось, вы
всегда можете выкачать его из Internet.
<P>
После того как вы установите пакет, например, командой
<PRE>
	dpkg -i diald-0.16.4-1.deb
</PRE>
В каталоге <I>/etc/diald</I> у вас появятся его конфигурационные файлы. Вам
понадбится править только два из них. В файле с именем <B>diald.options</B>
хранится конфигурация <B>diald</B>, а в файле с именем <B>connect</B> находится
сценарий, который устанавливает модемное соединение, набирая номер и
выполняя функции идентификации пользователя.
<P>
Начнем с файла <B>diald.options</B>. Ниже дан в качестве примера мой:
<PRE>
mode ppp
connect "chat -f /etc/ppp/pppscript"
device /dev/ttyS1
speed 19200
modem
lock
crtscts
local 192.168.0.1
remote 192.168.0.2
netmask 255.255.255.0
impulse 120,60
dynamic
defaultroute
pppd-options noipdefault name "victor_v" asyncmap 0
include /etc/diald/standard.filter
</PRE>
Данная конфигурация расчитана на использование <B>diald</B> с протоколом
PPP с аутентификацией пользователя по протоколу PAP. Адреса <B>local</B> 
и <B>remote</B> даны "от балды". Так как далее используется ключ <B>dynamic</B>,
а в параметре <B>ppp-options</B> задано значение <I>noipdefault</I>, то
при установлении связи адреса удаленной машины-сервера и адреса вашей машины
будут изменены на те, которые сообщит удаленная машина.
<P>
Параметр <B>device</B> установлен в значение <I>/dev/ttyS1</I>, что соотвествует
второму последовательному порту COM2. Вы же можете изменить это значение, если
ваш модем использует другой порт. (Для COM1 будеь /dev/ttyS0 и т.п.). Параметр
<B>speed</B> установлен в значение <I>19200</I> и означает портовую скорость.
Скорость вы также должны задать ориентируясь на модем, которым вы пользуетесь.
Возможные значения: 2400, 9600, 19200, 34800, 57600 и т.д.
<P>
Параметр <B>impulse</B> установлен в значение <I>120,60</I>. Это говорит о том,
что diald будет проверять простаивает ли линия через каждые 2 минуты (120 сек)
и будет разрывать соединение (класть "трубку" модема), если в течении 1 минуты
(60 сек) линия будет продолжать простаивать. Простой линии выражается в
отсутствии приема или передачи пакетов через модем. Таким образом вы экономите
деньги на повременной оплате за телефон и за Internet. Излишне говорить, что
вы можете настроить эти параметры под себя.
<P>
Особо нужно отметить параметр <B>connect</B>. В данном примере он установлен
в значение <I>chat -f /etc/ppp/pppscript</I>. Ниже приводится содержимое
файл <I>pppscript</I>
<PRE>
ABORT ERROR
ABORT BUSY
ABORT "NO CARRIER"
ABORT "NO DIALTONE"
REPORT "CARRIER"
REPORT "CONNECT"
TIMEOUT 90
"" AT&F1 "OK" ATDT900020 "CONNECT"
</PRE>
Мне было удобнее пользоваться таким файлом, чем поставляемым с пакетом 
<B>diald</B> файлом <I>connect</I>. Это потому, что мой провайдер использует
аутентификацию пользователей по протоколу PAP. Если же сервер у вашего
провайдера настроен на ввод имени и пароля по приглашениям <B>Login:</B> и
<B>Password:</B>, то вам лучше воспользоваться файлом <I>connect</I>.
Тогда строчка с параметром <B>connect</B> в файле <I>diald.options</I> будет
выглядеть так:
<PRE>
    connect "/etc/diald/connect"
</PRE>
Файл <I>connect</I> хорошо задокументирован внутри и проблем с его 
использованием быть не должно. Вам нужно будет только поменять параметры
<B>MODEM_INIT</B> на строку инициализации вашего модема, <B>PHONE_NUMBER</B> на
номер телефона вашего провайдера, <B>USER_CHAT_SEQ</B> на строку-приглашение,
которую вы получаете для ввода имени, <B>USER_NAME</B> на ваше регистрационное
имя у провайдера, <B>PASSWD_CHAT_SEQ</B> на строку-приглашение, которую вы
получаете для ввода пароля, <B>PASSWORD</B> на ваш пароль у провайдера и
наконец <B>PROMPT</B> на строку, которую вы получаете в случае успешного
ввода имени и пароля.
<P>
Возможно вам придется поэкспериментировать пока у вас все получится. Для
этой цели могу рекомендовать терминальную программу <B>minicom</B>, где
вы всегда сможете установить соединение в ручную и посмотреть все строки
приглашения.
<P>
Следующий этап - это файл <I>/etc/ppp/options</I>. Ниже дан в качестве примера
мой:
<PRE>
lock
defaultroute
crtscts
noipdefault
modem
asyncmap 0
debug
19200
/dev/ttyS1
name "victor_v"
</PRE>
Здесь вроде все должно быть понятно, тем более, что часть параметров
перекрывается конфигурационным файлом для <B>diald</B>. Замечу только, что
строка <B>name "victor_v"</B> нужна только в случае использования протокола
PAP.
<P>
Для тех, у кого провайдер использует как и у меня аутентификацию пользователей
по протоколу PAP будет нужен еще файл <B>/etc/ppp/pap-secrets</B>. Вот пример
моего:
<PRE>
# Secrets for authentication using PAP...
# client	server	     secret        IP addresses
"victor_v"          *          "password"
</PRE>
Вместо password должен стоять ваш пароль, а вместо victor_v ваше регистрационное
имя у провайдера. Кроме того, оно же прописывается как вы можете заметить
и в файл <I>/etc/ppp/options</I> и в файл <I>/etc/diald/diald.options</I>.
Естественно, что для тех у кого провайдер не поддерживает PAP, эти параметры
в данных файлах не нужны.
<P>
Далее вам необходимо настроить свою систему для использования DNS провайдера.
У вас должен быть адрес DNS-сервера провайдера. Его нужно поместить в файл
<I>/etc/resolv.conf</I>. Вот пример моего файла:
<PRE>
nameserver 194.84.131.242
search permonline.ru
</PRE>
где параметр <B>nameserver</B> задает адрес DNS-сервера провайдера, а параметр
<B>search</B> имя домена провайдера.
<P>
Ну вот теперь кажется все. После окончания всех настроек перезапустите diald
командами
<PRE>
    /etc/init.d/diald stop
    /etc/init.d/diald start
</PRE>
Теперь, когда вы в Netscape или в Lynx или в mc обратитесь на адрес, который
неизвестен вашей системе, diald попытается установить соединение с вашим
провайдером и если это получится, то вы попадете туда куда обратились.
<P>
Если у вас не получилось. Что же мне жаль. Причин может быть множество. Здесь
я могу только посоветовать вам подробно изучить документацию.
<HR>







<A NAME="P4Q1"><H3>Как создавать и удалять новых пользователей?</H3></A>
Добавлять  командой  adduser. Читайте man adduser для  подробной
информации. Удаляются  пользователи  командой  deluser  или  при
удалении информации из /etc/passwd руками в  редакторе. Заметим,
что  также  имеется  команда  addgroup  для  создания групп. Вся 
служебная  информация  по  пользователям  и  группам  хранится в 
файлах  /etc/passwd  и  /etc/group  (не  рассматривается  случай 
наличия shadow).
<HR>
</H3>
<A NAME="P4Q2"><H3>Как монтировать и демонтировать файловые системы?</H3></A>
Командами mount и umount. Читайте  man mount  и  man umount  для
подробной информации.  Служебная  информация  по автоматическому
монтрованию  находится в  файле  /etc/fstab  читайте  man fstab. 
Формат каждой записи, занимающей одну строку в файле следующий:
<OL>
<LI>устройство (Device)
<LI>каталог для монтирования (Mount point)
<LI>тип файловой системы (Type FS)
<LI>опции монтирования
<LI>количество попыток монтирования
<LI>дамп
</OL>
Кроме того  при  установке  пакета  fdutils  можно  пользоваться
командами fdmount и fdumount  для floppy дисков, что полезно для
обычных пользователей, чтобы  не  давать  им прав на пользование
командами mount и umount.
<HR>
<A NAME="P4Q3"><H3>При  архивировании  командой tar получается  архив,  который  не
влазит на одну дискету. Как мне разбить такой архив по дискетам?</H3></A>
tar поддерживает возможность разбить архив на несколько  дискет.
Для этого к обычной комбинации букв, которую вы используете  для
создания  или   разворачивания   архива   добавляется  буква 'M'
(большая). Пример:
<PRE>
       tar cMvf /dev/fd0 /usr/local
</PRE>
создаст архив на дискете. Если  места на дискете не хватит, то 
появится надпись:
<PRE>
       prepare volume #2 for /dev/fd0 and hit return:
</PRE>
после  чего  вы  можете  продолжить   создание  архива,  вставив
следующую дискету и нажав Enter.
<P>
Разворачивание многотомного  архива  производится как  же  как и
обычного, только нужно добавить букву 'M'. Пример:
<PRE>
       tar xMvf /dev/fd0
</PRE>
Недостаток заключается в том, что многотомные архивы со сжатием
не поддерживаются. Если же необходитость в сжатии есть, то сперва
нужно подготовить сплошной сжатый архив, а потом уже его разбивать
по дискетам.
<HR>
<A NAME="P4Q4"><H3>Как обновлять софт, если у меня есть подключение к Интернету?
Hеужели выкачивать новые пакеты, а потом руками ставить?</H3></A>
Конечно, нет. В принципе, существуют два способа.
<P>
<B>Первый:</B>
Можно поставить  пакет  dpkg-ftp, после чего в программе dselect 
при выборе access method появляется ftp. <I>Плюсы:</I> все обычные
плюсы dselect'а. <I>Минусы:</I> слишком большая, на мой взгляд,
интерактивность :) И необходимость хорошо понимать, с какого сервера
мы берем софт и где он лежит.
<P>
<B>Второй:</B>Можно поставить пакет dftp. Работа с ним выглядит так:
<PRE>
        # dftp getnew
</PRE>
После этого происходит  подключение к  ftp.debian.org, и  оттуда
выкачивается список пакетов. Через некоторое время Вы обнаружите
на  экране Ваш любимый редактор (кажется, тот, который /bin/vi), 
в  котором  будет  открыт файл cо списком пакетов; после каждого 
пакета идет его описание. Строчки, начинающиеся с #, как обычно,
комментарии.  Соответственно,  строчки, не  начинающиеся  с  # - 
имена  файлов, которые  мы хотим выкачать. По умолчанию не будут
закомментарены  только  новые  версии уже установленных пакетов.
После выхода из редактора dftp выкачает нужные пакеты и поставит
их.  Hадо  отметить, что ставит пакеты он разумно, например, при 
наличии новой версии libc она ставится первой.
<P>
<B>P.S.1.</B> Все то же самое можно сделать по шагам:
<PRE>
                dftp getlist
                dftp select
                dftp getselect
                dftp unpack
</PRE>
и, при желании,  dftp clean, которое удалит список пакетов и установленные
пакеты (не деинсталлирует  их,  а удалит выкачанные).
<P>
<B>P.S.2.</B> Многие пакеты обновляются _без смены_ номера Debian'а.
Hапример, в 1.3.1. сменились такие вещи, как XFree, документация
к нему, adduser, libc итп.
<HR>
<A NAME="P4Q5"><H3>У меня старая версия ядра, но я достал исходники новой версии, а
также  патчи. Что  мне делать с патчами и как мне теперь собрать 
ядро и сделать его загружаемым?</H3></A>
Сперва по патчи. Вынужден  огорчить - в Debian'е что-то делают с
исходниками ядра (по  крайней мере  в  Debian'е 1.3.1) так,  что
патчи к этим исходникам применятся не хотят. Однако если дистрибутив
у вас  под  рукой, то  это  не беда - исходники ядра можно
взять оттуда, естественно не в виде .deb, а в .tgz. Если у вас в
системе установлены исходники ядра из .deb (установлены они  или
нет  можно  справится  у  программы  dselect  по названию пакета
kernel-source), то  удалите их с помощью менеджера пакетов dpkg,
например:
<PRE>
        dpkg --purge kernel-source-2.0.30
</PRE>	
После  этого  скопируйте  файл .tgz с исходниками ядра в каталог
/usr/src и перейдите в этот же каталог.
<P>   
Далее нужно развернуть этот .tgz, как например показано ниже:
<PRE>
        tar xzvf linux-2.0.30.tgz
</PRE>	
естественно, что  название вашего .tgz файла может  отличаться от
приведенного.
<P>
В результате должен появится каталог с названием linux-2.0.30.
Теперь нужно сразу же сделать ссылку с именем linux на этот каталог:
<PRE>
        ln -sf linux-2.0.30 linux
</PRE>	
А вот теперь собственно займемся патчем. Патчи обычно поставляются
в  виде  файла  с  расширением .gz или .dgz, словом patch (или его
сокращением) и номером версии в имени файла. Например:
<PRE>
        patch-2.0.31.gz
	ptch2031.dgz
</PRE>	
Важно помнить, что номер версии  пачта  должен  быть старше номера
версии исходных  текстов  ядра, которые вы  собрались  патчить  не
больше, чем на 1 patchlevel. Например, для данного случая мы имеем
исходные тексты ядра версии  2.0.30 (то что мы разворачивали tar),
значит патч должен  быть версии 2.0.31. Ни версия 2.0.30 ни версия
2.0.32 не подойдут!
<P>
Предположим, что у вас правильная версия патча - 2.0.31.
Развернем его в каталоге /usr/src:
<PRE>
        gzip -d patch-2.0.31.gz
</PRE>	
или для другого имени файла
<PRE>
        gzip -d ptch2031.dgz -S .dgz
</PRE>	
В результате получится текстовый файл с таким  же  именем,  но без
расширения, который собственно готов к употреблению. Патчение ядра
осуществляется командой:
<PRE>
        patch -p0 &lt patch-2.0.31
</PRE>
для второго случая
<PRE>
        patch -p0 &lt ptch2031
</PRE>	
Должна запустится утилита  patch, а  на  экране  пробежать  строки
сообщения, генерируемые этой утилитой. Если  вдруг  вдруг  утилита
стала задавать вам вопросы, то либо вы что-то сделали неправильно,
либо у вас кривой патч или исходные тексты ядра. Если все в порядке,
то  утилита  завершает свою работу без каких-либо сообщений об
ошибках и не задает никаких вопросов в процессе работы.
<P>   
Теперь пришла пора сборки ядра. Тем кто сразу имеет готовые исход-
ные тексты ядра без патчей нужно выполнить разворачивание исходных
текстов  в  каталог /usr/src и создать ссылку как уже было описано
выше. Естественно тем, кто уже  имеет  у себя развернутые исходные
тексты ядра и ссылку беспокоится не нужно.
<P>   
Далее переходим в каталог /usr/src/linux и запускаем команду:
<PRE>
        make menuconfig
</PRE>	
После компиляции  промежуточных файлов на экране появится интерактивное
меню, с  помощью  которого  вам  нужно установить требуемую
конфигурацию ядра. Описывать что означают пункты меню я не  буду -
если вы сами  не знаете, то  до самостоятельной сборки ядра вы еще
не доросли. Читайте  документацию  или просите помочь более 
компетентных людей.
<P>   
После того как выбор конфигурации ядра вами закончен нужно выйти с
сохранением и набрать команду:
<PRE>
        make depend
</PRE>	
В процессе  работы происходит связывание выбранной вами конфигурации
ядра с теми файлами исходных текстов, которые будут компилироваться при
сборке ядра.Затем наберите команду
<PRE>
       make zlilo
</PRE>       
если вы используете  системный  загрузчик lilo. В  процессе работы
будет собрано ядро с именем vmlinuz и файл System.map, после чего,
и ядро и этот  файл  будет помещены  в  корневой каталог ("/") и в
завершении будет вызван  lilo, что  приведет  к его автоматической
переинтсаляции с параметрами, заданными в /etc/liloconfig.
<P>   
Замечу, что если у вас в корневом каталоге были такие же файлы, то
они будут переименованы с расширением .bak.
<P>
Второе замечание состоит в том, что  обычно  в Debian'е в корневом
каталоге находятся только ссылки на файлы ядра и System.map, которые
находятся в каталоге  /boot.  Что вам  делать  в  этом  случае
(самому перенести файлы в этот  каталог и  переименовать/поправить 
ссылки или удалить эти сслыки, как  и ядро и System.map из каталога
/boot - рещайте сами).
<P>
В конечном итоге у вас в корневом  каталоге  должны  остаться либо
сами файлы vmlinuz и System.map, либо ссылки на эти файлы.
Теперь, если вы  все-таки  перенесли  файлы в  каталог  /boot, а в
корневом каталоге оставили ссылки, вы должны снова запустить lilo,
командой:
<PRE>
         lilo
</PRE>	 
На  этом  этап  сборки  нового  ядра и его установки можно было бы
считать  законченным, НО! Осталась  немаловажная  часть - модули к
ядру! Увы  множество  бед и вопросов происходит именно от них. Для
того, чтобы проблем не  было  вы  должны  снова  перейти в каталог
/usr/src и продолжить компиляцию командами:
<PRE>
         make modules; make modules_install
</PRE>	 
В процессе работы будут сделаны модули, для  тех компонентов ядра,
которые  вы  указали  как  модульные  при  конфигурации по команде
make menuconfig, и эти модули будут  проинсталлированы  в  каталог
/lib/modules/<номер версии ядра>.  При  следующей  загрузке  будет
произведено сканирование имеющихся модулей  после  чего  их  имена
будут записаны в файл modules.dep в этом же каталоге.
<P>   
Внимание! Если вы решили собрать ядро этой же версии, но с другими
параметрами,  не  забудьте удалить modules.dep иначе новые модули,
которые возможно  появятся  после  сборки  ядра  не  будут видится
системой.
<HR>   







<A NAME="P5Q1"><H3>У меня есть второй винт,который зацеплен на один шлейф с первым.
Какому устройству он соответствует?</H3></A>
В Linux очень простая нумерация HDD. Вот буквенные обозначения:
<TABLE BORDER=1>
<TR><TD>Master на первом IDE порту<TD>        hda
<TR><TD>Slave на пером IDE порту<TD>          hdb
<TR><TD>Master на втором IDE порту<TD>        hdc
<TR><TD>Slave на втором IDE порту<TD>         hdd
</TABLE>	
Когда  говорят  о  разделах  (партициях) на  каком-либо  жестком
диске, то  к  этим  буквенным  обозначеним   добавляется  цифра, 
соответствующая  номеру   раздела.  Заметим, что  данные  номера
определяют  с  помощью  fdisk для  Linux, иначе  можно допустить
ошибку.

<A NAME="P5Q2"><H3>Как можно заставить работать под Linux звуковую карточку на
чипсете OPTi 930xx?</H3></A>
Данная карточка работает в DOS в режиме Sound Blaster Pro. Использовать ее в
этом же режиме в Linux невозможно - ядро либо просто не обнаружит ее, либо
будет неправильно с ней работать.
<P>
Чтобы все-таки заставить работать эту карточку под Linux, необходимо собрать
ядро с поддержкой звуковой карты Mad16 Mozard. При этом не забудьте включить
<B>/dev/dsp and /dev/audio support</B>, а также <B>Midi interface</B> и
<B>FM synthesizer (YM3812-OPL3) support</B>.
<P>
Я настоятельно рекомендую оформить это все в виде модуля, а не жестко вставлять
в ядро. Такой подход дает некоторые преимущества: можно задавать параметры
к получившемуся модулю sound.o при его загрузке, а также, когда звук не нужен,
просто не загружать данный модуль.
<P>
Теперь допустим, что у вас все получилось, но при загрузке модуля очень
громкий звук (или наоборот тихий), а в колонках слышны посторонние звуки при
работе винчестера, передвижении мыши и нажатии кпопок на клавиатуре. Все
эти симптомы указывают на то, что уровни громкости каналов выставлены
неправильно. К сожалению ядро не позволяет задавать эти уровни при загрузке и
вам понадобится программа-миксер. В настоящее время таких программ довольно
много. Совершенно элементарную программу-миксер вы можете взять нажав 
<A HREF="http://www.linux.org.ru/books/setmixer-1.0.tar.gz">сюда</A>
<P>
С параметрами этой программы я думаю разберетесь сами. Если звук необходим
вам все время, то можно запускать эту программу автоматически в процессе
загрузки.


<HR>
<A NAME="P6Q1"><H3>Почему, когда  я переключаюсь  из текстовой консоли в X Window и 
двигаю  своей PS/2 мышкой  X Window Server  падает с сообщением: 
psaux: device resource is busy?</H3></A>
Наверняка при этом запущен General Purpose Mouse  сервер (gpm) -
несмотря на правки предыдущих версий он продолжает конфликтовать
с сервером X Window, если  работаем  с  мышкой  PS/2, с serial 
мышкой  вроде бы все нормально (версия gpm 1.10).
<P>
Еще совсем недавно я предложил бы вам просто убивать gpm перед запуском
X Windows, однако буквально на днях я увидел довольно простое решение этой
проблемы, которое предлагает Leon B.Kanter (2:465/148.1@Fidonet.org) и которым я
спешу с вами поделится.
<P>
Итак вам нужно добавить при запуске gpm ключ -R. Этот ключ говорит gpm
перенаправлять данные поступающие от мышки в FIFO <B>/dev/gpmdata</B>.
Это можно сделать, если запустить программу <B>gpmconfig</B>,
зарегистрировавшись как супепользователь (root). После того как вы введете
параметры, соответствующие вашей мышке, вам предложат ввести дополнительные
параметры
<PRE>
    Do you want do add any additional arguments []?
</PRE>
Вот на это приглашение вы и должны ввести <B>-R</B>. После того как
<B>gpmconfig</B> закончит работу, вы должны перезапустить gpm. Это делается
двумя командами:
<PRE>
    /etc/init.d/gpm stop
    /etc/init.d/gpm start
</PRE>
Теперь вам нужно внести исправления в файл <B>/etc/X11/XF86Config</B>.
Найдите слова <B>Section "Pointer"</B> и удалите все строки между этими
словами и словом <B>EndSection</B>, а затем поместите на место удаленных
строк следующие:
<PRE>
    Device	"/dev/gpmdata"
    Protocol	"MouseSystems"
    Emulate3Buttons
</PRE>
Все, теперь при переключении из текстовой консоли в X Windows никаких
падений X сервера быть не должно.
<HR>
<A NAME="P6Q2"><H3>При  добавлении  нового  пользователя в систему командой adduser 
возникла проблема - почему-то  скопировалась  только одна первая
строка  из файлов, которые  лежат в /etc/skel, а вообще-то файлы 
должны были скопироваться полностью! В чем дело?</H3></A>
Не знаю как в остальных версиях, а в версии Debian 1.3.1 adduser
содержит ошибку, которая и приводит к неправильной работе. Чтобы
все стало нормально сделайте следующее:
<OL>
<LI>положите данную ниже заплату, которую мне любезно дал
Константин Кудрин (2:5054/69@Fidonet.org)  в файл 
adduser.diff в каталог /usr/sbin
<PRE>	 
--- adduser.orig	Fri May 23 20:38:49 1997
+++ adduser	Wed Sep  3 10:34:55 1997
@@ -456,9 +456,11 @@
     elsif (-f "$fromdir/$file") {
 	open (FILE, "$fromdir/$file") || die "open: $!";
 	open (NEWFILE, ">$todir/$file") || die "open: $!";
-
-	print NEWFILE <FILE> || (! -s "$fromdir/$file") 
+        while( <FILE> )
+        {    
+	print NEWFILE $_ || (! -s "$fromdir/$file") 
 	    || die "print $todir/$file: $!";
+        }
 	close FILE;
 	close(NEWFILE)  || die "close $todir/$file ";
</PRE>
<LI>перейдите в этот каталог и введите команду
<PRE>
           patch < adduser.diff
</PRE>	   
</OL>
<HR>
<A NAME="P6Q3"><H3>Почему, когда groff форматирует текст с ключем -Tlatin1
вместо символов переноса ("-") видны какие-то прямоугольники?
Как сделать, чтобы все было нормально?</H3></A>
На мой взгляд дело в кривых таблицах для groff, где авторы просто
допустили ошибку. Впрочем все довольно легко поправить.
<OL>
<LI>Идем в каталог /usr/share/groff/font/devlatin1
<LI>Заходим поочередно редактором в каждый из находящихся там
файлов, которые соответствуют различным шрифтам, кроме файла
DESC, где задано описание (это файлы B, BI, I, R).
<LI>Находим в этих файлах строку
<PRE>
                     char173
</PRE>
и удаляем ее.
</OL>
<P>
После этого все должно заработать нормально. Не забудьте  подчистить
каталоги кэша у man'а иначе вы будете недоумевать почему это не сработало,
в то  время  как  man будет брать отформатированные ранее (до наших 
исправлений) файлы из кэша. Так что я настоятельно  рекомендую вам 
удалить все файлы, которые находятся в каталогах:
<PRE>
              /var/catman/cat*
</PRE>	      
и других каталогах, находящихся в /var/catman.
<HR>
<A NAME="P6Q4"><H3>А почему у меня системное время какое-то левое? Разница с тем, что
должно быть составляет часы. Время на часах в CMOS'е нормальное.В чем дело?</H3></A>
Тут вы должны вспомнить как вы устанавливали дистрибутив. В один прекрасный
момент вам был задан вопрос:<BR>
<PRE>
    Is you clock set to GMT (y/n)?
</PRE>
Вы, наверное, особо не задумываясь ответили <B>"y"</B>, хотя в переводе на
русский вопрос звучал бы так:
<PRE>
    Ваши часы установлены по времени GMT?
</PRE>
Время GMT - это время Гринвичского меридиана. Местное время может вычислятся
с помощью него прибавлением или вычитанием количества часов, соответствующих
вашему часовому поясу. Например в городе Перми, разница между местным временем
и GMT составляет плюс 5 часов, т.е. местное время - это GMT+5. Вам, наверное,
будет удобнее ориентироваться на московское время, это GMT+3.
<P>
Вернемся к сути вопроса. Чтобы время показываемое системой командой <B>date</B>
было нормальным, вы можете или поставить часы в CMOS'е на время GMT или
сказать системе, чтобы она не производила коррекцию времени на местное по
временной зоне, добавляя ее к времени в CMOS'е.
<P>
Первый способ самый простой. Для него всего-то нужно при перезагрузке машины
зайти до загрузки в <B>Setup</B> и поправить там время на GMT. Однако не всех
устраивает такой способ, хотя он наиболее правильный. Это обусловлено тем,
что если у вас на машине стоят другие операционные системы, то они не будут
правильно показывать время. К счастью есть и второй способ.
<P>
Чтобы сказать системе, что не нужно производить коррекцию времени в CMOS'е
согласно временной зоне, придется поработать руками. Дело в том, что
существующий сценарий установки временной зоны <B>tzconfig</B> после 
инсталляции системы не позволяет задавать или убирать коррекцию времени.
Для того чтобы ее убрать нужно:
<UL>Для Debian 1.3
<LI>переместится в каталог <B>/etc/init.d</B>
и отредактировать в любом редакторе файл <B>boot</B>.
</UL>
<UL>
Для Debian 2.0
<LI>переместится в каталог <B>/etc/default</B>
и отредактировать в любом редакторе файл <B>rcS</B>.
</UL>
<P>
В этом файле вы должны найти строчку вида<BR>
<PRE>
    GMT="-u"
</PRE>
и заменить ее на строчку<BR>
<PRE>
    GMT=""
</PRE>
Тогда после перезагрузки машины время будет нормальным.
<HR>
<CENTER>Жду ваших вопросов для включения в FAQ</CENTER>
</BODY>
</HTML>
