<HTML>
<HEAD>
<TITLE>Sendmail Installation and Operation Guide (part1)</TITLE>
</HEAD>
<BODY>

<B><P><A NAME="toc1"></A>1. ОСНОВНАЯ УСТАНОВКА</B> </P>
<P>Есть два основных шага при установке <U>sendmail</U>. Во-первых, вы должны скомпилировать и установить бинарные файлы. Это будет достаточно просто, если <U>sendmail</U> уже перенесен в вашу операционную систему. Во-вторых, вы должны - построить рабочий файл конфигурации. Это файл читается <U>sendmail</U> при запуске, и в нем описываются все известные ему почтовые программы, как ему анализировать адреса, как переписывать заголовок сообщения, а также настройки различных опций. Хотя файл конфигурации достаточно сложен, обычно конфигурацию можно построить используя основанный на M4 язык конфигурации. </P>
<P>Остаток этого раздела описывает установку <U>sendmail</U> в том случае, если вы используете одну из существующих конфигураций, и можете использовать стандартные параметры установки. Все пути к файлам и примеры заданы от корня поддерева <U>sendmail</U>, для 4.4BSD обычно <U>/usr/src/usr.sbin/sendmail</U>. </P>
<P>Если вы загружаете его с ленты, продолжайте со следующего раздела. Если в вашей системе уже имеется работающий бинарный файл, то вы вполне можете сразу переходить к <A HREF="sendmail1.html#toc12"><U>разделу 1.2</U></A>. </P>
<DIR>
<DIR>
<B><P><A NAME="toc11"></A>1.1. Компиляция Sendmail</P></DIR>
</DIR>

</B><P>Все исходные файлы для <U>sendmail</U> находятся в подкаталоге <U>src</U>. Для компиляции </FONT><U>sendmail</U>  перейдите в каталог <U>src</U>  и запустите </P>
<FONT COLOR="#008000"><P>./Build</P></font>
<P>Это оставит бинарные файлы в соответствующе названном каталоге, например obj.BSD-OS.2.1.i386. </P><DIR>
<DIR>
<DIR>
<DIR>

<B><P><A NAME="toc111"></A>1.1.1. Подгонка Build</P></DIR>
</DIR>
</DIR>
</DIR>
</B> 
<P>Команде Build  можно задавать параметры. Во многих случаях они используются только после создания каталога <U>obj.*</U>  . Эти команды включают:</P>
<TABLE CELLSPACING=0 BORDER=0 CELLPADDING=7 WIDTH="100%">
<TR><TD WIDTH="38%" VALIGN="TOP">
<P>-L <U>libdirs</U></TD>
<TD WIDTH="62%" VALIGN="TOP">
 <P>Список каталогов для поиска библиотек</TD>
</TR>
<TR><TD WIDTH="38%" VALIGN="TOP">
<P>-I <U>incdirs</U></TD>
<TD WIDTH="62%" VALIGN="TOP">
 <P>Список каталогов для поиска включаемых файлов</TD>
</TR>
<TR><TD WIDTH="38%" VALIGN="TOP">
<P>-E <U>envar</U>=<U> значение</U></TD>
<TD WIDTH="62%" VALIGN="TOP">
 <P>Назначить перед компиляцией переменной окружения указанное <U>значение</U>. Обычно используется для выставки ABI  в Irix.</TD>
</TR>
<TR><TD WIDTH="38%" VALIGN="TOP">
<P>-c</TD>
<TD WIDTH="62%" VALIGN="TOP">
 <P>Перед запуском создать новое дерево <U>obj.*</U></TD>
</TR>
<TR><TD WIDTH="38%" VALIGN="TOP">
<P ALIGN="JUSTIFY">-f <U>siteconfig</U></TD>
<TD WIDTH="62%" VALIGN="TOP">
 <P>Считать указанный файл конфигурации узла. Если этот параметр не указан, <U>Build</U>  включает <U>все</U> файлы из <U>$BUILD-TOOLS/Site/site.$oscf.m4</U>  и <U>$BUILD-TOOLS/Site/site.config.m4</U> , где $BUILDTOOLS обычно </FONT>../BuildTools</U> , а $oscf - то же имя, что используется в каталоге <U>obj.*</U> . Ниже имеется описание файла конфигурации узла. </TD>
</TR>
<TR><TD WIDTH="38%" VALIGN="TOP">
<P>-S</TD>
<TD WIDTH="62%" VALIGN="TOP">
 <P>Пропустить автоконфигурацию. <U>Build</U>  не будет автоматически находить библиотеки. Все библиотеки и определения преобразований должны быть указаны в файле конфигурации узла. </TD>
</TR>
</TABLE>

 <P>Все остальные параметры передаются в программу <U>make</U>.</P><DIR>
<DIR>
<DIR>
<DIR>

<B><P><A NAME="toc112">1.1.2  Создание Файла Конфигурации Узла</A></P></DIR>
</DIR>
</DIR>
</DIR>

</B><P>Эта секция еще не готова. Пока что лучше всего смотреть файл BuildTools/README.</P><DIR>
<DIR>
<DIR>
<DIR>

</FONT><B><P><A NAME="toc113"></A>1 .1.3 Подгонка Makefile</P></DIR>
</DIR>
</DIR>
</DIR>

<P>XXX   Все это должно быть в разделе Файл Конфигурации Узла.</P>
</B><U><P>Sendmail</U>  поддерживает два различных формата для локальных (находящихся на диске) версий баз данных, в особенности базы данных <U>aliases</U> . По крайней мере, одна из них должна быть определена, если это вообще возможно. </P>
<TABLE CELLSPACING=0 BORDER=0 CELLPADDING=7 WIDTH="100%">
<TR><TD WIDTH="20%" VALIGN="TOP">
<P>NDBM</TD>
<TD WIDTH="80%" VALIGN="TOP">
 <P>Формат "new DBM", доступный в настоящее время почти во всех системах. До 4.4BSD это был предпочтительный формат. Он позволяет такие сложные вещи, как множество баз данных и закрытие открытой на этот момент базы данных. </TD>
</TR>
<TR><TD WIDTH="20%" VALIGN="TOP">
<P>NEWDB</TD>
<TD WIDTH="80%" VALIGN="TOP">
 <P>Новый пакет базы данных от Berkeley. Если он у вас есть, то используйте его. Он позволяет длинные записи, множество открытых баз данных, кэширование в памяти и многое другое. Вы можете определить его вместе с NDBM; если вы так сделаете, то старые базы данных будут считываться, но когда будет создаваться новая база данных, то она будет уже в формате NEWDB. В случае, если у вас определены NEWDB, NDBM, и NIS,  и имя файла <U>aliases</U>  будет содержать подстроку "/yp/", при выполнении команды <U>newalias</U>, <U>sendmail</U>  создаст и новую и старую версии файла алиасов. Это требуется из-за того, что система Sun NIS/YP считывает версию DBM файла алиасов. Это ужасно, но работает. </TD>
</TR>
</TABLE>

 <P>Если ни одна из них не определена, <U>sendmail</U>  при каждом запуске будет считывает файл алиасов в память. Этого нужно избегать, так как это может быть достаточно медленно. Существует также несколько методов доступа к удаленным базам данных: </P>
<TABLE CELLSPACING=0 BORDER=0 CELLPADDING=7 WIDTH="100%">
<TR><TD WIDTH="20%" VALIGN="TOP">
<P>NIS</TD>
<TD WIDTH="80%" VALIGN="TOP">
 <P>Sun's Network Information Services (бывший YP).</TD>
</TR>
<TR><TD WIDTH="20%" VALIGN="TOP">
<P>NISPLUS</TD>
<TD WIDTH="80%" VALIGN="TOP">
<P>Sun's NIS+ services.</TD>
</TR>
<TR><TD WIDTH="20%" VALIGN="TOP">
<P>NETINFO</TD>
<TD WIDTH="80%" VALIGN="TOP">
<P>NeXT's NetInfo service.</TD>
</TR>
<TR><TD WIDTH="20%" VALIGN="TOP">
<P>HESIOD</TD>
<TD WIDTH="80%" VALIGN="TOP">
<P>Hesiod service (from Athena).</TD>
</TR>
</TABLE>

 <P>Другие флаги компиляции выставляются в conf.h и должны быть предопределены для вас, если только вы не занимаетесь портированием в другую систему. </P><DIR>
<DIR>
<DIR>
<DIR>

<B><P><A NAME="toc114"></A>1.1.4 . Компилляция и установка</P></DIR>
</DIR>
</DIR>
</DIR>

</B>
<P>После описанного выше системного конфигурирования, вы должны скомпилировать и установить систему. Во многих системах лучший для этого способ -  сценарий "Build ": </P>
<FONT COLOR="#008000"><P>./Build </P>
</FONT> <P>Он использует <U>uname</U> (1) для выбора подходящего для вашей системы Makefile. </P>
<P>Если вы устанавливаете все на стандартные места, то произвести установку можно с помощью </P>
<FONT COLOR="#008000"><P>./Build install</FONT> </P>
 <P>Это должно установить бинарный файл в /usr/sbin и создать связи /usr/bin/newaliases и /usr/bin/mailq с /usr/sbin/sendmail. В системах 4.4BSD это также сформатирует и установит инструкции (man pages). </P><DIR>
<DIR>

<B><P><A NAME="toc12"></A>1.2. Файлы Конфигурации</P></DIR>
</DIR>
</B>
<U><P>Sendmail</U>  не может работать без файла конфигурации. Конфигурация определяет механизмы доставки почты, понимаемые этим узлом, как перенаправлять почту на удаленные почтовые системы, и многие другие настроечные параметры. Этот файл конфигурации подробнее описан в дальнейших частях этого документа. </P>
<P>Поначалу конфигурация <U>sendmail</U>  может напугать и запутать вас. Мир сложен, и почтовая конфигурация - всего лишь его отражение. Комплект поставки включает конфигурационный пакет, основанный на m4, скрывающий большинство из сложностей. </P>
<P>Файлы конфигурации, по сравнению с предыдущими версиями, стали проще, во многом из-за того, что и мир стал проще; в частности, текстовые файлы хостов официально устранены, и теперь нет необходимости "прятать" хосты за зарегистрированным шлюзом в Internet. </P>
 <P>Эти файлы также учитывают, что большинство ваших соседей используют UUCP адресацию на основе доменов; что означает, что вместо именования хостов как "host!user" они будут использовать "host.domain!user". Файлы конфигурации могут быть переделаны так, чтобы работать помимо этого, но это намного сложнее. </P>
<P>Наши файлы конфигурации обрабатываются <U>m4</U>  для облегчения внесения локальных изменений; каталог <U>cf</U>  в поставке <U>sendmail</U>  содержит исходные файлы. Этот каталог содержит несколько подкаталогов: </P>
<TABLE CELLSPACING=0 BORDER=0 CELLPADDING=7 WIDTH="100%">
<TR><TD WIDTH="20%" VALIGN="TOP">
<P>cf</TD>
<TD WIDTH="80%" VALIGN="TOP">
 <P>И зависящие, и не зависящие от узла описания хостов. Это могут быть литерные имена хостов (например, "ucbvax.mc"), если хосты являются шлюзами, или более общие описания (типа "generic-solaris2.mc" -  как общее описание хостов, соединенных по SMTP под управлением ОС Solaris 2.x. ). Файлы, имена которых заканчиваются на <B>.mc</B>  ("Master Configuration") являются входными описаниями; выходные находятся в соответствующих файлах <B>.cf</B> . Общая структура этих файлов описывается ниже. </TD>
</TR>
<TR><TD WIDTH="20%" VALIGN="TOP">
<P>domain</TD>
<TD WIDTH="80%" VALIGN="TOP">
 <P>Зависящие от узла описания поддоменов. <BR>
Это все связано с тем, как ваша организация хочет осуществлять адресацию. Например, <B>domain/ CS.Berkeley.EDU.m4</B>  - это наше описание для хостов в поддомене CS.Berkeley.EDU. На них ссылаются, используя <B>m4</B>  макрос DOMAIN в файле <B>.mc</B>.</TD>
</TR>
<TR><TD WIDTH="20%" VALIGN="TOP">
<P>feature</TD>
<TD WIDTH="80%" VALIGN="TOP">
 <P>Определения специфических особенностей, которые могут быть нужны какому-либо определенному хосту в вашем узле. На них ссылаются, используя <B>m4</B>  макрос FEATURE. Например - use_cw_file (говорит <U>sendmail</U>  считать при запуске файл /etc/sendmail.cw, чтобы найти список локальных имен). </TD>
</TR>
<TR><TD WIDTH="20%" VALIGN="TOP">
<P>hack</TD>
<TD WIDTH="80%" VALIGN="TOP">
 <P>Локальные особенности. На него ссылаются, используя <B>m4</B>  макрос HACK. Лучше всего не использовать</TD>
</TR>
<TR><TD WIDTH="20%" VALIGN="TOP">
<P>m4</TD>
<TD WIDTH="80%" VALIGN="TOP">
 <P>Независимые от узла <U>m4</U> (1) файлы, содержащие общую для всех конфигурационных файлов информацию. Этот каталог можно рассматривать как каталог "#include".</TD>
</TR>
<TR><TD WIDTH="20%" VALIGN="TOP">
<P>mailer</TD>
<TD WIDTH="80%" VALIGN="TOP">
 <P>Определения почтовых программ, на которые ссылаются  используя</FONT> <B>m4</B>  макрос MAILER. Типы почтовых программ, известных в этой поставке: fax, local, smtp, uucp, и usenet. Например, чтобы включить поддержку почтовых программ основанных на UUCP, используйте "MAILER(uucp)". </TD>
</TR>
<TR><TD WIDTH="20%" VALIGN="TOP">
<P>ostype</TD>
<TD WIDTH="80%" VALIGN="TOP">
 <P>Определения, описывающие среды различных операционных систем (например, местонахождения поддерживаемых файлов). На них ссылаются используя <B>m4</B>  макрос OSTYPE.</TD>
</TR>
<TR><TD WIDTH="20%" VALIGN="TOP">
<P>sh</TD>
<TD WIDTH="80%" VALIGN="TOP">
 <P>Файлы оболочки, используемые процессом постройки <B>m4</B> . С этим у вас не должно быть проблем.</TD>
</TR>
<TR><TD WIDTH="20%" VALIGN="TOP">
<P>siteconfig</TD>
<TD WIDTH="80%" VALIGN="TOP">
 <P>Локальная информация о связях UUCP.  Этот каталог был замещен mailertable ; все новые конфигурации должны использовать mailertable  для осуществления маршрутизации UUCP  (и всего остального). </TD>
</TR>
</TABLE>

 <P>Если вы в новом домене (т.е., компании), вам, возможно, захочется создать файл cf/domain для вашего домена. В основном он состоит из описаний ретрансляторов (relay definitions) и особенностей, которые бы использовались на всех узлах: например, описание домена Berkeley определяет ретрансляторы для BitNET и UUCP. Они очень специфичны для Berkeley  и должны быть доменными именами internet. Пожалуйста, проверьте их приемлемость для вашего домена. </P>
<P>Поддомены в Berkeley также представлены в каталоге cf/domain. Например, домен CS.Berkeley.EDU  - поддомен Computer Science, EECS.Berkeley.EDU-  поддомен </FONT>Electrical Engineering and Computer Sciences , а S2K.Berkeley.EDU - это поддомен Sequoia 2000.  Возможно, вам захочется добавить соответствующие вашему домену файлы. </P>
 <P>Вам нужно будет использовать или создать файлы <B>.mc</B>  для ваших хостов в подкаталоге <U>cf/cf</U> . Это детально описано в файле cf/README. </P><DIR>
<DIR>

<B><P><A NAME="toc13"></A>1 .3. Подробности Файлов Инсталляции</P></DIR>
</DIR>

</B><P>Этот раздел описывает файлы, необходимые для установки <U>sendmail</U>. </P><DIR>
<DIR>
<DIR>
<DIR>

<B><P><A NAME="toc131"></A>1.3.1. /usr/sbin/sendmail</P></DIR>
</DIR>
</DIR>
</DIR>

</B> <P>Бинарный файл <U>sendmail</U>  находится в&nbsp;<A NAME="b1"></A>/usr/sbin<A HREF="sendmail1.html#r1"><SUP>1</SUP></A> . Он может иметь бит смены владельца на пользователя root. В целях безопасности, владельцем каталогов /, /usr, и /usr/sbin должен быть root, а их пермиссии должны быть 755<A HREF="sendmail1.html#r2"><SUP>2</SUP></A>. </P><DIR>
<DIR>
<DIR>
<DIR>

<B><P><A NAME="toc132"></A>1.3.2. /etc/sendmail.cf</P></DIR>
</DIR>
</DIR>
</DIR>

</B> <P>Это файл конфигурации для <U>sendmail</U><A HREF="sendmail1.html#r3"><SUP>3</SUP></A>.  Это единственный не библиотечный файл, имя которого вкомпилировано в <U>sendmail</U><A HREF="sendmail1.html#r4"><SUP>4</SUP></A>. </P>
 <P>Файл конфигурации обычно создается с использованием описанных выше файлов из поставки. Если у вас необычная конфигурация системы, то, возможно, вам понадобиться создать специальную версию. Формат этого файла более подробно описан в последующих разделах этого документа. </P><DIR>
<DIR>
<DIR>
<DIR>

<B><P><A NAME="toc133"></A>1.3.3. /usr/bin/newaliases</P></DIR>
</DIR>
</DIR>
</DIR>

</B> <P>Команда <U>newaliases</U>  должна быть всего лишь ссылкой на <U>sendmail</U>: </P>
<FONT COLOR="#008000">
<P>rm -f /usr/bin/newaliases</P>
<P>ln -s /usr/sbin/sendmail /usr/bin/newaliases
</FONT> </P>
 <P>Он должен быть создан там, где его найдет системный путь поиска. </P><DIR>
<DIR>
<DIR>
<DIR>

<B><P><A NAME="toc134"></A>1.3.4. /usr/bin/hoststat</P></DIR>
</DIR>
</DIR>
</DIR>

</B> <P>Команда<U>hoststat</U>  также должна быть всего лишь ссылкой на <U>sendmail</U> , таким же образом, что и <U>newaliases</U> . Эта команда выдает статус последней почтовой транзакции со всеми удаленными хостами. Флаг -v  не даст обрезать показываемый статус.  Он работает только если выставлена опция <B>HostStatusDirectory</B>. </P><DIR>
<DIR>
<DIR>
<DIR>

<B><P><A NAME="toc135"></A>1.3.5.</B> <B>/usr/bin/purgestat</P></DIR>
</DIR>
</DIR>
</DIR>

</B> <P>Эта команда также является ссылкой на <U>sendmail</U> . Она обнуляет всю информацию, сохраненную в дереве <B>HostStatusDirectory</B>. </P><DIR>
<DIR>
<DIR>
<DIR>

<B><P><A NAME="toc136"></A>1.3.6. /var/spool/mqueue</P></DIR>
</DIR>
</DIR>
</DIR>

</B> <P>Для хранения почтовой очереди должен быть создан каталог <U>/var/spool/mqueue</U> . Этот каталог должен иметь пермиссии 700 и принадлежать пользователю root. </P>
<P>Настоящий путь к этому каталогу определяется оцией <B>Q</B>  в файле <U>sendmail.cf</U>. <BR>
</P><DIR>
<DIR>
<DIR>
<DIR>

<B><P><A NAME="toc137"></A>1.3.7. /var/spool/mqueue/.hoststat</P></DIR>
</DIR>
</DIR>
</DIR>

</B> <P>Это обычное значение опции <B>HostStatusDirectory</B> , содержащей один файл на хост, с которым этот sendmail недавно разговаривал. Обычно это подкаталог <U>mqueue</U>. </P><DIR>
<DIR>
<DIR>
<DIR>

<B><P><A NAME="toc138"></A>1.3.8.</B> <B>/etc/aliases</P></DIR>
</DIR>
</DIR>
</DIR>

</B> <P>Системные псевдонимы содержатся в "/etc/aliases". Пример этого файла имеется в "lib/aliases", в нем имеются некоторые псевдонимы, которые должны быть определены: </P>
<FONT COLOR="#008000"><P>cp lib/aliases /etc/aliases </P>
<U><P>edit</U> <U>/etc/aliases</U></FONT> </P>
 <P>Вы должны добавить в этот файл любые псевдонимы, необходимые в вашей системе. </P>
<P>Обычно <U>sendmail</U>  смотрит на версии этих файлов в виде баз данных,  хранящихся и в "/etc/aliases.dir" и в "/etc/aliases.pag" или "/etc/aliases.db", в зависимости от используемой вами пакета баз данных. Путь к этому файлу определяется опцией <B>AliasFile</B>  в файле <U>sendmail.cf</U>. 
 </P><DIR>
<DIR>
<DIR>
<DIR>

<B><P><A NAME="toc139"></A>1.3.9. /etc/rc  или /etc/init.d/sendmail</P></DIR>
</DIR>
</DIR>
</DIR>

</B>
<P>При перезагрузке системы необходимо запускать демон <U>sendmail</U> . Этот демон обеспечивает две функции: он слушает сокет SMTP на случай соединений (чтобы получать почту с удаленных систем), а также периодически обрабатывает очередь, чтобы, как только удаленные хосты станут доступны, доставить на них почту. </P>
<P>Добавьте в ваш "/etc/rc" (или "/etc/rc.local" в зависимости от системы) в то место, где он запускает демоны (для систем на основе BSD) , или в один из файлов запуска, обычно это "/etc/init.d/sendmail" ( в системах на основе System-V),  следующие строчки: </P>
<FONT COLOR="#008000"><P>if [ -f /usr/sbin/sendmail -a -f /etc/sendmail.cf ]; then</P><DIR>
<DIR>
<P>(cd /var/spool/mqueue; rm -f [lnx]f*) </P>
<P>/usr/sbin/sendmail -bd -q30m &amp; </P>
<P>echo -n ' sendmail' /dev/console </P></DIR>
</DIR>
<P>fi</FONT> </P>
 <P>Команды "cd" и "rm" здесь даются для того, чтобы гарантировать, что все файлы-замки (lock files) были уничтожены; посторонние файлы-замки могут остаться, если система вдруг "упадет" посреди обработки сообщения. Строка, которая на самом деле запускает <U>sendmail</U> , имеет два флага: "-bd" заставляет его слушать на порту SMTP, а "-q30m" заставляет его производить обработку очереди каждые полчаса. </P>
<P>Некоторые используют более сложный сценарий запуска, удаляющий файлы qf нулевой длины, и файлы df, для которых нет ни одного файла qf. Пример сложного сценария запуска представлен на рис.1. </P>
<P><BR>
</P>
<TABLE BORDER CELLSPACING=1 CELLPADDING=7 WIDTH=100%>
<TR><TD VALIGN="TOP">
# remove zero length qf files <BR>
for qffile in qf* <BR>
do <DIR>
if [ -r $qffile ] <br>
then <DIR>
if [ ! -s $qffile ] <br>
then <br><DIR>
echo -n " &lt;zero: $qffile" /dev/console <br>
rm -f $qffile <br></DIR>
fi<br></DIR>
fi<br></DIR>
done <br>
# rename tf files to be qf if the qf does not exist <br>
for tffile in tf* <br>
do <br><DIR>
qffile=`echo $tffile | sed 's/t/q/'` <br>
if [ -r $tffile -a ! -f $qffile ] <br>
then <br><DIR>
echo -n " &lt;recovering: $tffile" /dev/console <br>
mv $tffile $qffile <br></DIR>
else <br><DIR>
echo -n " &lt;extra: $tffile" /dev/console <br>
rm -f $tffile <br></DIR>
fi<br></DIR>
done <br>
# remove df files with no corresponding qf files <br>
for dffile in df* <br>
do <br><DIR>
qffile=`echo $dffile | sed 's/d/q/'` <br>
if [ -r $dffile -a ! -f $qffile ] <br>
then <br><DIR>
echo -n " &lt;incomplete: $dffile" /dev/console <br>
mv $dffile `echo $dffile | sed 's/d/D/'` <br></DIR>
fi<br></DIR>
done <br>
# announce files that have been saved during disaster recovery<br>
for xffile in [A-Z]f* <br>
do <br><DIR>
echo -n " &lt;panic: $xffile" /dev/console<br></DIR>
done</TD>
</TR>
</TABLE>

<B> <P ALIGN="CENTER">рис.1 - Комплексный сценарий запуска</B> </P>
 <P>Если ваша версия UNIX не поддерживает Berkeley TCP/IP, не включайте флаг <B>-bd</B>.</P>
<B>
<DIR>
<DIR>
<DIR>
<DIR>
<A NAME="toc1310"></A>
<P>1.3.10. /usr/lib/sendmail.hf</P></DIR>
</DIR>
</DIR>
</DIR>

</B> <P>Это файл помощи, используемый командой SMTP <B>HELP</B> . Он должен быть скопирован из "lib/sendmail.hf": </P>
<FONT COLOR="#008000"><P>cp lib/sendmail.hf /usr/lib</FONT> </P>
 <P>Настоящий путь к этому файлу определяется опцией <B>HelpFile</B>  в файле <U>sendmail.cf</U>. </P><DIR>
<DIR>
<DIR>
<DIR>

<B><P><A NAME="toc1311"></A>1.3.11. /etc/sendmail.st</P></DIR>
</DIR>
</DIR>
</DIR>

</B> <P>Если вы хотите собирать статистику о количестве прошедшей почты, вы должны создать файл "/etc/sendmail.st": </P>
<FONT COLOR="#008000"><P>cp /dev/null /etc/sendmail.st <br>
chmod 666 /etc/sendmail.st</FONT> </P>
 <P>Этот файл не увеличивается. Он распечатывается программой "mailstats/mailstats.c." Настоящий путь к этому файлу определяется опцией <B>S</B>  в файле <U>sendmail.cf</U>. </P><DIR>
<DIR>
<DIR>
<DIR>

<B><P><A NAME="toc1312"></A>1.3.12.</B> <B>/usr/bin/mailq</P></DIR>
</DIR>
</DIR>
</DIR>

</B> <P>Если <U>sendmail</U>  запущен как "mailq," то это будет равнозначно запуску <U>sendmail</U>  с флагом <B>-bp</B>  (т.е., <U>sendmail</U>  распечатает содержание почтовой очереди, см далее). Он должен быть ссылкой на /usr/sbin/sendmail. </P>
<P><HR></P>
<FONT SIZE=-1>
<P><A NAME="r1"></A>1. В 4.4BSD и более новых системах это обычно /usr/sbin; многие системы устанвливают его в /usr/lib. И насколько я понимаю это /usr/ucblib в System V Release 4. <A HREF="sendmail1.html#b1">[назад] </A> </P>
<P><A NAME="r2"></A>2. Некоторые поставщики поставляют его так, что его владельцем является bin; это может создать дыру в безопасности, которая не связана напрямую с sendmail. Другие каталоги, которые должны иметь ограничения по владельцу и пермиссиям - это /bin, /usr/bin, /etc, /usr/etc, /lib, и /usr/lib. <A HREF="sendmail1.html#b1">[назад] </A> </P>
<P><A NAME="r3"></A>3. На самом деле, пути могут различаться, от системы к системе; /etc - наиболее предпочтительный каталог. Некоторые старые системы устанавливают его в /usr/lib/sendmail.cf, и я также видел его в /usr/ucblib и /etc/mail. Если вы хотите поместить его в другое место, добавьте к передаваемым в компилятор флагам флаг D_PATH_SENDMAIL.CF=\"/file/name\". Перемещать этот файл не рекомендуется: другие программы и сценарии знают об этом местонахождении. <A HREF="sendmail1.html#b1"> [назад] </A> </P>
<P><A NAME="r4"></A>4. Системные библиотеки могут взаимодействовать с другими файлами; в частности, системные библиотечные подпрограммы, вызываемые sendmail, возможно могут обращаться к /etc/passwd и /etc/resolv.conf. <A HREF="sendmail1.html#b1"> [назад] </A> </P>
</BODY>
</HTML>
