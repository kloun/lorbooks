<html>

<head>
<title>Sendmail Installation and Operation Guide (Part 5)</title>
</head>

<body>

<p><a name="toc5"></a><b>5. Полное Описание
Файла Конфигурации</b></p>

<p>Этот раздел детально описывает
файл конфигурации.</p>

<p>Есть одна вещь, которую вам нужно
уяснить сразу: синтаксис файла
конфигурации разработан так, чтобы
его можно было достаточно легко
анализировать, так как
синтаксический анализ
производится при каждом запуске
sendmail, а не для того, чтобы людям было
легко его читать или писать. В
списке &quot;будущих разработок&quot;
имеется компилятор файла
конфигурации.</p>

<p>Файл конфигурации организован
как последовательность строк,
каждая из которых начинается с
одного символа, определяющего
семантику всей остальной строки.
Строки, начинающиеся с пробела или
символа табуляции, являются
строками-продолжениями (хотя во
многих местах семантика не
особенно хорошо определена). Пустые
строки и строки, начинающиеся с
символа &quot;#&quot; являются
комментариями.</p>

<dir>
    <dir>
            <a name="toc51"></a><b>5.1. R и S -
                Правила Перезаписи</b>
        </dir>
    
</dir>

<p>Ядром синтаксического анализа
адресов являются правила
перезаписи. Они являются
упорядоченной системой обработки.
Sendmail просматривает набор правил
перезаписи, ища совпадения в
левосторонней части (LHS) правила.
Если правило подходит, адрес
замещается правосторонней частью
(RHS) правила.</p>

<p>Имеется несколько наборов правил
перезаписи. Некоторые из наборов
используются внутренне, и должны
иметь специфическую семантику.
Другие наборы не имеют специальной
семантики, и могут быть
использованы определениями
почтовых программ или другими
наборами перезаписи.</p>

<p>Синтаксис этих двух команд такой:</p>

<dir>
    <dir>
            <font color="#008000"><b>S</b>n</font>
        </dir>
    
</dir>

<p>Устанавливает текущий набор
правил в n. Если вы начинаете набор
не в первый раз, это добавляет к
старому определению.</p>

<dir>
    <dir>
            <font color="#008000"><b>R</b>lhs rhs comments</font>
        </dir>
    
</dir>

<p>Поля должны быть разделены как
минимум одним символом табуляции;
поля могут содержать пробелы. lhs -
это шаблон, применяемый на входе.
Если он подходит, вывод
переписывается на rhs. Комментарии
игнорируются.</p>

<p>Макрорасширения в виде <b>$</b>x
выполняются при чтении файла
конфигурации. Расширения вида <b>$&amp;</b>x
выполняются во время работы,
используя какой-либо менее общий
алгоритм. Это предназначено только
для ссылочных внутренне
определенных макросов, типа <b>$h</b>,
изменяющихся во время работы.</p>

<dir>
    <dir>
            <dir>
                    <dir>
                            <a name="toc511"></a><b>5.1.1.
                                Левосторонняя
                                часть</b>
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p>Левосторонняя часть правил
перезаписи содержит шаблон.
Обычные слова просто напрямую
сравниваются. Метасинтаксис
вводится использованием знака
доллара. Метасимволы это:</p>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="20%"><p align="center"><b>$*</b></p>
        </td>
        <td valign="top" width="80%">Совпадение
        нуля или более лексем </td>
    </tr>
    <tr>
        <td valign="top" width="20%"><p align="center"><b>$+</b></p>
        </td>
        <td valign="top" width="80%">Совпадение
        одного или более лексем </td>
    </tr>
    <tr>
        <td valign="top" width="20%"><p align="center"><b>$-</b></p>
        </td>
        <td valign="top" width="80%">Совпадение
        ровно одной лексемы</td>
    </tr>
    <tr>
        <td valign="top" width="20%"><p align="center"><b>$=</b>x</p>
        </td>
        <td valign="top" width="80%">Совпадение
        любой фразы класса x</td>
    </tr>
    <tr>
        <td valign="top" width="20%"><p align="center"><b>$~</b>x</p>
        </td>
        <td valign="top" width="80%">Совпадение
        любого слова не входящего в
        класс x</td>
    </tr>
</table>

<p>При любом из этих совпадений, они
назначаются символу <b>$</b>n для
замены в правосторонней части, где n
- индекс в LHS. Например, если LHS:</p>

<dir>
    <dir>
            <font color="#008000">$-:$+</font>
        </dir>
    
</dir>

<p>применена к входу:</p>

<dir>
    <dir>
            <font color="#008000">UCBARPA:eric</font>
        </dir>
    
</dir>

<p>Правило совпадет, и значения
переданные в RHS будут такими:</p>

<dir>
    <dir>
            <font color="#008000">$1 UCBARPA<p>
            $2 eric</font></p>
            
        </dir>
    
</dir>

<p>Дополнительно, LHS может включать <b>$@</b>
для совпадения нулевыми лексемами.
Это не граница <b>$</b>n в RHS, и обычно
используется только в одиночестве,
чтобы соответствовать нулевому
входу.</p>

<dir>
    <dir>
            <dir>
                    <dir>
                            <a name="toc512"></a><b>5.1.2.
                                Правосторонняя
                                часть</b>
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p>Когда левосторонняя часть
правила перезаписи совпадает,
входная информация удаляется и
замещается правосторонней частью.
Лексемы копируются прямо из RHS, если
они не начинаются со знака доллара.
Метасимволы таковы:</p>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="40%"><p align="center"><b>$</b>n</p>
        </td>
        <td valign="top" width="70%">Заместить
        неопределенную лексему n из LHS</td>
    </tr>
    <tr>
        <td valign="top" width="40%"><p align="center"><b>$[</b>name<b>$]</b></p>
        </td>
        <td valign="top" width="70%">Канонизировать
        имя</td>
    </tr>
    <tr>
        <td valign="top" width="40%"><p align="center"><b>$(</b>map
        key <b>$@</b>arguments <b>$:</b>default <b>$)</b></p>
        </td>
        <td valign="top" width="70%">Обобщенная
        ключевая функция
        преобразования</td>
    </tr>
    <tr>
        <td valign="top" width="40%"><p align="center"><b>$&gt;</b>n</p>
        </td>
        <td valign="top" width="70%">&quot;Вызов&quot;
        набора правил n</td>
    </tr>
    <tr>
        <td valign="top" width="40%"><p align="center"><b>$#</b>mailer</p>
        </td>
        <td valign="top" width="70%">Решение в mailer</td>
    </tr>
    <tr>
        <td valign="top" width="40%"><p align="center"><b>$@</b>host</p>
        </td>
        <td valign="top" width="70%">Определить host</td>
    </tr>
    <tr>
        <td valign="top" width="40%"><p align="center"><b>$:</b>user</p>
        </td>
        <td valign="top" width="70%">Определить user</td>
    </tr>
</table>

<p>Синтаксис <b>$</b>n замещает
соответствующее значение из <b>$+</b>, <b>$-</b>,
<b>$*</b>, <b>$=</b>, или <b>$~</b> совпадения в
LHS. Это может быть использовано
везде.</p>

<p>Имя хоста, заключенное между <b>$[</b>
и <b>$]</b> просматривается в базе(ах)
данных хостов и заменяется на
каноническое имя <a href="sendmail5.html#r1"><sup>1</sup></a><a name="b1"></a>.
Например, &quot;$[ftp$]&quot; может стать
&quot;ftp.CS.Berkeley.EDU&quot;, а
&quot;$[[128.32.130.2]$]&quot; может стать
&quot;vangogh.CS.Berkeley.EDU.&quot;. Sendmail
распознает его числовой IP адрес без
вызова сервера имен и замещает его
своим каноническим именем.</p>

<p>Синтаксис <b>$(</b> ... <b>$)</b> - более
общая форма просмотра; он
использует названное
преобразование вместо неявного.
Если ничего не найдено, вставляется
указанное умолчание; если
умолчание не определено, и ничего
не найдено, значение остается без
изменений. Аргументы передаются в
преобразование для возможного
использования.</p>

<p>Синтаксис <b>$&gt;</b>n заставляет
остаток строки замещать обычным
образом, а затем передать как
аргумент в набор правил n. Конечное
значение набора правил n затем
подставляется в это правило. </p>

<p>Синтаксис <b>$&gt;</b>
распространяется на все после
имени набора правил и до конца
замещаемой строки, а затем
передается как первичный вход в
набор правил. Позволяются
рекурсивные вызовы. Например,</p>

<dir>
    <dir>
            <font color="#008000">$&gt;0 $&gt;3 $1</font>
        </dir>
    
</dir>

<p>расширяет $1, передает его в набор
правил 3, а затем передает результат
набора правил 3 в набор правил 0.</p>

<p>Синтаксис <b>$#</b> должен быть
использован только в наборе правил
0, или подпрограмме набора правил 0.
Он приводит к немедленному
завершению выполнения набора
правил, и сигнализирует sendmail, что
адрес полностью разрешен. Полный
синтаксис таков:</p>

<dir>
    <dir>
            <font color="#008000"><b>$#mailer $@host $:user</b></font>
        </dir>
    
</dir>

<p>Он определяет тройку {mailer, host, user},
необходимую для почтовой
программы. Если почтовая программа
локальна, то часть host может быть
опущена<a href="sendmail5.html#r2"><sup>2</sup></a><a
name="b2"></a>. Мailer должен быть одним
словом, а host и user могут состоять из
нескольких частей. Если mailer
является встроенным IPC mailer'ом, host
может быть списком хостов,
разделенных запятыми, который
просматривается в поисках первого
работающего адреса (точно как
записи типа MX). Позднее user
переписывается специфическим для
данной почтовой программы набором
правил перезаписи, и назначается
макросу <b>$u</b>. В особом случае, если
определенный mailer имеет ОПРЕДЕЛЕНЫЙ
флаг <b>F=@</b> и первый символ значения
<b>$:</b> является &quot;@&quot;, &quot;@&quot;
обрезается, и выставляется флаг в
описании адреса, заставляющий sendmail
не применят обработку по набору
правил 5.</p>

<p>Обычно, подходящее правило
применяется снова, поэтому правило
идет по кругу до появления ошибки.
RHS может быть предварена <b>$@</b> или <b>$:</b>
для изменения такого поведения.
Префикс A <b>$@</b> заставляет набор
правил возвращаться с остатком RHS в
качестве значения. Префикс <b>$:</b>
заставляет немедленно закончить
работу правила, но продолжить
работу набора правил; это может
быть использовано во избежание
продолжения применения правила.
Префикс перед продолжением
обрезается.</p>

<p>Префиксы <b>$@</b> и <b>$:</b> могут
предшествовать описанию <b>$&gt;</b>;
например: </p>

<dir>
    <dir>
            <font color="#008000">R$+ $: $&gt;7 $1</font>
        </dir>
    
</dir>

<p>Совпадает со всем, передает это в
набор правил семь, и продолжается; <b>$:</b>
необходимо во избежание
бесконечной петли.</p>

<p>Замещение происходит в описанном
порядке, то есть замещаются
параметры из LHS, канонизируются
имена хостов, вызываются
&quot;подпрограммы&quot;, и в конце
обрабатываются <b>$#</b>, <b>$@</b>, и <b>$:</b>.</p>

<dir>
    <dir>
            <dir>
                    <dir>
                            <a name="toc513"></a><b>5.1.3.
                                Семантика Наборов
                                Правил Перезаписи</b>
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p>Существует пять наборов правил
перезаписи, имеющих специфическую
семантику. Взаимоотношения четырех
из них изображены на Рис.1.</p>

<hr>

<pre>
                    +---+
                 --&gt;| 0 |--&gt;resolved address
                /   +---+
               /          +---+   +---+
              /       ---&gt;| 1 |--&gt;| S |--
       +---+ / +---+ /    +---+   +---+  \      +---+
addr--&gt;| 3 |--&gt;| D |                      -----&gt;| 4 |--&gt;msg
       +---+   +---+ \    +---+   +---+  /      +---+
                      ---&gt;| 2 |--&gt;| R |--
                          +---+   +---+</font></pre>

<p align="center">Рис.1. Семантика набора
перезаписи</p>

<dir>
    <dir>
            <dir>
                    <dir>
                            <p align="center">D -
                                Добавка домена
                                отправителя</p>
                                <p>S - Перезапись
                                отправителя в
                                зависимости от
                                почтовой
                                программы</p>
                                <p>R - Перезапись
                                получателя в
                                зависимомти от
                                почтовой
                                программы</p>
                            
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<hr>

<p>Набор правил 3 должен превратить
адрес в &quot;каноническую форму&quot;.
Эта форма должна иметь основной
синтаксис:</p>

<dir>
    <dir>
            <font color="#008000">local-part@host-domain-spec</font>
        </dir>
    
</dir>

<p>Набор правил 3 применяется sendmail'ом
до любых изменений в любом адресе.</p>

<p>Если не определено ни одного
знака &quot;@&quot;, то hostdomain-spec может
быть добавлен (квадратик &quot;D&quot; на
Рис.1.) из адреса отправителя (если в
определениях почтовых программ для
соответствующей отсылающей
программы выставлен флаг <b>C</b>).</p>

<p>Набор правил 0 применяется после
набора правил 3 к адресу,
определяющему получателей. Он
должен быть разделен на тройку {mailer,
host, user}. Mailer должен быть определен в
определениях почтовых программ в
файле конфигурации. Host
определяется макросом <b>$h</b> для
использования в расширенном argv
указанной почтовой программы.</p>

<p>Правила 1 и 2 применяются ко всем
адресам отправителей и получателей
соответственно. Они применяются до
любого указания в определении
почтовой программы. Их никогда не
нужно проверять.</p>

<p>Набор правил 4 применяется ко всем
адресам в сообщении. Он обычно
используется для перевода из
внутренней формы во внешнюю.</p>

<p>В добавок, набор правил 5
применяется ко всем локальным
адресам (в частности, к тем, которые
разрешаются в почтовой программе с
выставленным флагом &quot;F=5&quot;) не
имеющим псевдонимов. Это последняя
ловушка для локальных имен.</p>

<dir>
    <dir>
            <dir>
                    <dir>
                            <a name="toc514"></a><b>5.1.4.
                                Ловушки Наборов
                                Правил</b>
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p>Несколько дополнительных наборов
правил считаются &quot;ловушками&quot;,
и могут быть определены для
некоторых особенностей. Все они
являются именованными наборами
правил. Все формы &quot;check_*&quot; выдают
статус принять/отказать; переход в
конец, или нормальный выход
означает принять, а определение <b>$#error</b>
- отказать. Многие из них могут
иметь результатом специальную
почтовую программу <b>$#discard</b>; она
принимает сообщение, как будто все
прошло успешно, но затем
выбрасывает его без доставки.</p>

<dir>
    <dir>
            <dir>
                    <dir>
                            <dir>
                                    <dir>
                                        <a name="toc5141"></a><b>5.1.4.1.
                                        check_relay</b>
                                        </dir>
                                    
                                </dir>
                            
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p>Набор правил check relay вызывается
после приема соединения. Он
проверяет </p>

<dir>
    <dir>
            <font color="#008000">client.host.name $|
                client.host.address</font>
        </dir>
    
</dir>

<p>где <b>$|</b> - метасимвол,
разделяющий две части. Это правило
может отказать в соединении из
различных мест.</p>

<dir>
    <dir>
            <dir>
                    <dir>
                            <dir>
                                    <dir>
                                        <a name="toc5142"></a><b>5.1.4.2.
                                        check_mail</b>
                                        </dir>
                                    
                                </dir>
                            
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p>Набор правил check mail проверяет
параметр имени пользователя из
команды SMTP MAIL. Может принять или
отвергнуть адрес.</p>

<dir>
    <dir>
            <dir>
                    <dir>
                            <dir>
                                    <dir>
                                        <a name="toc5143"></a><b>5.1.4.3.
                                        check_rcpt</b>
                                        </dir>
                                    
                                </dir>
                            
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p>Набор правил check rcpt проверяет
параметр имени пользователя из
команды SMTP RCPT. Может принять или
отвергнуть адрес.</p>

<dir>
    <dir>
            <dir>
                    <dir>
                            <dir>
                                    <dir>
                                        <a name="toc5144"></a><b>5.1.4.4.
                                        check_compat</b>
                                        </dir>
                                    
                                </dir>
                            
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p>Набор правил check compat проверяет </p>

<dir>
    <dir>
            <font color="#008000">sender-address $|
                recipient-address</font>
        </dir>
    
</dir>

<p>где <b>$|</b> - метасимвол,
разделяющий адреса. Он может
принять или отвергнуть передачу
почты между этими двумя адресами,
что очень похоже на функцию checkcompat().</p>

<dir>
    <dir>
            <dir>
                    <dir>
                            <a name="toc515"></a><b>5.1.5.
                                Почтовые
                                Программы IPC</b>
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p>Если набор правил 0 определяет
почтовую программу IPC (то есть,
почтовая программа имеет &quot;[IPC]&quot;
перечисленное в качестве Path в
строке конфигурации <b>M</b>),
происходит некоторая специальная
обработка. Имя хоста, переданное
после &quot;$@&quot; имеет найденное
расширение MX; при этом имя хоста
просматривается в DNS в поисках
альтернативных узлов для доставки.</p>

<p>Имя хоста также может быть
представлено как четыре числа,
разделенные точками в квадратных
скобках; например:</p>

<dir>
    <dir>
            <font color="#008000">[128.32.149.78]</font>
        </dir>
    
</dir>

<p>Это заставит сделать прямое
преобразование числового значения
в IP адрес хоста.</p>

<p>Имя хоста, прошедшее после
&quot;$@&quot; также может быть списком
хостов, разделенных запятыми. Для
каждого из них находится MX, а
результаты складываются в один
длинный список MX. Цель всего этого -
создать &quot;фальшивые&quot; записи MX,
которых нет в DNS для частных
внутренних сетей.</p>

<p>Последний специальный случай -
имя хоста может быть передано как
текстовая строка в квадратных
скобках:</p>

<dir>
    <dir>
            <font color="#008000">[ucbvax.berkeley.edu]</font>
        </dir>
    
</dir>

<p>Эта форма избегает MX
преобразования. <b>Заметь!:</b> <i>Это
предназначено только для ситуаций,
когда у вас имеется сетевой firewall,
или иной хост, производящий
специальную обработку всей вашей
почты, так что ваша запись MX
указывает на шлюзовую машину; затем
эта машина производит прямую
доставку на машины в вашем
локальном домене. Использование
этой особенности напрямую нарушает
секцию 5.3.5 RFC 1123: это должно
использоваться только в случае,
если у вас для этого имеется
серьезная причина.</i></p>

<dir>
    <dir>
            <a name="toc52"></a><b>5.2. D -
                Определение Макроса </b>
        </dir>
    
</dir>

<p>Имена Макросов состоят из одного
символа или из слова в фигурных
скобках {}. Имена из одного символа
могут быть выбраны из всей таблицы
ASCII, пользовательские макросы
должны быть выбраны только из
набора символов верхнего регистра.
Буквы нижнего регистра и
специальные символы имеют
веутреннее использование. Длинные
имена, начинающиеся с буквы нижнего
регистра или знака пунктуации,
зарезервированы для использования
sendmail'ом, поэтому длинные
пользовательские имена макросов
должны начинаться с буквы верхнего
регистра.</p>

<p>Синтаксис определения макросов
таков:</p>

<dir>
    <dir>
            <font color="#008000"><b>Dxval</b></font>
        </dir>
    
</dir>

<p>Где x - имя макроса (которое может
быть одним символом или словом в
скобках), а val - значение, которое
должен иметь этот макрос. При этом
не должно быть пробелов, не
принадлежащих содержимому
значения макроса.</p>

<p>Макросы интерполируются
использованием конструкции <b>$</b>x,
где x - имя макроса для интерполяции.
Эта интерполяция производится при
чтении файла конфигурации, кроме
строк <b>M</b>. Специальная
конструкция <b>$&amp;</b>x может быть
использована в строках <b>R</b> для
получения косвенной интерполяции.</p>

<p>Условные зависимости могут быть
определены использованием
синтаксиса:</p>

<dir>
    <dir>
            <font color="#008000">$?x text1 $| text2 $.</font>
        </dir>
    
</dir>

<p>Это интерполирует text1, если
назначен макрос <b>$x</b>, и text2 в
обратном случае. Оператор
&quot;иначе&quot; (<b>$|</b>) может быть
опущен.</p>

<p>Имена макросов из маленьких букв
зарезервированы для специальной
семантики, используемой при
проходе информации в или из sendmail, а
специальные символы
зарезервированы для условий и т.п.
Имена из заглавных букв (т.е., от <b>$A</b>
до <b>$Z</b>) специально
зарезервированы для авторов файла
конфигурации.</p>

<p>Следующие макросы определяются
и/или внутренне используются
sendmail'ом для интерполирования в argv
для почтовых программ или других
контекстов. Те, которые отмечены
знаком | пропускают информацию в
sendmail<a href="sendmail5.html#r3"><sup>3</sup></a><a
name="b3"></a>, отмеченные знаком |
пропускают информацию и в и из sendmail,
не отмеченные макросы пропускают
из sendmail, но внутренне больше никак
не используются. Вот эти макросы:</p>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="35%"><p align="center">$a</p>
        </td>
        <td valign="top" width="65%">Исходящая дата
        в формате RFC 822. Выделяется из
        строки Date:.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$b</p>
        </td>
        <td valign="top" width="65%">Текущая дата в
        формате RFC 822.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$c</p>
        </td>
        <td valign="top" width="65%">Счетчик
        пересылок. Это счетчик числа
        строк Received: плюс значение флага
        командной строки <b>-h</b>.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$d</p>
        </td>
        <td valign="top" width="65%">Текущая дата в
        формате UNIX (ctime).</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$e|</p>
        </td>
        <td valign="top" width="65%">(Устарел;
        вместо него используйте опцию
        SmtpGreetingMessage.) Сообщение на входе
        SMTP. Печатается при запуске SMTP.
        Первое слово должно быть
        макросом <b>$j</b>, как определено
        RFC821. По умолчанию &quot;$j Sendmail $v
        ready at $b&quot;. Обычно
        переопределяется, чтобы
        указать номер версии
        конфигурации, например, &quot;$j
        Sendmail $v/$Z ready at $b&quot;</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$f</p>
        </td>
        <td valign="top" width="65%">Конвертный
        адрес отправителя (from).</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$g</p>
        </td>
        <td valign="top" width="65%">Адрес
        отправителя по отношению к
        получателю. <p>Например, если <b>$f</b>
        - &quot;foo&quot;, <b>$g</b> будет
        &quot;host!foo&quot;, &quot;foo@host.domain&quot;, или
        что-нибудь другое,
        соответствующее принимающей
        почтовой программе.</p>
        </td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$h</p>
        </td>
        <td valign="top" width="65%">Хост
        получателя. Устанавливается в
        наборе правил 0 из поля $#
        анализируемого адреса.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$i</p>
        </td>
        <td valign="top" width="65%">Идентификационный
        номер в очереди, например,
        &quot;HAA12345&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$j|</p>
        </td>
        <td valign="top" width="65%">&quot;Официальное&quot;
        доменное имя для этого узла.
        Оно полностью уточнено, если
        может быть найдена полная
        квалификация. Оно должно быть
        переопределено, чтобы быть
        полностью уточненным доменным
        именем, если ваша система не
        сконфигурирована таким
        образом, что может найти его
        автоматически.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$k</p>
        </td>
        <td valign="top" width="65%">Имя узла UUCP (из
        системного вызова uname).</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$l|</p>
        </td>
        <td valign="top" width="65%">(Устарел;
        вместо него используйте опцию
        UnixFromLine.) Формат строки UNIX from. До
        тех пор, пока вы не измените
        формат почтового ящика UNIX, вы
        не должны изменять умолчание,
        которое равно &quot;From $g $d&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$m</p>
        </td>
        <td valign="top" width="65%">Доменная часть
        значения возвращенного gethostname. <p>При
        нормальных обстоятельствах, <b>$j</b>
        эквивалентен <b>$w.$m</b>.</p>
        </td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$n|</p>
        </td>
        <td valign="top" width="65%">Имя демона (для
        сообщений об ошибках). По
        умолчанию &quot;MAILER-DAEMON&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$o|</p>
        </td>
        <td valign="top" width="65%">(Устарел:
        вместо него используйте опцию
        OperatorChars.) Набор
        &quot;операторов&quot; в адресах.
        Список знаков, которые могут
        быть рассмотрены как
        обозначения, и которые будут
        разделять значения во время
        анализа. Например, если &quot;@&quot;
        было в макросе <b>$o</b>, то ввод
        &quot;a@b&quot; будет просканирован
        как три обозначения: &quot;a,&quot;
        &quot;@,&quot; и &quot;b.&quot; По умолчанию
        &quot;.:@[]&quot;, минимально
        необходимые для анализа по RFC
        822; более богатый набор
        операторов - &quot;.:%@!/[]&quot;,
        добавляющий поддержку для UUCP,
        %-hack, и адресов X.400.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$p</p>
        </td>
        <td valign="top" width="65%">Идентификационный
        номер процесса sendmail.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$q|</p>
        </td>
        <td valign="top" width="65%">Формат адреса
        отправителя по умолчанию.
        Макрос <b>$q</b> указывает, как
        должен выглядеть по умолчанию
        адрес отправителя в сообщении.
        По умолчанию &quot;&lt;$g&gt;&quot;.
        Обычно переопределяется на
        &quot;$?x$x &lt;$g&gt;$|$g$.&quot; Или &quot;$g$?x
        ($x)$.&quot;, соответствующим двум
        следующим форматам: <p>Eric Allman
        &lt;eric@CS.Berkeley.EDU&gt; </p>
        <p>eric@CS.Berkeley.EDU (Eric Allman)</p>
        <p>Sendmail надлежащим образом
        квотирует имена, имеющие
        специальные знаки, если
        используется первая форма.</p>
        </td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$r</p>
        </td>
        <td valign="top" width="65%">Протокол,
        использовавшийся для
        получения сообщения.
        Выставляется из флага
        командной строки <b>-p</b> или
        кодом сервера SMTP.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$s</p>
        </td>
        <td valign="top" width="65%">Имя хоста
        отправителя. Выставляется из
        флага командной строки <b>-p</b>
        или кодом сервера SMTP.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$t</p>
        </td>
        <td valign="top" width="65%">Числовое
        представление текущего
        времени.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$u</p>
        </td>
        <td valign="top" width="65%">Пользователь-получатель.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$v</p>
        </td>
        <td valign="top" width="65%">Номер версии
        бинарного файла sendmail.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$w|</p>
        </td>
        <td valign="top" width="65%">Hostname этого
        узла. Корневое имя для этого
        хоста (смотри ниже всякие
        нерулезности).</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$x</p>
        </td>
        <td valign="top" width="65%">Полное имя
        отправителя.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$z</p>
        </td>
        <td valign="top" width="65%">Домашний
        каталог получателя.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">$_</p>
        </td>
        <td valign="top" width="65%">Подтвержденный
        адрес отправителя.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">${bodytype}</p>
        </td>
        <td valign="top" width="65%">Тип тела
        сообщения (7BIT или 8BITMIME),
        определенный из конверта.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">${client_addr}</p>
        </td>
        <td valign="top" width="65%">IP адрес клиента
        SMTP. Определяется только в
        сервере SMTP.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">${client_name}</p>
        </td>
        <td valign="top" width="65%">Имя хоста
        клиента SMTP</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">${client_port}</p>
        </td>
        <td valign="top" width="65%">Номер порта
        клиента SMTP. Определяется
        только в сервере SMTP.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">${envid}</p>
        </td>
        <td valign="top" width="65%">Идентификационный
        номер конверта, переданный в
        sendmail как часть конверта.</td>
    </tr>
    <tr>
        <td valign="top" width="35%"><p align="center">${opMode}</p>
        </td>
        <td valign="top" width="65%">Текущий режим
        работы (из флага <b>-b</b>).</td>
    </tr>
</table>

<p>Существует три типа дат, которые
могут быть использованы. Макросы <b>$a</b>
и <b>$b</b> в формате RFC 822; <b>$a</b> - время,
выделяемое из строки &quot;Date:&quot;
сообщения (если она там есть), а <b>$b</b>
- текущая дата и время (используемые
для &quot;штемпеля&quot;). Если во
входящем сообщении не найдено ни
одной строки &quot;Date:&quot;, <b>$a</b> также
выставляется на текущее время.
Макрос <b>$d</b> эквивалентен макросу <b>$b</b>
в формате UNIX (ctime).</p>

<p>Макросы <b>$w</b>, <b>$j</b>, и <b>$m</b>
выставляются для опознания этого
хоста. Sendmail, если это вообще
возможно, пытается найти полностью
определенное имя хоста; он делает
это вызовом gethostname(2) для получения
текущего hostname, и затем, передавая
его в gethostbyname(3), который, по идее,
должен вернуть каноническую версию
этого имени хоста<a href="sendmail5.html#r4"><sup>4</sup></a><a name="b4"></a>.
Если все успешно проходит, <b>$j</b>
выставляется в полностью
определенное имя и <b>$m</b>
выставляется в доменную часть
имени (все, что находится после
первой точки). Макрос <b>$w</b>
выставляется в первое слово (все,
что до первой точки) если вы имеете
файл конфигурации уровня 5 и выше;
иначе, он будет иметь то же
значение, что и <b>$j</b>. Если
канонификация проваливается,
предписывается, чтобы файл
конфигурации выставлял <b>$j</b> в
полностью определенное доменное
имя<a href="sendmail5.html#r5"><sup>5</sup></a><a
name="b5"></a>.</p>

<p>Макрос <b>$f</b> является изначально
определенным идентификатором
отправителя; при посылке на
специфический хост макрос <b>$g</b>
выставляется в адрес отправителя
относительно получателя. Например,
если я посылаю на
&quot;bollard@matisse.CS.Berkeley.EDU&quot; с машины
&quot;vangogh.CS.Berkeley.EDU&quot;, макрос <b>$f</b>
будет &quot;eric&quot;, а макрос <b>$g</b> будет
macro will be &quot;eric@vangogh.CS.Berkeley.EDU&quot;.</p>

<p>Макрос <b>$x</b> выставляется в
полное имя отправителя. Оно может
быть определено несколькими
способами. Оно может быть передано
как флаг в sendmail. Оно может быть
определено в переменной окружения
NAME. В третьих, значение строки
&quot;Full-Name:&quot; в заголовке, если она
существует. И в четвертых, поле
комментария в строке &quot;From:&quot;.
Если же все это ни к чему не
приведет, и если сообщение исходит
с этого хоста, полное имя смотрится
в файле /etc/passwd.</p>

<p>При отправке, макросы <b>$h</b>, <b>$u</b>,
и <b>$z</b> выставляются в host, user, и
домашний каталог (если локально)
получателя. Первые два берутся из
частей <b>$@</b> и <b>$:</b> правил
перезаписи, соответственно.</p>

<p>Макросы <b>$p</b> и <b>$t</b> используются
для создания уникальных строк
(например, для поля &quot;Message-Id:&quot;).
Макрос <b>$i</b> выставляется в
идентификатор очереди на этом
хосте; При вставке в строку отметки
времени, это может быть полезно для
отслеживания сообщений. Макрос <b>$v</b>
выставляется равным номеру версии
sendmail; обычно он помещается в
отметку о времени и очень полезен
при отладке.</p>

<p>Поле <b>$c</b> получает значение
&quot;счетчика пересылок&quot;, то есть,
то количество раз, которое это
сообщение обрабатывалось. Это
может быть определено флагом
командной строки -<b>h</b> или
подсчетом отметок времени в
сообщении.</p>

<p>Поля <b>$r</b> и <b>$s</b> соответствуют
протоколу, использовавшемуся для
соединения с sendmail и имени хоста
отправителя. Они оба могут быть
назначены, используя флаг
командной строки -<b>p</b>, или по
раздельности, используя флаги <b>-M</b>
или <b>-oM</b>.</p>

<p>Макрос <b>$_</b> устанавливается в
подтвержденное имя хоста
отправителя. Если отправитель
имеет работающий сервер IDENT,
соответствующий RFC 1413, а получатель
имеет включенный протокол IDENT, он
будет включать имя пользователя на
том хосте.</p>

<p>Макросы <b>${client_name}</b>, <b>${client_addr}</b>,
и <b>${client_port}</b> выставляются в имя,
адрес, и номер порта клиента SMTP
вызывающего как сервер sendmail. Они
могут быть использованы в наборах
правил check * (конечно же, используя
косвенную форму определения <b>$&amp;</b>!).</p>

<dir>
    <dir>
            <a name="toc53"></a><b>5.3. C и F -
                Определение Класса</b>
        </dir>
    
</dir>

<p>Можно определить классы или фразы
для соответствия левосторонней
части правил перезаписи, где
&quot;фраза&quot; - это
последовательность символов, не
содержащая символов пробела.
Например, для предотвращения
отправки сообщений самому себе,
может быть создан класс всех
локальных имен для данного узла.
Это может быть определено как в
файле конфигурации, так и читаться
из другого файла. Классы имеют
имена, состоящие из одной буквы или
слова в {скобках}. Имена классов,
начинающиеся с букв нижнего
регистра и специальных символов,
зарезервированы для использования
системой. Классы, определенные в
файлах конфигурации могут быть
заданы заглавными буквами для
коротких имен, или начинаться с
заглавной буквы для длинных имен.</p>

<p>Синтаксис:</p>

<dir>
    <dir>
            <font color="#008000"><b>Ccphrase1 phrase2...</b><p>
            <b>Fcfile</b></font></p>
            
        </dir>
    
</dir>

<p>Первая форма определяет класс c
соответствующим любому из
названных слов. Ее можно разбивать
на несколько строк; на пример, две
формы:</p>

<dir>
    <dir>
            <font color="#008000">CHmonet ucbmonet</font>
        </dir>
    
</dir>

<p>и</p>

<dir>
    <dir>
            <font color="#008000">CHmonet<p>
            CHucbmonet</font></p>
            
        </dir>
    
</dir>

<p>эквивалентны. Форма &quot;F&quot;
читает элементы класса c из
названного file.</p>

<p>Можно получить доступ из правил к
элементам классов, используя <b>$=</b>
или <b>$~,</b> (сопоставить вхождения не
входящие в класс) совпадающие
только с отдельным словом;
вхождения из нескольких слов в
классе, в этом контексте,
игнорируются.</p>

<p>Некоторые классы имеют для sendmail
внутреннее значение:</p>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="20%"><p align="center">$=e</p>
        </td>
        <td valign="top" width="80%">Содержит
        Content-Transfer-Encodings которые могут
        быть преобразованы 8-&gt;7 bit.
        Предопределено для содержания
        &quot;7bit&quot;, &quot;8bit&quot;, и
        &quot;binary&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="20%"><p align="center">$=k</p>
        </td>
        <td valign="top" width="80%">То же самое, что
        и <b>$k</b>, то есть, имя узла UUCP.</td>
    </tr>
    <tr>
        <td valign="top" width="20%"><p align="center">$=m</p>
        </td>
        <td valign="top" width="80%">Устанавливается
        в набор доменов, знающих об
        этом хосте, изначально просто <b>$m</b>.</td>
    </tr>
    <tr>
        <td valign="top" width="20%"><p align="center">$=n</p>
        </td>
        <td valign="top" width="80%">Может быть
        установлено в набор типов MIME,
        которые никогда не
        перекодируются из восьми бит в
        семь. По умолчанию
        &quot;multipart/signed&quot;. Типы сообщений
        &quot;message/*&quot; и &quot;multipart/*&quot;
        никогда не перекодируются
        напрямую. Сообщения
        &quot;multipart&quot; взегда
        обрабатываются рекурсивно.
        Обработка сообщений
        &quot;message/*&quot; контролируется
        классом <b>$=s</b>.</td>
    </tr>
    <tr>
        <td valign="top" width="20%"><p align="center">$=q</p>
        </td>
        <td valign="top" width="80%">Набор Content-Types,
        которые не могут быть
        перекодированы как base64 (если
        они должны быть
        перекодированы, они будут
        перекодированы как quoted-printable).
        Он может иметь первичные типы
        types (например, &quot;text&quot;) или
        полные типы (типа &quot;text/plain&quot;).
        Класс инициализируется
        содержащим только &quot;text/plain&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="20%"><p align="center">$=s</p>
        </td>
        <td valign="top" width="80%">Содержит набор
        подтипов сообщений, с которыми
        можно обращаться рекурсивно.
        По умолчанию содержит только
        &quot;rfc822&quot;. Другие типы
        &quot;message/*&quot; не могут быть
        перекодированы 8-&gt;7 bit. Если
        сообщение содержит
        восьмибитные данные, посланные
        на семибитный хост, и сообщение
        не может быть перекодировано в
        семь бит, оно будет обрезано до
        7 бит.</td>
    </tr>
    <tr>
        <td valign="top" width="20%"><p align="center">$=t</p>
        </td>
        <td valign="top" width="80%">Установлен в
        набор доверенных
        пользователей строкой
        конфигурации <b>T</b>. Если вы
        хотите считывать список
        доверенных пользователей из
        файла, используйте <b>Ft</b>/file/name.</td>
    </tr>
    <tr>
        <td valign="top" width="20%"><p align="center">$=w</p>
        </td>
        <td valign="top" width="80%">Выставлен в
        набор всех имен, о которых
        знает хост. Может быть
        использован для совпадений с
        локальными именами хостов.</td>
    </tr>
</table>

<p>Sendmail может быть скомпилирован с
разрешением использовать scanf(3) в
строке <b>F</b>. Это позволит вам
производить простейший анализ
текстовых файлов. Например, чтобы
прочитать все имена пользователей
из системного файла /etc/passwd в класс,
используйте</p>

<dir>
    <dir>
            <font color="#008000">FL/etc/passwd %[^:]</font>
        </dir>
    
</dir>

<p>Это будет читать каждую строку до
первого двоеточия.</p>

<dir>
    <dir>
            <a name="toc54"></a><b>5.4. M -
                Определение Почтовой
                программы</b>
        </dir>
    
</dir>

<p>В этой строке определяются
почтовые программы и их интерфейсы.
Формат такой:</p>

<dir>
    <dir>
            <font color="#008000"><b>Mname, {field=value}*</b></font>
        </dir>
    
</dir>

<p>Где name - имя почтовой программы
(используется только внутренне), а
пары &quot;field=name&quot; определяют
атрибуты почтовой программы. Поля
такие:</p>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="20%">Path</td>
        <td valign="top" width="80%">Путь к почтовой
        программе</td>
    </tr>
    <tr>
        <td valign="top" width="20%">Flags</td>
        <td valign="top" width="80%">Специальные
        флаги для этой почтовой
        программы</td>
    </tr>
    <tr>
        <td valign="top" width="20%">Sender</td>
        <td valign="top" width="80%">Набор(ы) правил
        перезаписи для адресов
        отправителя </td>
    </tr>
    <tr>
        <td valign="top" width="20%">Recipient</td>
        <td valign="top" width="80%">Набор(ы) правил
        перезаписи для адреса
        получателя</td>
    </tr>
    <tr>
        <td valign="top" width="20%">Argv</td>
        <td valign="top" width="80%">Вектор
        аргументов, передаваемый в
        почтовую программу</td>
    </tr>
    <tr>
        <td valign="top" width="20%">Eol</td>
        <td valign="top" width="80%">Строка end-of-line
        для этой почтовой программы</td>
    </tr>
    <tr>
        <td valign="top" width="20%">Maxsize</td>
        <td valign="top" width="80%">Максимальный
        размер сообщения для этой
        почтовой программы</td>
    </tr>
    <tr>
        <td valign="top" width="20%">Linelimit</td>
        <td valign="top" width="80%">Максимальная
        длина линии в теле сообщения</td>
    </tr>
    <tr>
        <td valign="top" width="20%">Directory</td>
        <td valign="top" width="80%">Рабочий
        каталог для почтовой программы</td>
    </tr>
    <tr>
        <td valign="top" width="20%">Userid</td>
        <td valign="top" width="80%">Идентификаторы
        пользователя и группы для
        запуска</td>
    </tr>
    <tr>
        <td valign="top" width="20%">Nice</td>
        <td valign="top" width="80%">Инкремент nice(2)
        для почтовой программы</td>
    </tr>
    <tr>
        <td valign="top" width="20%">Charset</td>
        <td valign="top" width="80%">Набор символов
        по умолчанию для 8-битных
        символов</td>
    </tr>
    <tr>
        <td valign="top" width="20%">Type</td>
        <td valign="top" width="80%">Информация о
        типе MTS (используется для
        сообщений об ошибках)</td>
    </tr>
</table>

<p>В имени поля проверяется только
первый символ.</p>

<p>Нижеописанные флаги могут быть
установлены в описании почтовой
программы. Любые другие флаги могут
свободно использоваться для
условных заголовков в сообщениях
для определенных почтовых
программ. Флаги, отмеченные |,не
интерпретируются бинарником sendmail;
они обычно используются для
корреляции с флагами в строке H.
Флаги, отмеченные знаком |,
применяются в почтовой программе
для адреса отправителя, хотя обычно
это делает принимающая почтовая
программа.</p>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="25%"><p align="center">a</p>
        </td>
        <td valign="top" width="75%">Запустить
        протокол Extended SMTP (ESMTP)
        (определенный в RFC 1651, 1652, и 1653).
        Этот флаг по умолчанию включен,
        если приветственное сообщение
        SMTP содержит слово &quot;ESMTP&quot;. </td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">A</p>
        </td>
        <td valign="top" width="75%">Просмотреть
        пользовательскую часть адреса
        в базе данных псевдонимов.
        Обычно выставляется только для
        локальных почтовых программ.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">b</p>
        </td>
        <td valign="top" width="75%">Проставить
        пустую строку в конце
        сообщения. Это предназначено
        для работы с некоторыми
        глупыми версиями /bin/mail,
        требующими пустую строку, но
        сами ее не проставляющие. </td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">c</p>
        </td>
        <td valign="top" width="75%">Не включать в
        адрес комментарии. Это должно
        использоваться, только если вы
        должны работать с удаленной
        почтовой программой, не
        понимающей комментариев.
        Обрезает адрес из вида &quot;Phrase
        &lt;address&gt;&quot; или &quot;address
        (Comment)&quot; до просто &quot;address&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">C</p>
        </td>
        <td valign="top" width="75%">Если почта <b>получена</b>
        от почтовой программы с этим
        флагом, любые адреса в
        заголовке, не имеющие знака
        (&quot;@&quot;) после перезаписи
        набором правил три будут иметь
        окончание &quot;@domain&quot; из адреса
        отправителя, взятого с
        конверта. Это позволяет почту с
        заголовками типа:
        <p><font color="#008000">From: usera@hosta><br>
        To: userb@hostb, userc</font></p>
        <p>Автоматически переписывать
        как:</p>
        <p><font color="#008000">From: usera@hosta<br>
        To: userb@hostb, userc@hosta</font></p>
        <p>Однако это не всегда работает
        надежно.</p>
        </td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">d</p>
        </td>
        <td valign="top" width="75%">Не включать
        угловые скобки вокруг адресов
        с синтаксисом путевого адреса.
        Полезно для почтовых программ,
        передающих адреса в оболочку,
        которая может
        интерпретировать угловые
        скобки как перенаправление
        ввода/вывода.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">D</p>
        </td>
        <td valign="top" width="75%">Эта почтовая
        программа хочет в заголовке
        строку &quot;Date:&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">e</p>
        </td>
        <td valign="top" width="75%">Эта почтовая
        программа слишком медленна,
        поэтому попробуй избежать
        нормального соединения; любое
        необходимое соединение
        произойдет во время обработки
        очереди.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">E</p>
        </td>
        <td valign="top" width="75%">Избегать
        строки, начинающиеся с
        &quot;From&quot; в сообщении с знаком
        &quot;&gt;&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">f</p>
        </td>
        <td valign="top" width="75%">Почтовая
        программа хочет флаг <b>-f</b> from,
        но только если это операция
        пересылки в сети (то есть,
        почтовая программа выдаст
        ошибку, если выполняющий
        пользователь не имеет
        специальных прав).</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">F|</p>
        </td>
        <td valign="top" width="75%">Эта почтовая
        программа хочет строку
        заголовка &quot;From:&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">g</p>
        </td>
        <td valign="top" width="75%">Обычно, sendmail
        посылает внутренне созданную
        почту (например, сообщения об
        ошибках) используя нулевой
        обратный адрес, как это
        требуется RFC 1123. Однако,
        некоторые почтовые программы
        не принимают нулевой обратный
        адрес. Если это необходимо, вы
        можете установить флаг <b>g</b>,
        чтобы sendmail не следовал
        стандартам; сообщения об
        ошибках будут посланы от
        MAILER-DAEMON (на самом деле, значение
        макроса <b>$n</b>).</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">h</p>
        </td>
        <td valign="top" width="75%">Символы
        верхнего регистра в именах
        хостов для этой почтовой
        программы должны быть
        сохранены.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">i</p>
        </td>
        <td valign="top" width="75%">Произвести
        перезапись пользовательской
        базы данных на конвертный
        адрес отправителя.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">I</p>
        </td>
        <td valign="top" width="75%">Эта почтовая
        программа будет говорить на SMTP
        с другим sendmail - поэтому он может
        использовать некоторые
        специальные особенности
        протокола. Эта опция не
        требуется (т.е.. если эта опция
        опущена, передача все равно
        будет работать нормально, хотя
        не настолько эффективно, как
        могла бы).</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">j</p>
        </td>
        <td valign="top" width="75%">Произвести
        перезапись пользовательской
        базы данных на получателей и
        отправителей.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">k</p>
        </td>
        <td valign="top" width="75%">Обычно, когда
        sendmail соединяется с хостом
        посредством SMTP, он проверяет,
        не соединился ли он случайно
        сам с собой, что может
        случиться, если sendmail имеет
        неправильную конфигурацию, или
        если сетевой интерфейс
        закольцован. Этот флаг
        выключает проверку петли. Он
        должен использоваться только в
        очень необычных случаях.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">K</p>
        </td>
        <td valign="top" width="75%">В настоящее
        время не работает.
        Зарезервирован для разбиения
        на куски.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">l</p>
        </td>
        <td valign="top" width="75%">Эта почтовая
        программа локальна (т.е., будет
        осуществлена последняя
        доставка).</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">L</p>
        </td>
        <td valign="top" width="75%">Ограничивает
        длину строк, как определено в
        RFC821. <p>Эта обесцененная опция
        должна быть заменена почтовым
        объявлением <b>L=</b>. По
        историческим причинам, флаг <b>L</b>
        также выставляет флаг <b>7</b>.</p>
        </td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">m</p>
        </td>
        <td valign="top" width="75%">Эта почтовая
        программа может разослать
        нескольким пользователям на
        одном хосте в одну транзакцию.
        Когда в argv части определения
        почтовой программы
        встречается макрос <b>$u</b>, это
        поле будет повторено
        необходимое количество раз для
        всех подходящих пользователей.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">M|</p>
        </td>
        <td valign="top" width="75%">Эта почтовая
        программа хочет строку
        заголовка &quot;Message Id:&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">n</p>
        </td>
        <td valign="top" width="75%">Не вставлять в
        начале сообщения &quot;From&quot; в
        стиле UNIX.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">o</p>
        </td>
        <td valign="top" width="75%">Всегда
        работать как хозяин почтового
        ящика получателя. Обычно sendmail
        работает как отправитель для
        локально генерируемой почты
        или как &quot;демон&quot; (на самом
        деле, пользователь
        определяется в опции <b>u</b>) при
        получении сетевой почты.
        Большинству локальных
        почтовых программ требуется
        обычное поведение, которое не
        позволит установить
        конвертный адрес отправителя,
        пока почтовая программа
        работает как демон. Этот флаг
        игнорируется, если выставлен
        флаг <b>S</b>.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">p</p>
        </td>
        <td valign="top" width="75%">Использовать
        обратный путь в стиле route-addr в
        команде SMTP &quot;MAIL FROM:&quot; вместо
        просто обратного адреса; хотя
        это и требуется в секции 3.1 RFC821,
        многие хосты не обрабатывают
        нормально обратные пути.
        Обратные пути осуждаются в RFC
        1123.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">P|</p>
        </td>
        <td valign="top" width="75%">Эта почтовая
        программа хочет строку
        &quot;Return-Path:&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">q</p>
        </td>
        <td valign="top" width="75%">Когда адрес,
        разрешаемый в этой почтовой
        программе, проверен (команда SMTP
        VRFY), генерировать ответы 250
        вместо ответов 252. Это будет
        означать, что адрес локальный.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">r</p>
        </td>
        <td valign="top" width="75%">То же, что и <b>f</b>,
        но посылает флаг <b>-r</b>.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">R</p>
        </td>
        <td valign="top" width="75%">Открыть
        соединение SMTP на
        &quot;безопасном&quot; порту.
        &quot;Безопасные&quot; порты не
        являются таковыми, за
        исключением UNIX машин, поэтому
        не ясно, даст ли это что-нибудь.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">s</p>
        </td>
        <td valign="top" width="75%">Обрезать
        символы квотирования (&quot; и \) у
        адреса перед вызовом почтовой
        программы.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">S</p>
        </td>
        <td valign="top" width="75%">Не
        переустанавливать userid перед
        вызовом почтовой программы. <p>Это
        может быть использовано в
        безопасной среде, где sendmail
        запущен от root. Это может быть
        использовано для избежания
        поддельных адресов. Если также
        определено поле <b>U=</b>, это флаг
        заставит id пользователя всегда
        быть установленным на этого
        пользователя и группу (вместо
        того, чтобы оставить его как у
        root).</p>
        </td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">u</p>
        </td>
        <td valign="top" width="75%">Символы
        верхнего регистра в именах
        пользователей для этой
        почтовой программы должны быть
        сохранены.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">U</p>
        </td>
        <td valign="top" width="75%">Эта почтовая
        программа хочет строки
        &quot;From&quot; в стиле UUCP с уродливым
        &quot;remote from &lt;host&gt;&quot; в конце.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">w</p>
        </td>
        <td valign="top" width="75%">Пользователь
        должен иметь действительный
        бюджет на этой машине, т.е., getpwnam
        должен быть успешным. Если это
        не так, почта не будет
        доставлена. Это требуется для
        работы &quot;.forward&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">x</p>
        </td>
        <td valign="top" width="75%">Эта почтовая
        программа хочет строку
        заголовка &quot;Full-Name:&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">X</p>
        </td>
        <td valign="top" width="75%">Эта программа
        хочет использовать алгоритм
        скрытых точек, как определено в
        RFC821; смысл такой: любая строка,
        начинающаяся с точки, будет
        иметь предваряющую ее точку
        (для того, чтобы ее обрезали на
        другом конце). Это гарантирует,
        что строки в сообщении,
        содержащие точку не прекратят
        сообщение преждевременно.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">z</p>
        </td>
        <td valign="top" width="75%">Запустить
        Протокол Локальной Доставки
        Почты (Local Mail Transfer Protocol, LMTP)
        между sendmail и локальной
        почтовой программой. Это
        вариант SMTP определенный в RFC 2033,
        специально разработанный для
        зоставки в локальный почтовый
        ящик.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">0</p>
        </td>
        <td valign="top" width="75%">Не
        просматривать записи MX для
        хостов, посылающих посредством
        SMTP.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">3</p>
        </td>
        <td valign="top" width="75%">Расширить
        список символов,
        преобразованных в =XX запись при
        преобразовании в Quoted-Printable для
        того, чтобы не потерять те,
        которые не преобразуются в
        чистом виде между ASCII и EBCDIC.
        Полезно, если в вашем узле
        имеется мэйнфрэймы IBM.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">5</p>
        </td>
        <td valign="top" width="75%">Если для этого
        адреса не найдено псевдонимов,
        пропустить адрес через набор
        правил 5 для другого возможного
        разрешения. Это предназначено
        для перенаправления почты в
        другое альтернативное место
        доставки.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">7</p>
        </td>
        <td valign="top" width="75%">Обрезать весь
        вывод до семи бит. Стоит по
        умолчанию, если установлен
        флаг <b>L</b>. Заметьте, что
        очистка этой опции не
        достаточна, чтобы через sendmail
        полностью проходили
        восьмибитные данные. Если
        опция <b>7</b> выставлена, а она в
        основном всегда выставлена, то
        восьмибитные данные на входе
        будут обрезаться. Нужно
        отметить, что эта опция
        затрагивает только сообщения,
        которые не имеют примененного
        MIME преобразования 8-&gt;7 бит.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">8</p>
        </td>
        <td valign="top" width="75%">Если
        выставлена, то эта почтовая
        программа принимает для
        отсылки восьмибитные данные;
        обычная попытка MIME
        преобразования 8-&gt;7 бит будет
        пропущена.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">9</p>
        </td>
        <td valign="top" width="75%">Если
        выставлена, производить
        ограниченные MIME
        преобразования 7-&gt;8 бит. Эти
        преобразования ограничены
        данными типа text/plain.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">:</p>
        </td>
        <td valign="top" width="75%">Проверить
        адреса, не начинаются ли они с
        &quot;:include:&quot;; если это так,
        обратить их к почтовой
        программе &quot;*include*&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">|</p>
        </td>
        <td valign="top" width="75%">Проверить
        адреса, не начинаются ли они с
        &quot;|&quot;; &quot;prog&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">/</p>
        </td>
        <td valign="top" width="75%">Проверить
        адреса, не начинаются ли они с
        &quot;/&quot;; если это так, обратить
        их к почтовой программе
        &quot;*file*&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="25%"><p align="center">@</p>
        </td>
        <td valign="top" width="75%">Просмотреть
        адреса в пользовательской базе
        данных.</td>
    </tr>
</table>

<p>Конфигурационные файлы до уровня
6 предполагают опции &quot;A&quot;,
&quot;w&quot;, &quot;5&quot;, &quot;:&quot;, &quot;|&quot;,
&quot;/&quot;, и &quot;@&quot; в почтовой
программе называющейся &quot;local&quot;.</p>

<p>Почтовая программа со
специальным именем &quot;error&quot; может
быть использована для генерации
сообщений об ошибках пользователя.
Поле хоста (опционально) содержит
возвращаемый статус выхода, а поле
пользователя - распечатываемое
сообщение. Статус выхода может быть
числом или одним из значений USAGE,
NOUSER, NOHOST, UNAVAILABLE, SOFTWARE, TEMPFAIL, PROTOCOL, или
CONFIG, возвращающим соответствующий
код выхода EX_, или
усовершенствованный код ошибки,
описанный в RFC 1893, Enhanced Mail System Status
Codes. Например, вхождение:</p>

<dir>
    <dir>
            <font color="#008000">$#error $@ NOHOST $: Host
                unknown in this domain</font>
        </dir>
    
</dir>

<p>в RHS правила вызовет генерацию
указанной ошибки, и, если LHS
совпадает, будет возвращен статус
выхода &quot;Host unknown&quot;. Эта почтовая
программа работоспособна только в
наборах правил 0, 5, или одном из
наборов правил check_*.</p>

<p>Почтовая программа со
специальным именем &quot;discard&quot;
заставляет выкидывать любую почту,
посланную к ней, но в то же время
считать, что она была успешно
доставлена.</p>

<p>Почтовая программа, называющаяся
&quot;local&quot; должна быть определена в
каждом файле конфигурации. Она
используется для доставки
локальной почты, и обслуживается
особо несколькими образами. В
добавок, три другие почтовые
программы, называющиеся &quot;prog&quot;,
&quot;*file*&quot;, и &quot;*include*&quot; могут быть
определены для настройки доставки
сообщений в программы, файлы и
списки :include: соответственно. Их
умолчания:</p>

<dir>
    <dir>
            <font color="#008000">Mprog, P=/bin/sh, F=lsD, A=sh -c $u
            <p>M*file*, P=/dev/null, F=lsDFMPEu, A=FILE</p>
            <p>M*include*, P=/dev/null, F=su, A=INCLUDE</font></p>
            
        </dir>
    
</dir>

<p>Наборы перезаписи Sender и Recipient
могут быть как просто
идентификатором набора правил, так
и двумя идентификаторами,
разделенными слешем; в этом случае,
первый набор перезаписи
применяется к конвертным адресам, а
второй применяется к заголовкам.</p>

<p>Directory - это на самом деле
перечисление путей для просмотра с
разделителем &quot;:&quot;. Например,
определение &quot;D=$z:/&quot; сначала
опробует выполнение в домашнем
каталоге получателя; если он
недоступен, то попробует
выполнение в корневом каталоге
файловой системы. Это
предназначено для использования
только в почтовой программе
&quot;prog&quot;, из-за того, что некоторые
оболочки (типа csh) отказываются
работать, если они не могут
прочитать домашний каталог.
Вследствие того, что каталог
очереди обычно не доступен для
чтения непривилегированным
пользователям, сценарии csh, как
принимающие программы не смогут
работать.</p>

<p>Userid определяет идентификатор
пользователя и группы по умолчанию
для работы, заменяя собой опцию <b>DefaultUser</b>.
Если флаг <b>S</b> почтовой программы
также определен, то этот
пользователь и группа используется
для работы при всех
обстоятельствах. Это может быть
задано как user:group для выставки
идентификаторов пользователя и
группы одновременно; это могут быть
целые числа или символические
имена, просматриваемые в файлах passwd
и group соответственно. Если
определено только символическое
имя пользователя, в качестве
идентификатора группы
используется идентификатор,
прописанный для этого пользователя
в файле passwd.</p>

<p>Поле Charset используется при
преобразовании сообщения в MIME; этот
набор символов используется в
заголовке Content-Type:. Если он не
установлен, используется опция <b>DefaultCharset</b>,
если же и она не назначена,
используется значение
&quot;unknown-8bit&quot;. <b>Внимание:</b> это
поле применяется к почтовой
программе отправителя, а не
получателя. Например, конвертный
адрес отправителя принадлежит
локальной сети, а получателя -
внешней, набор символов будет
установлен из поля Charset= для
локальной сетевой почтовой
программы, а не для внешней.</p>

<p>Поле Type= устанавливает тип
информации, используемой в
сообщениях об ошибках MIME, как
определено в RFC 1894. На самом деле это
три значения, разделенные слешами:
MTAtype (то есть, описание того, как
называются хосты), тип адреса
(описание адресов электронной
почты), и тип диагностики (описание
кодов диагностических ошибок).
Каждое из них должно быть
зарегистрированным значением, или
начинаться с &quot;X-&quot;. По умолчанию
&quot;dns/rfc822/smtp&quot;.</p>

<dir>
    <dir>
            <a name="toc55"></a><b>5.5. H -
                Определение Заголовка</b>
        </dir>
    
</dir>

<p>Формат строк заголовка,
вставляемых sendmail в сообщение,
определяется строкой <b>H</b>.
Синтаксис этой строки:</p>

<dir>
    <dir>
            <font color="#008000"><b>H[?mflags?]hname:
                htemplate</b></font>
        </dir>
    
</dir>

<p>Строки-продолжения в этом
определении отражаются прямо в
выходящее сообщение. Макрос htemplate
раскрывается до подстановки в
сообщение. Если определена mflags
(окруженная знаками вопроса), как
минимум один из указанных флагов
должен иметь место в определении
почтовой программы для этого
заголовка для автоматического
вывода. Если один из этих
заголовков имеется на входе, он
отражается на выход не зависимо от
этих флагов.</p>

<p>Некоторые заголовки имеют
специальную семантику, описываемую
позднее.</p>

<p>Вторичный синтаксис позволяет
производить проверку заголовков в
том виде, как они были считаны. Для
включения проверки, используйте:</p>

<p><font color="#008000"><b>H</b>Header<b>:</b> <b>$&gt;</b>Ruleset</font></p>

<p>Указанный набор правил (Ruleset)
вызывается для указанного
заголовка Header, и может возвращать <b>$#error</b>
для отказа от сообщения, или <b>$#discard</b>
для сброса сообщения (как и в
остальных наборах правил <b>check_</b>*).
Заголовок рассматривается как
структурированное поле, то есть,
комментарии (в кавычках) перед
обработкой удаляются.</p>

<p>Например, следующие строки в
конфигурации:</p>

<dir>
    <dir>
            <dir>
                    <dir>
                            <font color="#008000">HMessage-Id: $&gt;CheckMessageId
                            <p><SCheckMessageId</p>
                            <p>R&lt; $+ @ $+ &gt;$@ OK</p>
                            <p>R$* $#error $: Illegal Message-Id header</font></p>
                            
                        </dir>
                </dir>
            
        </dir>
    
</dir>

<p>Приведут к отказу от любого
сообщения, имеющего заголовок в
любой из следующих форм:</p>

<dir>
    <dir>
            <dir>
                    <dir>
                            <font color="#008000">Message-Id: &lt;&gt;
                            <p>Message-Id: любой текст</p>
                            <p>Message-Id: &lt;легальный текст@домен&gt; дополнения</font></p>
                            
                        </dir>
                    
                </dir>
                <p><a name="toc56"></a><b>5.6. O -
                Опция Назначения</b></p>
            
        </dir>
    
</dir>

<p>Существует большое количество
глобальных опций, которые могут
быть назначены из файла
конфигурации. Опции представляются
целыми словами; некоторые, для
обратной совместимости, можно
также представлять в виде
отдельных букв. Синтаксис таков:</p>

<dir>
    <dir>
            <font color="#008000"><b>Oопция=значение</b></font>
        </dir>
    
</dir>

<p>Это назначает опции опция
указанное значение. Заметьте, что
между буквой &quot;O&quot; и именем опции
должен быть пробел. Раньше это было
так:</p>

<dir>
    <dir>
            <font color="#008000"><b>O</b>oзначение</font>
        </dir>
    
</dir>

<p>где опция o - один символ. В
зависимости от опции, значение
может быть строкой, целым числом,
булевым (с допустимыми значениями
&quot;t&quot;, &quot;T&quot;, &quot;f&quot;, или
&quot;F&quot;; по умолчанию TRUE), или
интервалом времени.</p>

<p>Поддерживаемые опции (со старыми,
однобуквенными именами в
квадратных скобках):</p>

<p><font color="#008000">AliasFile=spec, spec, ...</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [A] Определяет
                                возможный файл(ы)
                                псевдонимов.
                                Каждый spec должен
                                быть в виде &quot;class<b>:</b>
                                file&quot; где class<b>:</b>
                                опционально и по
                                умолчанию равно
                                &quot;implicit&quot;. В
                                зависимости от
                                того, как
                                скомпилирован
                                sendmail, возможные
                                классы - это
                                &quot;implicit&quot;
                                (искать в
                                вкомпилированном
                                списке типов
                                файлов
                                псевдонимов, для
                                обратной
                                совместимости),
                                &quot;hash&quot; (если
                                определено NEWDB),
                                &quot;dbm&quot; (если
                                определено NDBM),
                                &quot;stab&quot;
                                (внутренняя
                                таблица символов -
                                обычно не
                                используется,
                                кроме случаев,
                                если у вас нет
                                других средств
                                просмотра баз
                                данных), или
                                &quot;nis&quot; (если
                                определено NIS).
                                Если указан
                                список specs, sendmail
                                просматривает их
                                по порядку.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">AliasWait=timeout</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [a] Если
                                установлено, при
                                запуске ждать до
                                timeout (мо умолчанию
                                в минутах)
                                появления
                                вхождения
                                &quot;@:@&quot; в базе
                                данных
                                псевдонимов. Если
                                оно не появляется
                                в течение этого
                                интервала,
                                перестроить базу
                                данных (если
                                выставлена опция <b>AutoRebuildAliases</b>)
                                или сделать
                                предупреждение.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">AllowBogusHELO</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Если
                                выставлена,
                                позволяется
                                команда HELO SMTP не
                                включающая имени
                                хоста. Выставка
                                этой опции
                                нарушает секцию
                                5.2.5 RFC 1123, но
                                необходима для
                                работы с
                                некоторыми
                                клиентами SMTP. Если
                                значение имеется,
                                оно все равно
                                проверяется на
                                легитимность.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">AutoRebuildAliases</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [D] Если
                                выставлена, при
                                необходимости и
                                возможности
                                перестраивать
                                базу данных
                                псевдонимов. Если
                                эта опция не
                                выставлена, sendmail
                                никогда не будет
                                перестраивать
                                базу данных
                                псевдонимов, пока
                                это не будет явно
                                запрошено
                                использованием -<b>bi</b>.
                                Не рекомендуется -
                                может привести к
                                переполнению
                                памяти.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">BlankSub=c</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [B] Устанавливает
                                символ замены
                                пробелов c.
                                Неквотированные
                                пробелы в адресах
                                заменяются этим
                                символом. По
                                умолчанию пробел
                                (т.е. замена не
                                производится).
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">CheckAliases</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [n] Проверять RHS
                                псевдонимов при
                                перестройке базы
                                данных
                                псевдонимов.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">CheckpointInterval=N</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [C] Контрольные
                                точки очереди
                                каждые N (по
                                умолчанию 10)
                                посланных
                                адресов. Если ваша
                                система падает во
                                время получения
                                большого списка,
                                это предотвратит
                                повторную
                                передачу на все
                                адреса, кроме
                                последних.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">ClassFactor=fact</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [z] Указанный
                                коэффициент (factor)
                                умножается на
                                класс сообщения
                                (определенный
                                полем Precedence: в
                                пользовательском
                                заголовке и
                                строками <b>P</b> в
                                файле
                                конфигурации) и
                                вычитается из
                                приоритета. Таким
                                образом,
                                сообщения с более
                                высоким Priority:
                                будут
                                предпочитаться.
                                По умолчанию 1800.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">ColonOkInAddr</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Если
                                выставлена, в e-mail
                                адресах
                                дозволяются
                                двоеточия
                                (например,
                                &quot;host:user&quot;). Если
                                не выставлена,
                                двоеточия
                                (согласно RFC 822)
                                означают начало
                                конструкции
                                группы (&quot;groupname:
                                member1, member2, ...
                                memberN;&quot;). Всегда
                                принимаются
                                дублированные
                                двоеточия
                                (&quot;nodename::user&quot;) и
                                понимается
                                соответствующее
                                вложение routeaddr
                                (&quot;&lt;@relay:user@host&gt;&quot;).
                                Более того, эта
                                опция по
                                умолчанию
                                включена, если
                                версия
                                конфигурации ниже
                                6 (для обратной
                                совместимости).
                                Однако, для полной
                                совместимости с RFC
                                822, она должна быть
                                выключена.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">ConnectionCacheSize=N</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [k] Максимальное
                                число открытых
                                соединений,
                                которые будут
                                кэшированы
                                одновременно. По
                                умолчанию одно.
                                Это задерживает
                                закрытие текущего
                                соединения, до тех
                                пор, пока этот
                                процесс sendmail не
                                захочет
                                соединиться с
                                другим хостом, или
                                завершится.
                                Установка этого
                                значения в ноль
                                будет означать
                                немедленное
                                закрытие
                                соединения. Из-за
                                потребления
                                файловых
                                дескрипторов, кэш
                                соединений должен
                                быть небольшим: 4
                                вероятно является
                                практическим
                                максимумом.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">ConnectionCacheTimeout=timeout</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [K] Максимальное
                                время бездействия
                                кэшированного
                                соединения. При
                                превышении этого
                                времени,
                                соединение
                                немедленно
                                закрывается. Это
                                значение должно
                                быть небольшим
                                (порядка десяти
                                минут). Перед
                                использованием
                                кэшированного
                                соединения, sendmail
                                всегда посылает
                                команду RSET для
                                проверки
                                соединения; если
                                она
                                проваливается, он
                                заново открывает
                                соединение. Смысл
                                этой опции - быть
                                хорошим соседом
                                по сети и не
                                использовать
                                слишком долго
                                ресурсы другого
                                конца. По
                                умолчанию 5 минут.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">ConnectionRateThrottle=N</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Если
                                установлено
                                положительное
                                значение,
                                позволить более
                                чем N входящих
                                демонов
                                соединений на
                                протяжении одной
                                секунды. Это
                                предназначено для
                                сглаживания пиков
                                и уменьшения
                                средней загрузки.
                                По умолчанию ноль
                                (никаких
                                ограничений).
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">DaemonPortOptions=options</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [O] Устанавливает
                                опции сервера SMTP.
                                Опции - пары
                                ключ=значение.
                                Известные ключи:
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="22%">Port</td>
        <td valign="top" width="78%">Имя/номер
        рабочего порта (по умолчанию
        &quot;smtp&quot;)</td>
    </tr>
    <tr>
        <td valign="top" width="22%">Addr</td>
        <td valign="top" width="78%">Адресная маска
        (по умолчанию INADDR_ANY)</td>
    </tr>
    <tr>
        <td valign="top" width="22%">Family</td>
        <td valign="top" width="78%">Семейство
        адресов (по умолчанию INET)</td>
    </tr>
    <tr>
        <td valign="top" width="22%">Listen</td>
        <td valign="top" width="78%">Размер очереди
        прослушивания (по умолчанию 10)</td>
    </tr>
    <tr>
        <td valign="top" width="22%">SndBufSize</td>
        <td valign="top" width="78%">Размер буфера
        TCP на отправку</td>
    </tr>
    <tr>
        <td valign="top" width="22%">RcvBufSize</td>
        <td valign="top" width="78%">Размер буфера
        TCP на прием</td>
    </tr>
</table>

<dir>
    <dir>
            <dir>
                    <dir>
                            Адресная маска
                                может быть
                                числовым адресом
                                в записи с точками
                                или сетевым
                                именем.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">DefaultCharSet=charset</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Когда
                                сообщение,
                                имеющее 8-битные
                                символы, но не в
                                формате MIME,
                                конвертируется в
                                MIME (см. опцию
                                EightBitMode) в
                                заголовок Content-Type:
                                должен быть
                                включен набор
                                символов. Этот
                                набор символов
                                обычно
                                назначается из
                                поля Charset=
                                дескриптора
                                почтовой
                                программы. Если
                                оно не
                                установлено,
                                используется
                                значение этой
                                опции. Если эта
                                опция не
                                установлена,
                                используется
                                значение
                                &quot;unknown-8bit&quot;.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">DefaultUser=user:group</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [u] Выставляет
                                идентификатор
                                пользователя по
                                умолчанию для
                                почтовых программ
                                равным user:group. Если
                                group опущена, а user -
                                имя пользователя
                                (в
                                противоположность
                                числовому
                                идентификатору
                                пользователя),
                                используется
                                группа по
                                умолчанию для
                                этого
                                пользователя из
                                файла /etc/passwd. И user
                                и group могут быть
                                числами. Почтовые
                                программы без
                                флага S в описании
                                почтовой
                                программы будут
                                работать от этого
                                пользователя. По
                                умолчанию 1:1.
                                Значение также
                                может быть задано
                                как символическое
                                имя пользователя<a
                                href="sendmail5.html#r6"><sup>6</sup></a><a
                                name="b6"></a>.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">DeliveryMode=x</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [d] Производить
                                доставку в режиме
                                x. Легальные
                                режимы:
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="15%">i</td>
        <td valign="top" width="85%">Доставлять
        интерактивно (синхронно)</td>
    </tr>
    <tr>
        <td valign="top" width="15%">b</td>
        <td valign="top" width="85%">Доставлять в
        фоне (асинхронно)</td>
    </tr>
    <tr>
        <td valign="top" width="15%">q</td>
        <td valign="top" width="85%">Просто класть
        сообщение в очередь (доставка
        во время обработки очереди)</td>
    </tr>
    <tr>
        <td valign="top" width="15%">d</td>
        <td valign="top" width="85%">Отложить
        доставку и все преобразования
        (доставка во время обработки
        очереди)</td>
    </tr>
</table>

<dir>
    <dir>
            <dir>
                    <dir>
                            По умолчанию
                                &quot;b&quot;, если не
                                определена ни
                                одна опция, и
                                &quot;i&quot; - если
                                определена, но без
                                аргументов (т.е.,
                                &quot;Od&quot;
                                эквивалентно
                                &quot;Odi&quot;). Флаг
                                командной строки <b>-v</b>
                                выставляет ее в <b>i</b>.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">DialDelay=sleeptime</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Сетевые
                                соединения
                                Dial-on-demand могут
                                видеть таймауты,
                                если соединение
                                открылось до
                                установки звонка.
                                Если этой опцией
                                установлен
                                интервал времени,
                                а время
                                соединения
                                истекает во время
                                первой попытки
                                соединения, sendmail
                                заснет на это
                                время и попробует
                                снова. Это должно
                                дать вашей
                                системе время для
                                установки
                                соединения с
                                вашим поставщиком
                                услуг. По
                                умолчанию
                                измеряется в
                                секундах, поэтому
                                &quot;DialDelay=5&quot;
                                использует
                                пятисекундную
                                задержку. По
                                умолчанию ноль
                                (без повторной
                                передачи).
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">DontBlameSendmail=option,option,...</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Во
                                избежание
                                возможных попыток
                                взлома,
                                основанных на
                                открытых на
                                запись для группы
                                и всех остальных
                                пользователей
                                файлах и
                                каталогах, sendmail
                                производит
                                параноидальную
                                проверкупри
                                открытии
                                большинства из
                                используемых им
                                файлов. Если, по
                                некоторой
                                причине, вам
                                просто необходимо
                                иметь каталог /etc
                                открытым на
                                запись для группы,
                                то вам нужно
                                отключить эту
                                проверку (за счет
                                снижения уровня
                                безопасности
                                вашей системы и
                                большей ее
                                уязвимости).
                                Аргументами
                                являются
                                отдельные опции,
                                отключающие
                                проверку:<p><font
                                color="#008000">Safe<br>
                                AssumeSafeChown<br>
                                ClassFileInUnsafeDirPath<br>
                                ErrorHeaderInUnsafeDirPath<br>
                                FileDeliveryToHardLink<br>
                                FileDeliveryToSymLink<br>
                                ForwardFileInUnsafeDirPath <br>
                                ForwardFileInUnsafeDirPathSafe <br>
                                ForwardFileIngroupWritableDirPath
                                <br>
                                GroupWritableAliasFile <br>
                                GroupWritableDirPathSafe <br>
                                GroupWritableForwardFileSafe <br>
                                GroupWritableIncludeFileSafe <br>
                                HelpFileinUnsafeDirPath <br>
                                IncludeFileInUnsafeDirPath <br>
                                IncludeFileInUnsafeDirPathSafe <br>
                                IncludeFileIngroupWritableDirPath
                                <br>
                                LinkedAliasFileInWritableDir <br>
                                LinkedClassFileInWritableDir <br>
                                LinkedForwardFileInWritableDir <br>
                                LinkedIncludeFileInWritableDir <br>
                                LinkedMapInWritableDir <br>
                                LinkedServiceSwitchFileInWritableDir
                                <br>
                                MapInUnsafeDirPath <br>
                                RunProgramInUnsafeDirPath <br>
                                RunWritableProgram <br>
                                WorldWritableAliasFile <br>
                                WriteMapToHardLink<br>
                                WriteMapToSymLink<br>
                                WriteStatsToHardLink<br>
                                WriteStatsToSymLink</font></p>
                                <p><b>Safe</b> - это
                                умолчание. Выше
                                имеется более
                                подробное
                                описание этих
                                флагов. <b>Использование
                                этой опции не
                                рекомендуется.</b></p>
                            
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">DontExpandCnames</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Стандарты
                                говорят, что
                                адреса хостов,
                                используемые в
                                почтовом
                                сообщении должны
                                быть полностью
                                каноническими.
                                Например, если ваш
                                хост имеет имя
                                &quot;Cruft.Foo.ORG&quot;, а
                                также имеет
                                псевдоним
                                &quot;FTP.Foo.ORG&quot;,
                                всегда должно
                                использоваться
                                первое имя. Это
                                навязывается во
                                время
                                канонификации
                                имени хоста
                                (просмотрах $[ ... $]).
                                Если эта опция
                                выставлена,
                                протоколы
                                игнорируются, и
                                делаются
                                &quot;неправильные&quot;
                                вещи. Однако, IETF
                                потихоньку
                                продвигается к
                                изменению этого
                                стандарта,
                                поэтому такое
                                поведение может
                                стать приемлемым.
                                Но заметьте, что
                                последующие
                                передающие хосты
                                все еще могут
                                переписать адрес
                                в настоящее
                                каноническое имя.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">DontInitGroups</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Если
                                установлена, sendmail
                                будет избегать
                                вызова
                                initgroups(3).Если у вас
                                работает NIS, это
                                вызовет
                                последовательный
                                просмотр карты
                                groups.byname, что может
                                сильно
                                перегрузить ваш
                                сервер NIS в
                                большом домене.
                                Это даст то, что
                                если только
                                группа найденная
                                для пользователей
                                будет их главной
                                группой, что
                                сделает доступ к
                                файлам несколько
                                более
                                ограниченным. Не
                                имеет никакого
                                эффекта, если
                                система не имеет
                                списков групп.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">DontProbeInterfaces</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Sendmail при
                                запуске обычно
                                находит имена для
                                всех активных (на
                                вашей машине)
                                интерфейсов и
                                добавляет их
                                имена в класс
                                известных
                                псевдонимов хоста
                                <b>$=w</b>. Если у вас
                                большое
                                количество
                                виртуальных
                                интерфейсов, или
                                если обратный
                                просмотр вашего DNS
                                медленный, то это
                                может занять
                                некоторое время.
                                Эта опция
                                отключает такой
                                просмотр. Однако,
                                вы должны быть
                                уверены, что вы
                                включили все
                                варианты имен в
                                класс <b>$=w</b> с
                                помощью любого
                                другого
                                механизма.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">DontPruneRoutes</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [R] Обычно, sendmail
                                пытается избежать
                                любые ненужные
                                явные маршруты
                                при посылке
                                сообщения об
                                ошибке (как
                                обсуждено в
                                секции 5.2.6 RFC 1123).
                                Например, при
                                посылке сообщения
                                об ошибке<dir>
                                    <dir>
                                        <font color="#008000">&lt;@known1,@known2,@known3:user@unknown&gt;</font>
                                        </dir>
                                    
                                </dir>
                                <p>sendmail обрежет
                                &quot;@known1,@known2&quot;
                                для того, чтобы
                                сделать маршрут
                                как можно более
                                прямым. Однако,
                                если выставлена
                                опция <b>R</b>, это
                                будет отключено, и
                                почта будет
                                послана по
                                первому адресу в
                                маршруте, даже
                                если остальные
                                адреса известны.
                                Это может быть
                                полезно, если вы
                                заперты за
                                файерволом.</p>
                            
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">DoubleBounceAddress=error-address</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Если при
                                посылке сообщения
                                об ошибке
                                происходит
                                ошибка, послать
                                отчет об ошибке по
                                указанному
                                адресу. Если не
                                назначено, то по
                                умолчанию это
                                &quot;postmaster&quot;.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">EightBitMode= действие</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [8] Установить
                                обработку
                                восьмибитных
                                данных.
                                Существует два
                                вида восьмибитных
                                данных:
                                объявленные как
                                таковые
                                использованием
                                ESMTP объявления <b>BODY=8BITMIME</b>
                                или флагом
                                командной строки <b>-B8BITMIME</b>,
                                и необъявленные
                                8-битные данные, то
                                есть, так уж
                                произошло, что они
                                являются
                                восьмибитными.
                                Существует три
                                основные
                                операции, которые
                                можно произвести:
                                необъявленные
                                8-битные данные
                                могут быть
                                автоматически
                                преобразованы в
                                8BITMIME,
                                необъявленные
                                8-битные данные
                                могут быть
                                пропущены как
                                есть, без
                                преобразования в
                                MIME (&quot;просто
                                послать 8&quot;), и
                                объявленные
                                8-битные данные
                                могут
                                бытьпреобразованы
                                в 7-битные 7-bit для
                                передачи в не-8BITMIME
                                почтовую
                                программу.
                                Возможные
                                действия:
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="11%">s</td>
        <td valign="top" width="89%">Отвергнуть
        необъявленные 8-битные данные
        (&quot;strict&quot;)</td>
    </tr>
    <tr>
        <td valign="top" width="11%">m</td>
        <td valign="top" width="89%">Преобразовать
        необъявленные 8-битные данные в
        MIME (&quot;mime&quot;)</td>
    </tr>
    <tr>
        <td valign="top" width="11%">p</td>
        <td valign="top" width="89%">Пропустить
        необъявленные 8-битные данные
        (&quot;pass&quot;)</td>
    </tr>
</table>

<dir>
    <dir>
            <dir>
                    <dir>
                            Во всех случаях
                                соответствующе
                                объявленные 8BITMIME
                                данные при
                                необходимости
                                будут
                                преобразованы в
                                7BIT.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">ErrorHeader=file-or-message</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [E] Предварять
                                сообщения об
                                ошибках указанным
                                сообщением. Если
                                эта опция
                                начинается со
                                слеша, то ее
                                значение
                                рассматривается
                                как путь к файлу,
                                содержащему
                                сообщение (это
                                рекомендуемая
                                установка). Иначе,
                                это буквальное
                                сообщение. Файл
                                ошибки может
                                содержать имя,
                                почтовый адрес,
                                и/или телефонный
                                номер
                                ответственного за
                                почту и поддержку
                                конечных
                                пользователей.
                                Если опция
                                отсутствует или
                                нулевая, или
                                указывает на
                                несуществующий
                                или не доступный
                                для чтения файл,
                                не печатается
                                никакого
                                сообщения.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">ErrorMode=x</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [e] Разрешать
                                ошибки, используя
                                режим x. Значения
                                для x:
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="11%">p</td>
        <td valign="top" width="89%">Печатать
        сообщения об ошибке (по
        умолчанию)</td>
    </tr>
    <tr>
        <td valign="top" width="11%">q</td>
        <td valign="top" width="89%">Без сообщений,
        просто выдавать статус выхода</td>
    </tr>
    <tr>
        <td valign="top" width="11%">m</td>
        <td valign="top" width="89%">Отправлять
        назад ошибки почтой</td>
    </tr>
    <tr>
        <td valign="top" width="11%">w</td>
        <td valign="top" width="89%">Печатать
        ошибки (отправлять почтой, если
        пользователь не находится в
        системе)</td>
    </tr>
    <tr>
        <td valign="top" width="11%">e</td>
        <td valign="top" width="89%">Отправлять
        назад ошибки почтой и всегда
        выдывать нулевой статус выхода</td>
    </tr>
</table>

<p><font color="#008000">FallbackMXhost=fallbackhost</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [V] Если
                                определена,
                                fallbackhost работает
                                как MX с очень
                                низким
                                приоритетом.
                                Предназначена для
                                узлов с плохим
                                сетевым
                                соединением.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">ForkEachJob</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [Y] Если
                                выставлена,
                                запускать каждую
                                работу из очереди
                                как отдельный
                                процесс.
                                Используйте эту
                                опцию, если у вас
                                мало памяти, так
                                как при обработке
                                очереди имеется
                                тенденция к
                                потреблению
                                значительного
                                объема памяти.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">ForwardPath=path</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [J] Устанавливает
                                путь для поиска
                                пользовательских
                                файлов .forward. По
                                умолчанию
                                &quot;$z/.forward&quot;.
                                Некоторые узлы,
                                использующие
                                автомонтировщик,
                                могут предпочесть
                                изменить это на
                                &quot;/var/forward/$u&quot;
                                для поиска файла с
                                именем,
                                совпадающим с
                                именем
                                пользователя в
                                системном
                                каталоге. Она
                                также может
                                указывать на
                                последовательность
                                путей,
                                разделенных
                                двоеточиями; sendmail
                                останавливается
                                после первого же
                                успешно и
                                безопасно
                                открытого файла.
                                Например,
                                &quot;/var/forward/$u:$z/.forward&quot;
                                сначала будет
                                искать в
                                /var/forward/username, а
                                затем в ~username/.forward
                                (но только если
                                первый файл не
                                существует).
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">HelpFile=file</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [H] Определяет файл
                                помощи для SMTP.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">HoldExpensive</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [c] Если выходная
                                почтовая
                                программа
                                отмечена как
                                слишком
                                дорогостоящая, не
                                соединяться с ней
                                немедленно. Это
                                требует, чтобы
                                организация
                                очереди была
                                вкомпилирована,
                                потому что
                                настоящая посылка
                                почты будет
                                зависеть от
                                процесса
                                обработки очереди
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">HostsFile=path</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Путь к базе
                                данных хостов,
                                обычно
                                &quot;/etc/hosts&quot;. Эта
                                опция нужна
                                только когда sendmail
                                канонифицирует
                                адреса, а затем
                                только когда во
                                вхождении
                                сервисного
                                переключателя
                                &quot;files&quot; имеется
                                &quot;hosts&quot;. В
                                частности, этот
                                файл никогда не
                                используется при
                                разрешении адреса
                                хоста; это
                                контролируется
                                системной
                                подпрограммой
                                gethostbyname(3).
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">HostStatusDirectory=path</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени]
                                Местонахождение
                                долгосрочной
                                информации
                                статуса хостов.
                                Когда
                                установлена,
                                информация о
                                статусах хостов
                                (например, хост
                                отключен или не
                                принимает
                                соединения) будет
                                общей для всех
                                процессов sendmail;
                                обычно, эта
                                информация
                                сохраняется в
                                течение одного
                                прохода очереди.
                                Эта опция требует
                                для работы кэш
                                соединений, по
                                крайней мере,
                                равный 1. Если
                                опция начинается
                                с ведущего
                                &quot;/&quot;, то это
                                абсолютный путь;
                                иначе, он
                                относителен
                                почтовому
                                каталогу очереди.
                                Вероятное
                                значение для
                                узлов, желающих
                                иметь постоянный
                                статус хостов -
                                &quot;.hoststat&quot; (т.е.,
                                подкаталог
                                каталога очереди).
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">IgnoreDots</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [i] Игнорировать
                                точки в входящих
                                сообщениях.
                                Всегда отключена
                                (то есть, точки
                                всегда
                                принимаются) при
                                чтении почты SMTP.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">LogLevel=n</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [L] Установить по
                                умолчанию уровень
                                протоколирования
                                n. По умолчанию 9.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">Mxзначение</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет длинного
                                имени] Установить
                                значение макроса
                                x. Предназначена
                                только для
                                использования в
                                командной строке.
                                Предпочитается
                                флаг <b>-M</b>.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">MatchGECOS</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [G] Разрешить
                                нечеткие
                                совпадения в поле
                                GECOS. Если этот флаг
                                выставлен, и
                                обычный просмотр
                                имени
                                пользователя
                                проваливается
                                (т.е., нет
                                псевдонима с
                                таким именем, и
                                проваливается
                                getpwnam),
                                последовательно
                                искать в файле
                                паролей
                                подходящее
                                вхождение в поле
                                GECOS. Здесь также
                                требуется, чтобы
                                во время
                                компиляции было
                                включено MATCHGECOS.
                                Эта опция не
                                рекомендуется.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">MaxDaemonChildren=N</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Если
                                выставлена, sendmail
                                будет
                                отказываться от
                                соединений, если
                                он имеет больше
                                чем N порожденных
                                процессов,
                                обрабатывающих
                                входящую почту.
                                Это не
                                ограничивает
                                количество
                                исходящих
                                соединений. Если
                                не установлена,
                                никаких
                                ограничений нет -
                                то есть, это будет
                                контролироваться
                                средней загрузкой
                                системы.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">MaxHopCount=N</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [h] Максимум
                                счетчика
                                пересылок.
                                Сообщения,
                                обработанные
                                более чем N раз,
                                считаются
                                ходящими по
                                кольцу и не
                                принимаются. По
                                умолчанию 25.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">MaxHostStatAge=age</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Пока еще не
                                работает. Эта
                                опция определяет,
                                как долго жить
                                информации о
                                статусе хоста.
                                Например, если
                                определено, что
                                хост отключен, то
                                соединения к нему
                                не будут
                                производиться в
                                течение
                                указанного
                                времени. По
                                умолчанию
                                исчисляется в
                                минутах.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">MaxMessageSize=N</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] указывает
                                максимальный
                                размер сообщения,
                                сообщаемый в
                                ответе ESMTP EHLO.
                                Сообщения больше
                                указанного
                                размера не
                                принимаются.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">MaxQueueRunSize=N</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени]
                                Максимальное
                                количество работ,
                                обрабатываемых за
                                один проход
                                очереди. Если не
                                установлено, то
                                такого
                                ограничения нет.
                                Если у вас очень
                                большие очереди,
                                или очень
                                маленький
                                интервал прохода
                                очереди, это может
                                быть нестабильно.
                                Однако, так как в
                                каталоге очереди
                                по порядку
                                обрабатываются
                                первые N
                                сообщений, то это
                                число должно быть
                                достаточно
                                большим, во
                                избежание
                                &quot;потерянных
                                работ&quot;
                                случающихся в
                                каталоге очереди.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">MaxRecipientsPerMessage=N</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени]
                                Максимальное
                                количество
                                получателей на
                                одно сообщение,
                                принимаемое в
                                транзакции SMTP.
                                Замечание:
                                слишком низкое
                                значение может
                                помешать отправке
                                почты из групп
                                рассылки ,
                                использующих SMTP
                                для начальной
                                транзакции. Если
                                не установлено, то
                                не имеется
                                никаких
                                ограничений по
                                количеству
                                получателей на
                                конверт.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">MeToo</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [m] пошлите и мне,
                                даже если я не
                                вхожу в
                                развернутые
                                псевдонимы.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">MinFreeBlocks=N</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [b] Перед приемом
                                почты по SMTP
                                требовать в
                                файловой системе,
                                содержащей
                                очередь, по
                                крайней мере N
                                свободных блоков.
                                Если пространства
                                недостаточно,
                                sendmail выдает на
                                команду MAIL ответ
                                452. Это приглашает
                                отправителя
                                попробовать снова
                                попозже.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">MinQueueAge=age</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Не
                                обрабатывать
                                работы в очереди,
                                находящиеся в ней
                                менее указанного
                                интервала
                                времени. Это
                                предназначено для
                                улучшения реакции
                                посредством
                                частых обработок
                                очереди без
                                пожирания
                                системных
                                ресурсов слишком
                                частыми запусками
                                работ. По
                                умолчанию
                                измеряется в
                                минутах.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">MustQuoteChars=s</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени]
                                Устанавливает
                                список символов,
                                которые должны
                                быть квотированы
                                при использовании
                                в полном имени в
                                части фразы
                                синтаксиса &quot;phrase
                                &lt;address&gt;&quot;. По
                                умолчанию
                                &quot;'.&quot;. Символы
                                &quot;@,;:\()[]&quot;
                                всегда
                                добавляются к
                                этому списку.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">NoRecipientAction</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Действие,
                                предпринимаемое
                                при получении
                                сообщения, не
                                имеющего ни
                                одного
                                правильного
                                заголовка
                                получателя (To:, Cc:,
                                Bcc:, или ApparentlyTo: -
                                последнее
                                включено для
                                обратной
                                совместимости со
                                старыми sendmail'ами).
                                Может быть <b>None</b>
                                для пропуска
                                сообщения без
                                изменений, что
                                нарушает
                                протокол, <b>Add-To</b>
                                для добавки
                                заголовка To: с
                                любым
                                получателем,
                                найденным на
                                конверте (что
                                должно
                                разоблачить
                                получателей Bcc:), <b>Add-Apparently-To</b>
                                для добавки
                                заголовок Apparently-To:
                                (только для
                                обратной
                                совместимости и
                                официально
                                убрано), <b>Add-To-Undisclosed</b>
                                для добавки
                                заголовка &quot;To:
                                undisclosed-recipients:;&quot;
                                чтобы сделать
                                заголовок
                                легальным без
                                раскрытия
                                чего-либо, или <b>Add</b>
                                <b>Bcc</b> для добавки
                                пустого заголовка
                                Bcc:.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">OldStyleHeaders</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [o] Подразумевает,
                                что заголовки
                                могут быть в
                                старом формате,
                                т.е., имена
                                разграничиваются
                                пробелами. Это
                                включает
                                адаптивный
                                алгоритм: если
                                адрес получателя
                                содержит запятую,
                                скобки, или
                                угловые скобки, то
                                подразумевается,
                                что запятые уже
                                существуют. Если
                                этот флаг не
                                включен, только
                                запятые
                                разграничивают
                                имена. Заголовки
                                всегда выходят с
                                запятыми между
                                именами. По
                                умолчанию
                                отключена.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">OperatorChars=charlist</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [макрос $o] список
                                символов,
                                считающихся
                                &quot;операторами&quot;,
                                то есть символами,
                                разделяющими
                                лексемы. Все
                                символы
                                операторов сами
                                по себе являются
                                лексемами;
                                последовательности
                                символов не
                                являющихся
                                операторами
                                всегда являются
                                лексемами.
                                Символы пробела
                                разделяют
                                лексемы, но не
                                сами лексемы -
                                например,
                                &quot;AAA.BBB&quot;
                                содержит три
                                лексемы, а &quot;AAA
                                BBB&quot; - две. Если не
                                назначено, то по
                                умолчанию OperatorChars
                                соответствуют
                                &quot;.:@[]&quot;; в
                                добавок, символы
                                &quot;()&lt;&gt;,;&quot;
                                всегда являются
                                операторами.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">PostmasterCopy=postmaster</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [P] Если
                                установлено,
                                копии сообщений
                                об ошибках будут
                                посланы
                                названному
                                postmaster'у.
                                Посылается только
                                заголовок
                                сообщения. Так как
                                многие ошибки
                                являются
                                проблемами
                                пользователей, то
                                на больших узлах
                                это, вероятно,
                                будет не очень
                                хорошей идеей,
                                содержащей
                                признаки всех
                                видов нарушения
                                конфиденциальности,
                                но, похоже,
                                популярной у
                                некоторых
                                поставщиков
                                систем. По
                                умолчанию не
                                посылает копии.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">PrivacyOptions=opt,opt,...</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [p] Устанавливает
                                опции
                                конфиденциальности.
                                &quot;Конфиденциальность&quot;
                                на самом деле не
                                факт; многие из
                                них - просто
                                способ настоять
                                на более строгом
                                соответствии
                                протоколу SMTP.
                                Опции можно
                                выбрать из:
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="19%">public</td>
        <td valign="top" width="81%">Позволить
        открытый доступ</td>
    </tr>
    <tr>
        <td valign="top" width="19%">needmailhelo</td>
        <td valign="top" width="81%">Требовать
        команду HELO или EHLO до MAIL</td>
    </tr>
    <tr>
        <td valign="top" width="19%">needexpnhelo</td>
        <td valign="top" width="81%">Требовать
        команду HELO или EHLO до EXPN</td>
    </tr>
    <tr>
        <td valign="top" width="19%">noexpn</td>
        <td valign="top" width="81%">Полностью
        запретить EXPN</td>
    </tr>
    <tr>
        <td valign="top" width="19%">needvrfyhelo</td>
        <td valign="top" width="81%">Требовать
        команду HELO или EHLO до VRFY</td>
    </tr>
    <tr>
        <td valign="top" width="19%">novrfy</td>
        <td valign="top" width="81%">Полностью
        запретить VRFY</td>
    </tr>
    <tr>
        <td valign="top" width="19%">noetrn</td>
        <td valign="top" width="81%">Полностью
        запретить ETRN</td>
    </tr>
    <tr>
        <td valign="top" width="19%">noverb</td>
        <td valign="top" width="81%">Полностью
        запретить VERB</td>
    </tr>
    <tr>
        <td valign="top" width="19%">restrictmailq</td>
        <td valign="top" width="81%">Ограничить
        команду mailq </td>
    </tr>
    <tr>
        <td valign="top" width="19%">restrictqrun</td>
        <td valign="top" width="81%">Ограничить
        флаг командной строки -q </td>
    </tr>
    <tr>
        <td valign="top" width="19%">noreceipts</td>
        <td valign="top" width="81%">Не возвращать
        успешные DSN</td>
    </tr>
    <tr>
        <td valign="top" width="19%">goaway</td>
        <td valign="top" width="81%">Запретить все
        основные запросы статуса SMTP</td>
    </tr>
    <tr>
        <td valign="top" width="19%">authwarnings</td>
        <td valign="top" width="81%">Вкладывать в
        сообщение заголовок
        X-Authentication-Warning: </td>
    </tr>
</table>

<dir>
    <dir>
            <dir>
                    <dir>
                            Псевдофлаг
                                &quot;goaway&quot;
                                выставляет все
                                флаги, кроме
                                &quot;restrictmailq&quot; и
                                &quot;restrictqrun&quot;.
                                Если mailq
                                ограничено,
                                только члены
                                группы, которой
                                принадлежит
                                каталог очереди,
                                могут
                                просматривать
                                очередь. Если
                                проходы очереди
                                запрещены, только
                                root и владелец
                                каталога очереди
                                могут запустить
                                очередь. Authentication
                                Warnings и
                                предупреждения о
                                различных
                                условиях могут
                                указать на
                                попытки обмануть
                                почтовую систему,
                                типа
                                использования
                                нестандартного
                                каталога очереди.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">QueueDirectory=dir</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [Q] Использовать в
                                качестве каталога
                                очереди только
                                указанный
                                каталог.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">QueueFactor=коэффициент</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [q] Использовать
                                коэффициент как
                                множитель функции
                                преобразования
                                для определения,
                                когда просто
                                положить работу в
                                очередь вместо ее
                                запуска. Это
                                значение
                                определяется
                                разностью между
                                текущей средней
                                загрузкой и
                                ограничением
                                средней загрузки
                                (опция <b>QueueLA</b>)
                                для определения
                                максимального
                                приоритета
                                сообщений,
                                которые будут
                                посланы. По
                                умолчанию 600000.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">QueueLA=LA</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [x] Когда средная
                                загрузка системы
                                превышает LA,
                                просто
                                откладывать
                                сообщения в
                                очередь (т.е. не
                                пытаться их
                                послать). По
                                умолчанию 8.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">QueueSortOrder=алгоритм</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени]
                                Использовать
                                алгоритм для
                                сортировки
                                очереди.
                                Использется
                                только первый
                                символ значения.
                                Легальные
                                значения:
                                &quot;host&quot;
                                (упорядочивать по
                                имени первого
                                хоста первого
                                получателя),
                                &quot;time&quot;
                                (упорядочивать по
                                времени отправки),
                                и &quot;priority&quot;
                                (упорядочивать по
                                приоритету).
                                Упорядочивание по
                                хосту улучшает
                                использование
                                кэша соединений,
                                но может привести
                                к обработке
                                сообщений с
                                низким
                                приоритетом,
                                идущим на один
                                хост вместо
                                высокоприоритетных
                                сообщений идущих
                                на несколько
                                хостов; скорее
                                всего не должно
                                использоваться
                                при
                                низкоскоростной
                                сетевой связи.
                                Упорядочивание по
                                времени всегда не
                                лучший выход,
                                поскольку это
                                позволит
                                отправлять
                                большие, огромные
                                сообщения раньше
                                небольших,
                                персональных
                                сообщений, но
                                может быть
                                приемлемо на
                                некоторых хостах
                                с очень быстрыми
                                сетевыми
                                соединениями. По
                                умолчанию
                                производится
                                упорядочивание по
                                приоритету.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">QueueTimeout=timeout</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [T] Синоним для
                                &quot;Timeout.queuereturn&quot;.
                                Используйте ту
                                форму вместо
                                формы
                                &quot;QueueTimeout&quot;.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">ResolverOptions=options</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [I] Устанавливает
                                опции
                                разрешителя.
                                Значения могут
                                быть установлены
                                использованием <b>+</b>flag
                                и очищены
                                использованием
                                -flag; флаги могут
                                быть: &quot;debug&quot;,
                                &quot;aaonly&quot;,
                                &quot;usevc&quot;,
                                &quot;primary&quot;,
                                &quot;igntc&quot;,
                                &quot;recurse&quot;,
                                &quot;defnames&quot;,
                                &quot;stayopen&quot;, или
                                &quot;dnsrch&quot;. Может
                                быть определена
                                строка
                                &quot;HasWildcardMX&quot; (без
                                <b>+</b> или <b>-</b>) для
                                выключения
                                сопоставления
                                записей MX при
                                канонификациях
                                имен. <b>Заметь!</b>
                                До версии 8.7, эта
                                опция указывала,
                                что сервер имен
                                должен отвечать
                                при приеме
                                адресов. Это было
                                заменено
                                проверкой
                                пречисления
                                метода &quot;dns&quot; во
                                вхождении сервиса
                                &quot;hosts&quot; в
                                сервисного
                                переключателя.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">RunAsUser=user</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Параметр user
                                может быть именем
                                пользователя
                                (просматривается
                                в /etc/passwd) или
                                числовым
                                идентификатором
                                пользователя;
                                также форма может
                                иметь добавку
                                &quot;:group&quot; (где
                                группа может быть
                                задана числом или
                                символически).
                                Если установлено
                                не нулевое
                                значение (т.е. не
                                root), sendmail перейдет
                                к этому
                                идентификатору
                                пользователя
                                вскоре после
                                запуска<a href="sendmail5.html#r7"><sup>7</sup></a><a
                                name="b7"></a>. Это
                                позволяет
                                избежать
                                определенного
                                класса проблем
                                безопасности.
                                Однако, это
                                означает, что все
                                файлы &quot;.forward&quot;
                                и &quot;:include:&quot;
                                должны быть
                                доступны на
                                чтение для
                                указанного
                                пользователя, а в
                                системах, не
                                поддерживающих
                                правильно бит suid,
                                все файлы для
                                записи должны
                                быть открыты на
                                запись для этого
                                пользователя, а
                                все программы
                                будут выполнены
                                этим
                                пользователем.
                                Это также не
                                совместимо с
                                опцией <b>SafeFileEnvironment</b>.
                                Иными словами, это
                                не добавит
                                слишком много
                                безопасности
                                средней системе, а
                                может разрушить
                                ее (потому что
                                пермиссии других
                                файлов будут
                                хуже). Однако, это
                                может быть
                                полезно на
                                файерволах и в
                                других местах, где
                                пользователи не
                                имеют бюджетов, а
                                файлы псевдонимов
                                хорошо
                                содержатся.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">RecipientFactor=коэффициент</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [y] Указанный
                                коэффициент
                                добавляется к
                                приоритету
                                (уменьшая, таким
                                образом,
                                приоритет работы)
                                каждого
                                получателя, т.е.,
                                это значение
                                &quot;наказывает&quot;
                                работы с большим
                                количеством
                                получателей. По
                                умолчанию 30000.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">RefuseLA=LA</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [X] Если средняя
                                загрузка системы
                                превышает LA, не
                                принимать
                                входящие
                                соединения SMTP. По
                                умолчанию 12.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">RetryFactor=коэффициент</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [Z] Коэффициент
                                добавляется к
                                приоритету при
                                каждой обработке
                                работы. Таким
                                образом, при
                                каждом выполнении
                                работы, ее
                                приоритет будет
                                уменьшен на
                                указанное
                                значение. Во
                                многих системах
                                это должно иметь
                                положительный
                                эффект. По
                                умолчанию 90000.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">SafeFileEnvironment=каталог</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Если эта
                                опция
                                установлена, sendmail
                                будет делать
                                вызов chroot(2) в
                                указанный каталог
                                до каких-либо
                                записей в файлы.
                                Если имя файла,
                                указанного
                                пользователем
                                начинается с
                                каталога, эта
                                часть пути будет
                                обрезана до
                                записи, так
                                (например), если
                                переменная
                                SafeFileEnvironment
                                установлена в
                                &quot;/safe&quot;, то
                                записи
                                &quot;/safe/logs/file&quot; и
                                &quot;/logs/file&quot; на
                                самом деле
                                указывают на один
                                файл. Вдобавок,
                                если эта опция
                                выставлена, sendmail
                                отказывается
                                производить
                                доставку по
                                символическим
                                связям.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">SaveFromLine</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [f] Сохранять
                                строки &quot;From&quot; в
                                стиле Unix в начале
                                заголовков.
                                Обычно они
                                считаются
                                избыточными и
                                отбрасываются.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">SendMIMEErrors</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [j] Если
                                установлена,
                                посылать
                                сообщения об
                                ошибках в формате
                                MIME (см. RFC1521 и RFC1344).
                                Если отключена,
                                sendmail не будет
                                возвращать в
                                ответ на EHLO
                                ключевое слово DSN
                                и не будет делать
                                обработку Delivery
                                Status Notification, как
                                описано в RFC1891.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">ServiceSwitchFile=filename</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Если ваша
                                операционная
                                система имеет
                                абстракцию
                                сервисного
                                переключателя
                                (например,
                                /etc/nsswitch.conf в Solaris
                                или /etc/svc.conf в Ultrix и
                                DEC OSF/1), то будет
                                опрашиваться этот
                                сервис, а эта
                                опция
                                игнорироваться. В
                                другом случае, это
                                имя файла,
                                обеспечивающего
                                список методов,
                                используемых для
                                реализации
                                определенных
                                сервисов.
                                Синтаксис -
                                последовательности
                                строк, каждая из
                                которых -
                                последовательность
                                слов. Первое слово
                                - имя сервиса, а
                                последующие - типы
                                сервисов. Сервисы,
                                к которым sendmail
                                обращается
                                напрямую -
                                &quot;aliases&quot; и
                                &quot;hosts&quot;. Типы
                                сервисов могут
                                быть &quot;dns&quot;,
                                &quot;nis&quot;,
                                &quot;nisplus&quot;, или
                                &quot;files&quot;
                                (загвоздка лишь в
                                том, что
                                соответствующая
                                поддержка должна
                                быть
                                вкомпилирована до
                                ссылки на сервис).
                                Если ServiceSwitchFile не
                                определен, то по
                                умолчанию это
                                /etc/service.switch. Если
                                этот файл не
                                существует, по
                                умолчанию
                                переключатель:
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="31%">aliases</td>
        <td valign="top" width="69%">Files</td>
    </tr>
    <tr>
        <td valign="top" width="31%">hosts</td>
        <td valign="top" width="69%">dns nis files</td>
    </tr>
</table>

<dir>
    <dir>
            <dir>
                    <dir>
                            По умолчанию файл
                                &quot;/etc/service.switch&quot;.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">SevenBitInput</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [7] Обрезать ввод
                                до семи бит для
                                совместимости со
                                старыми
                                системами. Это не
                                должно быть
                                необходимо.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">SingleLineFromHeader</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Если
                                установлена,
                                строки From: имеющие
                                внутри себя новые
                                строки,
                                разворачиваются в
                                одну строку. Это
                                нужно для обхода
                                заплатки в Lotus Notes,
                                которая явно не
                                понимает
                                нормально
                                завернутые
                                заголовки RFC822.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">SingleThreadDelivery</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Если
                                установлена,
                                клиентская машина
                                никогда не будет
                                пытаться открыть
                                два соединения SMTP
                                к одному серверу
                                одновременно,
                                даже в различных
                                процессах. То
                                есть, если другой
                                sendmail уже говорит с
                                каким-нибудь
                                хостом, новый sendmail
                                не откроет
                                другого
                                соединения. Это
                                свойство двояко;
                                хотя это
                                уменьшает
                                загрузку на
                                другой машине, это
                                задерживает
                                передачу почты
                                (например, если
                                один sendmail
                                доставляет
                                огромное
                                сообщение, другие
                                sendmail'ы не смогут
                                послать даже
                                маленькие
                                сообщения). Также,
                                это требует
                                файловый
                                дескриптор (для
                                файла блокировки)
                                для каждого
                                соединения,
                                поэтому вам,
                                возможно,
                                придется
                                уменьшить
                                значение опции <b>ConnectionCacheSize</b>
                                во избежание
                                исчерпания
                                файловых
                                дескрипторов на
                                процессы. Требует
                                опцию <b>HostStatusDirectory</b>.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">SmtpGreetingMessage=сообщение</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [макрос $e] При
                                запуске сервера
                                SMTP выдается
                                сообщение. По
                                умолчанию &quot;$j
                                Sendmail $v ready at $b&quot;.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">StatusFile=file</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [S]
                                Протоколировать
                                суммарную
                                статистику в
                                указанном файле.
                                Если не
                                установлена,
                                суммарная
                                статистика не
                                сохраняется. Этот
                                файл не
                                изменяется в
                                размере. Он может
                                быть распечатан
                                программой
                                mailstats(8).
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">SuperSafe </font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [s] Быть
                                супернадежным,
                                т.е. всегда
                                записывать файл в
                                очередь, даже если
                                вы хотите
                                попробовать
                                немедленную
                                доставку. Sendmail
                                всегда организует
                                файл в очереди до
                                возвращения
                                управления
                                клиенту при любых
                                обстоятельствах.
                                Это всегда должно
                                быть установлено.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">TempFileMode=mode</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [F] Пермиссии для
                                файлов в очереди.
                                По умолчанию в
                                восьмеричном
                                представлении. По
                                умолчанию 0600.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">Timeout.type=timeout</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [r; содержит старую
                                опцию T]
                                Выставляет
                                значения
                                таймаутов.
                                Конкретный
                                таймаут
                                указывается
                                значением type.
                                Распознаваемые
                                таймауты, их
                                значения по
                                умолчанию, и их
                                минимальные
                                значения
                                определенные в
                                секции 5.3.2 RFC 1123:
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="26%">initial</td>
        <td valign="top" width="74%">Ожидание
        начального приветствия [5m, 5m]</td>
    </tr>
    <tr>
        <td valign="top" width="26%">helo </td>
        <td valign="top" width="74%">Ответ на
        команду HELO или EHLO [5m, none]</td>
    </tr>
    <tr>
        <td valign="top" width="26%">mail</td>
        <td valign="top" width="74%">Ответ на
        команду MAIL [10m, 5m]</td>
    </tr>
    <tr>
        <td valign="top" width="26%">rcpt</td>
        <td valign="top" width="74%">Ответ на
        команду RCPT [1h, 5m]</td>
    </tr>
    <tr>
        <td valign="top" width="26%">datainit</td>
        <td valign="top" width="74%">Ответ на
        команду DATA [5m, 2m]</td>
    </tr>
    <tr>
        <td valign="top" width="26%">datablock</td>
        <td valign="top" width="74%">Чтение блока
        данных [1h, 3m]</td>
    </tr>
    <tr>
        <td valign="top" width="26%">datafinal</td>
        <td valign="top" width="74%">Ответ на
        завершающую &quot;.&quot; в данных [1h,
        10m]</td>
    </tr>
    <tr>
        <td valign="top" width="26%">rset</td>
        <td valign="top" width="74%">Ответ на
        команду RSET [5m, none]</td>
    </tr>
    <tr>
        <td valign="top" width="26%">quit</td>
        <td valign="top" width="74%">Ответ на
        команду QUIT [2m, none]</td>
    </tr>
    <tr>
        <td valign="top" width="26%">misc</td>
        <td valign="top" width="74%">Ответ на
        команды NOOP и VERB [2m, none]</td>
    </tr>
    <tr>
        <td valign="top" width="26%">ident</td>
        <td valign="top" width="74%">Таймаут
        протокола IDENT [30s, none]</td>
    </tr>
    <tr>
        <td valign="top" width="26%">fileopen|</td>
        <td valign="top" width="74%">Таймаут
        открытия файлов .forward и :include: [60s,
        none]</td>
    </tr>
    <tr>
        <td valign="top" width="26%">command|</td>
        <td valign="top" width="74%">Чтение команды
        [1h, 5m]</td>
    </tr>
    <tr>
        <td valign="top" width="26%">queuereturn|</td>
        <td valign="top" width="74%">Время до
        возврата сообщения [5d, 5d]</td>
    </tr>
    <tr>
        <td valign="top" width="26%">queuewarn|</td>
        <td valign="top" width="74%">Время до
        посылки предупреждения [none, none]</td>
    </tr>
    <tr>
        <td valign="top" width="26%">hoststatus|</td>
        <td valign="top" width="74%">Время
        &quot;устаревания&quot; статуса
        хоста [30m, none]</td>
    </tr>
</table>

<dir>
    <dir>
            <dir>
                    <dir>
                            Все, кроме
                                отмеченных знаком
                                &quot;|&quot;
                                применяются к
                                клиентам SMTP. Если
                                сообщение
                                отсылается
                                используя
                                расширение NOTIFY SMTP,
                                предупреждающее
                                сообщение будет
                                послано только
                                если определен
                                NOTIFY=DELAY. Таймауты
                                queuereturn и queuewarn
                                могут быть, кроме
                                того, указаны
                                меткой,
                                основанной на
                                поле Precedence:
                                сообщения; она
                                может быть
                                &quot;срочно&quot;
                                (&quot;urgent&quot;)
                                (указывается
                                положительным
                                ненулевым
                                значением),
                                &quot;обычно&quot;
                                (&quot;normal&quot;)
                                (указывается
                                нулевым
                                значением), или
                                &quot;не срочное&quot;
                                (&quot;nonurgent&quot;)
                                (указывается
                                отрицательным
                                значением).
                                Например,
                                значение
                                &quot;Timeout.queuewarn.urgent=1h&quot;
                                указывает таймаут
                                предупреждения
                                для срочных
                                сообщений равный
                                одному часу. 
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">TimeZoneSpec=tzinfo</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [t] Устанавливает
                                информацию о
                                местной временной
                                зоне в tzinfo -
                                например,
                                &quot;PST8PDT&quot;. На
                                самом деле, если
                                эта опция не
                                выставлена,
                                переменная
                                окружения TZ
                                очищается
                                (поэтому
                                используется
                                системное
                                умолчание); если
                                установлена, но
                                нулевая,
                                используется
                                пользовательская
                                переменная TZ, если
                                установлена и
                                ненулевая, то
                                переменная TZ
                                выставляется в
                                это значение.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">TryNullMXList</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [w] Если эта
                                система
                                &quot;лучший&quot; (т.е.,
                                имеющий самое
                                низкое
                                предпочтение
                                (&quot;preference&quot;)) MX
                                для заданного
                                хоста, его правила
                                конфигурации
                                обычно должны
                                обнаружить эту
                                ситуацию, и
                                разрешить эту
                                ситуацию особо,
                                пересылая почту в
                                UUCP, считая ее
                                локальной, или еще
                                как. Однако, в
                                некоторых случаях
                                (типа фаерволов
                                Internet) вы можете
                                захотеть
                                соединиться
                                напрямую с тем
                                хостом, как будто
                                у него вообще нет
                                никакой записи MX.
                                Выставка этой
                                опции заставляет
                                sendmail делать
                                именно это. Плохо
                                то, что ошибки в
                                вашей
                                конфигурации
                                будут
                                диагностироваться
                                как &quot;host unknown&quot;
                                или &quot;message timed
                                out&quot; вместо
                                чего-либо более
                                значимого. Эта
                                опция не
                                рекомендуется.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">UnixFromLine=fromline</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [макрос $l]
                                Определяет формат
                                используемый,
                                когда sendmail должен
                                добавить строку
                                From в стиле UNIX (то
                                есть, строку,
                                начинающуюся с
                                &quot;From&lt;пробел&gt;user&quot;).
                                По умолчанию
                                &quot;From $g $d&quot;. Не
                                изменяйте это, до
                                тех пор, пока не
                                начнете
                                использовать
                                другой формат
                                почтовых ящиков
                                UNIX (что очень
                                сомнительно).
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">UnsafeGroupWrites</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Если
                                установлена,
                                файлы :include: и .forward,
                                открытые на
                                запись для группы
                                считаются
                                &quot;небезопасными&quot;,
                                то есть, они не
                                могут ссылаться
                                на программы или
                                писать прямо в
                                файлы. Файлы :include:
                                и .forward, открытые
                                на запись для всех
                                также
                                небезопасны.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">UseErrorsTo</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [l] Если имеется
                                заголовок
                                &quot;Errors-To:&quot;,
                                отсылать
                                сообщения об
                                ошибках по адресу,
                                указанному в нем.
                                Обычно они идут к
                                конвертному
                                отправителю.
                                Использование
                                этой опции
                                заставляет sendmail
                                нарушать RFC 1123. Эта
                                опция не
                                рекомендуется и
                                официально не
                                поддерживается.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">UserDatabaseSpec=udbspec</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [U] Определение
                                пользовательской
                                базы данных.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">UserSubmission</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [нет короткого
                                имени] Это
                                начальное
                                представление
                                прямо из Mail User Agent.
                                Может быть
                                установлен в
                                файле
                                конфигурации,
                                если вы имеете MUA,
                                не пропускающие
                                флаг <b>-U</b> или
                                использующие
                                расширение XUSR ESMTP,
                                но некоторая
                                ретранслируемая
                                почта при этом
                                может быть
                                переписана
                                неподходящим
                                образом.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p><font color="#008000">Verbose</font></p>

<dir>
    <dir>
            <dir>
                    <dir>
                            [v] Работать в
                                &quot;болтливом&quot;
                                режиме. Если эта
                                опция
                                установлена, sendmail
                                устанавливает
                                опции <b>HoldExpensive</b>
                                (ранее <b>c</b>) и <b>DeliveryMode</b>
                                (ранее <b>d</b>) так,
                                что вся почта,
                                доставляется
                                полностью за одну
                                работу так, что вы
                                можете видеть
                                полный процесс
                                доставки. Опция <b>Verbose</b>
                                никогда не должна
                                выставляться в
                                файле
                                конфигурации;
                                предназначена
                                только для
                                использования в
                                командной строке.
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p>Все опции могут быть указаны в
командной строке, используя флаг -O
или -o, но большинство может
заставить sendmail освободиться от
своих suid'ных полномочий. Опции,
которые этого не причиняют: MinFreeBlocks
[b], DeliveryMode [d], ErrorMode [e], IgnoreDots [i], LogLevel
[L], MeToo [m], OldStyleHeaders [o], PrivacyOptions [p], Timeouts
[r], SuperSafe [s], Verbose [v], CheckpointInterval [C], и
SevenBitInput [7]. Также, M (определить
макрос) при определении макросов r
или s считается &quot;безопасным&quot;.</p>

<dir>
    <dir>
            <a name="toc57"></a><b>5.7. P -
                Определение Старшинства</b>
        </dir>
    
</dir>

<p>Значения для поля &quot;Precedence:&quot;
могут быть определены
использованием контрольной строки <b>P</b>.
Синтаксис этого поля:</p>

<dir>
    <dir>
            <font color="#008000"><b>Pимя=число</b></font>
        </dir>
    
</dir>

<p>Когда имя найдено в поле
&quot;Precedence:&quot; класс сообщения
выставляется в число. Более высокие
числа означают более высокое
старшинство. Числа менее нуля имеют
специальное назначение - если
происходит ошибка во время
обработки сообщения, его тело не
будет возвращено; это
предназначается для &quot;большой&quot;
почты, типа проходящей через списки
рассылки. По умолчанию старшинство
равно нулю. Например, наш список
старшинств состоит из:</p>

<dir>
    <dir>
            <font color="#008000">Pfirst-class=0 
            <p>Pspecial-delivery=100</p>
            <p>Plist=-30</p>
            <p>Pbulk=-60</p>
            <p>Pjunk=-100</font></p>
            
        </dir>
    
</dir>

<p>Использование людьми, пишущие
обработчики списков рассылки
&quot;Precedence: list&quot; очень
приветствуется. Старые версии sendmail
(которые отвергали все возвраты
ошибок из-за отрицательного
старшинства) не распознают это имя,
давая ему нулевое старшинство по
умолчанию. Это позволяет
владельцам списков рассылки видеть
возвраты ошибок и в старых, и в
новых версиях sendmail.</p>

<dir>
    <dir>
            <a name="toc58"></a><b>5.8. V -
                Уровень Версии
                Конфигурации</b>
        </dir>
    
</dir>

<p>Для обеспечения совместимости со
старыми файлами конфигурации, была
добавлена строка <b>V</b>,
определяющая некоторую очень
основную семантику
конфигурационного файла. Она не
предназначена для поддержки
длинных обозначений; вместо этого,
она описывает особенности
совместимости, которые, возможно,
будут убраны в будущих выпусках.</p>

<p><b>Заметь!:</b> эти уровни версий не
имеют ничего общего с номерами
версий в файлах. Например, при
написании файлов конфигурации
версии 8 (в особенности, 8.7)
использовались конфигурации
уровня 6.</p>

<p>&quot;Старые&quot; файлы конфигурации
определяются как уровень версии
один. Фаулы уровня версии два
делают следующие изменения:</p>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="8%">(1)</td>
        <td valign="top" width="92%">Канонификация
        имени хоста ($[ ... $]) добавляет
        точку, если имя распознано; это
        дает файлу конфигурации способ
        определить, совпало ли
        что-нибудь. (На самом деле, это
        просто инициализирует
        преобразование хоста с флагом
        &quot;-a.&quot; - вы можете
        переустановить это на что
        угодно явным объявлением
        преобразования.)</td>
    </tr>
    <tr>
        <td valign="top" width="8%">(2)</td>
        <td valign="top" width="92%">Расширение
        имени хоста по умолчанию
        постоянно при всех обработках;
        конфигурации версий уровня
        один в некоторых местах
        обработки выключали доменное
        расширение (то есть, добавляя
        имя локального домена).
        Конфигурации версий уровня два
        по идее включают последнюю
        точку для указания того, что
        это уже каноническое имя.</td>
    </tr>
    <tr>
        <td valign="top" width="8%">(3)</td>
        <td valign="top" width="92%">Локальные
        имена, не являющиеся
        псевдонимами проходят через
        новое выделяющее правило пять;
        оно может быть использовано
        для добавления локального
        ретранслятора. Такое поведение
        может быть предотвращено
        посредством разрешения
        локального имени с начальным
        &quot;@&quot;. То есть, допустим, то,
        что разрешается на локальную
        почтовую программу и имя
        пользователя &quot;vikki&quot; пройдет
        через набор правил пять, но имя
        пользователя &quot;@vikki&quot;
        потеряет &quot;@&quot;, не пройдет
        через набор правил пять, или же
        будет обработано как в
        предыдущем примере. Здесь
        расчет на то, что это может быть
        использовано для реализации
        такого поведения, когда почта,
        посланная к &quot;vikki&quot; будет
        обработана центральным
        концентратором, а почта,
        посланная к &quot;vikki@localhost&quot;
        будет доставлена напрямую.</td>
    </tr>
</table>

<p>Файлы версии уровня три позволяют
# начинать комментарии во всех
строках. Исключения составляют
экранированные обратным слешем
знаки # и синтаксис $#.</p>

<p>Конфигурации версии уровня
четыре, по историческим причинам,
полностью эквивалентны уровню три.</p>

<p>Файлы конфигурации версии уровня
четыре изменяют определение по
умолчанию, что <b>$w</b> является
просто первым компонентом имени
хоста.</p>

<p>Файлы конфигурации версии уровня
шесть переделывают многие опции
локальной обработки (типа
псевдонимизации и соответствия
началу адреса для символов &quot;|&quot;)
во флаги почтовых программ; это
обеспечивает детализированный
контроль над специальными
локальными обработками. Файлы
конфигурации версии уровня шесть
также могут включать длинные имена
опций. Опция <b>ColonOkInAddr</b>
(разрешающая двоеточия в местной
части адресов) для
конфигурационных файлов более
низкого уровня по умолчанию <b>on</b>;
Файл конфигурации требует
некоторый дополнительный
интеллект для правильной обработки
структуры группы RFC 822.</p>

<p>Конфигурационные файлы седьмого
уровня версии использовали новые
имена опций для замены старых
макросов (<b>$e</b> стало <b>Smtp</b> <b>GreeetingMessage</b>,
<b>$l</b> стало <b>UnixFromLine</b>, и <b>$o</b> стало
<b>OperatorChars)</b>. Также, до седьмой
версии, предполагался флаг <b>F=q</b>
(использовать возвращаемое
значение 250 вместо 252 для команды SMTP
VRFY).</p>

<p>Строка <b>V</b> может опционально
иметь <b>/</b>vendor для указания того,
что это файл конфигурации
использует специфические для
частного поставщика изменения<a
href="sendmail5.html#r8"><sup>8</sup></a><a
name="b8"></a>. Вы можете использовать
&quot;/Berkeley&quot; для подчеркивания, что
этот файл конфигурации использует
Berkeley разновидность sendmail.</p>

<dir>
    <dir>
            <a name="toc59"></a><b>5.9. K -
                Определение Файла Ключей</b>
        </dir>
    
</dir>

<p>Специальные преобразования могут
быть определены использованием
строки: </p>

<dir>
    <dir>
            <font color="#008000">Kmapname mapclass arguments</font>
        </dir>
    
</dir>

<p>Где mapname - имя, под которым это
преобразование используется в
правилах перезаписи; mapclass - имя типа
преобразования (эти имена
вкомпилированы в sendmail); arguments
интерпретируются в зависимости от
класса; обычно, используется один
аргумент, указывающий на файл,
содержащий преобразование.</p>

<p>На преобразования ссылаются,
используя синтаксис:</p>

<dir>
    <dir>
            <font color="#008000">$( ключ
                преобразования $@
                аргументы $: умолчание $)</font>
        </dir>
    
</dir>

<p>где и аргументы и умолчание могут
быть опущены. $@ аргументы могут
встречаться много раз. Указанный
ключ и аргументы передаются в
соответствующую преобразующую
функцию. Если она возвращает
значение, то оно замещает ввод. Если
она не возвращает значение и
имеется определенное умолчание, the
умолчание заменяет ввод. Иначе ввод
не изменяется.</p>

<p>Аргументы передаются в
преобразование для произвольного
использования. Большинство классов
преобразований могут
интерполировать эти аргументы в их
значения используя для указания
соответствующего аргумента
синтаксис &quot;%n&quot; (где n - цифра).</p>

<p>Аргумент &quot;%0&quot; обозначает ключ
базы данных. Например, правило</p>

<dir>
    <dir>
            <font color="#008000">R$- ! $+ $: $(uucp $1 $@ $2
                $: %1 @ %0 . UUCP $)</font>
        </dir>
    
</dir>

<p>Просматривает имя UUCP в
(определенном пользователем)
преобразовании UUCP; если не найдено,
превращает его в форму &quot;.UUCP&quot;.
База данных должна содержать
записи типа:</p>

<dir>
    <dir>
            <font color="#008000">decvax %1@%0.DEC.COM</font><p><font
                color="#008000">research %1@%0.ATT.COM</font></p>
            
        </dir>
    
</dir>

<p>Отметьте, что операторы умолчания
никогда не делают этого
преобразования.</p>

<p>Встроенное преобразование с
именем и классом &quot;host&quot; - это
просмотр канонизации имени хоста.
Таким образом, синтаксис:</p>

<dir>
    <dir>
            <font color="#008000">$(host hostname$)</font>
        </dir>
    
</dir>

<p>эквивалентен:</p>

<dir>
    <dir>
            <font color="#008000">$[hostname$]</font>
        </dir>
    
</dir>

<p>Существует множество
определенных классов.</p>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="16%">dbm </td>
        <td valign="top" width="84%">Просмотр базы
        данных, используя библиотеку
        ndbm(3). Sendmail должен быть
        скомпилирован с определенной <b>NDBM</b>.</td>
    </tr>
    <tr>
        <td valign="top" width="16%">btree</td>
        <td valign="top" width="84%">Просмотр базы
        данных с использованием
        интерфейса btree к библиотеке
        Berkeley db(3). Sendmail должен быть
        скомпилирован с определенной <b>NEWDB</b>.</td>
    </tr>
    <tr>
        <td valign="top" width="16%">hash </td>
        <td valign="top" width="84%">Просмотр базы
        данных с использованием
        хэш-интерфейса к библиотеке
        Berkeley db(3). Sendmail должен быть
        скомпилирован с определенной <b>NEWDB</b>.</td>
    </tr>
    <tr>
        <td valign="top" width="16%">nis</td>
        <td valign="top" width="84%">Просмотры NIS.
        Sendmail должен быть скомпилирован
        с определенной опцией <b>NIS</b>.</td>
    </tr>
    <tr>
        <td valign="top" width="16%">nisplus</td>
        <td valign="top" width="84%">Просмотры NIS+.
        Sendmail должен быть скомпилирован
        с определенной опцией <b>NISPLUS</b>.
        Аргумент - имя таблицы,
        используемой для просмотров, а
        флаги <b>-k</b> и <b>-v</b> могут быть
        использованы для установки
        столбцов ключа и значения
        соответственно.</td>
    </tr>
    <tr>
        <td valign="top" width="16%">hesiod</td>
        <td valign="top" width="84%">Просмотры Hesiod.
        Sendmail должен быть скомпилирован
        с определенной опцией <b>HESIOD</b>.</td>
    </tr>
    <tr>
        <td valign="top" width="16%">ldapx</td>
        <td valign="top" width="84%">Просмотры
        каталогов LDAP X500. Sendmail должен
        быть скомпилирован с
        определенной опцией <b>LDAPMAP</b>.
        Преобразование поддерживает
        большинство стандартных
        аргументов и большинство
        аргументов командной строки
        программы ldapsearch.</td>
    </tr>
    <tr>
        <td valign="top" width="16%">netinfo</td>
        <td valign="top" width="84%">Просмотры NeXT
        NetInfo. Sendmail должен быть
        скомпилирован с определенной
        опцией <b>NETINFO</b>.</td>
    </tr>
    <tr>
        <td valign="top" width="16%">text</td>
        <td valign="top" width="84%">Просмотры
        текстовых файлов. Формат
        текстового файла определяется
        флагами <b>-k</b> (число ключевых
        полей), <b>-v</b> (число поля
        значений), и <b>-z</b> (разделитель
        полей).</td>
    </tr>
    <tr>
        <td valign="top" width="16%">stab</td>
        <td valign="top" width="84%">Просмотры
        внутренней таблицы символов.
        Используется внутри для
        псевдонимизирования.</td>
    </tr>
    <tr>
        <td valign="top" width="16%">implicit</td>
        <td valign="top" width="84%">По-настоящему
        должно бы называться &quot;alias&quot;
        - используется для просмотра
        файлов псевдонимов по
        умолчанию, и используется по
        умолчанию, если не определен
        класс для файлов псевдонимов.</td>
    </tr>
    <tr>
        <td valign="top" width="16%">user</td>
        <td valign="top" width="84%">Просматривает
        пользователей, используя
        getpwnam(3). Для указания имени
        возвращаемого поля может быть
        использован флаг <b>-v</b> (хотя
        обычно используется только для
        проверки существования
        пользователя).</td>
    </tr>
    <tr>
        <td valign="top" width="16%">host</td>
        <td valign="top" width="84%">Канонифицирует
        доменные имена хостов. Получив
        имя хоста, вызывает сервер имен
        для поиска канонического имени
        для этого хоста.</td>
    </tr>
    <tr>
        <td valign="top" width="16%">bestmx</td>
        <td valign="top" width="84%">Возвращает
        лучшую запись MX для заданного в
        качестве ключа имени хоста.
        Всегда предпочитается текущая
        машина- то есть, текущая машина
        является одним из хостов,
        перечисленных в качестве
        записи MX с самым низким
        значением предпочтения,
        следовательно, имеется
        гарантия его возврата. Это
        может использоваться для
        определения, является ли эта
        машина целью записи MX, и почта
        может быть принята на этом
        основании. Если задан флаг -<b>z</b>,
        то возвращаются все имена MX,
        разделенные заданным
        разделителем.</td>
    </tr>
    <tr>
        <td valign="top" width="16%">sequence</td>
        <td valign="top" width="84%">Аргументы в
        строке &quot;K&quot; - список
        преобразований;
        результирующее преобразование
        просматривает
        аргументы-преобразования, пока
        не найдет совпадение для
        указанного ключа. Например,
        если определение ключа: <p><font
        color="#008000">Kmap1 ...</p>
        <p>Kmap2 ...</p>
        <p>Kseqmap sequence map1 map2</font></p>
        <p>тогда просмотр &quot;seqmap&quot;
        сначала производится в map1. Если
        найдено, то происходит
        немедленный возврат. Иначе, тот
        же ключ используется для map2.</p>
        </td>
    </tr>
    <tr>
        <td valign="top" width="16%">switch</td>
        <td valign="top" width="84%">Прямо как
        преобразование &quot;sequence&quot;, за
        исключением того, что порядок
        преобразований определяется
        сервисным переключателем.
        Аргумент - имя сервиса для
        просмотра; значения из
        сервисного переключателя
        добавляются к имени
        преобразования для создания
        новых имен преобразований.
        Например, рассмотрим
        определение ключа: <p><font
        color="#008000">Kali switch aliases </font></p>
        <p>вместе с вхождением
        сервисного переключателя:</p>
        <p><font color="#008000">aliases nis files</font></p>
        <p>Это вызовет запрос по
        преобразованию &quot;ali&quot; для
        поиска преобразований с
        именами &quot;ali.nis&quot; и
        &quot;ali.files&quot; в этом порядке.</p>
        </td>
    </tr>
    <tr>
        <td valign="top" width="16%">dequote</td>
        <td valign="top" width="84%">Обрезает у
        имени двойные кавычки (&quot;). Не
        обрезает обратные слеши, и не
        будет обрезать кавычки, если
        результирующая строка будет
        содержать не возможный для
        просмотра синтаксис (то есть,
        основные ошибки типа
        незакрытых угловых скобок;
        более сложные ошибки типа
        неизвестных хостов не
        проверяются). Предназначается
        для приема почты из систем типа
        DECnet, квотирующих странный
        синтаксис типа <p><font color="#008000">&quot;49ers::ubell&quot;</font></p>
        <p>Обычное использование -
        что-то типа:</p>
        <p><font color="#008000">Kdequote dequote</font></p>
        <p><font color="#008000">...</font></p>
        <p><font color="#008000">R$- $: $(dequote $1 $)</font></p>
        <p><font color="#008000">R$- $+ $: $&gt;3 $1 $2</font></p>
        <p>Для предотвращения
        неожиданных результатов
        необходима осторожность;
        например,</p>
        <p><font color="#008000">&quot;|someprogram &lt; input
        &gt; output&quot;</font></p>
        <p>потеряет свои кавычки, но
        результат, скорее всего, будет
        отличаться от ожидаемого. К
        счастью, такие случаи
        достаточно редки.</p>
        </td>
    </tr>
    <tr>
        <td valign="top" width="16%">Regex</td>
        <td valign="top" width="84%">Определение
        преобразования в строке <b>K</b>
        содержит регулярное выражение.
        Любой ключевой ввод
        сравнивается с этим
        выражением, используя
        программы регулярных
        выражений стандарта POSIX regcomp(),
        regerr(), и regexec(). Если вам нужно
        узнать больше информации о
        сравнении регулярных
        выражений, смотрите
        документацию на эти программы.
        Если не определен флаг -<b>m</b> не
        производится никакой
        перезаписи ключа. Без него,
        если ключ отвергнут или
        использован -<b>s</b>, то он
        замещается подходящими
        подстроками,разделенными <b>$|</b>
        или строкой, определенной
        флагом <b>-d</b>. Флаги, имеющиеся в
        преобразовании:<p>-n не<br>
        -f чувствительность к регистру<br>
        -b основные регулярные
        выражения (по умолчанию
        развернуто)<br>
        -s совпадение подстроки<br>
        -d устанавливает разделитель,
        используемый для -s<br>
        -a добавить строку к ключу<br>
        -m только проверка совпадения,
        не принимать/отказывать
        значение</p>
        <p>Флаг -<b>s</b>flag выбыирает
        подстроки в результате
        просмотра. Например,</p>
        <p><font color="#008000">-s1,3,4</font></p>
        </td>
    </tr>
    <tr>
        <td valign="top" width="16%">program</td>
        <td valign="top" width="84%">Аргументы в
        строке <b>K</b> являются путями к
        программам и любые начальные
        параметры будут пропущены. При
        вызове преобразования, к
        начальным параметрам
        добавляется ключ, а программа
        запускается с от пользователя
        и группы по умолчанию. Первая
        строка стандартного вывода
        возвращается как значение
        просмотра. Это все имеет
        множество потенциальных
        проблем безопасности, и жутко
        тормозит, поэтому
        использоваться должно только
        тогда, когда действительно
        необходимо.</td>
    </tr>
</table>

<p>Большинство из них принимают в
качестве аргументов одни и те же
опциональные флаги и имя файла (или
имя преобразования для NIS; имя файла
является корнем пути к базе данных,
так что &quot;.db&quot; или какое-либо
другое расширение будет добавлено
для получения настоящего имени
базы данных). Известные флаги:</p>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="22%">-o</td>
        <td valign="top" width="78%">Указывает, что
        это преобразование
        опционально - то есть, если оно
        не может быть открыто, не
        выдается ни какой ошибки, а
        sendmail будет считать, что
        преобразование было, но было
        пустым.</td>
    </tr>
    <tr>
        <td valign="top" width="22%">-N, -O</td>
        <td valign="top" width="78%">Если ни <b>-N</b>,
        ни <b>-O</b> не указаны, sendmail
        использует адаптивный
        алгоритм для определения
        смотреть или нет нулевые байты
        в конце ключей. Сначала
        пробуются оба; если находится
        ключ с нулевым байтом, он
        никогда снова не будет
        опробован без нулевого байта и
        наоборот. Если указан <b>-N</b>, то
        никогда не пробуется без
        нулевого байта, а если указан <b>-O</b>,
        то никогда не пробуется с
        нулевым байтом. Указание
        одного из них может увеличить
        скоромть совпадений, но
        никогда не является
        необходимым. Если указаны оба <b>-N</b>
        и <b>-O</b>, sendmail никогда не будет
        пробовать никакие совпадения -
        то есть, все будет считаться
        неудачным.</td>
    </tr>
    <tr>
        <td valign="top" width="22%">-ax</td>
        <td valign="top" width="78%">Добавить
        строку x к успешным
        совпадениям. Например,
        преобразование по умолчанию host
        добавляет точку при успешном
        совпадении.</td>
    </tr>
    <tr>
        <td valign="top" width="22%">-Tx</td>
        <td valign="top" width="78%">Добавить
        строку x при временной неудаче.</td>
    </tr>
    <tr>
        <td valign="top" width="22%">-f</td>
        <td valign="top" width="78%">Не
        преобразовывать из верхнего в
        нижний регистр до просмотра
        ключа.</td>
    </tr>
    <tr>
        <td valign="top" width="22%">-m</td>
        <td valign="top" width="78%">Только прверка
        совпадения (без замены
        значения). Если вы беспокоитесь
        о существовании ключа, а не о
        значении (например, при поиске
        преобразования NIS
        &quot;hosts.byname&quot;), этот флаг
        удержит преобразование от
        замены значения. Однако,
        аргумент -a все еще добавляется
        при совпадении, и умолчание все
        еще берется при несовпадении.</td>
    </tr>
    <tr>
        <td valign="top" width="22%">-kkeycol</td>
        <td valign="top" width="78%">Имя ключевого
        столбца (для NIS+) или номер (для
        текстовых просмотров). Для
        преобразований LDAP это
        фильтрует строку, проходящую
        на printf с %s, где вставляется
        строка для
        &quot;преобразования&quot;.</td>
    </tr>
    <tr>
        <td valign="top" width="22%">-vvalcol</td>
        <td valign="top" width="78%">Имя столбца
        значения (для NIS+) или номер (для
        текстовых просмотров). Для
        преобразований LDAP это имя
        возвращаемого атрибута.</td>
    </tr>
    <tr>
        <td valign="top" width="22%">-zdelim</td>
        <td valign="top" width="78%">Разделитель
        столбцов (для текстовых
        просмотров). Может быть одним
        знаком или одной из
        специальных строк &quot;\n&quot; или
        &quot;\t&quot; для указания новой
        строки или табуляции
        соответственно. Если полностью
        опущен, разделителем столбцов
        считается любая
        последовательность пробелов.</td>
    </tr>
    <tr>
        <td valign="top" width="22%">-t</td>
        <td valign="top" width="78%">Обычно, когда
        преобразование пытается
        просмотреть имя хоста и сервер
        ошибочен (то есть, sendmail не может
        найти ни одного сервера имен;
        это не то же самое, что
        вхождение не было найдено в
        преобразовании), обработанное
        сообщение ставится в очередь
        для дальнейшей обработки. Флаг
        -<b>t</b> отключает такое
        поведение, позволяя считать,
        что если происходит временная
        ошибка (сервер отключен), то это
        была постоянная ошибка
        (вхождение не найдено). В
        частности, это полезно для
        просмотров DNS, когда чей-то еще
        неправильно
        сконфигурированный сервер
        имен может вызвать проблемы на
        вашей машине. Однако здесь
        необходима осторожность, чтобы
        не откинуть почту, которая
        могла бы быть разрешена
        корректно, если бы вы
        попытались снова. Общая
        стратегия - перенаправлять
        такую почту на другой,
        возможно, имеющий лучшее
        соединение, почтовый сервер.</td>
    </tr>
    <tr>
        <td valign="top" width="22%">-sspacesub</td>
        <td valign="top" width="78%">Только для
        преобразования dequote, символ,
        используемый для замены
        символов пробела после
        успешного деквотирования.</td>
    </tr>
    <tr>
        <td valign="top" width="22%">-q</td>
        <td valign="top" width="78%">Не удалять
        кавычки перед просмотром.</td>
    </tr>
    <tr>
        <td valign="top" width="22%">-A</td>
        <td valign="top" width="78%">При
        перестройке файла псевдонимов,
        флаг -<b>A</b> заставляет
        соединяться дублированные
        вхождения в текстовой версии.
        Например, два вхождения:<p>list:
        user1, user2<br>
        list: user3</p>
        <p>при присутствии флага -<b>A</b>
        будет считаться за одно
        вхождение </p>
        <p>list: user1, user2, user3</p>
        </td>
    </tr>
</table>

<p>&nbsp;</p>

<p>Преобразование dbm добавляет
строки &quot;.pag&quot; и &quot;.dir&quot; к
заданному имени файла;
преобразования hash и btree добавляют
&quot;.db&quot;. Например, описание
преобразования</p>

<p><font color="#008000">Kuucp dbm -o -N /usr/lib/uucpmap</font></p>

<p>Описывает опциональное
преобразование класса &quot;dbm&quot; по
имени &quot;uucp&quot;; оно всегда имеет
нулевые байты в конце каждой
строки, и данные находящиеся в
/usr/lib/uucpmap.{dir,pag}.</p>

<p>Для постороения преобразований,
ориентированных на три базы данных,
может быть использована программа
makemap(8). Она принимает следующие
флаги:</p>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="14%"><p align="center">-f</p>
        </td>
        <td valign="top" width="86%">Не
        переделывать верхний регистр в
        нижний при преобразовании.</td>
    </tr>
    <tr>
        <td valign="top" width="14%"><p align="center">-N</p>
        </td>
        <td valign="top" width="86%">Включать
        нулевые байты в ключах.</td>
    </tr>
    <tr>
        <td valign="top" width="14%"><p align="center">-o</p>
        </td>
        <td valign="top" width="86%">Добавить к
        существующему (старому) файлу.</td>
    </tr>
    <tr>
        <td valign="top" width="14%"><p align="center">-r</p>
        </td>
        <td valign="top" width="86%">Позволить
        замещение существующих ключей;
        обычно, при ошибке, заново
        вставляет существующий ключ.</td>
    </tr>
    <tr>
        <td valign="top" width="14%"><p align="center">-v</p>
        </td>
        <td valign="top" width="86%">Печатать
        происходящее.</td>
    </tr>
</table>

<p>Демон sendmail не должен
перестартовываться для чтения
новых преобразований до тех пор,
пока вы не замените их на месте;
используется блокировка файлов,
так что преобразования не будут
считаны, пока они не обновлены<a
name="b9"></a><a href="sendmail5.html#r9"><font color="#0000FF"><sup>9</sup></font></a>.</p>

<p>Новые классы могут быть добавлены
в подпрограмму <b>setupmaps</b> в файле <b>conf.c</b>.</p>

<dir>
    <dir>
            <a name="toc510"></a><b>5.10.
                Пользовательская База
                Данных</b>
        </dir>
    
</dir>

<p>Если вы имеете версию sendmail с
вкомпилированой поддержкой
пользовательской базы данных,
обработка адресов отправителя и
получателя изменена.</p>

<p>Местонахождение это базы данных
контролируется опцией <b>UserDatabaseSpec</b>.</p>

<dir>
    <dir>
            <dir>
                    <dir>
                            <a name="toc5101"></a><b>5.10.1.
                                Структура
                                Пользовательской
                                Базы Данных</b>
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p>База данных является
сортированной (основанной на BTree)
структурой. Пользовательские
записи сохраняются с ключом:</p>

<dir>
    <dir>
            <font color="#008000">user-name<b>:</b>field-name</font>
        </dir>
    
</dir>

<p>Сортированный формат базы данных
гарантирует, что пользовательские
записи сгруппированы вместе.
Мета-информация всегда сохраняется
в ведущем столбце.</p>

<p>Имена полей определяют и
синтаксис, и семантику значения.
Определенные поля включают:</p>

<table border="0" cellpadding="7" cellspacing="0" width="100%">
    <tr>
        <td valign="top" width="25%">maildrop</td>
        <td valign="top" width="72%">Адрес доставки
        для этого пользователя. Эта
        запись может иметь несколько
        значений. В частности, списки
        рассылки будут иметь одну
        запись maildrop на каждого
        пользователя в списке.</td>
    </tr>
    <tr>
        <td valign="top" width="25%">mailname</td>
        <td valign="top" width="72%">Выходящее
        почтовое имя для этого
        пользователя. Для каждого
        выходящего имени должна быть
        соответствующая запись maildrop
        для этого имени, чтобы
        разрешить обратную почту. См.
        также <p>:default:mailname.</p>
        </td>
    </tr>
    <tr>
        <td valign="top" width="25%">mailsender</td>
        <td valign="top" width="72%">Каждое
        сообщение, посланное на этот
        адрес, будет иметь указанного
        конвертного отправителя.
        Предназначено для списков
        рассылки, и обычно будет именем
        соответствующего адреса -request.
        Очень похоже на owner-list
        синтаксис в файле псевдонимов.</td>
    </tr>
    <tr>
        <td valign="top" width="25%">fullname</td>
        <td valign="top" width="72%">Полное имя
        пользователя.</td>
    </tr>
    <tr>
        <td valign="top" width="25%">office-address</td>
        <td valign="top" width="72%">Офисный адрес
        пользователя.</td>
    </tr>
    <tr>
        <td valign="top" width="25%">office-phone</td>
        <td valign="top" width="72%">Офисный
        телефон пользователя.</td>
    </tr>
    <tr>
        <td valign="top" width="25%">office-fax</td>
        <td valign="top" width="72%">Офисный факс
        пользователя.</td>
    </tr>
    <tr>
        <td valign="top" width="25%">home-address</td>
        <td valign="top" width="72%">Домашний адрес
        пользователя.</td>
    </tr>
    <tr>
        <td valign="top" width="25%">home-phone</td>
        <td valign="top" width="72%">Домашний
        телефон пользователя.</td>
    </tr>
    <tr>
        <td valign="top" width="25%">home-fax</td>
        <td valign="top" width="72%">Домашний факс
        пользователя.</td>
    </tr>
    <tr>
        <td valign="top" width="25%">project</td>
        <td valign="top" width="72%">(Краткое)
        описание проекта, которым
        занимается указанное лицо. В
        Университете это часто просто
        имя научного руководителя.</td>
    </tr>
    <tr>
        <td valign="top" width="25%">plan</td>
        <td valign="top" width="72%">Указатель на
        файл, откуда может быть взята
        информация о плане.</td>
    </tr>
</table>

<p>Ко времени написания этого
документа, только несколько из этих
полей на самом деле использовались
в sendmail: maildrop и mailname. Запланирована
программа finger, использующая
остальные поля.</p>

<dir>
    <dir>
            <dir>
                    <dir>
                            <a name="toc5102"></a><b>5.10.2.
                                Семантика
                                Пользовательской
                                Базы Данных</b>
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p>Когда правила перезаписи
передают адрес в локальную
почтовую программу, имя
пользователя пропускается через
файл псевдонимов. Если не найдено
ни одного псевдонима (или псевдоним
указывает обратно на этот адрес),
имя (с добавленным &quot;:maildrop&quot;)
используется как ключ в
пользовательской базе данных. Если
не найдено ни одного совпадения
(или если maildrop указывает на тот же
адрес), пробуется пересылка.</p>

<p>Если первая лексема имени
пользователя возвращаемая набором
правил - знак &quot;@&quot;, просмотр
пользовательской базы данных
пропускается. Смысл этого в том,
чтобы пользовательская база данных
представляла собой набор умолчаний
для группы (в нашем случае, Computer Science
Division); почта, посылаемая на
определенную машину должна
игнорировать эти умолчания.</p>

<p>При отправке почты, имя
отправителя просматривается в базе
данных. Если этот пользователь
имеет запись &quot;mailname&quot;, значение
этой записи используется как его
выходящее имя. Например, я могу
иметь запись:</p>

<dir>
    <dir>
            <font color="#008000">eric:mailname
                Eric.Allman@CS.Berkeley.EDU</font>
        </dir>
    
</dir>

<p>Это приведет к тому, что посланная
мной почта будет исходить от Eric.Allman.</p>

<p>Если для пользователя найдена
запись &quot;maildrop&quot;, но не существует
ни одной соответствующей записи
&quot;mailname&quot;, производится проверка
записи &quot;:default:mailname&quot;. Если она
существует, то это имя считается
именем хоста, подставляемого
вместо локального хоста. Например,
в нашем случае, мы можем установить
его в &quot;CS.Berkeley.EDU&quot;. в результате,
все, кто известен в базе данных
будет отправлять почту со штампом
&quot;user@CS.Berkeley.EDU&quot;, а те, кто в ней не
перечислен будут использовать
локальное имя хоста.</p>

<dir>
    <dir>
            <dir>
                    <dir>
                            <a name="toc5103"></a><b>5.10.3.
                                Создание Базы
                                Данных</b><a href="sendmail5.html#r10"><sup>10</sup></a><a
                                name="b10"></a>
                        </dir>
                    
                </dir>
            
        </dir>
    
</dir>

<p>Пользовательская база данных
строится из текстового файла,
используя утилиту makemap (в поставке в
подкаталоге). Текстовый файл
представляет собой
последовательность строк,
соответствующих записям userdb;
каждая строка имеет ключ и
значение, разделенные пробелом.
Ключ всегда имеет формат, описанный
выше - например:</p>

<dir>
    <dir>
            <font color="#008000">eric:maildrop</font>
        </dir>
    
</dir>

<p>Этот файл обычно устанавливается
в системном каталоге; например, он
может называться /etc/userdb. Для того,
чтобы сделать из преобразования
базу данных, запустите программу:</p>

<dir>
    <dir>
            <font color="#008000">makemap btree
                /etc/userdb.db &lt; /etc/userdb</font>
        </dir>
    
</dir>

<p>Затем создайте файл конфигурации
использующий это. Например,
используя V8 M4 конфигурацию,
включите в ваш файл .mc строку:</p>

<dir>
    <dir>
            <font color="#008000">define(`confUSERDB_SPEC',
                /etc/userdb.db)</font>
        </dir>
    
</dir>

<hr>

<p><a name="r1"></a>1. На самом деле,
это полностью эквивалентно $(host
hostname$). В частности, может быть
использовано умолчание $:. <a href="sendmail5.html#b1">[назад] </a></p>

<p><a name="r2"></a>2. Вы можете захотеть
использовать это для специальных
&quot;пользовательских&quot;
расширений. Например, в адресе
&quot;jgm+foo@CMU.EDU&quot;; часть &quot;+foo&quot; - это
не часть имени пользователя, и
передается в локальную почтовую
программу для местного
использования. <a href="sendmail5.html#b2">[назад]
</a></p>

<p><a name="r3"></a>3. С версии 8.6, все эти
макросы имеют разумные умолчания.
Предыдущие версии требовали, чтобы
они были определены. <a href="sendmail5.html#b3">[назад]</a></p>

<p><a name="r4"></a>4. Например, в некоторых
системах gethostname может возвратить
&quot;foo&quot;, которое будет
преобразовано в &quot;foo.bar.com&quot;
посредством gethostbyname. <a href="sendmail5.html#b4">[назад] </a></p>

<p><a name="r5"></a>5. Старые версии sendmail не
предопределяли $j вообще, так что,
вплоть до 8.6, файлы конфигурации
должны были определять $j. <a href="sendmail5.html#b5">[назад] </a></p>

<p><a name="r6"></a>6. Старая опция g была
комбинирована в опцию DefaultUser. <a
href="sendmail5.html#b6">[назад] </a></p>

<p><a name="r7"></a>7. При запуске в качестве
демона, переходит к этому
пользователюпосле принятия
соединения, но до прочтения любой
команды SMTP. <a href="sendmail5.html#b7">[назад]
</a></p>

<p><a name="r8"></a>8. И конечно, поставщики
поощряются при включении самих
себя в список распознаваемых
поставщиков изменением
подпрограммы setvendor в conf.c. Для
регистрации вашей разновидности
пошлите письмо sendmail@Sendmail.ORG. <a href="sendmail5.html#b8">[назад]</a></p>

<p><a name="r9"></a>9. То есть, не создавайте
новые преобразования и не кладите
их командой mv(1) на место. Так как
преобразования уже открыты, новые
преобразования никогда не будут
увидены. <a href="sendmail5.html#b9">[назад]</a></p>

<p><a name="r10"></a>10. Известно, что эти
инструкции не полны. Планируется,
что будущая версия
пользовательской базы данных будет
включать вещи типа сервиса finger - и
хорошую документацию. <a href="sendmail5.html#b10">[назад] </font></a></p>
</body>
</html>
