<HTML>
<HEAD>
<TITLE>DOSEmu: Security</TITLE>
</HEAD>
<BODY>
<?php include("/home/maxcom/linux_html/books/head.php3") ?>
<A HREF="README-2.html">Назад</A>
<A HREF="README-4.html">Вперед</A>
<A HREF="README.html#toc3">Оглавление</A>
<HR>
<H2><A NAME="s3">3. Безопасность</A></H2>

<P>This part of the document by Hans Lermen, 
<A HREF="mailto:lermen@fgan.de">&lt;lermen@fgan.de&gt;</A> 
on Apr 6, 1997.</P>

<P> 
Это советы на тот случай, когда dosemu запускается на машине, которая,
хотя бы эпизодически, подключается к интернет или другим машинам, либо
другим способом позволяет работать "чужим" пользователям.</P>
<P>
<UL>
<LI> 
<EM>НИКОГДА</EM> не позволяйте посторонним пользователям выполнять DOSEMU
из-под root-а!!! (Начиная с dosemu-0.66.1.4 это больше не требуется, 
работа от имени обычного пользователя сохраняет полную функциональность).
</LI>
<LI> 
<EM>Не</EM> конфигурируйте dosemu с опцией --enable-runasroot. Обчно dosemu
отключает привелигированный режим после запуска, и включает его только при
необходимости. С опцией --enable-runasroot программа будет постоянно
выполняться в режиме суперпользователя и отключать его только при обращении
к некоторым чувствительным к режиму безопасности ресурсам, что не очень-то
хорошо.
</LI>
<LI> 
Никогда не запускайте программы, использующие DPMI, если dosemu запускается
как root-suid, ... а именно это обычно и имеет место, иначе только администратор мог
бы запускать dosemu. 
<P>(для отключения в /etc/dosemu.conf установите 'dpmi off')</P>
<P>
Существует возможность подменить чувствительные участки кода дос-эмулятора,
что дает шанс злонамеренной дос-программе, знающей устройство dosemu (а это легко, т.к.
доступны исходники), получить права супервизора над другими (не-dosemu)
процессами. Из-за того, что многие игры не могут работать без этого, мы
разрешили создание LDT-дескриптора, покрывающего все пользовательское
пространство. 
</P>
<P>
В  /etc/dosemu.conf имеется опция 'secure', которая позволяет отключить
создание таких дескрипторов, но в настоящее время это защищает только код
эмулятора и стэк, и некий злоумышленник может использовать незащищенную
"кучу" в соответсвии со своим чувством юмора.
</P>
<P>В любом случае 'secure on' лучше, чем ничего.</P>

</LI>
<LI> 
Никогда не позволяйте запускать команду 'system.com' (часть dosemu).
Она вызывает функцию system() системной библиотеки libc. Хотя
привилегированный режим выключен, вызванный процесс наследует (uid=root,
euid=user), и так как unix-программа может использовать setreuid(), 
чтобы получить обратно права суперпользователя, то ... остальное можете
вообразить сами. Использование команды 'system' отключается опцией  'secure
on' в /etc/dosemu.conf. 
<P>
Команда 'unix.com' (также из состава dosemu) <EM>не имеет</EM> этой дыры в
защите: перед выполнением внешней команды порождается отдельный процесс,
который полностью сбрасывает все привилегии... - никакой опасности (и поэтому
она больше не будет отключаться по 'secure on').
</P>
</LI>
</UL>
</P>
<HR>
<A HREF="README-2.html">Назад</A>
<A HREF="README-4.html">Вперед</A>
<A HREF="README.html#toc3">Оглавление</A>

<HR><I>Перевод: Валерий Груздев (grue@vpti.vladimir.ru)</I>
</BODY>
</HTML>
