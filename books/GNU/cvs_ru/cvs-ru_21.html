<HTML>
<HEAD>
<!-- Created by texi2html 1.56k from cvs-ru.texi on 11 April 2001 -->

<TITLE>CVS -- Система Управления Параллельными Версиями - Исправление ошибок</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="cvs-ru_1.html">first</A>, <A HREF="cvs-ru_20.html">previous</A>, <A HREF="cvs-ru_22.html">next</A>, <A HREF="cvs-ru_24.html">last</A> section, <A HREF="cvs-ru_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC177" HREF="cvs-ru_toc.html#TOC177">Исправление ошибок</A></H1>

<P>
Если у вас есть какие-то проблемы при использовании CVS, то
вам поможет это приложение.  Если вы видите конкретное сообщение
об ошибке, то можете найти его здесь по алфавиту.  В противном
случае обратитесь к главе о прочих проблемах и попробуйте найти
там свою.




<H2><A NAME="SEC178" HREF="cvs-ru_toc.html#TOC178">Частичный список сообщений CVS</A></H2>

<P>
Вот частичный список сообщений об ошибке, которые может выдавать
CVS.  Это неполный список -- CVS может выдавать
множество разнообразных сообщений об ошибке, часть которых
выдается операционной системой.  Назначение этого раздела ---
перечислить обычные и/или потенциально непонятные сообщения.


<P>
Сообщения перечислены в алфавитном порядке, но вводный текст,
такой как <SAMP>`cvs update: '</SAMP> не учитывается.


<P>
В некоторых случаях в этом списке находятся сообщения, которые
выдаются старыми версиями CVS (частично из-за того, что
пользователи могут быть неуверены, какую версию CVS они
используют в настоящий момент).


<DL COMPACT>

<DT><CODE>cvs <VAR>command</VAR>: authorization failed: server <VAR>host</VAR> rejected access</CODE>
<DD>
Это -- неспецифическое сообщение при попытке соединиться с
сервером парольной аутентификации, который отказывает в
авторизации без указания конкретной причины.  Проверьте, что
указанные имя пользователя и пароль верны, и что заданный
<CODE>$CVSROOT</CODE> разрешен с помощью ключа <SAMP>`--allow-root'</SAMP> в
<TT>`/etc/inetd.conf'</TT>.  См. section <A HREF="cvs-ru_2.html#SEC29">Прямое соединение с парольной аутентификацией</A>.

<DT><CODE><VAR>file</VAR>:<VAR>line</VAR>: Assertion '<VAR>text</VAR>' failed</CODE>
<DD>
Точный формат этого сообщения может варьироваться в зависимости
от вашей системы.  Это сообщение указывает на ошибку реализации
CVS, что делать с которой, написано в section <A HREF="cvs-ru_23.html#SEC182">Что делать с ошибками в CVS и этом руководстве?</A>.

<DT><CODE>cvs <VAR>command</VAR>: conflict: removed <VAR>file</VAR> was modified by second party</CODE>
<DD>
Это сообщение указывает, что вы удалили файл, а кто-то еще
изменил его в то же самое время.  Для того, чтобы справиться с
этим конфликтом, сначала выполните <SAMP>`cvs add <VAR>file</VAR>'</SAMP>.
Если требуется, взгляните на внесенные изменения и выясните,
хотите ли вы все еще удалять его.  Если нет, то больше ничего
делать не надо.  Если да, то еще раз скажите <SAMP>`cvs remove
<VAR>file</VAR>'</SAMP> и зафиксируйте изменения.

<DT><CODE>cannot change permissions on temporary directory</CODE>
<DD>

<PRE>
Operation not permitted
</PRE>

Это сообщение иногда появлялось при выполнении набора тестов под
RedHat Linux 3.0.3 и 4.1, причем повторить его, а также выяснить
его причину, мы не смогли.  Неизвестно, проявляется ли эта ошибка
только под Linux (или вообще только на этой конкретной машине!).
Если проблема не случается на других UNIXах, то, скорее всего,
сообщением об ошибке будет <SAMP>`Not owner'</SAMP> или другое сообщение,
возникающее при ошибке <CODE>EPERM</CODE>, вместо <SAMP>`Operation not
permitted'</SAMP>.  Если вы можете что-то добавить, сообщите нам, как
описано в section <A HREF="cvs-ru_23.html#SEC182">Что делать с ошибками в CVS и этом руководстве?</A>.  Если вы сталкиваетесь с этой
ошибкой при использовании CVS, следует повторить операцию, и
она пройдет успешно.

<DT><CODE>cannot open CVS/Entries for reading: No such file or directory</CODE>
<DD>
Обычно это означает внутреннюю ошибку CVS, с которой можно
справиться так же, как и с другими (see section <A HREF="cvs-ru_23.html#SEC182">Что делать с ошибками в CVS и этом руководстве?</A>).
Обычно эту ошибку можно обойти.  Надеемся, что в конкретной
ситуации будет ясно, как это сделать.

<DT><CODE>cvs [init aborted]: cannot open CVS/Root: No such file or directory</CODE>
<DD>
Это сообщение совершенно безвредно.  Если оно не сопровождается
другими сообщениями об ошибке, значит, операция завершится
успешно.  Это сообщение не должно появляться в свежих версиях
CVS, но документировано здесь для удобства пользователей
версий CVS 1.9 и раньше.

<DT><CODE>cvs [checkout aborted]: cannot rename file <VAR>file</VAR> to CVS/,,<VAR>file</VAR>: Invalid argument</CODE>
<DD>
Это сообщение, по отзывам, появляется от случая к случаю при
работе с CVS 1.9 под Solaris 2.5.  Причина неизвестна; если
вы можете что-нибудь сказать по этмоу поводу, сообщите нам, как
описано в section <A HREF="cvs-ru_23.html#SEC182">Что делать с ошибками в CVS и этом руководстве?</A>.

<DT><CODE>cvs [<VAR>command</VAR> aborted]: cannot start server via rcmd</CODE>
<DD>
Это, к сожалению, довольно неспецифическое сообщение об ошибке,
которое CVS версии 1.9 выдает, если вы выполняете клиента
CVS и при соединении с сервером появляются проблемы.
Текущие версии CVS должны выдавать более конкретное
сообщение.  Если вы получили это сообщение, совершенно не имея в
виду запускать клиента CVS, значит, вероятно, вы забыли
указать <CODE>:local:</CODE>, как описано в section <A HREF="cvs-ru_2.html#SEC9">Репозиторий</A>.

<DT><CODE>ci: <VAR>file</VAR>,v: bad diff output line: Binary files - and /tmp/T2a22651 differ</CODE>
<DD>
CVS 1.9 и старше выдают это сообщение при попытке
зафиксировать измененный двоичный файл, если система RCS
установлена неправильно.  Перечитайте инструкции из дистрибутива
RCS и файл <TT>`INSTALL'</TT> в дистрибутиве CVS.  Еще
можно обновить версию CVS, которая сама будет заниматься
фиксированием, без необходимости использовать RCS.

<DT><CODE>cvs checkout: could not check out <VAR>file</VAR></CODE>
<DD>
При работе с CVS 1.9 это сообщение может означать, что
программа <CODE>co</CODE> (из комплекта RCS) завершилась с
ошибкой.  Перед этим сообщением должно быть другое, с объяснением
причины, однако, наблюдались и ситуации с отсутствием оного,
которые так и не объяснены.  При работе с текущей версией
CVS, которая не использует <CODE>co</CODE>, появление этого
сообщения без сопровождающего объяснения определенно означает
ошибку в CVS (see section <A HREF="cvs-ru_23.html#SEC182">Что делать с ошибками в CVS и этом руководстве?</A>).

<DT><CODE>cvs [login aborted]: could not find out home directory</CODE>
<DD>
Это означает, что вам требуется установить переменные окружения,
которые CVS использует, чтобы найти ваш домашний каталог.
См. обсуждение <SAMP>`$HOME'</SAMP>, <SAMP>`$HOMEDRIVE'</SAMP> и <SAMP>`$HOMEPATH'</SAMP> 
в section <A HREF="cvs-ru_19.html#SEC175">Все переменные окружения, используемые в CVS</A>.

<DT><CODE>cvs update: could not merge revision <VAR>rev</VAR> of <VAR>file</VAR>: No such file or directory</CODE>
<DD>
CVS 1.9 и раньше выдают это сообщение, если не смогли найти
программу <CODE>rcsmerge</CODE>.  Убедитесь, что она находится в вашем
<CODE>PATH</CODE>, или поставьте свежую версию CVS, которая не
требует внешней программы <CODE>rcsmerge</CODE>.

<DT><CODE>cvs [update aborted]: could not patch <VAR>file</VAR>: No such file or directory</CODE>
<DD>
Это означает, что не обнаружена программа <CODE>patch</CODE>.
Убедитесь, что она находится в вашем <CODE>PATH</CODE>.  Заметьте, что, 
несмотря на формулировку сообщения, оно <EM>не</EM> относится к
файлу <TT>`file'</TT>.  Если клиент и сервер оба используют текущую
версию CVS, то внешняя программа <CODE>patch</CODE> не требуется и 
вы не должны получать такое сообщение.  Если же клиент либо
сервер используют CVS 1.9, то программа <CODE>patch</CODE>
требуется.

<DT><CODE>cvs update: could not patch <VAR>file</VAR>; will refetch</CODE>
<DD>
Это означает, что по какой-то причине клиент не смог применить
файл изменений, посланный ему сервером.  Можно не беспокоиться,
получив это сообщение -- работа CVS просто несколько
замедлится, но никак гне повлияет на конечный результат.

<DT><CODE>dying gasps from <VAR>server</VAR> unexpected</CODE>
<DD>
В сервере версий CVS 1.9.18 и раньше имеется известная
ошибка, приводящая к такому сообщению.  У меня лично получалось
вызывать её, используя глобальный ключ <SAMP>`-t'</SAMP>.  Эта ошибка в
файле <TT>`src/filesubr.c'</TT> была исправлена Энди Пайпером (Andy
Piper) 14 ноября 1997 года, если кому-то интересно.  Если вы
видите это сообщение, просто повторите команду, или, если вы
обнаружили её причину, дайте нам знать, как описано в section <A HREF="cvs-ru_23.html#SEC182">Что делать с ошибками в CVS и этом руководстве?</A>.

<DT><CODE>end of file from server (consult above messages if any)</CODE>
<DD>
Самая распространенная причина этого сообщения -- вы используете
внешнюю программу <CODE>rsh</CODE> и она завершилась с кодом ошибки.  В 
этом случае она должна была напечатать сообщение, которое
появится перед обсуждаемым сообщением.  Дальнейшая информация о
настройке клиента и сервера CVS находится в section <A HREF="cvs-ru_2.html#SEC26">Сетевые репозитории</A>.

<A NAME="IDX662"></A>
<DT><CODE>cvs commit: Executing 'mkmodules'</CODE>
<DD>
Это означает, что ваш репозиторий настроен для версии CVS
раньше 1.8.  При использовании CVS 1.8 и позже перед обсуждаемым
сообщением появится еще одно:


<PRE>
cvs commit: Rebuilding administrative file database
</PRE>

Если вы видите оба сообщения, то база данных перестраивается
дважды, что необязательно, но нестрашно.  Если вы хотите избежать 
ненужной работы, и не используете версию CVS 1.7 или раньше, 
удалить <CODE>-i mkmodules</CODE> везде, где эта строка появляется в
файле <TT>`modules'</TT>.  Дальнейшая информация об этом файле
находится в section <A HREF="cvs-ru_18.html#SEC154">Файл <TT>`modules'</TT></A>.

<DT><CODE>missing author</CODE>
<DD>
Обычно это происходит, если вы создали RCS-файл с пустым
именем пользователя.  CVS может по ошибке создать такой
файл.  Решение -- убедиться, что имя пользователя установлено в
непустое значение и пересоздать RCS-файл.

<DT><CODE>*PANIC* administration files missing</CODE>
<DD>
Это обычно означает, что существует каталог <TT>`CVS/'</TT>, но в нем 
нет административных файлов, которые обычно помещает туда
CVS.  Если проблема в том, что вы создали каталог
<TT>`CVS/'</TT> как-то по-другому, не с помощью CVS, то ответ
прост -- используйте другое имя.  В противном случае это
сообщение означает ошибку в CVS (see section <A HREF="cvs-ru_23.html#SEC182">Что делать с ошибками в CVS и этом руководстве?</A>).

<DT><CODE>rcs error: Unknown option: -x,v/</CODE>
<DD>
Вслед за этим сообщением будет информация о правильном
использовании RCS.  Это означает, что у вас старая версия
RCS (вероятно, входящая в комплект операционной системы).
CVS работает только с RCS версии 5 и старше.

<DT><CODE>cvs [server aborted]: received broken pipe signal</CODE>
<DD>
Это сообщение вызывается какой-то очень сложной ошибкой в
CVS или системах, под которыми CVS работает (мы не
знаем, какой именно, потому что еще не отследили эту ошибку!).
Кажется, она возникает только после завершения команды CVS,
и вам, скорее всего, нужно лишь игнорировать это сообщение.
Однако, если вы обнаружили причину этого сообщения, дайте нам
знать, как описано в section <A HREF="cvs-ru_23.html#SEC182">Что делать с ошибками в CVS и этом руководстве?</A>.

<DT><CODE>Too many arguments!</CODE>
<DD>
Обычно это сообщение выдается скриптом <TT>`log.pl'</TT>, находящимся
в каталоге <TT>`contrib/'</TT> в дистрибутиве CVS.  В некоторых
версиях CVS этот скрипт устанавливался по умолчанию.  Он
вызывается из административного файла <TT>`loginfo'</TT>.  Проверьте,
что аргументы, которые передаются этому скрипту из файла
<TT>`loginfo'</TT>, совпадают с теми, которые ожидаются.  В
частности, <TT>`log.pl'</TT> из CVS 1.3 и раньше ожидает имя
журнального файла в качестве аргумента, тогда как <TT>`log.pl'</TT>
версии 1.5 и новее получает имя журнального файла с помощью ключа 
<SAMP>`-f'</SAMP>.  Конечно, если вам не нужен <TT>`log.pl'</TT>, то просто
закомментируйте его в <TT>`loginfo'</TT>.

<DT><CODE>cvs [login aborted]: unrecognized auth response from <VAR>server</VAR></CODE>
<DD>
Это сообщение обычно означает, что сервер не был настроен должным 
образом.  Например, строка в файле <TT>`/etc/inetd.conf'</TT> задает
имя несуществующего исполняемого файла.  Для исправления ошибок
найдите журнальный файл, используемый <SAMP>`inetd'</SAMP>'ом, например,
<TT>`/var/log/messages'</TT>.  Детали обсуждаются в section <A HREF="cvs-ru_21.html#SEC179">Ошибки при установке соединения с CVS-сервером</A>
и section <A HREF="cvs-ru_2.html#SEC30">Настройка сервера для парольной аутентификации</A>.

<DT><CODE>cvs commit: Up-to-date check failed for `<VAR>file</VAR>'</CODE>
<DD>
Это означает, что кто-либо еще зафиксировал изменения в файл с
тех пор, как вы последний раз делали <CODE>cvs update</CODE>.  Сделайте 
<CODE>cvs update</CODE> и повторите <CODE>cvs commit</CODE>.  CVS
объединит изменения, которые сделали вы, с изменениями,
сделанными остальными.  Если не случится конфликтов, то CVS
выдаст сообщение <SAMP>`M cacErrCodes.h'</SAMP>, и можно сразу выполнять
<CODE>cvs commit</CODE>.  Если обнаружены конфликты, то CVS
сообщит об этом, сказав, что <SAMP>`C cacErrCodes.h'</SAMP>, и вам
потребуется вручную устранить конфликт.  Дальнейшие детали этого
процесса обсуждаются в section <A HREF="cvs-ru_10.html#SEC85">Пример конфликта</A>.

<DT><CODE>Usage:	diff3 [-exEX3 [-i | -m] [-L label1 -L label3]] file1 file2 file3</CODE>
<DD>

<PRE>
Only one of [exEX3] allowed
</PRE>

Это указывает на проблему с установленными программами
<CODE>diff3</CODE> и <CODE>rcsmerge</CODE>.  Точнее говоря, <CODE>rcsmerge</CODE>
скомпилирован так, что должен использовать GNU-версию
<CODE>diff3</CODE>, а вместо этого находит UNIX-версию.  Точный
текст сообщения разный на разных системах.  Самым простым
решением будет обновить версию CVS, которая не использует
внешних программ <CODE>rcsmerge</CODE> и <CODE>diff3</CODE>.

<DT><CODE>warning: unrecognized response `<VAR>text</VAR>' from cvs server</CODE>
<DD>
Если <VAR>text</VAR> содержит разрешенный текст ответа (например,
<SAMP>`ok'</SAMP>), за которым следует дополнительный символ воврата
каретки (на многих системах это приведет к тому, что вторая часть
сообщения перезапишет первую часть), то это, вероятно, означает,
что вы используете метод доступа <SAMP>`:ext:'</SAMP> с такой версией
<CODE>rsh</CODE>, которая, как большинство не-UNIX версий, не
обеспечивает прозрачного потока данных.  В этом случае попробуйте
<SAMP>`:server:'</SAMP> вместо <SAMP>`:ext:'</SAMP>.  Если в <VAR>text</VAR>
содержится что-то ещё, это может означать проблемы с вашим
CVS-сервером.  Ещё раз проверьте, как вы установили
CVS-сервер.

<DT><CODE>cvs commit: [<VAR>time</VAR>] waiting for <VAR>user</VAR>'s lock in <VAR>directory</VAR></CODE>
<DD>
Это нормальное сообщение, а не ошибка.  Смотри section <A HREF="cvs-ru_10.html#SEC87">Совместный доступ нескольких разработчиков к CVS</A>, где описаны детали.

<DT><CODE>cvs commit: warning: editor session failed</CODE>
<DD>
<A NAME="IDX663"></A>
<A NAME="IDX664"></A>
Это означает, что редактор, используемый CVS, возвращает
ненулевой код завершения.  Некоторые версии <CODE>vi</CODE> делают это
даже в том случае, если при редактировании файла не было ни одной 
ошибки.  Если это так, то пусть ваша переменная окружения
<SAMP>`CVSEDITOR'</SAMP> указывает на маленький скрипт, например


<PRE>
#!/bin/sh
vi $*
exit 0
</PRE>

</DL>



<H2><A NAME="SEC179" HREF="cvs-ru_toc.html#TOC179">Ошибки при установке соединения с CVS-сервером</A></H2>

<P>
В этой главе обсуждается, что делать, если у вас проблемы с
установкой соединения с CVS-сервером.  Если вы использует
клиент командной строки CVS под Windows, сначала обновите
его до версии 1.9.12 или более поздней.  Сообщения об ошибках в
старой версии предоставляли значительно меньше информации о
местонахождении проблемы.  Если клиент работает под другой
операционной системой, то CVS 1.9 вполне достаточно.


<P>
Если сообщений об ошибках недостаточно, чтобы отследить проблему, 
то следующие шаги сильно зависят от используемого метода доступа.


<DL COMPACT>

<DT><CODE>:ext:</CODE>
<DD>
<A NAME="IDX665"></A>
 
Попробуйте запустить программу <CODE>rsh</CODE> из командной строки.
Например, 


<PRE>
        $ rsh servername cvs -v
</PRE>

должно выдать информацию о версии CVS.  Если это не
срабатывает, то ваш сервер нужно исправить, прежде чем
беспокоиться о проблемах с CVS.

<A NAME="IDX666"></A>
<DT><CODE>:server:</CODE>
<DD>
Для того, чтобы использовать этот метод доступа, программа
<CODE>rsh</CODE> не требуется, но она может быть полезна в качестве
средства отладки.  Следуйте инструкциям, приведенным для метода
<SAMP>`:ext:'</SAMP>.

<A NAME="IDX667"></A>
<DT><CODE>:pserver:</CODE>
<DD>
Хорошим средством отладки является


<PRE>
        $ telnet servername 2401
</PRE>

После соединения напечатайте любой текст, например, <SAMP>`foo'</SAMP>,
нажмите <KBD>RET</KBD>.  Если CVS работает, то ответом будет


<PRE>
cvs [pserver aborted]: bad auth protocol start: foo
</PRE>

В противном случае убедитесь, что <CODE>inetd</CODE> работает
правильно.  Замените вызов CVS в файле
<TT>`/etc/inetd.conf'</TT> на программу <SAMP>`echo'</SAMP>.  Например:


<PRE>
2401  stream  tcp  nowait  root /bin/echo echo hello
</PRE>

Теперь сделайте так, чтобы <SAMP>`inetd'</SAMP> перечитал свой файл
конфигурации, попробуйте <SAMP>`telnet'</SAMP> ещё раз, и вы должны
увидеть слово <SAMP>`hello'</SAMP>, а затем сервер должен закрыть
соединение.  Если это не так, то нужно исправить ваш
<SAMP>`inetd'</SAMP>, перед тем, как беспокоиться о CVS.

На системах под AIX зачастую порт 2401 уже используется
системой.  Это проблема AIX в том смысле, что порт 2401
зарегистрирован для CVS.  Я слышал, что есть исправление
этой проблемы под AIX.
</DL>



<H2><A NAME="SEC180" HREF="cvs-ru_toc.html#TOC180">Другие распространенные проблемы</A></H2>

<P>
Вот список проблем, не попадающих ни в одну из вышеперечисленных
категорий.  



<UL>
<LI>

Если вы используете CVS 1.9.18 или раньше, и <CODE>cvs
update</CODE> обнаруживает конфликт и пытается слить изменения, как
описано в section <A HREF="cvs-ru_10.html#SEC85">Пример конфликта</A>, но не сообщает вам, где именно
присутствуют конфликты, значит, вы используете старую версию
RCS.  Самым простым решением, вероятно, будет обновить
версию CVS до той, которая не нуждается во внешних
программах RCS.
</UL>

<P><HR><P>
Go to the <A HREF="cvs-ru_1.html">first</A>, <A HREF="cvs-ru_20.html">previous</A>, <A HREF="cvs-ru_22.html">next</A>, <A HREF="cvs-ru_24.html">last</A> section, <A HREF="cvs-ru_toc.html">table of contents</A>.
</BODY>
</HTML>
