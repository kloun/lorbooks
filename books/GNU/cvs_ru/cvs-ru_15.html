<HTML>
<HEAD>
<!-- Created by texi2html 1.56k from cvs-ru.texi on 11 April 2001 -->

<TITLE>CVS -- Система Управления Параллельными Версиями - Специальные файлы</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="cvs-ru_1.html">first</A>, <A HREF="cvs-ru_14.html">previous</A>, <A HREF="cvs-ru_16.html">next</A>, <A HREF="cvs-ru_24.html">last</A> section, <A HREF="cvs-ru_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC111" HREF="cvs-ru_toc.html#TOC111">Специальные файлы</A></H1>

<P>
<A NAME="IDX468"></A>
<A NAME="IDX469"></A>
<A NAME="IDX470"></A>
<A NAME="IDX471"></A>
<A NAME="IDX472"></A>
<A NAME="IDX473"></A>


<P>
В обычных условиях CVS работает только с обычными файлами.
Какждый файл в проекте считается устойчивым: его можно открыть,
прочесть и закрыть, и делать это несколько раз.  CVS также
игнорирует права доступа и владельцев файлов, предоставляя
разработчику решать такие вопросы во время инсталляции.  Другими
словами, нельзя "поместить" устройство в репозиторий; если
устройство не может быть открыто, CVS откажется обрабатывать
его.  Файлы также могут потерять права доступа и владельцев во
время транзакций в репозитории.


<P>
Если в репозитории установлена переменная
<CODE>PreservePermissions</CODE> (see section <A HREF="cvs-ru_18.html#SEC174">Файл конфигурации CVSROOT/config</A>), то CVS
сохранит в репозитории такие характеристики файлов:



<UL>
<LI>пользователь- и группа-владелец файла

<LI>права доступа

<LI>основной и вспомогательный номер устройства

<LI>символические ссылки

<LI>структуру жестких ссылок

</UL>

<P>
Использование опции <CODE>PreservePermissions</CODE> влияет на
поведение CVS в нескольких местах.  Во-первых, некоторые
новые операции, поддерживаемые CVS не доступны всем
пользователям.  В частности, владельцы файла и характеристики
специальных файлов могут изменяться только суперпользователем.
Таким образом, когда переменная конфигурации
<CODE>PreservePermissions</CODE> установлена, пользователи должны стать 
пользователем <CODE>root</CODE>, чтобы выполнять операции с CVS.


<P>
Когда используется <CODE>PreservePermission</CODE>, некоторые операции
CVS (такие, как <SAMP>`cvs status'</SAMP>), не смогут определить
структуру жестких ссылок файла, и будут выдавать предупреждения о
несовпадающих жестких ссылках.  Причиной этого является то, что
внутренние структуры CVS не обеспечивают простого способа
собрать всю информацию о жестких ссылках, поэтому они проверяют
конфликты файлов, пользуясь неточными данными.


<P>
Более тонким различием является то, что CVS считает, что
файл изменился, только если изменилось его содержимое (особенно
если время модификации рабочего файла не совпадает с временем
модификации файла в репозитории).  Таким образом, если у файла
изменились только права доступа, владелец, или основной и
вспомогательный номера устройства, то CVS не заметит этого.
Для того, чтобы принудительно поместить такое изменение в
репозиторий, используйте ключ <SAMP>`-f'</SAMP> команды <SAMP>`cvs
commit'</SAMP>.  Это также означает, что если права доступа файла
изменились, а файл в репозитории новее, чем рабочая копия, то
выполнение <SAMP>`cvs update'</SAMP> просто изменит права доступа на
рабочей копии.


<P>
Изменение жестких ссылок в репозитории CVS является особенно
тонкой процедурой.  Предположим, что файл <TT>`foo'</TT> был связан с
файлом <TT>`old'</TT>, а затем связан с файлом <TT>`new'</TT>.  Вы можете
попасть в необычную ситуацию, когда несмотря на то, что у
<TT>`foo'</TT>, <TT>`old'</TT> и <TT>`new'</TT> изменилось количество жестких
ссылок, только файлы <TT>`foo'</TT> и <TT>`new'</TT> были изменены,
поэтому <TT>`old'</TT> не является кандидатом на фиксирование в
репозитории.  Таким образом можно прийти к результатам,
несоответствующим действительности.  Если необходимо хранить в
репозитории жесткие ссылки, мы рекомендуем применять команду
<CODE>touch</CODE> ко всем файлам, чьи ссылки или статус изменились со
времени последней фиксации.  В действительности, было бы
правильным выполнять <CODE>touch *</CODE> перед каждой фиксацией, если
в каталоге находится сложная система ссылок на файлы.


<P>
Стоит заметить, что только обычные файлы могут быть объединены,
по причинам, которые, надеемся, очевидны.  Если <SAMP>`cvs update'</SAMP> 
или <SAMP>`cvs checkout -j'</SAMP> попытаются объединить символическую
ссылку с обычным файлом, или два файла устройств друг с другом,
то CVS сообщит о конфликте и откажется производить
объединение.  В то же самое время <SAMP>`cvs diff'</SAMP> не сообщит о
различиях между этими файлами, потому что с файлами, не
содержащими текста, нельзя совершать текстуальные сравнения.


<P>
Параметр <CODE>PreservePermissions</CODE> не работает с
клиент-серверной версией CVS.  Другим ограничением является
то, что жесткие ссылки должны быть между файлами, находящимися в
одном каталоге;  жесткие ссылки между разными каталогами не
поддерживаются.


<P><HR><P>
Go to the <A HREF="cvs-ru_1.html">first</A>, <A HREF="cvs-ru_14.html">previous</A>, <A HREF="cvs-ru_16.html">next</A>, <A HREF="cvs-ru_24.html">last</A> section, <A HREF="cvs-ru_toc.html">table of contents</A>.
</BODY>
</HTML>
