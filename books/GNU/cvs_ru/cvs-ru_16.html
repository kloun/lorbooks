<HTML>
<HEAD>
<!-- Created by texi2html 1.56k from cvs-ru.texi on 11 April 2001 -->

<TITLE>CVS -- Система Управления Параллельными Версиями - Руководство по командам CVS</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="cvs-ru_1.html">first</A>, <A HREF="cvs-ru_15.html">previous</A>, <A HREF="cvs-ru_17.html">next</A>, <A HREF="cvs-ru_24.html">last</A> section, <A HREF="cvs-ru_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC112" HREF="cvs-ru_toc.html#TOC112">Руководство по командам CVS</A></H1>

<P>
В этом приложении описывается общая структура команд CVS, а
некоторые команды описываются детально; краткий справочник по
командам CVS находится в see section <A HREF="cvs-ru_17.html#SEC152">Краткий справочник по командам CVS</A>.




<H2><A NAME="SEC113" HREF="cvs-ru_toc.html#TOC113">Общая структура команд CVS</A></H2>
<P>
<A NAME="IDX474"></A>
<A NAME="IDX475"></A>
<A NAME="IDX476"></A>


<P>
Общий формат всех команд CVS таков:



<PRE>
cvs [ опции_cvs ] команда_cvs [ опции_команды ] [ аргументы_команды ]
</PRE>

<DL COMPACT>

<DT><CODE>cvs</CODE>
<DD>
Имя исполняемого файла CVS.

<DT><CODE>cvs_options</CODE>
<DD>
Некоторые ключи командной строки влияют на все подкоманды
CVS.  Такие ключи описаны ниже.

<DT><CODE>cvs_command</CODE>
<DD>
Одна из нескольких подкоманд.  Некоторые команды имеют синонимы,
которые указываются в справочнике по этой команде.  Есть только
две ситуации, в которых вы можете пропустить <SAMP>`команду_cvs'</SAMP>: 
<SAMP>`cvs -H'</SAMP> выдает список доступных команд, а <SAMP>`cvs -v'</SAMP>
отображает версию CVS.

<DT><CODE>command_options</CODE>
<DD>
Ключи командной строки, специфичные для каждой команды.

<DT><CODE>command_args</CODE>
<DD>
Аргументы команд.
</DL>

<P>
К сожалению, есть небольшая путаница между <CODE>опциями_cvs</CODE> и
<CODE>опциями_команды</CODE>.  Ключ <SAMP>`-l'</SAMP>, когда он используется в
качестве опции CVS, воздействует только на некоторые
команды.  Когда этот ключ используется как опция команды, у него
появляется другое значение, и он используется с б'ольшим
количеством команд.  Другими словами, не придавайте вышеописанной 
категоризации слишком большого значения, а обращайтесь вместо
этого к документации.




<H2><A NAME="SEC114" HREF="cvs-ru_toc.html#TOC114">Код выхода CVS</A></H2>
<P>
<A NAME="IDX477"></A>


<P>
CVS может сообщить вызывающей программе, успешно ли
завершилась операция или нет, возвращая тот или иной <EM>код
выхода</EM>.  Точный способ проверки кода выхода зависит от
операционной системы.  Например, в скриптах оболочки UNIX
переменная <SAMP>`$?'</SAMP> содержит ноль, если последняя команда
возвратила код успешного выхода, или же больше нуля, если
выполнение программы завершилось с ошибкой.


<P>
Если CVS выполняется успешно, то возвращает код успешного
завершения;  в случае ошибки программа печатает сообщение об
ошибке и возвращает код неуспешного завершения.  Исключением
является команда <CODE>cvs diff</CODE>.  Она возвращает код успешного
завершения, если не обнаружила различий, или же код неудачного
завершения, если были обнаружены различия или произошла ошибка.
Так как такое поведение не обеспечивает простого способа
обнаружения ошибок, в будущем, вероятно, команда <CODE>cvs diff</CODE>
будет изменена, чтобы вести себя подобно прочим командам
CVS.




<H2><A NAME="SEC115" HREF="cvs-ru_toc.html#TOC115">Ключи по умолчанию и файл ~/.cvsrc</A></H2>
<P>
<A NAME="IDX478"></A>
<A NAME="IDX479"></A>
<A NAME="IDX480"></A>


<P>
Имеются определённые ключи команд CVS, которые используются
столь часто, что вы захотите настроить для них что-то типа
синонима.  Основным примером (именно он и привел к поддержке
файла <TT>`~/.cvsrc'</TT>) является то, что многим не нравится
стандартная форма выдачи изменений, которая используется в
команде <SAMP>`diff'</SAMP>, и они предпочитают контекстную или
унифицированную выдачу изменений, которые выглядят значительно
лучше.


<P>
Файл <TT>`~/.cvsrc'</TT> -- это способ установить ключи по умолчанию
для команд CVS, не используя синонимов, скриптов оболочки и
т. п.


<P>
Формат файла <TT>`~/.cvsrc'</TT> прост.  В нем ищется строка, чье
начало совпадает с именем выполняемой команды CVS.  Если
совпадающая строка найдена, то остаток строки расщепляется на
ключи командной строки и добавляется к командной строке
<EM>перед</EM> ключами из настоящей командной строки.


<P>
Если у команды есть два имени (например, <CODE>checkout</CODE> и
<CODE>co</CODE>), то для поиска используется официальное имя, не
обязательно совпадающее с тем, что использовалось при вызове
CVS.  Таким образом, если содержимое файла <TT>`~/.cvsrc'</TT>
таково:



<PRE>
log -N
diff -u
update -P
checkout -P
</PRE>

<P>
то к аргументам команды <SAMP>`cvs checkout foo'</SAMP> добавится ключ
<SAMP>`-P'</SAMP>, и точно то же самое произойдет с командой <SAMP>`cvs co 
foo'</SAMP>.


<P>
При использовании вышеприведенного файла команда <SAMP>`cvs diff
foobar'</SAMP> будет выдавать изменения в унифицированном формате.
<SAMP>`cvs diff -c foobar'</SAMP> будет, как обычно, выдавать контекстные 
изменения.  Получение изменений в "старом" формате чуть более
сложно, потому что у команды <CODE>diff</CODE> нет способа задать
выдачу в "старом" формате, поэтому вам потребуется использовать
<SAMP>`cvs -f diff foobar'</SAMP>.


<P>
Вместо имени команды вы можете использовать <CODE>cvs</CODE>, чтобы
задать глобальные ключи (see section <A HREF="cvs-ru_16.html#SEC116">Глобальные ключи командной строки</A>).  Например,
такая строка в файле <TT>`~/.cvsrc'</TT> включит использование
шестого уровня компрессии:



<PRE>
cvs -z6
</PRE>



<H2><A NAME="SEC116" HREF="cvs-ru_toc.html#TOC116">Глобальные ключи командной строки</A></H2>
<P>
<A NAME="IDX481"></A>
<A NAME="IDX482"></A>
<A NAME="IDX483"></A>


<P>
Вот список имеющихся ключей командной строки CVS (те из них, 
что задаются слева от имени команды):


<DL COMPACT>

<DT><CODE>--allow-root=<VAR>rootdir</VAR></CODE>
<DD>
Задает разрешенный каталог <CODE>CVSROOT</CODE>.  См. section <A HREF="cvs-ru_2.html#SEC30">Настройка сервера для парольной аутентификации</A>.

<A NAME="IDX484"></A>
<A NAME="IDX485"></A>
<DT><CODE>-a</CODE>
<DD>
Аутентифицировать всё общение между клиентом и сервером.  Влияет
только на клиента.  В настоящее время это реализуется только при
использовании соединения GSSAPI (see section <A HREF="cvs-ru_2.html#SEC33">Прямое соединение с использованием GSSAPI</A>).  Аутентификация предотвращает определённые виды атак,
использующих перехват TCP-соединения.  Включение
аутентификации не включает шифрование.

<A NAME="IDX486"></A>
<A NAME="IDX487"></A>
<DT><CODE>-b <VAR>bindir</VAR></CODE>
<DD>
В CVS 1.9.18 и более старых версиях этот ключ задавал
каталог, в котором находятся программы RCS.  Текущие версии
CVS не выполняют программ RCS; этот ключ оставлен
только для обратной совместимости.

<A NAME="IDX488"></A>
<A NAME="IDX489"></A>
<DT><CODE>-T <VAR>tempdir</VAR></CODE>
<DD>
Использовать <VAR>tempdir</VAR> в качестве каталога, в котором
расположены временные файлы.  Переопределяет содержимое
переменной среды <CODE>$TMPDIR</CODE> и каталог, заданный при
компиляции.  Этот параметр должен задавать полный путь.

<A NAME="IDX490"></A>
<A NAME="IDX491"></A>
<DT><CODE>-d <VAR>cvs_root_directory</VAR></CODE>
<DD>
Использовать <VAR>cvs_root_directory</VAR> в качестве корневого
каталога репозитория.  Переопределяет содержимое переменной
окружения <CODE>$CVSROOT</CODE>.  See section <A HREF="cvs-ru_2.html#SEC9">Репозиторий</A>.

<A NAME="IDX492"></A>
<A NAME="IDX493"></A>
<DT><CODE>-e <VAR>editor</VAR></CODE>
<DD>
Использовать <VAR>editor</VAR>, чтобы ввести журнальное сообщение.
Переопределяет содержимое переменных окружения <CODE>$CVSEDITOR</CODE>
и <CODE>$EDITOR</CODE>.  За дальнейшей информацией обращайтесь к
section <A HREF="cvs-ru_1.html#SEC6">Фиксирование изменений</A>.

<DT><CODE>-f</CODE>
<DD>
Не читать файл <TT>`~/.cvsrc'</TT>.  Этот ключ чаще всего
используется из-за неортогональности набора ключей CVS.
Например, команда <SAMP>`cvs log'</SAMP> имеет ключ <SAMP>`-N'</SAMP> (отключить
отображение имен меток), но не имеет соответствующего ключа,
чтобы включить такое отображение.  Поэтому если у вас в файле
<TT>`~/.cvsrc'</TT> для команды <SAMP>`log'</SAMP> имеется ключ <SAMP>`-N'</SAMP>,
вам может потребоваться <SAMP>`-f'</SAMP>, чтобы отобразить имена меток.

<DT><CODE>-H</CODE>
<DD>
<DT><CODE>--help</CODE>
<DD>
Выдать информацию об указанной команде CVS (но не выполнять
её).  Если вы не укажете имя команды, то <SAMP>`cvs -H'</SAMP> выдаёт
общую информацию об использовании CVS, включая список других 
ключей помощи.

<DT><CODE>-l</CODE>
<DD>
Выполнить команду, не журналируя её в файле истории команд.
See section <A HREF="cvs-ru_16.html#SEC133">Команда history: показать состояние файлов и пользователей</A>.

<A NAME="IDX494"></A>
<DT><CODE>-n</CODE>
<DD>
Не изменять ничего на диске.  Попытаться выполнить команду
CVS, но только выдавать отчёт;  не удалять, обновлять или
объединять существующие файлы, не создавать новых.

Заметьте, что CVS не обязательно выдаст те же самые
сообщения, что и без использования <SAMP>`-n'</SAMP>, потому что в
некоторых случаях CVS пропустит часть работы.

<DT><CODE>-Q</CODE>
<DD>
Команда вообще не будет выдавать сообщений, за исключением
сообщений о серьезных проблемах.

<DT><CODE>-q</CODE>
<DD>
Команда будет выдавать только некоторые сообщения; например,
информация о продвижении по дереву каталогов выдаваться не будет.

<A NAME="IDX495"></A>
<DT><CODE>-r</CODE>
<DD>
Делать новые рабочие файлы доступными только для чтения.  Тот же
самый эффект достигается установкой переменной окружения
<CODE>$CVSREAD</CODE> (see section <A HREF="cvs-ru_19.html#SEC175">Все переменные окружения, используемые в CVS</A>).  По умолчанию
рабочие файлы создаются доступными для записи, если только не
включено слежение (see section <A HREF="cvs-ru_13.html#SEC103">Слежение за чужими исходными текстами</A>).

<DT><CODE>-s <VAR>variable</VAR>=<VAR>value</VAR></CODE>
<DD>
Установить переменную пользователя (see section <A HREF="cvs-ru_18.html#SEC173">Подстановки в административных файлах</A>).

<A NAME="IDX496"></A>
<DT><CODE>-t</CODE>
<DD>
Отслеживать выполнение программы; отображать сообщения,
сопровождающие различные шаги CVS.  Особенно полезно
совместно с <SAMP>`-n'</SAMP>, чтобы изучить работу незнакомой команды.

<DT><CODE>-v</CODE>
<DD>
<DT><CODE>--version</CODE>
<DD>
Отображает версию CVS и информацию об авторских правах.

<A NAME="IDX497"></A>
<A NAME="IDX498"></A>
<DT><CODE>-w</CODE>
<DD>
Делает новые рабочие файлы доступными для чтения и записи.
Переопределяет содержимое переменной окружения <CODE>$CVSREAD</CODE>.
Файлы по умолчанию создаются для чтения и записи, если только не
был установлен <CODE>$CVSREAD</CODE> или же не использовался ключ
<SAMP>`-r'</SAMP>.

<A NAME="IDX499"></A>
<DT><CODE>-x</CODE>
<DD>
Шифровать всё взаимодействие между клиентом и сервером.
Воздействует только на клиента CVS.  В текущей версии
реализовано только при использовании соединения с GSSAPI
(see section <A HREF="cvs-ru_2.html#SEC33">Прямое соединение с использованием GSSAPI</A>) или соединения с
Kerberos (see section <A HREF="cvs-ru_2.html#SEC34">Прямое соединение с помощью Kerberos</A>).  Включение
шифрования подразумевает, что в канале связи будет также включена
аутентификация.  Поддержка шифрования по умолчанию недоступна;
при компиляции CVS используйте специальный ключ командной
строки к <CODE>./configure --enable-encryption</CODE>.

<DT><CODE>-z <VAR>gzip-level</VAR></CODE>
<DD>
Установить уровень компрессии.  Влияет только на клиента
CVS.

</DL>



<H2><A NAME="SEC117" HREF="cvs-ru_toc.html#TOC117">Стандартные ключи командной строки</A></H2>
<P>
<A NAME="IDX500"></A>
<A NAME="IDX501"></A>
<A NAME="IDX502"></A>


<P>
В этой главе описываются <SAMP>`ключи_команды'</SAMP>, доступные для
использования с несколькими командами CVS.  Эти ключи всегда
задаются справа от имени <SAMP>`команды_CVS'</SAMP>.  Не все команды
поддерживают эти ключи, но лишь те, для которых ключ имеет смысл.
Однако, если команда имеет один из этих ключей, вы можете быть
уверены в одинаковом поведении этих ключей с разными командами.
(Другие ключи команд, описанные вместе с отдельными командами,
могут иметь различное поведение с разными командами CVS).


<P>
<STRONG>Предупреждение:</STRONG> команда <SAMP>`history'</SAMP> является
исключением, она поддерживает различные ключи, конфликтующие даже 
со стандартными ключами.


<P>
@macro std-option-f
<LI>-f

Если не найдено совпадающей ревизии, извлечь самую свежую ревизию 
(а не игнорировать файл).

@macro std-option-l
<LI>-l

Не обходить дерево каталогов, работать только в текущем рабочем
каталоге.

@macro std-option-R{verb}
<LI>-R

\verb\ каталоги рекурсивно.  По умолчанию это именно так.
См. section <A HREF="cvs-ru_6.html#SEC64">Рекурсивное поведение</A>.

<DL COMPACT>

<DT><CODE>-D <VAR>дата</VAR></CODE>
<DD>
<A NAME="IDX503"></A>
 <A NAME="IDX504"></A>
 <A NAME="IDX505"></A>
 
Использовать самую свежую ревизию, сделанную не позже чем
<VAR>дата</VAR>.  В данном случае <VAR>дата</VAR> -- это одиночный
аргумент, являющийся описанием прошедшей даты.

Указанная дата становится <EM>липкой</EM>, когда вы используете её,
чтобы сделать копию файла с исходным текстом, то есть, когда вы
извлекаете рабочий файл, используя <SAMP>`-D'</SAMP>, то CVS
запоминает указанную дату, так что последующие команды
обновления, выполненные в том же каталоге, будут использовать ту
же дату (дальнейшая информация по липким меткам и датам находится 
в see section <A HREF="cvs-ru_4.html#SEC53">Липкие метки</A>).

Ключ <SAMP>`-D'</SAMP> доступен совместно с командами <CODE>checkout</CODE>,
<CODE>diff</CODE>, <CODE>export</CODE>, <CODE>history</CODE>, <CODE>rdiff</CODE>,
<CODE>rtag</CODE> и <CODE>update</CODE>.  (Команда <CODE>history</CODE> использует
этот ключ немного отличающимся способом; see section <A HREF="cvs-ru_16.html#SEC134">Ключи команды history</A>).

<A NAME="IDX506"></A>
<A NAME="IDX507"></A>
CVS поддерживает большое множество форматов даты.  Самыми
стандартными являются ISO-8601 (от Международной Организации по
Стандартизации) и стандарт электронной почты (описанные в RFC822, 
с поправками в RFC1123).

Даты в формате ISO-8601 имеют множество вариантов, но вот
несколько примеров:


<PRE>
1972-09-24
1972-09-24 20:05
</PRE>

Вероятно, вы совсем не желаете увидеть перечисление
<EM>полного</EM> списка форматов, описанных в ISO8601 :-).

Вдобавок к датам, разрешенным в электронной почте в Интернет,
CVS также позволяет пропускать некоторые поля.  Например:


<PRE>
24 Sep 1972 20:05
24 Sep
</PRE>

Считается, что дата находится в местной временн'ой зоне, если
только таковая не задана явно.

Предпочтительными являются два формата представления данных.
Однако же, CVS в настоящее время поддерживает широкий
диапазон других форматов представления даты.  Они нарочно не
документируются здесь, а будущие версии CVS могут уже не
поддерживать их.

Одним из таких форматов является
<CODE><VAR>месяц</VAR>/<VAR>день</VAR>/<VAR>год</VAR></CODE>.  Такой взаимный порядок
дня и месяца может смутить некоторых, например, <SAMP>`1/4/96'</SAMP> ---
это четвертое января, а не первое апреля.

Не забудьте написать аргумент команды <SAMP>`-D'</SAMP> в кавычках, чтобы 
ваша оболочка не посчитала пробелы разделителями аргументов.
Команда, использующая ключ <SAMP>`-D'</SAMP>, может выглядеть так:


<PRE>
$ cvs diff -D "1 hour ago" cvs.texinfo
</PRE>

<A NAME="IDX508"></A>
<A NAME="IDX509"></A>
<DT><CODE>-f</CODE>
<DD>
Когда вы задаёте команде CVS конкретную дату или метку, то
эта команда обычно игнорирует файлы, не содержащие заданной метки
(или не существовавшие на указанный момент времени).  Используйте 
ключ <SAMP>`-f'</SAMP>, если вы хотите, чтобы файлы извлекались, даже
если они не совпадают с меткой или со временем, в этом случае
будет использована самая свежая ревизия файла.

<SAMP>`-f'</SAMP> доступна с командами <CODE>annotate</CODE>, <CODE>checkout</CODE>,
<CODE>export</CODE>, <CODE>rdiff</CODE>, <CODE>rtag</CODE>, и <CODE>update</CODE>.

<STRONG>Предупреждение:</STRONG> Команды <CODE>commit</CODE> и <CODE>remove</CODE>
также имеют ключ <SAMP>`-f'</SAMP>, но он имеет другое поведение.  Смотри 
section <A HREF="cvs-ru_16.html#SEC124">Ключи команды commit</A> и section <A HREF="cvs-ru_7.html#SEC67">Удаление файлов</A>.

<DT><CODE>-k <VAR>kflag</VAR></CODE>
<DD>
Изменить обработку ключевых слов по умолчанию. 
See section <A HREF="cvs-ru_12.html#SEC97">Подстановка ключевых слов</A>, о значении <VAR>kflag</VAR>.
Указанное значение <VAR>kflag</VAR> становится <EM>липким</EM>, когда вы
создаёте личную копию файла.  Это означает, что когда вы
используете этот ключ вместе с командами <CODE>checkout</CODE> или
<CODE>update</CODE>, то CVS связывает значение <VAR>kflag</VAR> с
файлом, и использует это значение при последующих командах
обновления этого файла, если вы не укажете обратного.

Ключ <SAMP>`-k'</SAMP> доступен с командами <CODE>add</CODE>, <CODE>checkout</CODE>,
<CODE>diff</CODE>, <CODE>import</CODE> и <CODE>update</CODE>.

@std-option-l

<STRONG>Предупреждение:</STRONG> это не тот глобальный ключ <SAMP>`-l'</SAMP>,
который вы указываете слева от команды CVS!

Доступен с командами <CODE>annotate</CODE>, <CODE>checkout</CODE>,
<CODE>commit</CODE>, <CODE>diff</CODE>, <CODE>edit</CODE>, <CODE>editors</CODE>,
<CODE>export</CODE>, <CODE>log</CODE>, <CODE>rdiff</CODE>, <CODE>remove</CODE>,
<CODE>rtag</CODE>, <CODE>status</CODE>, <CODE>tag</CODE>, <CODE>unedit</CODE>,
<CODE>update</CODE>, <CODE>watch</CODE>, и <CODE>watchers</CODE>.

<A NAME="IDX510"></A>
<A NAME="IDX511"></A>
<DT><CODE>-m <VAR>"сообщение"</VAR></CODE>
<DD>
Использовать <VAR>"сообщение"</VAR> в качестве журнальной записи,
вместо того, чтобы запустить редактор.

Флаг доступен с командами <CODE>add</CODE>, <CODE>commit</CODE> и
<CODE>import</CODE>.

<DT><CODE>-n</CODE>
<DD>
Не выполнять соответствующие программы при выполнении команд
<SAMP>`checkout'</SAMP>, <SAMP>`commit'</SAMP> и <SAMP>`tag'</SAMP>.  (В базе данных
модулей могут быть указаны программы, которые нужно выполнить при 
выполнении одной из этих команд, а этот ключ используется для
того, чтобы избежать этого).

<STRONG>Предупреждение:</STRONG> этот флаг -- не тот глобальный флаг
<SAMP>`cvs -n'</SAMP>, который задаётся слева от команды CVS!

Флаг доступен с командами <CODE>checkout</CODE>, <CODE>commit</CODE>,
<CODE>export</CODE> и <CODE>rtag</CODE>.

<DT><CODE>-P</CODE>
<DD>
Удалять пустые каталоги.  См. section <A HREF="cvs-ru_7.html#SEC68">Удаление каталогов</A>.

<DT><CODE>-p</CODE>
<DD>
Выдать файлы, извлеченные из репозитория, на стандартный вывод, а 
не записывать их в текущем каталоге.  Флаг доступен с командами
<CODE>checkout</CODE> и <CODE>update</CODE>.

<DT><CODE>-R</CODE>
<DD>
Рекурсивно обрабатывать каталоги.  Включено по умолчанию.
Доступно с командами <CODE>annotate</CODE>, <CODE>checkout</CODE>,
<CODE>commit</CODE>, <CODE>diff</CODE>, <CODE>edit</CODE>, <CODE>editors</CODE>,
<CODE>export</CODE>, <CODE>rdiff</CODE>, <CODE>remove</CODE>, <CODE>rtag</CODE>,
<CODE>status</CODE>, <CODE>tag</CODE>, <CODE>unedit</CODE>, <CODE>update</CODE>,
<CODE>watch</CODE> и <CODE>watchers</CODE>.

<DT><CODE>-r <VAR>метка</VAR></CODE>
<DD>
<A NAME="IDX512"></A>
<A NAME="IDX513"></A>
<A NAME="IDX514"></A>
<A NAME="IDX515"></A>
Использовать ревизию, указанную в параметре <VAR>метка</VAR>, вместо
<EM>головной</EM> ревизии (<CODE>HEAD</CODE>) по умолчанию.  Помимо меток, 
созданных с помощью команд <CODE>tag</CODE> и <CODE>rtag</CODE>, всегда
доступны две специальные метки:  <SAMP>`HEAD'</SAMP> ссылается на самую
свежую ревизию, находящуюся в репозитории, а <SAMP>`BASE'</SAMP>
ссылается на ревизию, которую вы извлекли в текущий рабочий
каталог.

Указанная метка становится липкой, если вы используете
<CODE>checkout</CODE> или <CODE>update</CODE>, чтобы создать собственную
копию файла: CVS запоминает метку и продолжает использовать
её при дальнейших командах обновления, пока вы не укажете
обратного (дальнейшая информация о липких метках/датах находится
в section <A HREF="cvs-ru_4.html#SEC53">Липкие метки</A>).  Метка может быть номером ревизии или
именем.  See section <A HREF="cvs-ru_4.html#SEC48">Метки ревизий</A>.

Задание глобального ключа <SAMP>`-q'</SAMP> вместе с ключом <SAMP>`-r'</SAMP>
часто бывает полезным, чтобы избежать предупреждающих сообщений о 
том, что RCS-файл не содержит указанной метки.

<STRONG>Предупреждение:</STRONG> не перепутайте этот ключ с глобальным
ключом <SAMP>`cvs -r'</SAMP>, который вы пишете слева от команды
CVS!

Ключ <SAMP>`-r'</SAMP> доступен с командами <CODE>checkout</CODE>,
<CODE>commit</CODE>, <CODE>diff</CODE>, <CODE>history</CODE>, <CODE>export</CODE>,
<CODE>rdiff</CODE>, <CODE>rtag</CODE> и <CODE>update</CODE>.

<DT><CODE>-W <VAR>spec</VAR></CODE>
<DD>
Задаёт имена файлов, которые нужно отфильтровать.  Этот ключ
можно использовать в командной строке несколько раз.  <VAR>spec</VAR>
может быть шаблоном имени файла, таким же, который можно
использовать в файле <TT>`.cvswrappers'</TT>.  Ключ доступен с
командами <CODE>import</CODE> и <CODE>update</CODE>.

</DL>



<H2><A NAME="SEC118" HREF="cvs-ru_toc.html#TOC118">Команда admin: администрирование</A></H2>
<P>
<A NAME="IDX516"></A>
<A NAME="IDX517"></A>



<UL>
<LI>

Требует: репозиторий, рабочего каталога.
<LI>

Изменяет: репозиторий.
<LI>

Синоним: <CODE>rcs</CODE>
</UL>

<P>
Эта команда -- интерфейс к разнообразным административным
возможностям CVS.  Некоторые из них имеют сомнительную
ценность для CVS и существуют по историческим причинам.
Некоторые из таких возможностей, скорее всего, исчезнут
когда-либо.  Эта команда работает рекурсивно, поэтому нужно
соблюдать крайнюю осторожность.


<P>
Если на машине под UNIX существует группа <CODE>cvsadmin</CODE>,
то команду <CODE>cvs admin</CODE> могут выполнять только члены этой
группы.  Эта группа должна существовать на сервере или на любой
машине, на которой используется не-клиент-серверная версия
CVS.  Чтобы запретить всем пользователям выполнение команды
<CODE>cvs admin</CODE>, создайте соответствующую группу и никого в неё
не помещайте.
Под NT группы <CODE>cvsadmin</CODE> не поддерживается, поэтому все
пользователи могут выполнять <CODE>cvs admin</CODE>.




<H3><A NAME="SEC119" HREF="cvs-ru_toc.html#TOC119">Ключи команды admin</A></H3>

<P>
Некоторые ключи имеют сомнительную полезность для CVS, но
существуют по историческим причинам.  Некоторые даже приводят к
невозможности использования CVS, пока вы не отмените их
действие!


<DL COMPACT>

<DT><CODE>-A<VAR>старый_файл</VAR></CODE>
<DD>
Может не работать совместно с CVS.  Добавляет список доступа 
<VAR>старого_файла</VAR> к списку доступа RCS-файла.

<DT><CODE>-a<VAR>имена</VAR></CODE>
<DD>
Может не работать совместно с CVS.  <VAR>имена</VAR>
перечисляются через запятую.  Добавляет <VAR>имена</VAR> к списку
доступа RCS-файла.

<DT><CODE>-b[<VAR>ревизия</VAR>]</CODE>
<DD>
Устанавливает ветку по умолчанию&#38;  В CVS вы обычно не
манипулируете ветками по умолчанию, вместо этого используются
липкие метки (see section <A HREF="cvs-ru_4.html#SEC53">Липкие метки</A>).  Есть одна причина
использовать <CODE>cvs admin -b</CODE>:  вернуть обратно версию от
поставщика при использовании веток поставщика (see section <A HREF="cvs-ru_13.html#SEC106">Возврат к последней версии от поставщика</A>).  Между <SAMP>`-b'</SAMP> и аргументом не должно
быть пробела.

<A NAME="IDX518"></A>
<DT><CODE>-c<VAR>строка</VAR></CODE>
<DD>
Делает <VAR>строку</VAR> префиксом комментария.  Этот префикс не
используется ни в текущей версии CVS, ни в RCS 5.7,
таким образом, о нём можно не беспокоиться.  See section <A HREF="cvs-ru_12.html#SEC97">Подстановка ключевых слов</A>.

<DT><CODE>-e[<VAR>имена</VAR>]</CODE>
<DD>
Может не работать совместно с CVS.  <VAR>имена</VAR>
перечисляются через запятую.  Удаляет <VAR>имена</VAR> из списка
доступа RCS-файла.  Если <VAR>имена</VAR> не заданы, очищает весь 
список доступа.

<DT><CODE>-I</CODE>
<DD>
Выполняется интерактивно, даже если стандартный ввод не является
терминалом.  Этот ключ не работает с сетевой версией CVS и,
скорее всего, исчезнет в будущих версиях CVS.

<DT><CODE>-i</CODE>
<DD>
Бесполезный ключ.  Создает новый RCS-файл, не создавая новой
ревизии.  Файлы можно добавлять в репозиторий с помощью команды
<CODE>cvs add</CODE> (see section <A HREF="cvs-ru_7.html#SEC66">Добавление файлов в каталог</A>).

<DT><CODE>-k<VAR>subst</VAR></CODE>
<DD>
Устанавливает режим подстановки ключевых слов по умолчанию.
See section <A HREF="cvs-ru_12.html#SEC97">Подстановка ключевых слов</A>.  Явное указание режима
подстановки при использовании команд <CODE>cvs update</CODE>, <CODE>cvs
export</CODE> и <CODE>cvs checkout</CODE> переопределяет этот режим по
умолчанию.

<DT><CODE>-l[<VAR>rev</VAR>]</CODE>
<DD>
Блокировать ревизию с номером <VAR>rev</VAR>.  Если указан номер
ветки, заблокировать самую последнюю ревизию на ветке.  Если
<VAR>rev</VAR> опущено, заблокировать последнюю ревизию на ветке по
умолчанию.  Между <SAMP>`-l'</SAMP> и аргументом не может быть пробела.

Этот ключ можно использовать в сочетании со скриптом
<TT>`rcslock.pl'</TT>, находящимся в каталоге <TT>`contrib/'</TT> в
дистрибутиве CVS, для того, чтобы пользоваться
блокированными извлечениями (когда только один пользователь в
каждый момент времени может редактировать данный файл).  Смотрите 
комментарии в этом файле за дальнейшей информацией (а также файл
<TT>`README'</TT> в каталоге <TT>`contrib/'</TT>, где содержится
уведомление об отсутствующей поддержке для содержимого этого
каталога.)  В соответствии с вышеупомянутыми комментариями
следует установить жесткий режим блокировки (по умолчанию это
именно так).

<DT><CODE>-L</CODE>
<DD>
Установить жесткий режим блокировки.  Это означает, что владелец
RCS-файла наравне со всеми прочими должен блокировать файл
перед внесением в него изменений.  Для работы с CVS жесткий
режим блокировки должен быть установлен; смотри обсуждение этого
вопроса в описании ключа <SAMP>`-l'</SAMP>.

<A NAME="IDX519"></A>
<A NAME="IDX520"></A>
<A NAME="IDX521"></A>
<A NAME="IDX522"></A>
<DT><CODE>-m<VAR>rev</VAR>:<VAR>msg</VAR></CODE>
<DD>
Заменить журнальное сообщение ревизии <VAR>rev</VAR> на <VAR>msg</VAR>.

<DT><CODE>-N<VAR>имя</VAR>[:[<VAR>rev</VAR>]]</CODE>
<DD>
Действует так же, как <SAMP>`-n'</SAMP>, переопределяя уже существующее
<VAR>имя</VAR>.  Об использовании с волшебными ветками смотри
section <A HREF="cvs-ru_5.html#SEC59">Волшебные номера веток</A>.

<DT><CODE>-n<VAR>имя</VAR>[:[<VAR>rev</VAR>]]</CODE>
<DD>
Связывает алфавитное <VAR>имя</VAR> с веткой или ревизией <VAR>rev</VAR>.
Обычно вместо этого ключа лучше использовать <SAMP>`cvs tag'</SAMP> и
<SAMP>`cvs rtag'</SAMP>.  Если двоеточие и <VAR>rev</VAR> опущены, удаляет
<VAR>имя</VAR>; в противном случае сообщает об ошибке, если <VAR>имя</VAR>
уже связано с каким-либо номером.  Если <VAR>rev</VAR> является
алфавитным именем, то оно перед связыванием заменяется на
соответствующий номер.  Если <VAR>rev</VAR> состоит из номера ветви,
за которым следует точка, то это означает самую свежую ревизию на
ветке.  Двоеточие с отсутствующим <VAR>rev</VAR> означает самую свежую
ревизию на ветке по умолчанию, или на стволе.  Например,
<SAMP>`cvs admin -n<VAR>name</VAR>'</SAMP> связывает <VAR>name</VAR> с последней
ревизией всех RCS-файлов; подобно этому <SAMP>`cvs admin
-n<VAR>name</VAR>:$'</SAMP> связывает <VAR>name</VAR> с номерами ревизий,
извлеченных из содержимого ключевых слов в соответствующих
рабочих файлах.

<A NAME="IDX523"></A>
<A NAME="IDX524"></A>
<A NAME="IDX525"></A>
<DT><CODE>-o<VAR>диапазон</VAR></CODE>
<DD>
Удаляет (<EM>делает устаревшими</EM>) ревизии, заданные
<VAR>диапазоном</VAR>.

Заметьте, что эта команда может быть весьма опасна, если только
вы не знаете <EM>точно</EM>, что именно вы делаете (например,
смотрите предупреждения о возможной путанице в синтаксисе
<VAR>rev1</VAR>:<VAR>rev2</VAR>).

Если вам не хватает дискового пространства, то эта команда может
вам помочь.  Подумайте дважды перед её использованием: отменить
действие этой команды нельзя никак, кроме восстановления с
резервных копий.  Вероятно, неплохо будет сначала
поэкспериментировать на копии репозитория.

<VAR>диапазон</VAR> задаётся одним из нескольких способов:

<DL COMPACT>

<DT><CODE><VAR>rev1</VAR>::<VAR>rev2</VAR></CODE>
<DD>
Уничтожить ревизии между <VAR>rev1</VAR> и <VAR>rev2</VAR>, так что
CVS будет хранить только изменения между <VAR>rev1</VAR> и
<VAR>rev2</VAR>, но не промежуточные изменения.  Например, после
выполнения команды <SAMP>`-o 1.3::1.5'</SAMP> можно извлечь ревизию 1.3,
ревизию 1.5, разницу между 1.3 и 1.5, но не ревизию 1.4 или
разницу между 1.3 и 1.4.  Другой пример: <SAMP>`-o 1.3::1.4'</SAMP> и
<SAMP>`-o 1.3::1.3'</SAMP> не совершат никакого действия, потому что
удалять в данных случаях нечего.

<DT><CODE>::<VAR>rev</VAR></CODE>
<DD>
Удаляет ревизии между началом ветки, содержащей <VAR>rev</VAR>, и
самой <VAR>rev</VAR>.  Точка начала ветки и <VAR>rev</VAR> остаются
нетронутыми.  Например, <SAMP>`-o ::1.3.2.6'</SAMP> удаляет ревизию
1.3.2.1, ревизию 1.3.2.5 и все ревизии в промежутке между ними,
но не трогает 1.3 и 1.3.2.6.

<DT><CODE><VAR>rev</VAR>::</CODE>
<DD>
Удаляет ревизии между <VAR>rev</VAR> и концом ветки, содержащей
<VAR>rev</VAR>.  Ревищия <VAR>rev</VAR> остается нетронутой, но головная
ревизия (<CODE>HEAD</CODE>) удаляется.

<DT><CODE><VAR>rev</VAR></CODE>
<DD>
Удаляет ревизию <VAR>rev</VAR>.  Например, <SAMP>`-o 1.3'</SAMP> эквивалентно
<SAMP>`-o 1.2::1.4'</SAMP>.

<DT><CODE><VAR>rev1</VAR>:<VAR>rev2</VAR></CODE>
<DD>
Удаляет ревизии от <VAR>rev1</VAR>, включительно, до <VAR>rev2</VAR>,
включительно, находящиеся на одной ветке.  После выполнения
команды нельзя будет извлечь ревизии <VAR>rev1</VAR>, <VAR>rev2</VAR>, а
также все ревизии в промежутке между ними.  Например, команда
<SAMP>`cvs admin -oR_1_01:R_1_02 .'</SAMP> редко бывает полезна.  Она
означает "удалить ревизии вплоть до метки <SAMP>`R_1_02'</SAMP>,
включительно".  Осторожно!  Если есть файл, которые изменились
между <SAMP>`R_1_02'</SAMP> и <SAMP>`R_1_03'</SAMP>, то в файле соответствующим
меткам будут присвоены <EM>одинаковые</EM> номера ревизии.  Из-за
этого не только нельзя будет извлечь <SAMP>`R_1_02'</SAMP>, но и
<SAMP>`R_1_03'</SAMP> потребуется восстанавливать с резервных копий.  В
большинстве случаев следует использовать вариант
<SAMP>`<VAR>rev1</VAR>::<VAR>rev2</VAR>'</SAMP>.

<DT><CODE>:<VAR>rev</VAR></CODE>
<DD>
Удалить ревизии с начала ветки, содержащей <VAR>rev</VAR>, вплоть до
самой <VAR>rev</VAR>, включительно.

<DT><CODE><VAR>rev</VAR>:</CODE>
<DD>
Удалить ревизии от <VAR>rev</VAR>, включительно, до конца ветки,
содержащей <VAR>rev</VAR>.
</DL>

Ревизии не могут быть удалены, если они заблокированы или с них
начинаются ветви.

Если ревизии имеют алфавитные имена и вы используете эти имена в
сочетании с синтаксисом <SAMP>`::'</SAMP>, то CVS выдаст сообщение
об ошибке и не будет удалять такие ревизии.  Если вы
действительно хотите удалить алфавитные имена и ревизии, то
сначала удалите имена с помощью <CODE>cvs tag -d</CODE>, затем
выполните <CODE>cvs admin -o</CODE>.  Если вы не используете синтаксис
<SAMP>`::'</SAMP>, то CVS удалит ревизии, но оставит алфавитные
имена, которые ссылаются на несуществующие ревизии.  Такое
поведение оставлено для совместимости с предыдущими версиями
CVS, но так как оно не очень полезно, то в будущем может
измениться, чтобы совпадать со случаем <SAMP>`::'</SAMP>.

Из-за способа, которым CVS обрабатывает ветви, <VAR>rev</VAR>
нельзя задавать в виде алфавитного имени, если эта ревизия
находится на ветке.  В section <A HREF="cvs-ru_5.html#SEC59">Волшебные номера веток</A> объясняется,
почему это так.

Убедитесь, что никто не извлёк копию ревизии, которую вы делаете
устаревшей.  Могут произойти странные вещи, если кто-то
редактирует эту ревизию и пытается зафиксировать её.  Из-за этого
ключ <SAMP>`-o'</SAMP> не следует использовать для отмены ошибочного
фиксирования, вместо этого фиксируйте ещё одну ревизию,
исправляющую ошибочное изменение (see section <A HREF="cvs-ru_5.html#SEC62">Слияние изменений между двумя ревизиями</A>).

<DT><CODE>-q</CODE>
<DD>
Работать тихо, не выдавать сопроводительных сообщений.

<DT><CODE>-s<VAR>state</VAR>[:<VAR>rev</VAR>]</CODE>
<DD>
Полезно использовать вместе с CVS.  Устанавливает атрибут
состояния ревизии <VAR>rev</VAR> в <VAR>state</VAR>.  Если <VAR>rev</VAR> ---
это номер ветви, то использовать последнюю ревизию на этой
ветви.  Если <VAR>rev</VAR> опущена, использовать последнюю ревизию на 
ветви по умолчанию.  В качестве <VAR>state</VAR> можно использовать
любой идентификатор.  Полезным набором является <SAMP>`Exp'</SAMP>
(экспериментальный), <SAMP>`Stab'</SAMP> (стабильный) и <SAMP>`Rel'</SAMP>
(вошедший в конечный продукт).  По умолчанию состояние новой
ревизии при создании устанавливается в <SAMP>`Exp'</SAMP>.  Состояние
сообщается командой <SAMP>`cvs log'</SAMP> (see section <A HREF="cvs-ru_16.html#SEC139">Команда log: напечатать информацию о файлах</A>) и в
ключевых словах <SAMP>`$'</SAMP>Log$ и <SAMP>`$'</SAMP>State$
(see section <A HREF="cvs-ru_12.html#SEC97">Подстановка ключевых слов</A>).  Заметьте, что CVS
использует состояние <CODE>dead</CODE> для своих внутренних нужд; для
того, чтобы поместить файл в состояние <CODE>dead</CODE> или
восстановить его из этого состояния, используйте команды
<CODE>cvs remove</CODE> и <CODE>cvs add</CODE>, а не <CODE>cvs admin -s</CODE>.

<DT><CODE>-t[<VAR>файл</VAR>]</CODE>
<DD>
Полезно при использовании вместе с CVS.  Берёт из
<VAR>файла</VAR> описание указанного RCS-файла, удаляя его старое 
описание.  Имя <VAR>файла</VAR> не должно начинаться с минуса.
Описание файла можно увидеть в выдаче команды <SAMP>`cvs log'</SAMP>
(see section <A HREF="cvs-ru_16.html#SEC139">Команда log: напечатать информацию о файлах</A>).  Между <SAMP>`-t'</SAMP> и его аргументом не
должно быть пробела.

Если <VAR>файл</VAR> опущен, то описание берётся со стандартного
ввода, завершённое символом конца файла или строчкой, состоящей
из единственного символа "точка".  При работе с терминала текст
описания запрашивается у пользователя, смотри <SAMP>`-I'</SAMP>.  Чтение
со стандартного ввода не работает в клиент-серверной CVS и
может измениться в будущей версии CVS.

<DT><CODE>-t-<VAR>строка</VAR></CODE>
<DD>
Похоже на <SAMP>`-t<VAR>файл</VAR>'</SAMP>.  Текст описания берётся из
<VAR>строки</VAR>, заменяя уже существующее описание.  Между <SAMP>`-t'</SAMP> 
и его аргументом не должно быть пробелов.

<DT><CODE>-U</CODE>
<DD>
Устанавливает мягкий режим блокировок.  Это означает, что
владелец файла не обязан блокировать ревизию перед фиксированием.
Для использования в CVS должен быть установлен жёсткий режим
блокировок; смотри выше обсуждение ключа <SAMP>`-l'</SAMP>.

<DT><CODE>-u[<VAR>rev</VAR>]</CODE>
<DD>
Смотри выше описание ключа <SAMP>`-l'</SAMP>, где обсуждается
использование этого ключа в CVS.  Разблокировать ревизию
<VAR>rev</VAR>.  Если дан номер ветки, разблокировать последнюю
ревизию на этой ветке.  Если <VAR>rev</VAR> опущена, удалить последнюю
блокировку, сделанную пользователем в этом файле.  Обычно только
тот, кто сделал блокировку, может снять её.  Если это делает
кто-то другой, то это называется взломом блокировки.  В этом
случае владельцу блокировки отсылается уведомление по электронной
почте.  Почтовое сообщение может содержать комментарий,
предоставленный тем, кто взломал блокировку.  Комментарий
завершается концом файла или строкой, состоящей из единственной
точки.  Между ключом <SAMP>`-u'</SAMP> и его аргументом не должно быть
пробела.

<DT><CODE>-V<VAR>n</VAR></CODE>
<DD>
В предыдущей версии CVS этот ключ означал, что RCS-файл 
нужно создавать в формате, понимаемой программой RCS версии
<VAR>n</VAR>.  В настоящий момент этот ключ устарел и его
использование приводит к сообщению об ошибке.

<DT><CODE>-x<VAR>suffixes</VAR></CODE>
<DD>
В предыдущих версиях CVS этот ключ можно было использовать,
чтобы задать имена RCS-файлов.  Однако, CVS требует,
чтобы имена RCS-файлов оканчивались на <SAMP>`,v'</SAMP>, поэтому
этот ключ никогда не был полезен.

</DL>



<H2><A NAME="SEC120" HREF="cvs-ru_toc.html#TOC120">Команда checkout: извлечение исходных текстов для редактирования</A></H2>
<P>
<A NAME="IDX526"></A>
<A NAME="IDX527"></A>



<UL>
<LI>

Краткое описание: <SAMP>`checkout [ключи] <VAR>модули</VAR>...'</SAMP>
<LI>

Требует: репозиторий
<LI>

Изменяет: рабочий каталог
<LI>

Синонимы: <CODE>co</CODE>, <CODE>get</CODE>
</UL>

<P>
Создаёт или обновляет рабочий каталог, содержащий копии файлов с
исходными текстами, заданных с помощью параметра <VAR>модули</VAR>.
Команду <CODE>checkout</CODE> обычно следует использовать перед
использованием всех прочих команд CVS, так как большинство
их них требует наличия рабочего каталога.


<P>
<VAR>модули</VAR> -- это либо алфавитные имена коллекции каталогов и
файлов с исходными текстами, или пути к каталогам и файлам в
репозитории.  Алфавитные имена описываются в файле
<TT>`modules'</TT>.  See section <A HREF="cvs-ru_18.html#SEC154">Файл <TT>`modules'</TT></A>.


<P>
В зависимости от модуля, который вы задали, команда
<CODE>checkout</CODE> может рекурсивно создавать каталоги и заполнять
их соответствующими файлами.  Теперь вы можете редактировать эти
файлы когда угодно, независимо от того, что кто-то ещё
редактирует копии тех же самых файлов); затем обновите их, чтобы
получить изменения, помещённые другими в репозиторий;
зафиксируйте результаты вашей работы в репозиторий.


<P>
Заметьте, что <CODE>checkout</CODE> сам создаёт каталоги.  В текущем
каталоге при выполнении команды <CODE>checkout</CODE> образуется
каталог верхнего уровня, чьё имя обычно совпадает с именем
указанного модуля.  В случае псевдонима модуля созданный
подкаталог может иметь другое имя, но можно быть уверенным, что
это будет именно подкаталог, и что <CODE>checkout</CODE> покажет
относительный путь, ведущий к каждому файлу, который извлекается
в ваш рабочий каталог (если вы не укажете глобальный ключ
<SAMP>`-Q'</SAMP>).


<P>
Команда <CODE>checkout</CODE> создаёт файлы с правами на чтение и
запись, если не задан глобальный ключ <SAMP>`-r'</SAMP>
(see section <A HREF="cvs-ru_16.html#SEC116">Глобальные ключи командной строки</A>), не установлена переменная окружения
<CODE>CVSREAD</CODE>, и за этим файлом не установлено слежение
(see section <A HREF="cvs-ru_13.html#SEC103">Слежение за чужими исходными текстами</A>).


<P>
Заметьте, что допускается также выполнение <CODE>checkout</CODE> в
каталоге, который был создан другой командой <CODE>checkout</CODE>.
Это похоже на выполнение команды <CODE>update</CODE> с ключом
<SAMP>`-d'</SAMP>, в том смысле, что в вашем рабочем каталоге появятся
новые каталоги, которые были созданы в репозитории.  Однако же,
команда <CODE>checkout</CODE> требует имени модуля, тогда как команда
<CODE>update</CODE> -- имени каталога.  Для использования
<CODE>checkout</CODE> таким способом её нужно выполнять из каталога
верхнего уровня, поэтому прежде чем использовать <CODE>checkout</CODE>, 
чтобы обновить существующий каталог, не забудьте перейти в
каталог верхнего уровня.


<P>
Сообщения, которые выдаются командой <CODE>checkout</CODE>, описаны в
section <A HREF="cvs-ru_16.html#SEC151">Сообщения команды update</A>.




<H3><A NAME="SEC121" HREF="cvs-ru_toc.html#TOC121">Ключи команды checkout</A></H3>

<P>
Команда <CODE>checkout</CODE> поддерживает стандартные ключи, описанные 
в section <A HREF="cvs-ru_16.html#SEC117">Стандартные ключи командной строки</A>:


<DL COMPACT>

<DT><CODE>-D <VAR>date</VAR></CODE>
<DD>
Использовать самую свежую ревизию, созданную не позднее
<VAR>date</VAR>.  Этот ключ является липким, и подразумевает
использование ключа <SAMP>`-P'</SAMP>.  См. section <A HREF="cvs-ru_4.html#SEC53">Липкие метки</A> за
дальнейшей информацией о липких метках и датах.

<DT><CODE>-f</CODE>
<DD>
Полезен только при использовании совместно с ключами <SAMP>`-D
<VAR>date</VAR>'</SAMP> или <SAMP>`-r <VAR>tag</VAR>'</SAMP>.  Если не найдено подходящей
ревизии, извлечь самую свежую ревизию, а не игнорировать файл.

<DT><CODE>-k <VAR>kflag</VAR></CODE>
<DD>
Обрабатывать ключевые слова в соответствии с <VAR>kflag</VAR>.
См. section <A HREF="cvs-ru_12.html#SEC97">Подстановка ключевых слов</A>.  Этот ключ является липким:
дальнейшие обновления этого рабочего каталога будут использовать
тот же самы <VAR>kflag</VAR>.  Для того, чтобы увидеть липкие ключи,
используйте команду <CODE>status</CODE>.  См. section <A HREF="cvs-ru_17.html#SEC152">Краткий справочник по командам CVS</A> за
дальнейшей информацией о команде <CODE>status</CODE>.

@std-option-l

<DT><CODE>-n</CODE>
<DD>
Не выполнять программ при извлечении (тех, что указаны в файле
<TT>`modules'</TT> с помощью ключа <SAMP>`-o'</SAMP>).  see section <A HREF="cvs-ru_18.html#SEC154">Файл <TT>`modules'</TT></A>).

<DT><CODE>-P</CODE>
<DD>
Удалять пустые каталоги.  См. section <A HREF="cvs-ru_7.html#SEC73">Перемещение и переименование каталогов</A>.

<DT><CODE>-p</CODE>
<DD>
Выдавать содержимое файлов на стандартный вывод.

@std-option-R{Извлекать}

<DT><CODE>-r <VAR>tag</VAR></CODE>
<DD>
Использовать ревизию <VAR>tag</VAR>.  Этот ключ является липким и
подразумевает использование <SAMP>`-P'</SAMP>.  См. section <A HREF="cvs-ru_4.html#SEC53">Липкие метки</A> за 
дальнейшей информацией о липких метках и датах.
</DL>

<P>
Вдобавок к этому, можно использовать следующие ключи команды
<CODE>checkout</CODE>:


<DL COMPACT>

<DT><CODE>-A</CODE>
<DD>
Очистить липкие метки, даты и ключи <SAMP>`-k'</SAMP>.  См. section <A HREF="cvs-ru_4.html#SEC53">Липкие метки</A> за дальнейшей информацией о липких метках и датах.

<DT><CODE>-c</CODE>
<DD>
Копировать отсортированное содержимое файла <TT>`modules'</TT> на
стандартный вывод, вместо того, чтобы создавать или изменять
файлы или каталоги в рабочем каталоге.

<DT><CODE>-d <VAR>dir</VAR></CODE>
<DD>
Создать каталог с рабочими файлами, который называется <VAR>dir</VAR>, 
а не использовать имя модуля.  Вообще использование этого флага
эквивалентно использованию <SAMP>`mkdir <VAR>dir</VAR>; cd <VAR>dir</VAR>'</SAMP>,
за которым следует команда извлечения без ключа <SAMP>`-d'</SAMP>.

Однако же, существует важное исключение из этого правила.  При
извлечении одиночного файла очень удобно, чтобы файл создавались
в каталоге, не содержащем пустых промежуточных каталогов.  В
этом, и только в этом случае CVS пытается "укоротить" пути 
к файлам, чтобы избежать подобных пустых каталогов.

Например, если имеется модуль <SAMP>`foo'</SAMP>, содержащий файл
<TT>`bar.c'</TT>, то команда <SAMP>`cvs co -d dir foo'</SAMP> создаст каталог
<TT>`dir/'</TT> и поместит внутрь файл <TT>`bar.c'</TT>.  Аналогично,
если есть модуль <SAMP>`bar'</SAMP>, в котором есть подкаталог
<TT>`baz/'</TT>, в котором есть файл <TT>`quux.c'</TT>, то команда
<SAMP>`cvs -d dir co bar/baz'</SAMP> создаст каталог <TT>`dir/'</TT> и
поместит туда файл <TT>`quux.c'</TT>.

Использование флага <SAMP>`-N'</SAMP> запретит такое поведение.  В случае 
вышеописанной структуры модулей <SAMP>`cvs co -N -d dir foo'</SAMP>
создаст каталоги <SAMP>`dir/foo'</SAMP> и поместит туда файл
<TT>`bar.c'</TT>, а команда <SAMP>`cvs co -N -d dir bar/baz'</SAMP> создаст
каталоги <TT>`dir/bar/baz/'</TT> и поместит туда файл <TT>`quux.c'</TT>.

<DT><CODE>-j <VAR>tag</VAR></CODE>
<DD>
Если используются два ключа <SAMP>`-j'</SAMP>, то изменения, сделанные в
ревизии, указанной в первом ключе, будут объединены с ревизией,
указанной во втором ключе, и помещены в рабочий каталог.

With one <SAMP>`-j'</SAMP> option, merge changes from the
ancestor revision to the revision specified with the
<SAMP>`-j'</SAMP> option, into the working directory.  The
ancestor revision is the common ancestor of the
revision which the working directory is based on, and
the revision specified in the <SAMP>`-j'</SAMP> option.

Вдобавок каждый ключ <SAMP>`-j'</SAMP> может задавать дату, которая, если 
используется вместе с ветвями, может ограничить выбор ревизий
только подпадающими под эту дату.  Дата задаётся с помощью
двоеточия:
<SAMP>`-j<VAR>Алфавитная_Метка</VAR>:<VAR>Указание_Даты</VAR>'</SAMP>.

See section <A HREF="cvs-ru_5.html#SEC54">Создание ветвей и слияние</A>.

<DT><CODE>-N</CODE>
<DD>
Полезен только с <SAMP>`-d <VAR>dir</VAR>'</SAMP>.  При задании этого ключа
CVS не будет "укорачивать" пути к модулям в вашем рабочем
каталоге, когда вы извлекаете одиночный модуль.  См. описание
флага <SAMP>`-d'</SAMP>, где обсуждается этот вопрос и даются примеры.

<DT><CODE>-s</CODE>
<DD>
Похоже на <SAMP>`-c'</SAMP>, но выдает также статус модулей и сортирует
их в соответствии с этим статусом.  See section <A HREF="cvs-ru_18.html#SEC154">Файл <TT>`modules'</TT></A>, за
информацией о том, как ключ <SAMP>`-s'</SAMP> используется для задания в
файле <TT>`modules'</TT> статуса модуля.
</DL>



<H3><A NAME="SEC122" HREF="cvs-ru_toc.html#TOC122">Пример использования команды <SAMP>`checkout'</SAMP></A></H3>

<P>
Получить копию модуля <SAMP>`tc'</SAMP>:



<PRE>
$ cvs checkout tc
</PRE>

<P>
Получить копию модуля <SAMP>`tc'</SAMP> в том виде, в котором он
находился вчера:



<PRE>
$ cvs checkout -D yesterday tc
</PRE>



<H2><A NAME="SEC123" HREF="cvs-ru_toc.html#TOC123">Команды commit: поместить файлы в репозиторий</A></H2>
<P>
<A NAME="IDX528"></A>
<A NAME="IDX529"></A>



<UL>
<LI>

Краткое описание: <CODE>commit [-lnRf] [-m '<VAR>журнальное_сообщение</VAR>' 
| -F <VAR>файл</VAR>] [-r <VAR>ревизия</VAR>] [<VAR>файлы</VAR>...]</CODE>
<LI>

Требует: рабочий каталог, репозиторий.
<LI>

Изменяет: репозиторий.
<LI>

Синоним: <SAMP>`ci'</SAMP>
</UL>

<P>
Используйте <CODE>commit</CODE>, если вы хотите поместить в репозиторий
изменения, сделанные в вашей рабочей копии.


<P>
Если вы не укажете, какие файлы следует зафиксировать, то команда 
проверит все файлы в рабочем каталоге.  <CODE>commit</CODE> тщательно
следит за тем, чтобы помещать в репозиторий только те файл,
которые действительно изменились.  По умолчанию (или если явно
задать ключ <SAMP>`-R'</SAMP>) файлы в подкаталогах также обрабатываются
и фиксируются, если они были изменены; можно использовать ключ
<SAMP>`-l'</SAMP>, чтобы ограничить команду <CODE>commit</CODE> только текущим
каталогом.


<P>
<CODE>commit</CODE> проверяет, что указанные файлы свежее, чем текущие
ревизии в репозитории; если это не так, то команда выдаст
предупреждение о необходимости выполнить команду <CODE>update</CODE>
(see section <A HREF="cvs-ru_16.html#SEC149">Команда update: обновить рабочий каталог из репозитория</A>) и завершится, ничего более не делая.
<CODE>commit</CODE> не станет выполнять за вас команду <CODE>update</CODE>,
предоставляя вам сделать это в удобное время.


<P>
Если все нормально, будет вызван текстовый редактор, в котором
можно будет ввести журнальное сообщение, которое будет передано
программам журналирования (see section <A HREF="cvs-ru_18.html#SEC154">Файл <TT>`modules'</TT></A> и see section <A HREF="cvs-ru_18.html#SEC167">Файл loginfo</A>), а также помещено в RCS-файл в репозитории.  Это
журнальное сообщение можно извлечь с помощью команды <CODE>log</CODE>,
см. section <A HREF="cvs-ru_16.html#SEC139">Команда log: напечатать информацию о файлах</A>.  Можно задать журнальное сообщение в
командной строке с помощью ключа <SAMP>`-m
<VAR>журнальное_сообщение</VAR>'</SAMP>, при этом редактор не будет вызван,
или использовать ключ <SAMP>`-F <VAR>файл</VAR>'</SAMP>, чтобы задать файл,
содержащий журнальное сообщение.




<H3><A NAME="SEC124" HREF="cvs-ru_toc.html#TOC124">Ключи команды commit</A></H3>

<P>
Следующие стандартные ключи (их полное описание можно найти в
section <A HREF="cvs-ru_16.html#SEC117">Стандартные ключи командной строки</A>) поддерживаются командой <CODE>commit</CODE>:


<DL COMPACT>

<DT><CODE>-l</CODE>
<DD>
@std-option-l

<DT><CODE>-n</CODE>
<DD>
Не выполнять программ, относящихся к модулю.

@std-option-R{Фиксировать}

<DT><CODE>-r <VAR>рев</VAR></CODE>
<DD>
Фиксировать с номером ревизии <VAR>рев</VAR>: это либо номер ветки,
либо номер ревизии на основном стволе, больший, чем все
существующие номера ревизии (see section <A HREF="cvs-ru_4.html#SEC47">Назначение номеров ревизий</A>).
Нельзя помещать изменения в ревизию, находящуюся на ветке.
</DL>

<P>
Команда <CODE>commit</CODE> также поддерживает следующие ключи:


<DL COMPACT>

<DT><CODE>-F <VAR>file</VAR></CODE>
<DD>
Прочесть журнальное сообщение из файла <VAR>файл</VAR>, не запускать 
редактор для ввода этого сообщения.

<DT><CODE>-f</CODE>
<DD>
Заметьте, что поведение ключа <SAMP>`-f'</SAMP> в этой команде отличается 
от стандартного, которое описано в section <A HREF="cvs-ru_16.html#SEC117">Стандартные ключи командной строки</A>.

Заставляет CVS зафиксировать новую ревизию, даже если вы не
сделали никаких изменений в файле.  Если текущая ревизия
<VAR>файла</VAR> имеет номер 1.7, то следующие две команды
эквивалентны:


<PRE>
$ cvs commit -f <VAR>file</VAR>
$ cvs commit -r 1.8 <VAR>file</VAR>
</PRE>

Ключ <SAMP>`-f'</SAMP> запрещает рекурсию (то есть подразумевает
использование <SAMP>`-l'</SAMP>).  Для того, чтобы заставить CVS
зафиксировать новую ревизию для всех файлов во всех подкаталогах, 
используйте <SAMP>`-f -R'</SAMP>.

<DT><CODE>-m <VAR>сообщение</VAR></CODE>
<DD>
Использовать <VAR>сообщение</VAR> в качестве журнального сообщения, не 
вызывать редактор.
</DL>



<H3><A NAME="SEC125" HREF="cvs-ru_toc.html#TOC125">Пример использования команды commit</A></H3>



<H4><A NAME="SEC126" HREF="cvs-ru_toc.html#TOC126">Помещение изменений на ветку</A></H4>

<P>
Вы можете зафиксировать изменения в ревизию, находящуюся на ветке
(в её номере четное количество точек) с помощью ключа
<SAMP>`-r'</SAMP>. Для того, чтобы создать ревизию на ветке, используйте
ключ <SAMP>`-b'</SAMP> команд <CODE>rtag</CODE> и <CODE>tag</CODE> (see section <A HREF="cvs-ru_5.html#SEC54">Создание ветвей и слияние</A>).  Затем используйте <CODE>checkout</CODE> или
<CODE>update</CODE>, чтобы ваши исходные тексты стали основаны на этой
свежесозданной ветке.  Начиная с этого момента все изменения в
этом рабочем каталоге автоматически добавляются в ревизию на
ветке, никак не мешая разработке в основном стволе.  Например,
если вам потребовалось создать исправление к версии 1.2 вашего
продукта, несмотря на то, что уже разрабатывается версия 2.0, вы
можете:



<PRE>
$ cvs rtag -b -r FCS1_2 FCS1_2_Patch product_module
$ cvs checkout -r FCS1_2_Patch product_module
$ cd product_module
[[ hack away ]]
$ cvs commit
</PRE>

<P>
Все это будет работать автоматически, потому что ключ <SAMP>`-r'</SAMP>
является липким.




<H4><A NAME="SEC127" HREF="cvs-ru_toc.html#TOC127">Создание ветки после редактирования</A></H4>

<P>
Предположим, вы работали над каким-то крайне экспериментальным
продуктом, основанным на какой-то ревизии, извлеченной из
репозитория неделю назад.  Если кто-либо еще в вашей группе
захочет вместе с вами работать над этим продуктом, не мешая при
этом основному направлению разработки, то вы можете зафиксировать 
изменения в новую ветку.  Другие смогут извлечь результаты вашего 
эксперимента и воспользоваться автоматическим исправлением
конфликтов с помощью CVS.  Сценарий таков:



<PRE>
[[ hacked sources are present ]]
$ cvs tag -b EXPR1
$ cvs update -r EXPR1
$ cvs commit
</PRE>

<P>
После команды <CODE>update</CODE> ключ <SAMP>`-r EXPR1'</SAMP> прилипнет ко
всем файлам.  Заметьте, что ваши изменения в файлах никогда не
будут удалены командой <CODE>update</CODE>.  Команда <CODE>commit</CODE>
автоматически поместит изменения на правильную ветку, потому что
ключ <SAMP>`-r'</SAMP> является липким.  Вы также можете сделать так:



<PRE>
[[ hacked sources are present ]]
$ cvs tag -b EXPR1
$ cvs commit -r EXPR1
</PRE>

<P>
но в этом случае только те файлы, которые вы изменили, будут
иметь прилепленный флаг <SAMP>`-r EXPR1'</SAMP>.  Если вы поредактируете
еще какие-либо файлы и зафиксируете их без указания флага
<SAMP>`-r EXPR1'</SAMP>, то эти файлы могут случайно оказаться в главном
стволе.


<P>
Для того, чтобы работать вместе с вами над экспериментальной
версией, другием могут просто сказать:



<PRE>
$ cvs checkout -r EXPR1 whatever_module
</PRE>



<H2><A NAME="SEC128" HREF="cvs-ru_toc.html#TOC128">Команда diff: показать различия между ревизиями</A></H2>
<P>
<A NAME="IDX530"></A>
<A NAME="IDX531"></A>



<UL>
<LI>

Краткая сводка: <CODE>diff [-lR] [format_options] 
[[-r rev1 | -D date1] [-r rev2 |  -D date2]] [files...]</CODE>
<LI>

Требует: рабочий каталог, репозиторий.
<LI>

Ничего не изменяет.
</UL>

<P>
Команда <CODE>diff</CODE> используется для сравнения различных ревизий
файлов.  Действие по умолчанию -- сравнить ваши рабочие копии
файлов с ревизиями, на которых эти файлы основаны, и сообщить о
всех обнаруженных различиях.


<P>
Если заданы какие-либо файлы, то сравниваются только они.  Если
заданы имена каталогов, то сравниваются файлы в этих каталогах.


<P>
Смысл кода завершения для команды <CODE>diff</CODE> отличается от всех
прочих команд; детали описаны в section <A HREF="cvs-ru_16.html#SEC114">Код выхода CVS</A>.




<H3><A NAME="SEC129" HREF="cvs-ru_toc.html#TOC129">Ключи команды diff</A></H3>

<P>
Команда <CODE>checkout</CODE> поддерживает стандартные ключи, описанные 
в section <A HREF="cvs-ru_16.html#SEC117">Стандартные ключи командной строки</A>:


<DL COMPACT>

<DT><CODE>-D <VAR>дата</VAR></CODE>
<DD>
Использовать самую свежую ревизию, созданную не позже чем
<VAR>дата</VAR>.  См. описание <SAMP>`-r'</SAMP>, где описывается, как это
влияет на результаты сравнения.

<DT><CODE>-k <VAR>kflag</VAR></CODE>
<DD>
Обрабатывать ключевые слова в соответствии с <VAR>kflag</VAR>.
См. section <A HREF="cvs-ru_12.html#SEC97">Подстановка ключевых слов</A>.

@std-option-l

@std-option-R{Обрабатывать}

<DT><CODE>-r <VAR>tag</VAR></CODE>
<DD>
Сравнивать с ревизией <VAR>метка</VAR>.  Можно задать от нуля до двух
ключей <SAMP>`-r'</SAMP>.  Без ключа <SAMP>`-r'</SAMP> рабочий файл будет
сравниваться с ревизией, на которой он основан.  С одним ключом
<SAMP>`-r'</SAMP> указанная ревизия будет сравниваться с вашим рабочим
файлом.  С двумя ключами <SAMP>`-r'</SAMP> указанные две ревизии будут
сравниваться друг с другом (а содержимое рабочих файлов не будет
влиять на выдачу команды).

Один или оба ключа <SAMP>`-r'</SAMP> можно заменить на ключ <SAMP>`-D
<VAR>дата</VAR>'</SAMP>, описанный выше.
</DL>

<P>
Нижеследующие ключи задают формат выдачи.  Они имеют то же
значение, что и в программе GNU diff.



<PRE>
-0 -1 -2 -3 -4 -5 -6 -7 -8 -9
--binary
--brief
--changed-group-format=<VAR>arg</VAR>
-c
  -C <VAR>nlines</VAR>
  --context[=<VAR>lines</VAR>]
-e --ed
-t --expand-tabs
-f --forward-ed
--horizon-lines=<VAR>arg</VAR>
--ifdef=<VAR>arg</VAR>
-w --ignore-all-space
-B --ignore-blank-lines
-i --ignore-case
-I <VAR>regexp</VAR>
   --ignore-matching-lines=<VAR>regexp</VAR>
-h
-b --ignore-space-change
-T --initial-tab
-L <VAR>label</VAR>
  --label=<VAR>label</VAR>
--left-column
-d --minimal
-N --new-file
--new-line-format=<VAR>arg</VAR>
--old-line-format=<VAR>arg</VAR>
--paginate
-n --rcs
-s --report-identical-files
-p
--show-c-function
-y --side-by-side
-F <VAR>regexp</VAR>
--show-function-line=<VAR>regexp</VAR>
-H --speed-large-files
--suppress-common-lines
-a --text
--unchanged-group-format=<VAR>arg</VAR>
-u
  -U <VAR>nlines</VAR>
  --unified[=<VAR>lines</VAR>]
-V <VAR>arg</VAR>
-W <VAR>columns</VAR>
  --width=<VAR>columns</VAR>
</PRE>



<H3><A NAME="SEC130" HREF="cvs-ru_toc.html#TOC130">Примеры использования команды diff</A></H3>

<P>
Нижеследующая строка выдает унифицированную (с ключом <SAMP>`-u'</SAMP>)
разницу между ревизиями 1.14 и 1.19 файла <TT>`backend.c'</TT>.
Из-за наличия флага <SAMP>`-kk'</SAMP> ключевые слова не подставляются,
поэтому различия внутри ключевых слов игнорируются.



<PRE>
$ cvs diff -kk -u -r 1.14 -r 1.19 backend.c
</PRE>

<P>
Предположим, что экспериментальная ветка <SAMP>`EXPR1'</SAMP> была
основана на наборе файлов, помеченных как <SAMP>`RELEASE_1_0'</SAMP>.
Чтобы увидеть, что произошло на этой ветке, используйте команду



<PRE>
$ cvs diff -r RELEASE_1_0 -r EXPR1
</PRE>

<P>
Такая команда может использоваться, чтобы показать контекстную
разницу между двумя версиями программного продукта:



<PRE>
$ cvs diff -c -r RELEASE_1_0 -r RELEASE_1_1 &#62; diffs
</PRE>

<P>
Если вы пользуетесь файлами <TT>`ChangeLog'</TT>, то команда типа
нижеуказанной поможет придумать подходящий текст для журнальной
записи.  Все изменения, которые вы сделали, будут
продемонстрированы вам в удобном виде.



<PRE>
$ cvs diff -u | less
</PRE>



<H2><A NAME="SEC131" HREF="cvs-ru_toc.html#TOC131">Команда export: экспортировать исходные тексты</A></H2>
<P>
<A NAME="IDX532"></A>
<A NAME="IDX533"></A>



<UL>
<LI>

Краткая сводка: export [-flNnR] [-r rev|-D дата] [-k subst] [-d
dir] модуль...
<LI>

Требует: репозиторий.
<LI>

Изменяет: текущий каталог.
</UL>

<P>
Эта команда похожа на команду <CODE>checkout</CODE>; её нужно
использовать, если вы хотите получить копию исходных текстов
модуля без служебных каталогов CVS.  Например, команду
<CODE>export</CODE> можно использовать, чтобы подготовить исходные
тексты для передачи вовне.  Эта команда требует указания даты или 
метки (с помощью ключей <SAMP>`-D'</SAMP> или <SAMP>`-r'</SAMP>), чтобы вы могли
воспроизвести те же самые файлы, которые вы отдаете.


<P>
Часто при использовании <CODE>cvs export</CODE> приходится указывать
флаг <SAMP>`-kv'</SAMP>.  При этом ключевые слова будут развернуты так,
чтобы при импорте в другом месте не потерялась информация о
ревизиях.  Помните, что в этом случае бинарные файлы не будут
корректно обрабатываться.  Также помните, что после использования
флага <SAMP>`-kv'</SAMP> больше нельзя будет использовать команду
<CODE>ident</CODE> (являющуюся частью пакета RCS), которая ищет
строки с ключевыми словами (см. <CODE>ident(1)</CODE>).  Если вы хотите 
использовать <CODE>ident</CODE>, то не используйте <SAMP>`-kv'</SAMP>.




<H3><A NAME="SEC132" HREF="cvs-ru_toc.html#TOC132">Ключи команды export</A></H3>

<P>
Команда <CODE>export</CODE> поддерживает стандартные ключи, описанные в 
section <A HREF="cvs-ru_16.html#SEC117">Стандартные ключи командной строки</A>:


<DL COMPACT>

<DT><CODE>-D <VAR>date</VAR></CODE>
<DD>
Использовать саму свежую ревизию не позже чем <VAR>date</VAR>.

@std-option-f

@std-option-l

<DT><CODE>-n</CODE>
<DD>
Не выполнять программ при извлечении.

@std-option-R

<DT><CODE>-r <VAR>метка</VAR></CODE>
<DD>
Использовать ревизию <VAR>метка</VAR>.
</DL>

<P>
Вдобавок поддерживаются следующие ключи (общие для
<CODE>checkout</CODE> и <CODE>export</CODE>):


<DL COMPACT>

<DT><CODE>-d <VAR>dir</VAR></CODE>
<DD>
Создать для рабочих файлов каталог <VAR>dir</VAR>, а не использовать
имя модуля.  See section <A HREF="cvs-ru_16.html#SEC121">Ключи команды checkout</A>, где полностью описаны 
детали обработки этого флага.

<DT><CODE>-k <VAR>subst</VAR></CODE>
<DD>
Установить режим подстановки ключевых слов (see section <A HREF="cvs-ru_12.html#SEC101">Режимы подстановки</A>).

<DT><CODE>-N</CODE>
<DD>
Полезно только при использовании вместе с <SAMP>`-d <VAR>dir</VAR>'</SAMP>.
See section <A HREF="cvs-ru_16.html#SEC121">Ключи команды checkout</A>, где полностью описаны детали
обработки этого флага.
</DL>



<H2><A NAME="SEC133" HREF="cvs-ru_toc.html#TOC133">Команда history: показать состояние файлов и пользователей</A></H2>
<P>
<A NAME="IDX534"></A>



<UL>
<LI>

Краткая сводка: history [-report] [-flags] [-options args] [files...]
<LI>

Требует: файл <TT>`$CVSROOT/CVSROOT/history'</TT>, иногда репозиторий.
<LI>

Ничего не изменяет.
</UL>

<P>
CVS может вести файл истории, отслеживающий каждое
использование команд <CODE>checkout</CODE>, <CODE>commit</CODE>, <CODE>rtag</CODE>,
<CODE>update</CODE> и <CODE>release</CODE>.  Для того, чтобы отображать эту
информацию в разных форматах, используется команда
<CODE>history</CODE>.


<P>
Журналирование должно быть включено путем создания файла
<TT>`$CVSROOT/CVSROOT/history'</TT>.


<P>
<STRONG>Предупреждение:</STRONG> <CODE>history</CODE> использует ключи
<SAMP>`-f'</SAMP>, <SAMP>`-l'</SAMP>, <SAMP>`-n'</SAMP> и <SAMP>`-p'</SAMP> не так, как они
обычно используются с командами CVS (see section <A HREF="cvs-ru_16.html#SEC117">Стандартные ключи командной строки</A>).




<H3><A NAME="SEC134" HREF="cvs-ru_toc.html#TOC134">Ключи команды history</A></H3>

<P>
Несколько флагов, показанных выше в качестве параметра
<SAMP>`-report'</SAMP>, задают вид генерируемого отчета:


<DL COMPACT>

<DT><CODE>-c</CODE>
<DD>
Сообщить о всех командах <CODE>commit</CODE> (то есть о каждом
изменении репозитория).

<DT><CODE>-e</CODE>
<DD>
Сообщить обо всем (все виды записей).  Эквивалентно заданию
<SAMP>`-x'</SAMP> со всеми типами записей.  Конечно, <SAMP>`-e'</SAMP> будет
также включать все типы записей, которые будут добавлены в
будущих выпусках CVS;  если вы пишете скрипт, которые может
обрабатывать только определенные типы записей, используйте
<SAMP>`-x'</SAMP>.

<DT><CODE>-m <VAR>module</VAR></CODE>
<DD>
Сообщать об изменениях конкретного модуля (Можно использовать
<SAMP>`-m'</SAMP> несколько раз в одной командной строке.)

<DT><CODE>-o</CODE>
<DD>
Сообщать об извлеченных модулях.

<DT><CODE>-T</CODE>
<DD>
Сообщать обо всех метках.

<DT><CODE>-x <VAR>type</VAR></CODE>
<DD>
Извлекать указанный набор типов записей <VAR>type</VAR> из истории
CVS.  Типы задаются одиночными буквами, которые можно
использовать в комбинациях.

Некоторые команды имеют единственный тип записи:

<DL COMPACT>

<DT><CODE>F</CODE>
<DD>
release
<DT><CODE>O</CODE>
<DD>
checkout
<DT><CODE>E</CODE>
<DD>
export
<DT><CODE>T</CODE>
<DD>
rtag
</DL>

После выполнения команды <CODE>update</CODE> могут появиться одна из
четырех типов записей:

<DL COMPACT>

<DT><CODE>C</CODE>
<DD>
A merge was necessary but collisions were
detected (requiring manual merging).
<DT><CODE>G</CODE>
<DD>
A merge was necessary and it succeeded.
<DT><CODE>U</CODE>
<DD>
A working file was copied from the repository.
<DT><CODE>W</CODE>
<DD>
The working copy of a file was deleted during
update (because it was gone from the repository).
</DL>

После выполнения команды <CODE>commit</CODE> могут возникнуть одна из
трех типов записей:

<DL COMPACT>

<DT><CODE>A</CODE>
<DD>
A file was added for the first time.
<DT><CODE>M</CODE>
<DD>
A file was modified.
<DT><CODE>R</CODE>
<DD>
A file was removed.
</DL>
</DL>

<P>
Ключи, показанные в виде параметра <SAMP>`-flags'</SAMP>, задают
дополнительные ограничения или, наоборот, добавляют
дополнительную информацию к отчету, не требуя дополнительных
парамтров:


<DL COMPACT>

<DT><CODE>-a</CODE>
<DD>
Показать данные обо всех пользователях (по умолчанию выдается
только информация о пользователе, выполняющем команду
<CODE>history</CODE>).

<DT><CODE>-l</CODE>
<DD>
Показать только последнее изменение.

<DT><CODE>-w</CODE>
<DD>
Показать только записи об изменениях, выполненных из того же
рабочего каталога, где выполняется команда <CODE>history</CODE>.
</DL>

<P>
Ключи, показанные в виде параметра <SAMP>`-options <VAR>args</VAR>'</SAMP>,
задают дополнительные ограничения, используя аргументы:


<DL COMPACT>

<DT><CODE>-b <VAR>str</VAR></CODE>
<DD>
Показывать данные от конца вплоть до последней строки <VAR>str</VAR>,
встреченной в имени модуля, имени файла или пути к репозиторию.

<DT><CODE>-D <VAR>дата</VAR></CODE>
<DD>
Показывать данные с <VAR>даты</VAR>.  Это немного отличается от
обычного использования <SAMP>`-D <VAR>дата</VAR>'</SAMP>, при котором
извлекаются самые свежие ревизии, старше чем <VAR>дата</VAR>.

<DT><CODE>-p <VAR>repository</VAR></CODE>
<DD>
Показывать данные, относящиеся к конкретному репозиторию (вы
можете задать в командной строке больше одного ключа <SAMP>`-p'</SAMP>.)

<DT><CODE>-r <VAR>rev</VAR></CODE>
<DD>
Показывать записи, относящиеся к ревизиям, появившимся после
появления ревизии или метки <VAR>rev</VAR>.  Соответствующие ревизии
или метки ищутся в каждом RCS-файле.

<DT><CODE>-t <VAR>tag</VAR></CODE>
<DD>
Показывать записи, сделанные с тех пор, как в файле истории
появилась запись о метке <VAR>tag</VAR>.  Это отличается от ключа
<SAMP>`-r'</SAMP> тем, что читается только файл истории, а не
RCS-файлы, что гораздо быстрее.

<DT><CODE>-u <VAR>name</VAR></CODE>
<DD>
Показывать записи о пользователе <VAR>name</VAR>.
</DL>



<H2><A NAME="SEC135" HREF="cvs-ru_toc.html#TOC135">Команда import: импортировать исходные тексты</A></H2>
<P>
<A NAME="IDX535"></A>
<A NAME="IDX536"></A>



<UL>
<LI>

Краткая сводка: import [-options] repository vendortag releasetag...
<LI>

Требует: репозиторий, каталог с исходными текстами.
<LI>

Изменяет: репозиторий.
</UL>

<P>
Используйте <CODE>import</CODE> для помещения в ваш репозиторий целого
дерева каталогов, полученного из внешнего источника (например,
поставщика исходных текстов).  Эту команду можно использовать как
для начального импорта, так и для глобального обновления модуля
из внешнего источника.  See section <A HREF="cvs-ru_13.html#SEC103">Слежение за чужими исходными текстами</A>,
где обсуждается этот вопрос.


<P>
Параметр <VAR>repository</VAR> задает имя каталога (или путь к
каталогу) в корневом каталоге CVS-репозитория; если этот
каталог не существует, то CVS создаст его.


<P>
Когда вы импортируете с целью обновления дерева каталогов,
которое было изменено в вашем репозитории с момента последнего
импорта, вас уведомят обо всех файлах, конфликтующих в двух
ветвях разработки; как советует <CODE>import</CODE>, используйте
<SAMP>`checkout -j'</SAMP>, чтобы согласовать изменения.


<P>
Если CVS решает, что файл нужно игнорировать (see section <A HREF="cvs-ru_18.html#SEC171">Игнорирование файлов с помощью cvsignore</A>), то она не импортирует этот файл и печатает <SAMP>`I
<VAR>имя-файла</VAR>'</SAMP> (see section <A HREF="cvs-ru_16.html#SEC137">Сообщения команды output</A>, где полностью
описаны сообщения).


<P>
Если существует файл <TT>`$CVSROOT/CVSROOT/cvswrappers'</TT>, то
файлы, чьи имена совпадают со спецификациями в этом файле, будут
считаться packages и над ними перед импортом будут произведены
указанные действия.  See section <A HREF="cvs-ru_18.html#SEC160">Файл <TT>`cvswrappers'</TT></A>.


<P>
Чужие исходные тексты хранятся на ветке первого уровня, по
умолчанию имеющей номер 1.1.1.  Обновления являются листьями на
этой ветке; например, файлы из первой импортированной коллекции
исходников будут иметь ревизию 1.1.1.1, файлы из первого
импортированного обновления этой коллекции будут иметь ревизию
1.1.1.2 и т. д.


<P>
Команде требуется по крайней мере три параметра.
<VAR>repository</VAR> требуется, чтобы задать коллекцию исходников.
<VAR>vendortag</VAR> -- это метка целой ветви (например, 1.1.1).  Для 
того, чтобы идентифицировать файлы, находящиеся на листьях,
образующихся при каждом импорте, требуется указать
<VAR>releasetag</VAR>.


<P>
Заметьте, что <CODE>import</CODE> <EM>не</EM> изменяет каталог, в котором 
вы выполнили эту команду.  В частности, этот каталог не
становится рабочим каталогом CVS; если вы хотите работать с
исходными текстами -- сначала импортируйте их, а затем извлеките
в другой каталог (see section <A HREF="cvs-ru_1.html#SEC5">Получение исходного кода</A>).




<H3><A NAME="SEC136" HREF="cvs-ru_toc.html#TOC136">Ключи команды import</A></H3>

<P>
Команда <CODE>import</CODE> поддерживает стандартный ключ, описанный в
see section <A HREF="cvs-ru_16.html#SEC117">Стандартные ключи командной строки</A>:


<DL COMPACT>

<DT><CODE>-m <VAR>сообщение</VAR></CODE>
<DD>
Использовать <VAR>сообщение</VAR> в качестве журнальной записи, а не
вызывать редактор.
</DL>

<P>
Есть также нижеследующие специальные ключи:


<DL COMPACT>

<DT><CODE>-b <VAR>branch</VAR></CODE>
<DD>
См. section <A HREF="cvs-ru_13.html#SEC109">Несколько веток поставщика</A>.

<DT><CODE>-k <VAR>subst</VAR></CODE>
<DD>
Задает желаемый режим подстановки ключевых слов.  Этот параметр
будет влиять на все файлы, созданные во время импорта, но не на
те, что уже существовали в репозитории.  См. section <A HREF="cvs-ru_12.html#SEC101">Режимы подстановки</A>, где описываются разрешенные параметры ключа
<SAMP>`-k'</SAMP>.

<DT><CODE>-I <VAR>name</VAR></CODE>
<DD>
Задает имена файлов, которые следует игнорировать при импорте.
Этот ключ можно использовать несколько раз.  Чтобы не
игнорировать ни один файл, задайте <SAMP>`-I !'</SAMP>.

<VAR>name</VAR> может быть шаблоном имен файлов, типа тех, что можно
задать в файле <TT>`.cvsignore'</TT>.  See section <A HREF="cvs-ru_18.html#SEC171">Игнорирование файлов с помощью cvsignore</A>.

<DT><CODE>-W <VAR>spec</VAR></CODE>
<DD>
Задает имена файлов, которые следует профильтровать перед
импортом.  Этот ключ можно использовать несколько раз.

<VAR>spec</VAR> может быть шаблоном имен файлов, типа тех, что можно
задать в файле <TT>`.cvswrappers'</TT>.  See section <A HREF="cvs-ru_18.html#SEC160">Файл <TT>`cvswrappers'</TT></A>.
</DL>



<H3><A NAME="SEC137" HREF="cvs-ru_toc.html#TOC137">Сообщения команды output</A></H3>

<P>
Команда <CODE>import</CODE> сообщает вам о своей деятельности, печатая
строку на каждый файл, в начале которой находится один символ,
сообщающий о статусе файла:


<DL COMPACT>

<DT><CODE>U <VAR>file</VAR></CODE>
<DD>
Файл уже существует в репозитории и не был локально изменен;
будет создана новая ревизия, если нужно.

<DT><CODE>N <VAR>file</VAR></CODE>
<DD>
Это новый файл и теперь он добавлен в репозиторий.

<DT><CODE>C <VAR>file</VAR></CODE>
<DD>
Файл уже существует в репозитории, но был изменен локально,
поэтому вам потребуется объединить изменения.

<DT><CODE>I <VAR>file</VAR></CODE>
<DD>
Файл игнорируется (see section <A HREF="cvs-ru_18.html#SEC171">Игнорирование файлов с помощью cvsignore</A>).

<A NAME="IDX537"></A>
<A NAME="IDX538"></A>
<DT><CODE>L <VAR>file</VAR></CODE>
<DD>
Файл является символической ссылкой; <CODE>cvs import</CODE> игнорирует
символические ссылки.  Периодически предлагается изменить это
поведение, но нет четкого соглашения, как именно.  (Различные
ключ в файле <TT>`modules'</TT> могут использоваться для воссоздания
символических ссылок при извлечении, обновлении и т. п.;
see section <A HREF="cvs-ru_18.html#SEC154">Файл <TT>`modules'</TT></A>).
</DL>



<H3><A NAME="SEC138" HREF="cvs-ru_toc.html#TOC138">Примеры использования команды import</A></H3>

<P>
См. section <A HREF="cvs-ru_13.html#SEC103">Слежение за чужими исходными текстами</A> и section <A HREF="cvs-ru_3.html#SEC40">Создание дерева каталогов из нескольких файлов</A>.




<H2><A NAME="SEC139" HREF="cvs-ru_toc.html#TOC139">Команда log: напечатать информацию о файлах</A></H2>
<P>
<A NAME="IDX539"></A>
<A NAME="IDX540"></A>



<UL>
<LI>

Краткая сводка: log [options] [files...]
<LI>

Требует: репозиторий, рабочий каталог.
<LI>

Ничего не изменяет.
</UL>

<P>
Отображает журнальную информацию о файлах.  <CODE>log</CODE>
используется, чтобы вызвать утилиту <CODE>rlog</CODE> из комплекта
RCS.  Although this is no longer true in the current
sources, this history determines the format of the output and the
options, which are not quite in the style of the other CVS
commands.


<P>
<A NAME="IDX541"></A>
<A NAME="IDX542"></A>
Команда сообщает о местонахождении RCS-файла, головной
ревизии (<CODE>HEAD</CODE>) (последней ревизии на стволе, обо всех
алфавитных именах меток, а также некоторую другую информацию.
Для каждой ревизии печатается её номер, автор, количество
удаленных и добавленных строк и журнальное сообщение.  Все метки
времени отображаются по Гринвичу (в UTC).  (Другие части CVS 
печатают время в местной временн'ой зоне).


<P>
<STRONG>Предупреждение: </STRONG> <CODE>log</CODE> использует ключ <SAMP>`-R'</SAMP> не 
так, как это обычно делается в CVS (see section <A HREF="cvs-ru_16.html#SEC117">Стандартные ключи командной строки</A>).




<H3><A NAME="SEC140" HREF="cvs-ru_toc.html#TOC140">Ключи команды log</A></H3>

<P>
По умолчанию команда <CODE>log</CODE> сообщает всю доступную
информацию.  Ключи предназначены для ограничения выдачи.


<DL COMPACT>

<DT><CODE>-b</CODE>
<DD>
Печатает информацию о ревизиях на ветке по умолчанию, обычно это
самая верхняя ветка на стволе.

<DT><CODE>-d <VAR>dates</VAR></CODE>
<DD>
Печатает информацию о ревизиях, помещенных в репозиторий в
промежутке времени, заданном списком дат через точку с запятой.
Форматы дат те же, что используются вместе с ключом <SAMP>`-D'</SAMP>
(see section <A HREF="cvs-ru_16.html#SEC117">Стандартные ключи командной строки</A>).  Даты можно комбинировать следующим
образом:

<DL COMPACT>

<DT><CODE><VAR>d1</VAR>&#60;<VAR>d2</VAR></CODE>
<DD>
<DT><CODE><VAR>d2</VAR>&#62;<VAR>d1</VAR></CODE>
<DD>
Выбрать ревизии, которые были помещены в репозиторий между датой
<VAR>d1</VAR> и датой <VAR>d2</VAR>.

<DT><CODE>&#60;<VAR>d</VAR></CODE>
<DD>
<DT><CODE><VAR>d</VAR>&#62;</CODE>
<DD>
Выбрать все ревизии, датированные <VAR>d</VAR> или раньше.

<DT><CODE><VAR>d</VAR>&#60;</CODE>
<DD>
<DT><CODE>&#62;<VAR>d</VAR></CODE>
<DD>
Выбрать все ревизии, датированные <VAR>d</VAR> или позже.

<DT><CODE><VAR>d</VAR></CODE>
<DD>
Выбрать последнюю ревизию, датированную <VAR>d</VAR> или раньше.
</DL>

Вместо символов <SAMP>`&#62;'</SAMP> и <SAMP>`&#60;'</SAMP> можно использовать <SAMP>`&#60;='</SAMP>
и <SAMP>`&#62;='</SAMP>, чтобы задать диапазон включительно, а не
исключительно.

Между ключом <SAMP>`-d'</SAMP> и его аргументом не должно быть пробела.
Заметьте также, что разделителем является точка с запятой
(<SAMP>`;'</SAMP>).

<DT><CODE>-h</CODE>
<DD>
Печатает только имя RCS-файла, имя файла в рабочем каталоге, 
головную ревизию, ревизию по умолчанию, список прав доступа,
блокировки, алфавитные имена и суффикс.

@std-option-l

<DT><CODE>-N</CODE>
<DD>
Не выдает список меток для этого файла.  Этот ключ полезен, если
вы используете много меток, чтобы избежать просматривания трех
экранов информации о метках.

<DT><CODE>-R</CODE>
<DD>
Печатает только имя RCS-файла.

<DT><CODE>-r<VAR>revisions</VAR></CODE>
<DD>
Печатает информацию о ревизиях, перечисленных в списке ревизий и
их диапазонов, разделенных запятыми.  В этой таблице приведены
все доступные форматы диапазонов:

<DL COMPACT>

<DT><CODE><VAR>rev1</VAR>:<VAR>rev2</VAR></CODE>
<DD>
Ревизии от <VAR>rev1</VAR> до <VAR>rev2</VAR> (должны находиться на одной
ветке).

<DT><CODE>:<VAR>rev</VAR></CODE>
<DD>
Ревизии с начала ветки вплоть до <VAR>rev</VAR> включительно.

<DT><CODE><VAR>rev</VAR>:</CODE>
<DD>
Ревизии, начиная с <VAR>rev</VAR> до конца ветки, содержащей
<VAR>rev</VAR>.

<DT><CODE><VAR>branch</VAR></CODE>
<DD>
Аргумент, являющийся веткой означает все ревизии на этой ветке.

<DT><CODE><VAR>branch1</VAR>:<VAR>branch2</VAR></CODE>
<DD>
Диапазон ветвей означает все ревизии на ветках в этом диапазоне.

<DT><CODE><VAR>branch</VAR>.</CODE>
<DD>
Последнюю ревизию на ветке <VAR>branch</VAR>.
</DL>

Пустой ключ <SAMP>`-r'</SAMP>, без списка ревизий, означает использование 
последней ревизии на ветке по умолчанию, обычно на стволе.  Между 
ключом <SAMP>`-r'</SAMP> и его параметром не должно быть пробела.

<DT><CODE>-s <VAR>states</VAR></CODE>
<DD>
Печатает информацию о ревизиях, чей атрибут состояния совпадает с
состоянием из разделенного запятыми списка <VAR>states</VAR>.

<DT><CODE>-t</CODE>
<DD>
Печатает то же самое, что и <SAMP>`-h'</SAMP>, плюс текст описания.

<DT><CODE>-w<VAR>logins</VAR></CODE>
<DD>
Печатает информацию о ревизиях, созданных пользователями,
перечисленными через запятую в списке <VAR>logins</VAR>.  Если список
опущен, используется имя текущего пользователя.  Между ключом
<SAMP>`-w'</SAMP> и его аргументом не должно быть пробела.
</DL>

<P>
<CODE>log</CODE> печатает информацию о ревизиях удовлетворяющих ключам
<SAMP>`-d'</SAMP>, <SAMP>`-s'</SAMP>, <SAMP>`-w'</SAMP> и совокупности ключей <SAMP>`-b'</SAMP> и
<SAMP>`-r'</SAMP>.




<H3><A NAME="SEC141" HREF="cvs-ru_toc.html#TOC141">Примеры использования команды log</A></H3>

<P>
Примеры будут с благодарностью приняты.




<H2><A NAME="SEC142" HREF="cvs-ru_toc.html#TOC142">Команда rdiff: выдать изменения между версиями в формате patch</A></H2>
<P>
<A NAME="IDX543"></A>
<A NAME="IDX544"></A>



<UL>
<LI>

Краткая сводка: rdiff [-flags] [-V vn] [-r t|-D d [-r t2|-D d2]] modules...
<LI>

Требует: репозиторий.
<LI>

Ничего не изменяет.
<LI>

Синоним: <CODE>patch</CODE>.
</UL>

<P>
Создает файл изменений между двумя версиями продукта в формате
программы <CODE>patch(1)</CODE>, написанной Ларри Воллом.  Этот файл
можно скормить программе <CODE>patch</CODE>, чтобы обновить старую
версию до новой.  (Это одна из немногих команд CVS, которые
работают напрямую с репозиторием и не требуют предварительного
извлечения исходных текстов.)  Результат выдается на стандартный
вывод.


<P>
Вы можете задать (используя стандартные ключи <SAMP>`-r'</SAMP> и
<SAMP>`-D'</SAMP>) любую комбинацию двух ревизий или дат.  Если указана
только одна ревизия или дата, то результат содержит изменения в
промежутке между этой ревизией или датой и текущей головной
ревизией в RCS-файле.


<P>
Заметьте, что если соответствующая версия продукта находится в
нескольких каталогах, то может потребоваться указать команде
<CODE>patch</CODE> при обновлении старых исходников ключ <SAMP>`-p'</SAMP>,
чтобы <CODE>patch</CODE> смогла найти файлы, находящиеся в других
каталогах.




<H3><A NAME="SEC143" HREF="cvs-ru_toc.html#TOC143">Ключи команды rdiff</A></H3>

<P>
Команда <CODE>rdiff</CODE> поддерживает стандартные ключи, описанные в
see section <A HREF="cvs-ru_16.html#SEC117">Стандартные ключи командной строки</A>:


<DL COMPACT>

<DT><CODE>-D <VAR>date</VAR></CODE>
<DD>
Использовать саму свежую ревизию, сделанную не позже <VAR>date</VAR>.

@std-option-f

@std-option-l

@std-option-R

<DT><CODE>-r <VAR>tag</VAR></CODE>
<DD>
Использовать ревизию <VAR>tag</VAR>.
</DL>

<P>
Вдобавок доступны следующие ключи:


<DL COMPACT>

<DT><CODE>-c</CODE>
<DD>
Использовать контекстный формат.  По умолчанию это именно так.

<DT><CODE>-s</CODE>
<DD>
Создать вместо файла с исправлениями краткий отчет об
изменениях.  Отчет содержит информацию о файлах, которые были
изменены или добавлены в промежутке между версиями.  Этот отчет
выдается на стандартный вывод.  Это полезно, например, для
выяснения, какие именно файлы изменились между двумя датами или
ревизиями.

<DT><CODE>-t</CODE>
<DD>
Изменения между двумя последними ревизиями выдаются на
стандартный вывод.  Это особенно полезно для выяснения, в чем
заключалось последнее изменение файла.

<DT><CODE>-u</CODE>
<DD>
Использовать унифицированный формат файла изменений.  Учтите, что 
старые версии программы <CODE>patch</CODE> не могли обрабатывать этот
формат, поэтому если вы планируете опубликовать изменения в сети, 
то вам, скорее всего, не следует использовать ключ <SAMP>`-u'</SAMP>.

<DT><CODE>-V <VAR>vn</VAR></CODE>
<DD>
Раскрывать ключевые слова в соответствии с правилами, принятыми в 
RCS версии <VAR>vn</VAR> (формат подстановки изменился в RCS 
версии 5).  Заметьте, что этот ключ больше не обрабатывается.
CVS всегда будет раскрывать ключевые слова так, как этот
делает RCS версии 5.
</DL>



<H3><A NAME="SEC144" HREF="cvs-ru_toc.html#TOC144">Примеры использования команды rdiff</A></H3>

<P>
Предположим, вы получаете письмо от <TT>foo@example.net</TT>, который 
просит вас прислать обновление с версии 1.2 до версии 1.4
компилятора <CODE>tc</CODE>.  У вас нету под рукой такого обновления,
но с помощью CVS вы можете легко сделать так:



<PRE>
$ cvs rdiff -c -r FOO1_2 -r FOO1_4 tc | \
$$ Mail -s 'Исправления, которые Вы запрашивали' foo@example.net
</PRE>

<P>
Предположим, что вы сделали версию 1.3 и ветку <SAMP>`R_1_3fix'</SAMP>
для исправлений этой версии. <SAMP>`R_1_3_1'</SAMP> соответствует версии
1.3.1, которая была сделана некоторое время назад.  Теперь вы
хотите узнать, что именно было сделано на этой ветке.  Можно
использовать такую команду:



<PRE>
$ cvs patch -s -r R_1_3_1 -r R_1_3fix module-name
cvs rdiff: Diffing module-name
File ChangeLog,v changed from revision 1.52.2.5 to 1.52.2.6
File foo.c,v changed from revision 1.52.2.3 to 1.52.2.4
File bar.h,v changed from revision 1.29.2.1 to 1.2
</PRE>



<H2><A NAME="SEC145" HREF="cvs-ru_toc.html#TOC145">Команда release: сообщить, что модуль более не используется</A></H2>
<P>
<A NAME="IDX545"></A>
<A NAME="IDX546"></A>



<UL>
<LI>

Краткая сводка: release [-d] directories...
<LI>

Требует: рабочий каталог.
<LI>

Изменяет: рабочий каталог, журнал истории.
</UL>

<P>
Эту команду можно использовать, чтобы безопасным образом отменить
<SAMP>`cvs checkout'</SAMP>.  Так как CVS не блокирует файлы, то
использовать эту команду необязательно.  Вы всегда можете просто
удалить рабочий каталог, если желаете; правда, в этом случае вы
рискуете потерять изменения, о которых забыли, а в файле истории
(see section <A HREF="cvs-ru_18.html#SEC172">Файл history</A>) не остается никаких следов того, что вы
отбросили извлеченные исходники.


<P>
Команда <SAMP>`cvs release'</SAMP> позволяет избежать этой проблемы.  Она 
проверяет, что в рабочем каталоге нет незафиксированных
изменений; что вы выполняете эту команду из каталога, в котором
находится рабочий каталог; что репозиторий, из которого был
извлечен рабочий каталог, совпадает с репозиторием, описанным в
базе данных модулей.


<P>
Если все эти условия выполняются, <SAMP>`cvs release'</SAMP> оставляет
запись о своем выполнении в журнал истории (удостоверяя, что вы
сознательно отложили извлеченные тексты).




<H3><A NAME="SEC146" HREF="cvs-ru_toc.html#TOC146">Ключи команды release</A></H3>

<P>
Команда <CODE>release</CODE> поддерживает единственный ключ:


<DL COMPACT>

<DT><CODE>-d</CODE>
<DD>
Удалить рабочую копию файлов, если все нормально.  Если этот флаг 
не указан, то ваши файлы останутся в вашем рабочем каталоге.

<STRONG>Предупреждение:</STRONG> Команда <CODE>release</CODE> рекурсивно
удаляет все каталоги и файлы.  Это имеет очень важный побочный
эффект: все каталоги, которые вы создали в извлеченном дереве
исходников, но не добавили в репозиторий (используя команду
<CODE>add</CODE>; see section <A HREF="cvs-ru_7.html#SEC66">Добавление файлов в каталог</A>) будут бесшумно удалены ---
даже если эти каталоги непусты!
</DL>



<H3><A NAME="SEC147" HREF="cvs-ru_toc.html#TOC147">Сообщения команды release</A></H3>

<P>
Перед тем, как <CODE>release</CODE> освободит ваши исходные тексты,
эта команда печатает однострочное сообщение для каждого файла,
который не соответствует содержимому репозитория.


<P>
<STRONG>Предупреждение:</STRONG> Все каталоги, которые вы создали, но не
добавили в репозиторий с помощью команды <CODE>add</CODE>
(see section <A HREF="cvs-ru_7.html#SEC66">Добавление файлов в каталог</A>), будут бесшумно проигнорированы (и
удалены, если был указан флаг <SAMP>`-d'</SAMP>), даже если эти каталоги
содержат файлы.


<DL COMPACT>

<DT><CODE>U <VAR>file</VAR></CODE>
<DD>
<DT><CODE>P <VAR>file</VAR></CODE>
<DD>
В репозитории существует новая ревизия этого файла, а вы изменили 
его рабочую копию (<SAMP>`U'</SAMP> и <SAMP>`P'</SAMP> означают одно и то же).

<DT><CODE>A <VAR>file</VAR></CODE>
<DD>
Файл был добавлен в ваш рабочий каталог, но еще не был помещен в
репозиторий.  Если вы удаляете вашу копию исходных текстов, то
этот файл будет потерян.

<DT><CODE>R <VAR>file</VAR></CODE>
<DD>
Файл был удален из вашего рабочего каталога, но еще не был удале
из репозитория, потому что вы еще не зафиксировали удаление.
See section <A HREF="cvs-ru_16.html#SEC123">Команды commit: поместить файлы в репозиторий</A>.

<DT><CODE>M <VAR>file</VAR></CODE>
<DD>
Файл изменен в рабочем каталоге.  В репозитории также может быть
более новая ревизия.

<DT><CODE>? <VAR>file</VAR></CODE>
<DD>
<VAR>file</VAR> находится в рабочем каталоге, но не соответствует ни
одному файлу в репозитории, и не находится в списке файлов,
которые нужно игнорировать (см. описание ключа <SAMP>`-I'</SAMP> и
see section <A HREF="cvs-ru_18.html#SEC171">Игнорирование файлов с помощью cvsignore</A>).  Если вы удалите рабочий каталог,
изменения будут потеряны.
</DL>



<H3><A NAME="SEC148" HREF="cvs-ru_toc.html#TOC148">Примеры использования команды release</A></H3>

<P>
Освободить каталог <TT>`tc'</TT> и удалить рабочие копии файлов:



<PRE>
$ cd ..         # Вам нужно находиться в каталоге, содержащем 
                # ваш каталог с исходными текстами, перед тем,
                # как вы выполните команду <SAMP>`cvs release'</SAMP>.
$ cvs release -d tc
You have [0] altered files in this repository.
Are you sure you want to release (and delete) directory `tc': y
$
</PRE>



<H2><A NAME="SEC149" HREF="cvs-ru_toc.html#TOC149">Команда update: обновить рабочий каталог из репозитория</A></H2>
<P>
<A NAME="IDX547"></A>
<A NAME="IDX548"></A>



<UL>
<LI>

Краткая сводка: update [-AdflPpR] [-d] [-r tag|-D date] files...
<LI>

Требует: репозиторий, рабочий каталог.
<LI>

Изменяет: рабочий каталог.
</UL>

<P>
После того, как вы извлечете из общего репозитория рабочую копию
исходных текстов, другие разработчики продолжат вносить изменения
в этот репозиторий.  Время от времени, в удобное для вас время
можно использовать команду <CODE>update</CODE> в вашем рабочем
каталоге, чтобы увязать вашу работу с ревизиями, помещенными в
репозиторий после того, как вы извлекли или последний раз
обновляли ваш рабочий каталог.




<H3><A NAME="SEC150" HREF="cvs-ru_toc.html#TOC150">Ключи команды update</A></H3>

<P>
Команда <CODE>update</CODE> поддерживает стандартные ключи, которые
полностью описаны в see section <A HREF="cvs-ru_16.html#SEC117">Стандартные ключи командной строки</A>:


<DL COMPACT>

<DT><CODE>-D date</CODE>
<DD>
Использовать самую свежую ревизию, созданную не позже
<VAR>date</VAR>.  Этот ключ является липким, и подразумевает
использование ключа <SAMP>`-P'</SAMP>.  См. section <A HREF="cvs-ru_4.html#SEC53">Липкие метки</A>, где
полностью описаны липкие метки и даты.

<DT><CODE>-f</CODE>
<DD>
Полезно только при использовании вместе с ключами <SAMP>`-D <VAR>дата</VAR>'</SAMP>
или <SAMP>`-r <VAR>метка</VAR>'</SAMP>.  Если не найдено совпадающей ревизии,
извлечь самую свежую ревизию, а не игнорировать файл.

<DT><CODE>-k <VAR>kflag</VAR></CODE>
<DD>
Обрабатывать ключевые слова в соответствии с <VAR>kflag</VAR>.  См.
section <A HREF="cvs-ru_12.html#SEC97">Подстановка ключевых слов</A>.  Этот ключ является липким;
дальнейшие обновления этого файла в рабочем каталоге будут
использовать тот же самый <VAR>kflag</VAR>.  Команду <CODE>status</CODE>
можно использовать для просмотра липких ключей.  См. section <A HREF="cvs-ru_17.html#SEC152">Краткий справочник по командам CVS</A>, где описана команда <CODE>status</CODE>.

@std-option-l

<DT><CODE>-P</CODE>
<DD>
Удалять пустые каталоги.  См. section <A HREF="cvs-ru_7.html#SEC73">Перемещение и переименование каталогов</A>.

<DT><CODE>-p</CODE>
<DD>
Писать файлы в стандартный вывод.

@std-option-R{Обрабатывать}

<DT><CODE>-r rev</CODE>
<DD>
Извлечь ревизию/метку <VAR>rev</VAR>.  Этот ключ является липким и
подразумевает использование <SAMP>`-P'</SAMP>.  См. section <A HREF="cvs-ru_4.html#SEC53">Липкие метки</A>,
где полностью описаны липкие метки и даты.
</DL>

<P>
Команду <CODE>update</CODE> можно также использовать с такими ключами:


<DL COMPACT>

<DT><CODE>-A</CODE>
<DD>
Очистить липкие метки, даты и ключи <SAMP>`-k'</SAMP>.  См. section <A HREF="cvs-ru_4.html#SEC53">Липкие метки</A>, где описаны липкие метки и даты.

<DT><CODE>-d</CODE>
<DD>
Создавать каталоги, существующие в репозитории, если они
отсутствуют в рабочем каталоге.  Обычно <CODE>update</CODE> работает
только с файлами и каталогами, которые уже были созданы в рабочем 
каталоге.

Этот ключ полезен при обновлении каталогов, которые были созданы
в репозитории уже после извлечения вашей рабочей копии, но у него 
есть неприятный побочный эффект: если вы специально избегали
определенных каталогов в репозитории, когда создавали рабочий
каталог (используя имена модулей или явно перечисляя в командной
строке требуемые файлы и каталоги), то обновление с ключом
<SAMP>`-d'</SAMP> создаст эти нежелаемые каталоги.

<DT><CODE>-I <VAR>name</VAR></CODE>
<DD>
Во время обновления игнорировать файлы в вашем рабочем каталоге,
чьи имена совпадают с <VAR>name</VAR>.  Можно использовать этот ключ
несколько раз, чтобы задать несколько файлов, которые нужно
игнорировать.  Используйте <SAMP>`-I !'</SAMP>, чтобы не игнорировать ни
один файл.  See section <A HREF="cvs-ru_18.html#SEC171">Игнорирование файлов с помощью cvsignore</A>, где описаны другие способы
игнорирования файлов.

<DT><CODE>-W<VAR>spec</VAR></CODE>
<DD>
Задает имена файлов, которые следует фильтровать во время
обновления.  Этот ключ можно использовать несколько раз.

<VAR>spec</VAR> -- это шаблон имен файлов типа тех, что можно
использовать в файле <TT>`.cvswrappers'</TT>.  See section <A HREF="cvs-ru_18.html#SEC160">Файл <TT>`cvswrappers'</TT></A>.

<DT><CODE>-j<VAR>revision</VAR></CODE>
<DD>
При использовании двух ключей <SAMP>`-j'</SAMP> в рабочем каталоге
происходит объединение изменений между ревизией, заданной первым
ключом, и ревизией, заданной вторым ключом.

При использовании одного ключа <SAMP>`-j'</SAMP> в рабочем каталоге
происходит слияние изменений между ревизией-предком и ревизией,
заданной ключом <SAMP>`-j'</SAMP>.  Ревизия-предок -- это общий предок
ревизии, на основе которой создан рабочий каталог, и ревизии,
заданной ключом <SAMP>`-j'</SAMP>.

Вдобавок, каждый ключ <SAMP>`-j'</SAMP> может содержать необязательное
указание даты, которая, при использовании вместе с ветвями, может
дополнительно ограничить выбор ревизий.  Необязательная дата
задается добавлением двоеточия (<SAMP>`:'</SAMP>) к метке:
<SAMP>`-j<VAR>Symbolic_Tag</VAR>:<VAR>Date_Specifier</VAR>'</SAMP>.

See section <A HREF="cvs-ru_5.html#SEC54">Создание ветвей и слияние</A>.

</DL>



<H3><A NAME="SEC151" HREF="cvs-ru_toc.html#TOC151">Сообщения команды update</A></H3>

<P>
Команды <CODE>update</CODE> и <CODE>checkout</CODE> информируют о своей
деятельности, печатая строчку на каждый обработанный файл.
Первый символ означает статус этого файла:


<DL COMPACT>

<DT><CODE>U <VAR>file</VAR></CODE>
<DD>
Файл был обновлен из репозитория.  Обновление производится: для
файлов, существующих в репозитории, но не в вашем рабочем
каталоге; для файлов, которые вы не изменяли, и для которых в
репозитории существует более свежая ревизия.

<DT><CODE>P <VAR>file</VAR></CODE>
<DD>
Похоже на <SAMP>`U'</SAMP>, но для этого файла CVS-сервер посылает
файл с исправлениями вместо целого файла.  Результирующий файл
оказывается тем же самым.

<DT><CODE>A <VAR>file</VAR></CODE>
<DD>
Файл был добавлен в вашем рабочем каталоге, и будет помещен в
репозиторий, когда вы выполните команду <CODE>commit</CODE>.  Это
сообщение -- напоминание о том, что файл требуется
зафиксировать.

<DT><CODE>R <VAR>file</VAR></CODE>
<DD>
Файл был удален из вашей личной копии исходников, и будет удален
из репозитория, когда вы выполните команду <CODE>commit</CODE>.  Это
сообщение -- напоминание о том, что файл требуется
зафиксировать.

<DT><CODE>M <VAR>file</VAR></CODE>
<DD>
Файл был изменен в вашем рабочем каталоге.

<SAMP>`M'</SAMP> может означать одно из двух состояний файла, над которым 
вы работаете: либо этот файл не менялся в репозитории, и поэтому
остался неизменным в результате выполнения команды <CODE>update</CODE>, 
либо же файл изменился как в рабочем каталоге, так и в
репозитории, но слияние изменений в ваш рабочий файл прошло
успешно, без конфликтов.

CVS выдает некоторые сообщения, когда сливает изменения, и
оставляет резервную копию рабочего файла (как он выглядел перед
выполнением <CODE>update</CODE>).  Точное имя этого файла печатается
во время работы <CODE>update</CODE>.

<DT><CODE>C <VAR>file</VAR></CODE>
<DD>
<A NAME="IDX549"></A>
<A NAME="IDX550"></A>
При попытке объединить изменения из репозитория в вашу рабочую
копию файла был обнаружен конфликт.  <VAR>file</VAR> (ваша рабочая
копия) теперь является результатом попытки объединить две
ревизии; неизмененная копия файла также находится в рабочем
каталоге, с именем <TT>`.#<VAR>file</VAR>.<VAR>revision</VAR>'</TT>, где
<VAR>revision</VAR> -- это ревизия, на которой был основан измененный 
вами файл.  Разрешение конфликтов описано в section <A HREF="cvs-ru_10.html#SEC85">Пример конфликта</A>.
(Заметьте, что некоторые системы автоматически удаляют файлы,
начинающиеся с <SAMP>`.#'</SAMP>, если к этим файлам не было обращений в
течение нескольких дней.  Если вы хотите сохранить копию
исходного файла, переименуйте его.)  Под VMS имя файла
начинается с <SAMP>`__'</SAMP>, а не с <SAMP>`.#'</SAMP>.

<DT><CODE>? <VAR>file</VAR></CODE>
<DD>
<VAR>file</VAR> находится в вашем рабочем каталоге, но не
соответствует ни одному файлу в репозитории, и не находится в
списке файлов, которые нужно игнорировать (см. описание ключа
<SAMP>`-I'</SAMP> и see section <A HREF="cvs-ru_18.html#SEC171">Игнорирование файлов с помощью cvsignore</A>).
</DL>

<P><HR><P>
Go to the <A HREF="cvs-ru_1.html">first</A>, <A HREF="cvs-ru_15.html">previous</A>, <A HREF="cvs-ru_17.html">next</A>, <A HREF="cvs-ru_24.html">last</A> section, <A HREF="cvs-ru_toc.html">table of contents</A>.
</BODY>
</HTML>
