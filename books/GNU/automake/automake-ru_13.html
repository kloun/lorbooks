<HTML>
<HEAD>
<!-- Created by texi2html 1.56k from automake-ru.texi on 11 July 2000 -->

<TITLE>automake - Что войдет в дистрибутив</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="automake-ru_1.html">first</A>, <A HREF="automake-ru_12.html">previous</A>, <A HREF="automake-ru_14.html">next</A>, <A HREF="automake-ru_25.html">last</A> section, <A HREF="automake-ru_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC53" HREF="automake-ru_toc.html#TOC53">Что войдет в дистрибутив</A></H1>

<P>
<A NAME="IDX412"></A>
<A NAME="IDX413"></A>


<P>
Цель <CODE>dist</CODE>, создаваемая в генерируемом файле <TT>`Makefile.in'</TT>,
может быть использована для создания сжатого файла <CODE>tar</CODE> с
дистрибутивом. Имя tar-файла основывается на переменных <SAMP>`PACKAGE'</SAMP> и
<SAMP>`VERSION'</SAMP>; а точнее, он называется
<SAMP>`<VAR>package</VAR>-<VAR>version</VAR>.tar.gz'</SAMP>.
<A NAME="IDX414"></A>
<A NAME="IDX415"></A>
<A NAME="IDX416"></A>
Вы можете использовать переменную <CODE>make</CODE> с именем <SAMP>`GZIP_ENV'</SAMP>
для того, чтобы управлять запуском gzip. Значением по умолчанию является
строка <SAMP>`--best'</SAMP>.


<P>
В большинстве случаев файлы, необходимые для дистрибутива, автоматически
находятся Automake: все файлы исходных текстов автоматически включаются
в состав дистрибутива, так же как и все файлы <TT>`Makefile.am'</TT> и
<TT>`Makefile.in'</TT>. Automake также имеет встроенный список часто
используемых файлов, которые автоматически включаются в состав
дистрибутива, если они существуют в текущем каталоге.  Этот список показывается
при выполнении <SAMP>`automake --help'</SAMP>. Также автоматически включаются
файлы, которые читает программа <CODE>configure</CODE> (например, файлы исходных
текстов, относящиеся к файлам, указанным при запуске макроса
<CODE>AC_OUTPUT</CODE>).


<P>
Все равно, иногда существуют файлы, которые должны входить в состав
дистрибутива, но которые не смогли попасть в автоматически созданный
список.  Эти файлы должны быть перечислены в переменной
<CODE>EXTRA_DIST</CODE>. Вы можете указывать в переменной <CODE>EXTRA_DIST</CODE>
файлы из подкаталогов. Вы можете также указывать каталоги: в этом
случае весь каталог будет рекурсивно скопирован в дистрибутив.
<A NAME="IDX417"></A>


<P>
Если вы определили переменную <CODE>SUBDIRS</CODE>, то Automake будет
рекурсивно включать подкаталоги в состав дистрибутива. Если
<CODE>SUBDIRS</CODE> определен условно (see section <A HREF="automake-ru_18.html#SEC60">Условные операторы</A>), то
Automake включит в дистрибутив все подкаталоги, которые могут появиться
в <CODE>SUBDIRS</CODE>. Если вам необходимо указать список каталогов условно,
то вы можете задать в переменной <CODE>DIST_SUBDIRS</CODE> точный список
подкаталогов, которые необходимо включить в дистрибутив.
<A NAME="IDX418"></A>


<P>
<A NAME="IDX419"></A>


<P>
Время от времени полезно иметь возможность изменить дистрибутив до
того, как он будет упакован.  Если существует цель <CODE>dist-hook</CODE>, то она
запускается после создания каталога с дистрибутивом, но до того, как
создается файл <TT>`.tar'</TT> (или <TT>`.shar'</TT>).  Это применяется для распространения
файлов из подкаталогов, в которых было бы избыточным создавать файл
<TT>`Makefile.am'</TT>:



<PRE>
dist-hook:
        mkdir $(distdir)/random
        cp -p $(srcdir)/random/a1 $(srcdir)/random/a2 $(distdir)/random
</PRE>

<P>
Automake также создает цель <CODE>distcheck</CODE>, которая может помочь
убедиться в том, что дистрибутив работает.  <CODE>distcheck</CODE> создает
дистрибутив и пытается его построить с помощью <CODE>VPATH</CODE>.
<A NAME="IDX420"></A>


<P><HR><P>
Go to the <A HREF="automake-ru_1.html">first</A>, <A HREF="automake-ru_12.html">previous</A>, <A HREF="automake-ru_14.html">next</A>, <A HREF="automake-ru_25.html">last</A> section, <A HREF="automake-ru_toc.html">table of contents</A>.
</BODY>
</HTML>
