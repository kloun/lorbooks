<HTML>
<HEAD>
<!-- Created by texi2html 1.56k from gdb.texinfo on 1 November 2000 -->

<TITLE>Отладка с помощью GDB - Использование GDB под управлением gnu Emacs</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="gdb_1.html">first</A>, <A HREF="gdb_17.html">previous</A>, <A HREF="gdb_19.html">next</A>, <A HREF="gdb_26.html">last</A> section, <A HREF="gdb_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC177" HREF="gdb_toc.html#TOC177">Использование GDB под управлением GNU Emacs</A></H1>

<P>
<A NAME="IDX780"></A>
<A NAME="IDX781"></A>
Специальный интерфейс позволяет вам использовать GNU Emacs для
просмотра (и редактирования) исходных файлов программы, которую вы
отлаживаете с помощью GDB.


<P>
Чтобы использовать этот интерфейс, используйте команду <KBD>M-x gdb</KBD> в
Emacs.  В качестве аргумента задайте выполняемый файл, который вы хотите
отладить.  Эта команда вызывает GDB как подпроцесс Emacs с
вводом и выводом через заново созданный буфер.


<P>
Под управлением Emacs, GDB используется точно так же, как обычно,
за исключением двух моментов:



<UL>
<LI>

Весь "терминальный" ввод и вывод происходит через буфер Emacs.
</UL>

<P>
Это относится как к командам GDB и их выводу, так и к вводу и
выводу, производимыми отлаживаемой программой.


<P>
Это полезно, потому что вы можете копировать текст предыдущих команд и
вводить их снова; вы даже можете использовать таким образом части
вывода.


<P>
Все средства режима оболочки Emacs доступны для взаимодействия с
вашей программой.  В частности, вы можете посылать сигналы обычным путем---
например, <KBD>C-c C-c</KBD> для прерывания, <KBD>C-c C-z</KBD> для остановки.



<UL>
<LI>

GDB отображает исходный код через Emacs.
</UL>

<P>
Каждый раз, когда GDB отображает кадр стека, Emacs
автоматически находит исходный файл для него и помещает стрелку
(<SAMP>`=&#62;'</SAMP>) на левом крае текущей строки.  Emacs использует отдельный
буфер для отображения исходного текста, и разделяет экран, чтобы
отобразить как сеанс GDB, так и исходный текст.


<P>
Тем не менее, явные команды GDB <CODE>list</CODE> и <CODE>search</CODE>
производят вывод как обычно, но у вас вероятно не будет причин
использовать их из Emacs.



<BLOCKQUOTE>
<P>
<EM>Предупреждение:</EM> Если каталог, в котором находится ваша программа, не
является текущим, Emacs легко может ошибиться при определении
местонахождения исходных файлов; в этом случае вспомогательный буфер с
исходным текстом не появляется.  GDB может искать программы, используя
переменную среды <CODE>PATH</CODE>, так что сеансы ввода и вывода
происходят нормально; но Emacs не получает достаточно информации
от GDB, чтобы найти исходные файлы в такой ситуации.  Чтобы
избежать этой проблемы, либо запускайте режим GDB из каталога,
где находится ваша программа, либо укажите абсолютное имя файла, когда будет
запрошен параметр для <KBD>M-x gdb</KBD>.


<P>
Подобная путаница может возникнуть, если вы используете команду
GDB <CODE>file</CODE>, чтобы переключиться к отладке программы,
находящейся в каком-нибудь другом месте, из существующего буфера
GDB в Emacs.
</BLOCKQUOTE>

<P>
По умолчанию, <KBD>M-x gdb</KBD> вызывает программу с именем <TT>`gdb'</TT>.  Если вам
нужно вызвать GDB под другим именем (например, если вы храните
несколько конфигураций под различными именами), вы можете установить переменную
Emacs <CODE>gdb-command-name</CODE>; например, установка



<PRE>
(setq gdb-command-name "mygdb")
</PRE>

<P>
(которой предшествует <KBD>M-:</KBD> или <KBD>ESC :</KBD>, или если она введена в буфер
<CODE>*scratch*</CODE> или в вашем файле <TT>`.emacs'</TT>), заставит Emacs вызвать
программу "<CODE>mygdb</CODE>".


<P>
В буфере ввода-вывода GDB, вы можете использовать следующие
специальные команды Emacs в дополнение к стандартным командам режима
оболочки:


<DL COMPACT>

<DT><KBD>C-h m</KBD>
<DD>
Описывает возможности режима GDB Emacs.

<DT><KBD>M-s</KBD>
<DD>
Выполнить до другой строки исходного текста, подобно команде GDB
<CODE>step</CODE>; также обновляет окно отображения для показа текущего файла и
положения в нем.

<DT><KBD>M-n</KBD>
<DD>
Выполнить до следующей строки исходного текста в этой функции,
пропуская все вызовы функций, подобно команде GDB <CODE>next</CODE>.
Затем обновить окно отображения, чтобы показать текущий файл и положение
в нем.

<DT><KBD>M-i</KBD>
<DD>
Выполнить одну инструкцию, подобно команде GDB <CODE>stepi</CODE>;
обновляет окно отображения.

<DT><KBD>M-x gdb-nexti</KBD>
<DD>
Выполнить до следующей инструкции, используя команду GDB
<CODE>nexti</CODE>; обновляет окно отображения.

<DT><KBD>C-c C-f</KBD>
<DD>
Выполнить до выхода из выбранного кадра стека, подобно команде
GDB <CODE>finish</CODE>.

<DT><KBD>M-c</KBD>
<DD>
Продолжить выполнение вашей программы, подобно команде GDB
<CODE>continue</CODE>.

<EM>Предупреждение:</EM> В Emacs версии 19, эта команда вызывается
посредством <KBD>C-c C-p</KBD>.

<DT><KBD>M-u</KBD>
<DD>
Подняться вверх по стеку на число кадров, заданное числовым параметром,
подобно команде GDB <CODE>up</CODE>
(see section `Числовые аргументы' in <CITE>Руководство по GNU Emacs</CITE>).

<EM>Предупреждение:</EM> В Emacs версии 19, эта команда вызывается
посредством <KBD>C-c C-u</KBD>.

<DT><KBD>M-d</KBD>
<DD>
Спуститься вниз по стеку на число кадров, заданное числовым параметром,
аналогично команде GDB <CODE>down</CODE>.

<EM>Предупреждение:</EM> В Emacs версии 19, эта команда вызывается
посредством <KBD>C-c C-d</KBD>.

<DT><KBD>C-x &#38;</KBD>
<DD>
Прочитать число в позиции курсора и вставить его в конец буфера
ввода-вывода GDB.  Например, если вы хотите дисассемблировать код
по адресу, отображенному ранее, наберите <KBD>disassemble</KBD>; затем
переместите курсор на изображение адреса и задайте аргумент для
<CODE>disassemble</CODE>, набрав <KBD>C-x &#38;</KBD>.

Вы можете и дальше настраивать это, определяя элементы списка
<CODE>gdb-print-command</CODE>; если он определен, вы можете форматировать или
как-либо иначе обрабатывать числа, задаваемые <KBD>C-x &#38;</KBD>, перед их вставкой
в буфер.  Числовой аргумент к <KBD>C-x &#38;</KBD> показывает, что вам нужно
специальное форматирование, а также действует как индекс для выбора
элемента из списка.  Если элемент списка является строкой, то вставляемое
число форматируется с использованием функции Emacs <CODE>format</CODE>; в
противном случае, число передается как параметр соответствующему
элементу списка.
</DL>

<P>
В любом исходном файле, команда Emacs <KBD>C-x SPC</KBD> (<CODE>gdb-break</CODE>)
велит GDB установить точку останова на строке исходного текста,
в которой находится точка.


<P>
Если вы случайно удалите буфер отображения исходного текста, его можно легко
вернуть обратно, введя команду <CODE>f</CODE> в буфере GDB, чтобы запросить
отображение кадра; когда выполнение происходит под управлением Emacs,
это при необходимости создает исходный буфер заново, чтобы показать вам
текущий кадр.


<P>
Исходные файлы, отображаемые в Emacs, находятся в обычных буферах
Emacs, которые получают доступ к исходным файлам обычным способом.  При
желании вы можете редактировать файлы в этих буферах; но помните,
что GDB взаимодействует с Emacs в терминах номеров строк.
Если вы добавите или удалите строки из текста, известные GDB
номера строк больше не будут соответствовать коду.


<P><HR><P>
Go to the <A HREF="gdb_1.html">first</A>, <A HREF="gdb_17.html">previous</A>, <A HREF="gdb_19.html">next</A>, <A HREF="gdb_26.html">last</A> section, <A HREF="gdb_toc.html">table of contents</A>.
</BODY>
</HTML>
