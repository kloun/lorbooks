<HTML>
<HEAD>
<!-- Created by texi2html 1.56k from gdb.texinfo on 1 November 2000 -->

<TITLE>Отладка с помощью GDB - Использование истории в интерактивном режиме</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="gdb_1.html">first</A>, <A HREF="gdb_22.html">previous</A>, <A HREF="gdb_24.html">next</A>, <A HREF="gdb_26.html">last</A> section, <A HREF="gdb_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC240" HREF="gdb_toc.html#TOC240">Использование истории в интерактивном режиме</A></H1>

<P>
Эта глава описывает, как использовать библиотеку GNU History
интерактивно, c точки зрения пользователя.  Она должна рассматриваться
как руководство пользователя.




<H2><A NAME="SEC241" HREF="gdb_toc.html#TOC241">Раскрывание истории</A></H2>
<P>
<A NAME="IDX1093"></A>


<P>
Библиотека History обеспечивает средства раскрывания истории, подобные
предоставляемым <CODE>csh</CODE>.  Этот раздел описывает
синтаксис, использующийся для управления информацией истории.


<P>
Раскрывание истории вводит слова из списка истории во входной поток,
облегчая повторение команд, вставку аргументов предыдущей команды в
текущую строку ввода, или быстрое устранение ошибок в предыдущей
команде. 


<P>
Раскрывание истории происходит в два этапа.  Первый заключается в
определении, какая из строк списка истории должна использоваться
в процессе замены.  На втором этапе выбираются части этой строки для включения
в текущую.  Строка, выбранная из истории, называется <EM>событием</EM>, а
использованные части называются <EM>словами</EM>.  Существуют различные
<EM>модификаторы</EM> для манипулирования выбранными словами.  Строка
разбивается на слова так же, как это делает Bash, так что несколько
слов, заключенных в кавычки, рассматриваются как одно слово.
Раскрывания истории вводятся появлением знака раскрывания истории, по
умолчанию <SAMP>`!'</SAMP>.




<H3><A NAME="SEC242" HREF="gdb_toc.html#TOC242">Указатели событий</A></H3>
<P>
<A NAME="IDX1094"></A>


<P>
Указатель событий является ссылкой на запись командной строки в
списке истории.
<A NAME="IDX1095"></A>


<DL COMPACT>

<DT><CODE>!</CODE>
<DD>
Начать подстановку истории, если только за <CODE>!</CODE> не следует пробел,
знак табуляции, знак конца строки, <SAMP>`='</SAMP> или <SAMP>`('</SAMP>.

<DT><CODE>!<VAR>n</VAR></CODE>
<DD>
Сослаться на командную строку с номером <VAR>n</VAR>.

<DT><CODE>!-<VAR>n</VAR></CODE>
<DD>
Сослаться на командную строку, отстоящую на <VAR>n</VAR> строк назад.

<DT><CODE>!!</CODE>
<DD>
Сослаться на предыдущую команду.  Это синоним для <SAMP>`!-1'</SAMP>.

<DT><CODE>!<VAR>строка</VAR></CODE>
<DD>
Сослаться на самую последнюю команду, начинающуюся со <VAR>строки</VAR>.

<DT><CODE>!?<VAR>строка</VAR>[?]</CODE>
<DD>
Сослаться на самую последнюю команду, содержащую <VAR>строку</VAR>.  <SAMP>`?'</SAMP>
в конце может быть опущен, если знак новой строки следует немедленно за
<VAR>строкой</VAR>.

<DT><CODE>^<VAR>строка1</VAR>^<VAR>строка2</VAR>^</CODE>
<DD>
Быстрая подстановка.  Повторяет последнюю команду, заменяя <VAR>строку1</VAR>
на <VAR>строку2</VAR>.  Эквивалентно <CODE>!!:s/<VAR>строка1</VAR>/<VAR>строка2</VAR>/</CODE>.

<DT><CODE>!#</CODE>
<DD>
Вся командная строка, введенная до этого момента.

</DL>



<H3><A NAME="SEC243" HREF="gdb_toc.html#TOC243">Указатели слов</A></H3>

<P>
Указатели слов используются для выбора желаемых слов из события.
Спецификация события отделяется от указателя слова двоеточием.
Его можно опустить, если указатель слова начинается с <SAMP>`^'</SAMP>,
<SAMP>`$'</SAMP>, <SAMP>`*'</SAMP>, <SAMP>`-'</SAMP> или <SAMP>`%'</SAMP>.  Слова нумеруются от начала
строки, причем первому слову присваивается номер 0 (ноль).  Слова
вставляются в текущую строку, разделенные одиночными пробелами.


<P>
Например, 


<DL COMPACT>

<DT><CODE>!!</CODE>
<DD>
обозначает предыдущую команду.  Когда вы это вводите, предыдущая команда
повторяется один к одному.

<DT><CODE>!!:$</CODE>
<DD>
обозначает последний аргумент предыдущей команды.  Это может быть
сокращено как <CODE>!$</CODE>.

<DT><CODE>!fi:2</CODE>
<DD>
обозначает второй аргумент самой последней команды, начинавшейся с букв
<CODE>fi</CODE>.
</DL>

<P>
Вот указатели слов:


<DL COMPACT>

<DT><CODE>0 (ноль)</CODE>
<DD>
Нулевое слово.  Для многих приложений, это командное слово.

<DT><CODE><VAR>n</VAR></CODE>
<DD>
<VAR>n</VAR>-ное слово.

<DT><CODE>^</CODE>
<DD>
Первый аргумент, то есть слово 1.

<DT><CODE>$</CODE>
<DD>
Последний аргумент.

<DT><CODE>%</CODE>
<DD>
Слово, соответствующее самому последнему поиску <SAMP>`?<VAR>строка</VAR>?'</SAMP>.

<DT><CODE><VAR>x</VAR>-<VAR>y</VAR></CODE>
<DD>
Диапазон слов; <SAMP>`0-<VAR>y</VAR>'</SAMP> сокращается как <SAMP>`-<VAR>y</VAR>'</SAMP>.

<DT><CODE>*</CODE>
<DD>
Все слова, за исключением нулевого.  Это синоним для <SAMP>`1-$'</SAMP>.  Даже
если в событии имеется только одно слово, использование <SAMP>`*'</SAMP> не
является ошибкой; в этом случае возвращается пустая строка.

<DT><CODE><VAR>x</VAR>*</CODE>
<DD>
Сокращение для <SAMP>`<VAR>x</VAR>-$'</SAMP>

<DT><CODE><VAR>x</VAR>-</CODE>
<DD>
Сокращает <SAMP>`<VAR>x</VAR>-$'</SAMP> как <SAMP>`<VAR>x</VAR>*'</SAMP>, но опускает последнее
слово.

</DL>

<P>
Если указатель слова задается без указания события, в качестве события
используется предыдущая команда.




<H3><A NAME="SEC244" HREF="gdb_toc.html#TOC244">Модификаторы</A></H3>

<P>
После необязательного указателя слова, вы можете добавить
последовательность из одного или более следующих модификаторов,
перед каждым из которых ставится двоеточие.


<DL COMPACT>

<DT><CODE>h</CODE>
<DD>
Удалить заключительную компоненту имени пути, оставляя только начальную.

<DT><CODE>r</CODE>
<DD>
Удалить заключительный суффикс, имеющий форму <SAMP>`.<VAR>суффикс</VAR>'</SAMP>,
оставляя базовое имя.

<DT><CODE>e</CODE>
<DD>
Удалить все, кроме заключительного суффикса.

<DT><CODE>p</CODE>
<DD>
Напечатать новую команду, но не выполнять ее.

<DT><CODE>s/<VAR>старое</VAR>/<VAR>новое</VAR>/</CODE>
<DD>
Заменить первое появление <VAR>старое</VAR> на <VAR>новое</VAR> в строке
события.  На месте <SAMP>`/'</SAMP> может использоваться любой разделитель.
Разделитель может быть включен в <VAR>старое</VAR> или <VAR>новое</VAR> с помощью
обратной косой черты.  Если в <VAR>новое</VAR> появляется символ <SAMP>`&#38;'</SAMP>, он
заменяется на <VAR>старое</VAR>.  Одиночная обратная косая черта
экранирует <SAMP>`&#38;'</SAMP>.  Заключительный разделитель необязателен, если он
является последним символов во входной строке.

<DT><CODE>&#38;</CODE>
<DD>
Повторить предыдущую подстановку.

<DT><CODE>g</CODE>
<DD>
Велит применить изменения ко всей строке события.  Используется вместе с
<SAMP>`s'</SAMP>, как в <CODE>gs/<VAR>старое</VAR>/<VAR>новое</VAR>/</CODE>, или с <SAMP>`&#38;'</SAMP>.

</DL>

<P><HR><P>
Go to the <A HREF="gdb_1.html">first</A>, <A HREF="gdb_22.html">previous</A>, <A HREF="gdb_24.html">next</A>, <A HREF="gdb_26.html">last</A> section, <A HREF="gdb_toc.html">table of contents</A>.
</BODY>
</HTML>
