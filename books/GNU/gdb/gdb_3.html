<HTML>
<HEAD>
<!-- Created by texi2html 1.56k from gdb.texinfo on 1 November 2000 -->

<TITLE>Отладка с помощью GDB - Вход и выход из GDB</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="gdb_1.html">first</A>, <A HREF="gdb_2.html">previous</A>, <A HREF="gdb_4.html">next</A>, <A HREF="gdb_26.html">last</A> section, <A HREF="gdb_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC5" HREF="gdb_toc.html#TOC5">Вход и выход из GDB</A></H1>

<P>
Эта глава посвящена тому, как запустить GDB и как из него выйти.
Основные принципы:

<UL>
<LI>

введите <SAMP>`gdb'</SAMP> для вызова GDB.
<LI>

введите <CODE>quit</CODE> или <KBD>C-d</KBD> для выхода из него.
</UL>



<H2><A NAME="SEC6" HREF="gdb_toc.html#TOC6">Вызов GDB</A></H2>

<P>
Вызывайте GDB путем запуска программы <CODE>gdb</CODE>.
Начав работу, GDB считывает команды с терминала до тех пор,
пока вы не скажете ему выйти.


<P>
Вы также можете запустить <CODE>gdb</CODE> с различными аргументами и
ключами, чтобы в самом начале лучше настроить среду отлаживания.


<P>
Ключи командной строки, описанные здесь, предназначены для охвата
различных ситуаций; в дейтсвительности, в некоторых средах часть этих
ключей может быть недоступна.


<P>
Чаще всего GDB вызывается с одним аргументом, который определяет
исполняемую программу:



<PRE>
gdb <VAR>программа</VAR>
</PRE>

<P>
Вы также можете указать при старте как исполняемую программу, так и файл
дампа памяти:



<PRE>
gdb <VAR>программа</VAR> <VAR>дамп</VAR>
</PRE>

<P>
Если вы хотите отладить выполняющийся в данный момент процесс, то
вместо этого, вы можете указать вторым аргументом идентификатор этого
процесса:



<PRE>
gdb <VAR>программа</VAR> 1234
</PRE>

<P>
присоединит GDB к процессу <CODE>1234</CODE> (если, конечно, у вас
нет файла с именем <TT>`1234'</TT>, GDB сначала проверяет
наличие файла дампа памяти).


<P>
Преимущества, которые можно получить при использовании второго аргумента
командной строки, требуют наличия достаточно совершенной операционной системы;
если вы используете GDB как удаленный отладчик, присоединенный к
компьютеру без операционной системы, там вообще может не быть понятия
"процесса", и часто нет никакого способа получить дамп.  GDB
предупредит вас, если ему не удается присоединиться к процессу или
считать файл дампа памяти.


<P>
Вы можете запустить <CODE>gdb</CODE> без вывода начального сообщения,
описывающего отсутствие гарантии на него, указав <CODE>-silent</CODE>:



<PRE>
gdb -silent
</PRE>

<P>
Кроме того, вы можете контролировать процесс запуска GDB с
помощью ключей командной строки.  GDB может сам напомнить вам о
доступных ключах.


<P>
Введите



<PRE>
gdb -help
</PRE>

<P>
чтобы вывести на экран все доступные опции с кратким описанием их использования
(сокращенный эквивалент---<SAMP>`gdb -h'</SAMP>).


<P>
Все заданные вами ключи и параметры командной строки обрабатываются
последовательно.  Порядок становится важным при использовании ключа <SAMP>`-x'</SAMP>.




<H3><A NAME="SEC7" HREF="gdb_toc.html#TOC7">Выбор файлов</A></H3>

<P>
При запуске, GDB считывает параметры, отличные от ключей, как
указатели на исполняемую программу и файл дампа (или
идентификатор процесса), точно так же, как если бы эти параметры
задавались ключами <SAMP>`-se'</SAMP> и <SAMP>`-c'</SAMP> соответственно.  (GDB
считает первый параметр, не имеющий соответствующего флага ключа,
эквивалентом ключа <SAMP>`-se'</SAMP>, за которым следует этот параметр; а
второй параметр, не имеющий соответствующего флага ключа, если он есть,
эквивалентом ключа <SAMP>`-c'</SAMP>, за которым следует этот параметр.)


<P>
Если GDB был сконфигурирован без включения поддержки файлов дампа,
что имеет место для большинства встроенных целей, то он выразит недовольство
вторым аргументом и проигнорирует его.


<P>
Многие ключи имеют как длинную, так и краткую формы;
в следующем списке приводятся обе.  GDB также распознает
сокращения длинных форм, не являющиеся двусмысленными.  (Вы можете,
по желанию, обозначать ключи с помощью <SAMP>`--'</SAMP>, а не <SAMP>`-'</SAMP>, хотя
мы показываем наиболее употребляемый формат.)


<DL COMPACT>

<DT><CODE>-symbols <VAR>файл</VAR></CODE>
<DD>
<DT><CODE>-s <VAR>файл</VAR></CODE>
<DD>
<A NAME="IDX5"></A>
<A NAME="IDX6"></A>
Читать таблицу символов из файла <VAR>файл</VAR>.

<DT><CODE>-exec <VAR>файл</VAR></CODE>
<DD>
<DT><CODE>-e <VAR>файл</VAR></CODE>
<DD>
<A NAME="IDX7"></A>
<A NAME="IDX8"></A>
Использовать <VAR>файл</VAR> как исполняемый для выполнения и исследования
данных вместе с дампом памяти, когда это необходимо.

<DT><CODE>-se <VAR>файл</VAR></CODE>
<DD>
<A NAME="IDX9"></A>
Читать таблицу символов из файла <VAR>файл</VAR> и использовать его как
исполняемый файл.

<DT><CODE>-core <VAR>файл</VAR></CODE>
<DD>
<DT><CODE>-c <VAR>файл</VAR></CODE>
<DD>
<A NAME="IDX10"></A>
<A NAME="IDX11"></A>
Использовать <VAR>файл</VAR> как дамп памяти для исследования.

<DT><CODE>-c <VAR>номер</VAR></CODE>
<DD>
Присоединиться к процессу с идентификатором <VAR>номер</VAR>, также, как
по команде <CODE>attach</CODE> (при условии, что нет файла в формате дампа
памяти с именем <VAR>номер</VAR>; в этом
случае <SAMP>`-c'</SAMP> определяет этот файл как дамп для считывания).

<DT><CODE>-command <VAR>файл</VAR></CODE>
<DD>
<DT><CODE>-x <VAR>файл</VAR></CODE>
<DD>
<A NAME="IDX12"></A>
<A NAME="IDX13"></A>
Выполнить команды GDB из файла <VAR>файл</VAR>.  See section <A HREF="gdb_17.html#SEC175">Командные файлы</A>.

<DT><CODE>-directory <VAR>каталог</VAR></CODE>
<DD>
<DT><CODE>-d <VAR>каталог</VAR></CODE>
<DD>
<A NAME="IDX14"></A>
<A NAME="IDX15"></A>
Добавить <VAR>каталог</VAR> к путям поиска файлов с исходными текстами.

<DT><CODE>-m</CODE>
<DD>
<DT><CODE>-mapped</CODE>
<DD>
<A NAME="IDX16"></A>
<A NAME="IDX17"></A>
<EM>Предупреждение: этот ключ зависит от возможностей операционной системы,
которые реализованы не везде.</EM><BR>
Если отображаемые в память файлы поддерживаются в вашей системе через
системный вызов <CODE>mmap</CODE>, вы можете использовать этот ключ,
чтобы GDB записывал символы из вашей программы в файл в текущем
каталоге, допускающий повторное использование.  Если программа,
которую вы отлаживаете, называется <TT>`/tmp/fred'</TT>, то отображаемым
символьным файлом будет <TT>`/tmp/fred.syms'</TT>.  Последующие отладочные
сеансы GDB замечают наличие этого файла и могут быстро
отобразить в память символьную информацию из него, а не читать
таблицу символов из выполняемого файла.

Файл <TT>`.syms'</TT> специфичен для рабочей машины, на которой запускается
GDB.  Он содержит точный образ внутренней символьной
таблицы GDB.  Он не может быть разделен между несколькими
рабочими платформами.

<DT><CODE>-r</CODE>
<DD>
<DT><CODE>-readnow</CODE>
<DD>
<A NAME="IDX18"></A>
<A NAME="IDX19"></A>
Читать символьную таблицу каждого файла, содержащего таблицу символов,
сразу целиком, а не стандартным образом, при котором она считывается
постепенно по мере необходимости.  Эта команда замедляет запуск, но дальнейшие
операции производятся быстрее.

</DL>

<P>
Ключи <CODE>-mapped</CODE> и <CODE>-readnow</CODE> обычно используются вместе, чтобы
построить файл <TT>`.syms'</TT>, который содержит полную информацию о
символах.  (See section <A HREF="gdb_13.html#SEC104">Команды для задания файлов</A>, для информации о
файлах <TT>`.syms'</TT>.)  Вот простой вызов GDB, не делающий
ничего, кроме построения файла <TT>`.syms'</TT> для использования в будущем:



<PRE>
gdb -batch -nx -mapped -readnow имя-программы
</PRE>



<H3><A NAME="SEC8" HREF="gdb_toc.html#TOC8">Выбор режимов</A></H3>

<P>
Вы можете вызывать GDB в различных альтернативных
режимах---например, в пакетном или в "тихом" режиме.


<DL COMPACT>

<DT><CODE>-nx</CODE>
<DD>
<DT><CODE>-n</CODE>
<DD>
<A NAME="IDX20"></A>
<A NAME="IDX21"></A>
Не выполнять команды ни из каких файлов инициализации (обычно
назваемых <TT>`.gdbinit'</TT>, или <TT>`gdb.ini'</TT> на PC).  В нормальном
режиме, GDB выполняет команды из этих файлов после обработки всех
командных ключей и параметров.  See section <A HREF="gdb_17.html#SEC175">Командные файлы</A>.

<DT><CODE>-quiet</CODE>
<DD>
<DT><CODE>-silent</CODE>
<DD>
<DT><CODE>-q</CODE>
<DD>
<A NAME="IDX22"></A>
<A NAME="IDX23"></A>
<A NAME="IDX24"></A>
"Тихий".  Не печатать вводное сообщение и информацию об авторских
правах.  Эти сообщения также подавляются в пакетном режиме.

<DT><CODE>-batch</CODE>
<DD>
<A NAME="IDX25"></A>
Выполняться в пакетном режиме.  Выйти со значением <CODE>0</CODE> после обработки
всех командных файлов, заданных ключем <SAMP>`-x'</SAMP> (и всех команд
из инициализационных файлов, если это не запрещено ключем <SAMP>`-n'</SAMP>).
Выйти с ненулевым значением, если во время выполнения
команд GDB из командных файлов произойдет ошибка.

Пакетный режим может быть полезен при вызове GDB как
фильтра; например, чтобы загрузить программу и запустить ее на
другом компьютере.  Для того, чтобы сделать это более удобным, сообщение


<PRE>
Program exited normally.
</PRE>

(которое обычно выдается при завершении программы, выполняемой
под управлением GDB), при выполнении в пакетном режиме не выдается.

<DT><CODE>-nowindows</CODE>
<DD>
<DT><CODE>-nw</CODE>
<DD>
<A NAME="IDX26"></A>
<A NAME="IDX27"></A>
"Без окон".  Если GDB имеет встроенный графический интерфейс
пользователя (GUI), то этот ключ велит GDB использовать только
интерфейс командной строки.  Если GUI недоступен, этот ключ не
оказывает никакого действия.

<DT><CODE>-windows</CODE>
<DD>
<DT><CODE>-w</CODE>
<DD>
<A NAME="IDX28"></A>
<A NAME="IDX29"></A>
Если GDB включает GUI, этот ключ требует использовать его, если
только возможно.

<DT><CODE>-cd <VAR>каталог</VAR></CODE>
<DD>
<A NAME="IDX30"></A>
Запустить GDB, используя в качестве рабочего каталога
<VAR>каталог</VAR>, вместо текущего.

<DT><CODE>-fullname</CODE>
<DD>
<DT><CODE>-f</CODE>
<DD>
<A NAME="IDX31"></A>
<A NAME="IDX32"></A>
GNU Emacs устанавливает этот ключ, когда вызывает GDB как
подпроцесс.  Это велит GDB выводить полное имя файла и
номер строки в стандартном, распознаваемом стиле всякий раз, когда
отображается кадр стека (что включает каждую остановку вашей программы).
Этот распознаваемый формат выглядит как два знака <SAMP>`\032'</SAMP>,
за которыми следует имя файла, номер строки и символьная позиция,
разделенные двоеточиями, и знак новой строки.
Программа интерфейса Emacs-GDB использует два
знака <SAMP>`\032'</SAMP> как сигнал для отображения исходного текста
для кадра.

<DT><CODE>-epoch</CODE>
<DD>
<A NAME="IDX33"></A>
Интерфейс Emacs-GDB Epoch устанавливает этот ключ, когда
вызывает GDB как подпроцесс.  Это велит GDB изменить
свои подпрограммы печати так, чтобы позволить Epoch отображать значения
выражений в отдельном окне.

<DT><CODE>-annotate <VAR>уровень</VAR></CODE>
<DD>
<A NAME="IDX34"></A>
Этот ключ устанавливает <EM>уровень примечаний</EM> внутри
GDB.  Его эффект аналогичен использованию <SAMP>`set annotate
<VAR>уровень</VAR>'</SAMP> (see section <A HREF="gdb_19.html#SEC178">Примечания GDB</A>).  Уровень примечаний контролирует,
какое количество информации GDB выводит вместе с приглашением,
значениями выражений, строками исходного текста и другими типами
вывода.  Уровень 0 является обычным, уровень 1
используется, когда GDB выполняется как подпроцесс GNU
Emacs, уровень 2 выводит максимальное количество примечаний и подходит
для программ, которые управляют GDB.

<DT><CODE>-async</CODE>
<DD>
<A NAME="IDX35"></A>
Использовать асинхронный цикл событий для интерфейса командной строки.
GDB обрабатывает все события, такие как ввод пользователя с
клавиатуры, через специальный цикл событий.  Это позволяет GDB
принимать и обрабатывать команды пользователя параллельно с выполнением
отлаживаемого процесса<A NAME="DOCF4" HREF="gdb_foot.html#FOOT4">(4)</A>, так что вы не должны ждать возвращения
управления GDB, прежде чем ввести следующую команду.
(<EM>Замечание:</EM> в версии 5.0, асинхронное выполнение на целевой
системе еще не поддерживается, так что режим <SAMP>`-async'</SAMP> еще
реализован не полностью.)

Когда стандартный ввод соединен с терминальным устройством, GDB
по умолчанию использует асинхронный цикл событий, если это не отключено
ключем <SAMP>`-noasync'</SAMP>.

<DT><CODE>-noasync</CODE>
<DD>
<A NAME="IDX36"></A>
Отключить асинхронный цикл событий для интерфейса командной строки.

<DT><CODE>-baud <VAR>бод-в-сек</VAR></CODE>
<DD>
<DT><CODE>-b <VAR>бод-в-сек</VAR></CODE>
<DD>
<A NAME="IDX37"></A>
<A NAME="IDX38"></A>
Устанавливает скорость линии (скорость в бодах, или в битах в
секунду) любого последовательного интерфейса, используемого GDB
для удаленной отладки.

<DT><CODE>-tty <VAR>устройство</VAR></CODE>
<DD>
<DT><CODE>-t <VAR>устройство</VAR></CODE>
<DD>
<A NAME="IDX39"></A>
<A NAME="IDX40"></A>
Запуститься, используя <VAR>устройство</VAR> для стандартного ввода и вывода вашей
программы.

<DT><CODE>-interpreter <VAR>интерп</VAR></CODE>
<DD>
<A NAME="IDX41"></A>
Использовать интерпретатор <VAR>интерп</VAR> к качестве интерфейса с
управляющей программой или устройством.  Подразумевается, что этот ключ
должет устанавливаться программами, которые взаимодействуют с
GDB, используя его как выходной буфер.
Например, <SAMP>`--interpreter=mi'</SAMP> велит GDB использовать
<EM>интерфейс gdbmi</EM> (see section <A HREF="gdb_20.html#SEC191">Интерфейс GDB/MI</A>).

<DT><CODE>-write</CODE>
<DD>
<A NAME="IDX42"></A>
Открыть выполняемый файл и файл дампа памяти как для чтения, так и для
записи.  Это эквивалентно команде GDB <SAMP>`set write on'</SAMP>
(see section <A HREF="gdb_12.html#SEC102">Внесение изменений в программу</A>).

<DT><CODE>-statistics</CODE>
<DD>
<A NAME="IDX43"></A>
Этот ключ велит GDB печатать статистику о времени и
использовании памяти после завершения каждой команды и
возврата к приглашению.

<DT><CODE>-version</CODE>
<DD>
<A NAME="IDX44"></A>
Этот ключ велит GDB напечатать номер своей версии и объявление
об отсутствии гарантий, и затем завершиться.

</DL>



<H2><A NAME="SEC9" HREF="gdb_toc.html#TOC9">Выход из GDB</A></H2>
<P>
<A NAME="IDX45"></A>


<DL COMPACT>

<DT><CODE>quit [<VAR>выражение</VAR>]</CODE>
<DD>
<A NAME="IDX46"></A>
 <A NAME="IDX47"></A>
 
<DT><CODE>q</CODE>
<DD>
Чтобы выйти из GDB, используйте команду <CODE>quit</CODE>
(сокращенно <CODE>q</CODE>),
или введите знак конца файла (обычно <KBD>C-d</KBD>).
Если вы не укажете <VAR>выражение</VAR>, GDB
закончит работу нормально; в противном случае, он
использует результат <VAR>выражения</VAR> как код ошибки.
</DL>

<P>
<A NAME="IDX48"></A>
Прерывание (часто <KBD>C-c</KBD>) не приводит к выходу из GDB,
а завершает любую выполняющуюся команду и возвращает вас
на командный уровень.  Вы можете безопасно пользоваться
прерыванием в любое время, потому что GDB не позволяет ему вступить в
силу до того, как это станет безопасным.


<P>
Если вы использовали GDB для управления присоединенным процессом
или устройством, вы можете освободить его командой <CODE>detach</CODE>
(see section <A HREF="gdb_5.html#SEC22">Отладка запущенного ранее процесса</A>).




<H2><A NAME="SEC10" HREF="gdb_toc.html#TOC10">Команды оболочки</A></H2>

<P>
Если вам случайно потребовалось выполнить команды оболочки в течение сеанса
отладки, нет смысла приостанавливать или покидать
GDB; вам достаточно воспользоваться командой <CODE>shell</CODE>.


<DL COMPACT>

<DT><CODE>shell <VAR>командная строка</VAR></CODE>
<DD>
<A NAME="IDX49"></A>
 <A NAME="IDX50"></A>
 
Вызвать стандартную оболочку для выполнения <VAR>командной строки</VAR>.
Переменная окружения <CODE>SHELL</CODE>, если она существует, определяет,
какую оболочку запустить.  В противном случае, GDB
использует оболочку по умолчанию (<TT>`/bin/sh'</TT> в системах Unix,
<TT>`COMMAND.COM'</TT> в MS-DOS, и так далее).
</DL>

<P>
В средах разработки часто бывает необходимо воспользоваться
утилитой <CODE>make</CODE>.  Для этой цели вам не обязательно пользоваться
командой <CODE>shell</CODE> в GDB:


<DL COMPACT>

<DT><CODE>make <VAR>make-арг</VAR></CODE>
<DD>
<A NAME="IDX51"></A>
 <A NAME="IDX52"></A>
 
Выполнить программу <CODE>make</CODE> с указанными аргументами.  Это
эквивалентно <SAMP>`shell make <VAR>make-арг</VAR>'</SAMP>.
</DL>

<P><HR><P>
Go to the <A HREF="gdb_1.html">first</A>, <A HREF="gdb_2.html">previous</A>, <A HREF="gdb_4.html">next</A>, <A HREF="gdb_26.html">last</A> section, <A HREF="gdb_toc.html">table of contents</A>.
</BODY>
</HTML>
