<HTML>
<HEAD>
<!-- Created by texi2html 1.57 from shellutils.texi on January, 31  2002 -->

<TITLE>Утилиты оболочки GNU - 10. Системный контекст</TITLE>
</HEAD>
<BODY >
 [<A HREF="shellutils_toc.html">Содержание</A>] &#160; [<A HREF="shellutils_9.html">Назад</A>] &#160; [<A>Пред</A>] &#160; [<A>Вверх</A>] &#160; [<A>След</A>] &#160; [<A HREF="shellutils_11.html">Вперед</A>] &#160;<BR><HR><BR>


<H1><A NAME="SEC56">10. Системный контекст</A></H1>

<P>
<A NAME="IDX446"></A>


<P>
   Эта глава описывают команды, которые печатают или изменяют системные
параметры.




<H2><A NAME="SEC57">10.1 `date': Вывод или установка системной даты и времени</A></H2>

<P>
<A NAME="IDX447"></A>
<A NAME="IDX448"></A>


<P>
   `date' без параметров печатает текущее время и дату, с 
формате директивы `%c' (описанной ниже). Синтаксис:



<PRE>
     date [ПАРАМЕТР]... [+ФОРМАТ]
     date [-u|--utc|--universal] [ MMDDHHMM[[CC]YY][.SS] ]
</PRE>

<P>
   Если дан аргумент, начинающийся с `+', `date' печатает текущее
время и дату (или время и дату указанные параметром `--date', см. ниже)
в формате, определяемом этим аргументом, который такой же как в функции
`strftime'. Исключая директивы, начинающиеся с `%', символы в строке
формата печатаются без изменений. Диретивы описаны ниже.




<H3><A NAME="SEC58">10.1.1 Директивы времени</A></H3>

<P>
<A NAME="IDX449"></A>


<P>
   Директивы `date', относящиеся ко времени.


<P>
<A NAME="IDX450"></A>
<A NAME="IDX451"></A>
<A NAME="IDX452"></A>
<A NAME="IDX453"></A>
<A NAME="IDX454"></A>
<A NAME="IDX455"></A>
<A NAME="IDX456"></A>
<A NAME="IDX457"></A>
<A NAME="IDX458"></A>
<A NAME="IDX459"></A>
<A NAME="IDX460"></A>
<A NAME="IDX461"></A>
<DL COMPACT>

<DT><SAMP>`%H'</SAMP>
<DD>
часы (00...23)

<DT><SAMP>`%I'</SAMP>
<DD>
часы (01...12)

<DT><SAMP>`%k'</SAMP>
<DD>
часы (0...23)

<DT><SAMP>`%l'</SAMP>
<DD>
часы (1...12)

<DT><SAMP>`%M'</SAMP>
<DD>
минуты (00...59)

<DT><SAMP>`%p'</SAMP>
<DD>
местный AM или PM

<DT><SAMP>`%r'</SAMP>
<DD>
время, 12-часовое (чч:мм:сс [AP]M)

<DT><SAMP>`%s'</SAMP>
<DD>
секунды с начала эпохи, т.е. 1 января 1970 00:00:00 UTC (расширение
GNU). Заметьте, что это значение -- число секунд между началом эпохи и
текущей датой, определенной системным вызовом localtime. Оно не меняется
параметром `--date'.

<DT><SAMP>`%S'</SAMP>
<DD>
секунды (00...61)

<DT><SAMP>`%T'</SAMP>
<DD>
время, 24-часовое (чч:мм:сс)

<DT><SAMP>`%X'</SAMP>
<DD>
местное представление времени (%Ч:%М:%С)

<DT><SAMP>`%z'</SAMP>
<DD>
числовой часовой пояс в стиле RFC-822 (т.е. -0600 или +0100), или 
ничего, если чясовой пояс неопределим. Это значение отражает текущий
часовой пояс. Оно не изменяется параметром `--date'.

<DT><SAMP>`%Z'</SAMP>
<DD>
     часовой пояс или ничего, если часовой пояс неопределим. Заметьте, 
что это значение отражает текущий часовой пояс. Оно не изменяется параметром 
`--date'.
</DL>



<H3><A NAME="SEC59">10.1.2 Директивы даты</A></H3>

<P>
<A NAME="IDX462"></A>


<P>
   Директивы `date', относящиеся ко дате.


<DL COMPACT>

<DT><SAMP>`%a'</SAMP>
<DD>
местное сокращение для дня недели (Sun...Sat)
<A NAME="IDX463"></A>

<DT><SAMP>`%A'</SAMP>
<DD>
местное полное название дня недели, переменная длина (Sunday...Saturday)
<A NAME="IDX464"></A>

<DT><SAMP>`%b'</SAMP>
<DD>
местное сокращение для месяца (Jan...Dec)
<A NAME="IDX465"></A>

<DT><SAMP>`%B'</SAMP>
<DD>
местое полное название месяца, переменная длина (January...December)
<A NAME="IDX466"></A>

<DT><SAMP>`%c'</SAMP>
<DD>
местная дата и время (Sat Nov 04 12:02:33 EST 1989)
<A NAME="IDX467"></A>

<DT><SAMP>`%d'</SAMP>
<DD>
день месяца (01...31)
<A NAME="IDX468"></A>

<DT><SAMP>`%D'</SAMP>
<DD>
дата (мм/дд/гг)
<A NAME="IDX469"></A>

<DT><SAMP>`%h'</SAMP>
<DD>
тоже самое, что и %b
<A NAME="IDX470"></A>

<DT><SAMP>`%j'</SAMP>
<DD>
день года (001...366)
<A NAME="IDX471"></A>

<DT><SAMP>`%m'</SAMP>
<DD>
месяц (01...12)
<A NAME="IDX472"></A>

<DT><SAMP>`%U'</SAMP>
<DD>
номер недели в году, считая воскресенье первым днем недели, (00...53).
Дни в году предшествующие первому воскресенью относятся к нулевой неделе.
<A NAME="IDX473"></A>

<DT><SAMP>`%V'</SAMP>
<DD>
номер недели в году, считая воскресенье первым днем недели, (00...53).
Если неделя содержащая 1 января имеет 4 или более дней в новом году,
то она считается первой; иначе это 53 неделя прошлого года, следующая 
неделя считается первой. (См. стандарт ISO 8601: 1988.)
<A NAME="IDX474"></A>

<DT><SAMP>`%w'</SAMP>
<DD>
день недели (0...6) с 0 соответветсвующим воскресенью
<A NAME="IDX475"></A>

<DT><SAMP>`%W'</SAMP>
<DD>
номер недели в году, считая понедельник первым днем недели, (00...53).
Дни в году предшествующие первому воскресенью относятся к нулевой неделе.
<A NAME="IDX476"></A>

<DT><SAMP>`%x'</SAMP>
<DD>
местное представление даты (мм/дд/гг)
<A NAME="IDX477"></A>

<DT><SAMP>`%y'</SAMP>
<DD>
последние две цифры года (00...99)
<A NAME="IDX478"></A>

<DT><SAMP>`%Y'</SAMP>
<DD>
год (1970....)
<A NAME="IDX479"></A>
</DL>



<H3><A NAME="SEC60">10.1.3 Символьные директивы</A></H3>

<P>
<A NAME="IDX480"></A>


<P>
   Директивы `date' выдающие сивольные строки.


<P>
<A NAME="IDX481"></A>
<A NAME="IDX482"></A>
<A NAME="IDX483"></A>
<DL COMPACT>

<DT><SAMP>`%%'</SAMP>
<DD>
символ %

<DT><SAMP>`%n'</SAMP>
<DD>
новая строка

<DT><SAMP>`%t'</SAMP>
<DD>
горизонтальная табуляция
</DL>



<H3><A NAME="SEC61">10.1.4 Набивка</A></H3>

<P>
<A NAME="IDX484"></A>


<P>
   По умолчанию `date' набивает числовые поля нулями, так, что, например,
номера месяцев всегда выводятся двуми цифрами. GNU `date' распознает
следующие числовые модификаторы между `%' и директивой.


<P>
<A NAME="IDX485"></A>
<A NAME="IDX486"></A>
<DL COMPACT>

`-'
(перенос, черточка) не набивать поле; полезна если вывод предназначается
для использования людьми.

`_'
(подчеркивание) набивать поле пробелами; полезна если Вам нужно фиксированное
число символов в выводе, но нули слишком мешаются.
</DL>

<P>
   Это расширения GNU.


<P>
   Вот пример иллюстрирующий различия:



<PRE>
     date +%d/%m -d "Feb 1"
     =&#62; 01/02
     date +%-d/%-m -d "Feb 1"
     =&#62; 1/2
     date +%_d/%_m -d "Feb 1"
     =&#62;  1/ 2
</PRE>



<H3><A NAME="SEC62">10.1.5 Установка времени</A></H3>

<P>
<A NAME="IDX487"></A>


<P>
   Если передан аргумент, не начинающийся с `+', `date' устанавливает
системные часы на дату и время, указанные этим аргументом (как описано 
ниже). Вы должны иметь соответсвующие права для установки системного 
времени. Параметры `--date' и `--set' не могут быть использованы с таким
аргументом. Параметр `--universal' может быть использован с таким аргументом
для обозначения того, что указанное время и дата относительны к Coordinated 
Universal Time, на не кмесному часовому поясу.


<P>
   Аргумент должен состоять только из цифр, имеющих следующее 
значение:


<DL COMPACT>

<DT><SAMP>`ММ'</SAMP>
<DD>
месяц
<A NAME="IDX488"></A>

<DT><SAMP>`ДД'</SAMP>
<DD>
день месяца
<A NAME="IDX489"></A>

<DT><SAMP>`ЧЧ'</SAMP>
<DD>
часы
<A NAME="IDX490"></A>

<DT><SAMP>`ММ'</SAMP>
<DD>
минуты

<DT><SAMP>`ВВ'</SAMP>
<DD>
первые две цифры года (необязательные)
<A NAME="IDX491"></A>

<DT><SAMP>`ГГ'</SAMP>
<DD>
последние две цифры года (необязательные)
<A NAME="IDX492"></A>

<DT><SAMP>`СС'</SAMP>
<DD>
секунды (необязательные)
<A NAME="IDX493"></A>
</DL>

<P>
   Параметр `--set' также устанавливает системные часы; см. следующий 
раздел.




<H3><A NAME="SEC63">10.1.6 Параметры `date'</A></H3>

<P>
<A NAME="IDX494"></A>


<P>
   Программа понимает следующие параметры. См. также раздел <A HREF="shellutils_2.html#SEC2">2. Общие параметры</A>.


<DL COMPACT>

<DT><SAMP>`-d СТРОКА-ДАТЫ'</SAMP>
<DD>
<DT><SAMP>`--date=СТРОКА-ДАТЫ'</SAMP>
<DD>
Вывести дату и время, указанные в СТРОКЕ-ДАТЫ, вместо текущей даты
и времени. СТРОКА-ДАТЫ может быть почти любого обычного формата.
Она может сожержать названия месяцев, часлвых поясов, `am' и `pm',
`yesterday', `ago', `next', и т.д. раздел <A HREF="shellutils_3.html#SEC3">3. Форматы ввода даты</A>.
<A NAME="IDX495"></A>
<A NAME="IDX496"></A>

<DT><SAMP>`-f ФАЙЛ-ДАТЫ'</SAMP>
<DD>
<DT><SAMP>`--file=ФАЙЛ-ДАТЫ'</SAMP>
<DD>
Анализировать каждую строку и ФАЙЛЕ-ДАТЫ, как с `-d', и вывести результирующее
время и дату. если ФАЙЛ-ДАТЫ это `-', использоюется стандартный ввод.
Это полезно, когда нужно обрабоать много дат, поскольку замедление системы
при многократном запуске `date' может быть существенным. 
<A NAME="IDX497"></A>
<A NAME="IDX498"></A>

<DT><SAMP>`-I[СПЕЦИФИКАЦИЯ-ВРЕМЕНИ]'</SAMP>
<DD>
<DT><SAMP>`--iso-8601[=СПЕЦИФИКАЦИЯ-ВРЕМЕНИ]'</SAMP>
<DD>
Вывести дату используя формат ISO 8601, `%Г-%м-%д'
<A NAME="IDX499"></A>
<A NAME="IDX500"></A>

Необязательный аргумент СПЕЦИФИКАЦИЯ-ВРЕМЕНИ указывает количесвто 
дополнительно включаемых термов. Может быть одним из:

<DL COMPACT>

<DT><SAMP>`auto'</SAMP>
<DD>
Стандартное поведение: вывести только дату.
<A NAME="IDX501"></A>

<DT><SAMP>`hours'</SAMP>
<DD>
Добавить час дня к дате.
<A NAME="IDX502"></A>

<DT><SAMP>`minutes'</SAMP>
<DD>
Добавить часы и минуты.
<A NAME="IDX503"></A>

<DT><SAMP>`seconds'</SAMP>
<DD>
Добавить часы, минуты и секунды.
<A NAME="IDX504"></A>
</DL>

<A NAME="IDX505"></A>
<A NAME="IDX506"></A>

Если выводятся любые термы времени, чавой пояс включается, используя
формат `%z'. Если `--utc' также указано, вместо `%z' используется `%Z'.

<DT><SAMP>`-R'</SAMP>
<DD>
<DT><SAMP>`--rfc-822'</SAMP>
<DD>
Вывести время и дату используя формат, определенный RFC-822, `%a,
%_d %b %Y %H:%M:%S %z'. Если `--utc' также указано, вместо `%z' используется 
`GMT'.
<A NAME="IDX507"></A>
<A NAME="IDX508"></A>

<DT><SAMP>`-r ФАЙЛ'</SAMP>
<DD>
<DT><SAMP>`--reference=ФАЙЛ'</SAMP>
<DD>
Вывести время и дату последней модификации ФАЙЛА, вместо текущего
времени и даты.
<A NAME="IDX509"></A>
<A NAME="IDX510"></A>

<DT><SAMP>`-s СТРОКА-ДАТЫ'</SAMP>
<DD>
<DT><SAMP>`--set=СТРОКА-ДАТЫ'</SAMP>
<DD>
Установить время и дату к СТРОКЕ-ДАТЫ, см `-d' выше.
<A NAME="IDX511"></A>
<A NAME="IDX512"></A>

<DT><SAMP>`-u'</SAMP>
<DD>
<DT><SAMP>`--utc'</SAMP>
<DD>
<DT><SAMP>`--universal'</SAMP>
<DD>
Вывести или установить время и дату в Universal Coordinated Time, 
вместо местного времени.
<A NAME="IDX513"></A>
<A NAME="IDX514"></A>
<A NAME="IDX515"></A>
</DL>



<H3><A NAME="SEC64">10.1.7 Примеры использования `date'</A></H3>

<P>
<A NAME="IDX516"></A>


<P>
   Вот несколько примеров. См. также описание параметра `-d' в предудущем разделе.



<UL>
<LI>Чтобы напечатать дату позавчерашнего дня:


<PRE>
date --date='2 days ago'
</PRE>

<LI>Чтобы напечатать дату дня через три месяца и день:


<PRE>
date --date='3 months 1 day'
</PRE>

<LI>Чтобы напечатаеть день года Рождества в текущем году:


<PRE>
date --date='25 Dec' +%j
</PRE>

<LI>Чтобы напечатать полное название текущего месяца и день месяца:


<PRE>
date '+%B %d'
</PRE>

Но это может быть не то, что Вы хотите, потому что для первых девяти дней
месяца `-d' расширяет нулями до двух цифр, например  `date -d 1may '+%B %d" 
напечатает `May 01'.

<LI>Чтобы напечатать дату без начального нуля для одноцифровых дней

месяца, Вы можете использовать (расширение GNU) модификатор `-' для
подавления набивки поля.


<PRE>
date -d=1may '+%B %-d'
</PRE>

<LI>Чтобы напечатать текущее время и дату в формате, требуемом многими

не-GNU версиями `date' при установке системных часов:


<PRE>
date +%m%d%H%M%Y.%S
</PRE>

<LI>Чтобы установить системные часы на две минуты вперед:


<PRE>
date --set='+2 minutes'
</PRE>

<LI>Чтобы напечатать даьу в формате, определенном RFC-822, используйте

`date --frc'. Я только что сделал это и увидел:


<PRE>
Вск, 15 Апр 2001 15:15:10 +0400
</PRE>

<LI>Чтобы преобразовать строку даты в число секунд с начала эпохи

(т.е. 1970-01-01 00:00:00 UTC), используйте параметр `--date'с форматом
`%s'. Это может быть полезно при сортировке и/или построении графиков
и/или сравнении данных по дате. Следующая команда выводит количество 
секунд с начала эпохи для времени на одну секунду позже, в часовом поясе,
отличающемся на пять часов (Кембридж, Массачусеттс), т.о. общее время
пять часов и одна секунда с начала эпохи. 


<PRE>
date --date='1970-01-01 00:00:01 UTC +5 hours' +%s
18001
</PRE>

Допустим Вы <I>не</I> указали часовой пояс в этом примере. Тогда `date'
будет использовать мысль Вашего компьютера о часовом поясе при интерпретации
строки. Вот, что Вы получите, если бы Вы были в Гринвиче, Англия:


<PRE>
# local time zone used
date --date='1970-01-01 00:00:01' +%s
1
</PRE>

<LI>Если Вы сортируете или строите графики датированных данных, Ваши

необработанные значения даты могут быть преобразованы в количество секунд 
с начала эпохи. Но тольно несколько человек посмотрев на дату `9446684800'
заметят: "О, это первая секунда 2000 года".


<PRE>
date --date='2000-01-01 UTC' +%s
946684800
</PRE>

Чтобы преобразовать такое громозкое число секунд обратно в более
читабельный вид, используйте команду как эта:


<PRE>
date -d '1970-01-01 946684800 sec' +"%Y-%m-%d %T %z"
2000-01-01 00:00:00 +0000
</PRE>

</UL>



<H2><A NAME="SEC65">10.2 `uname': Вывод инфомации о системе</A></H2>

<P>
<A NAME="IDX517"></A>
<A NAME="IDX518"></A>


<P>
   `uname' печатает информацию о машине и операционной системе, под которой
она работает. Если параметры не указаны, `uname' днйствует как если бы был
указан параметр `-s'. Синтаксис:



<PRE>
     uname [ПАРАМЕТР]...
</PRE>

<P>
   Если указаны несколько парметров или `-a', выбранная информация
печатается в следующем порядке:



<PRE>
   ИМЯ-СИСТЕМЫ ИМЯ-УЗЛА РЕЛИЗ ВЕРСИЯ-ОС МАШИНА
</PRE>

<P>
   ВЕРСИЯ-ОС, по крайней мере, может состоять из нескольких слов. Например:



<PRE>
     uname -a
     =&#62; Linux appolohost 2.2.15-4mdk #1 Wed May 10 15:31:30 CEST 2000 i586 unknown
</PRE>

<P>
   Программа понимает следующие параметры. См. также раздел <A HREF="shellutils_2.html#SEC2">2. Общие параметры</A>.


<DL COMPACT>

<DT><SAMP>`-a'</SAMP>
<DD>
<DT><SAMP>`--all'</SAMP>
<DD>
Печатает всю информацию, описанную ниже.
<A NAME="IDX519"></A>
<A NAME="IDX520"></A>
<A NAME="IDX521"></A>

<DT><SAMP>`-m'</SAMP>
<DD>
<DT><SAMP>`--machine'</SAMP>
<DD>
Печатает тип машины (аппаратного обеспечения)
<A NAME="IDX522"></A>
<A NAME="IDX523"></A>
<A NAME="IDX524"></A>

<DT><SAMP>`-n'</SAMP>
<DD>
<DT><SAMP>`--nodename'</SAMP>
<DD>
Печатает имя хоста в сети.
<A NAME="IDX525"></A>
<A NAME="IDX526"></A>
<A NAME="IDX527"></A>

<DT><SAMP>`-p'</SAMP>
<DD>
<DT><SAMP>`--processor'</SAMP>
<DD>
Печатает тип процессора машины.
<A NAME="IDX528"></A>
<A NAME="IDX529"></A>
<A NAME="IDX530"></A>

<DT><SAMP>`-r'</SAMP>
<DD>
<DT><SAMP>`--release'</SAMP>
<DD>
Печатает релиз операционной системы.
<A NAME="IDX531"></A>
<A NAME="IDX532"></A>
<A NAME="IDX533"></A>

<DT><SAMP>`-s'</SAMP>
<DD>
<DT><SAMP>`--sysname'</SAMP>
<DD>
Печатает имя операционной системы.
<A NAME="IDX534"></A>
<A NAME="IDX535"></A>
<A NAME="IDX536"></A>

<DT><SAMP>`-v'</SAMP>
<DD>
Печатает версию операционной системы.
<A NAME="IDX537"></A>
<A NAME="IDX538"></A>
</DL>



<H2><A NAME="SEC66">10.3 `hostname': Вывести или установить имя системы</A></H2>

<P>
<A NAME="IDX539"></A>
<A NAME="IDX540"></A>


<P>
   Без аргументов `hostname' печатает имя текущей системы-хоста. С одним
аргументом она устанавливает текущее имя системы-хоста равное указанной 
строке. Вы должны иметь соответсвующие привилегии для установки имени 
системы-хоста. Синтаксис:



<PRE>
     hostname [ИМЯ]
</PRE>

<P>
   Параметрами являются `--help' и `--version'. См. раздел <A HREF="shellutils_2.html#SEC2">2. Общие параметры</A>.


<P></P><HR>
 [<A HREF="shellutils_toc.html">Содержание</A>] &#160; [<A HREF="shellutils_9.html">Назад</A>] &#160; [<A>Пред</A>] &#160; [<A>Вверх</A>] &#160; [<A>След</A>] &#160; [<A HREF="shellutils_11.html">Вперед</A>] &#160;

</BODY>
</HTML>
