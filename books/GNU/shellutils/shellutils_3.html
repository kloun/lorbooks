<HTML>
<HEAD>
<!-- Created by texi2html 1.57 from shellutils.texi on January, 31  2002 -->

<TITLE>Утилиты оболочки GNU - 3. Форматы ввода даты</TITLE>
</HEAD>
<BODY >
 [<A HREF="shellutils_toc.html">Содержание</A>] &#160; [<A HREF="shellutils_2.html">Назад</A>] &#160; [<A>Пред</A>] &#160; [<A>Вверх</A>] &#160; [<A>След</A>] &#160; [<A HREF="shellutils_4.html">Вперед</A>] &#160;<BR><HR><BR>


<H1><A NAME="SEC3">3. Форматы ввода даты</A></H1>

<P>
<A NAME="IDX5"></A>


<P>
  Во-первых, цитата:

<BLOCKQUOTE>
<P>
сложны, ассиметричны и раздельны, что делать связанные вычисления
в уме по времени невозможно. На самом деле, если некий Бог-тиран 
изобретал бы способ подчинить наш ум времени, чтобы сделать невозможной 
для нас возможность вырваться из подчинения сырым шаблонам и неприятным 
сюрпризам, он вряд ли мог сделать лучше, чем передать нашу современную 
систему. Это подобно набору трапецидальных строительных блоков без
вертикальных и горизонтальных поверхностей, языку, в котором простейшая 
мысль требует витиеватых конструкций. В отличие от более успешных
образцов языка и науки, которые позволяют нам видеть опыт широко или
по крайней мере на высоком уровне, наша система измерения времени тихо
и постоянно поощряет наш террор времени.


<P>
... Это подобно измерению длины в футах, ширины -- в метрах, а высоты ---
в локтях, если базовые руководства требуют знания пяти различных языков.
Это не чудо когда мы смотрим в наше недавнее прошлое или ближайшее будущее,
прошлый вторник или неделю после воскресенья, с ощущением беспомощности. ...
</BLOCKQUOTE>

<P>
     -- Роберт Грудин, `Время и искусство жить'.


<P>
   Этот раздел описывает текстовые представления даты, принимаемые
программами GNU. Это строки, которые Вы как пользователь можете передать
в качестве аргументов различным программам. C-интерфейс (через функцию
`getdate') здесь не описывается.


<P>
   Хотя этот синтаксис даты может представлять любое время начиная с
нуля н.э., целые числа компьютеров недостаточно велики для такого 
(сравнительно) большого отрезка времени. Самая ранняя дата семантически
допустимая на Unix системах -- это полночь 1 января 1970 г.




<H2><A NAME="SEC4">3.1 Основной синтаксис даты</A></H2>

<P>
<A NAME="IDX6"></A>
<A NAME="IDX7"></A>


<P>
   "Дата" -- это строка, возможно пустая, содержащая много элементов, 
разделенных пробелами. Пробел может быть опущен, если не появляются
никакие неоднозначности. Пустая строка означает начало сегодняшнего 
дня (т.е. полночь). Порядок пунктов несущественен. Строка даты может 
содержать много разных пунктов:



<UL>
<LI>календарная дата

<LI>время суток

<LI>часовой пояс

<LI>день недели

<LI>относительные элементы

<LI>непосредственно числа.

</UL>

<P>
Мы опишем каждый из этих типов элементов по очереди ниже.


<P>
<A NAME="IDX8"></A>
<A NAME="IDX9"></A>
<A NAME="IDX10"></A>
<A NAME="IDX11"></A>
<A NAME="IDX12"></A>
<A NAME="IDX13"></A>
<A NAME="IDX14"></A>
<A NAME="IDX15"></A>
<A NAME="IDX16"></A>
<A NAME="IDX17"></A>
<A NAME="IDX18"></A>
<A NAME="IDX19"></A>
<A NAME="IDX20"></A>


<P>
   Несколько чисел могут быть написаны словами в большинстве случаев.
Это наиболее полезно для указания дня недели или относительных пунктов
(см. ниже). Вот список: `first' -- 1, `next' -- 2, `third' -- 3,
`fourth' -- 4, `fifth' -- 5, `sixth' -- 6, `seventh' -- 7, `eighth' -- 
8, `ninth' -- 9, `tenth' -- 10, `eleventh' -- 11 и `twelfth' -- 12.
Также `last'означает -1.


<P>
   Когда месяц указывается таким образом, предполагается, что он 
указан численно, вместо "чтение полностью по буквам"; это изменяет
допустимые строки.


<P>
   Регистр букв полностью игнорируется в датах. Коментарии могут быть 
введены в круглых скобках, если включенные скобки правильно вложены.
Дефисы без следующей за ними цифрой в начтоящее время игнорируютя.
Лидирующие нули в числах игнорируются.




<H2><A NAME="SEC5">3.2 Календарная дата</A></H2>

<P>
<A NAME="IDX21"></A>
<A NAME="IDX22"></A>
<A NAME="IDX23"></A>
<A NAME="IDX24"></A>
<A NAME="IDX25"></A>


<P>
   "Календарная дата" указывает день года. Она указывается различными
способами, в зависимости от того, указывается месяц численно или
прописью. Все эти строки указывают одну календаную дату:



<PRE>
     1970-09-17           # ISO 8601.
     70-9-17              # По умолчанию XX век используется.
     70-09-17             # Лидирующие нули игнорируются.
     9/17/72              # Обычная запись в США.
     24 September 1972
     24 Sept 72           # September имеет специальное сокращение.
     24 Sep 72            # Трехбуквенные сокращения также допускаются.
     Sep 24, 1972
     24-sep-72
     24sep72
</PRE>

<P>
   Год может быть опущен. В этом случае, используется последний указанный 
год, если такого нет -- текущий. Например:



<PRE>
     9/17
     sep 17
</PRE>

<P>
   
   Здесь приведены правила.


<P>
   Если месяц указан числом, допустим формат ISO 8601 `ГОД-МЕСЯЦ-ДЕНЬ',
где ГОД -- это любое положительное число, МЕСЯЦ -- число между 01 и 12,
ДЕНЬ -- число от 01 до 31. Лидирующий нуль должен быть указан, если число 
меньше 10. Если ГОД меньше 100, то 1900 добавляется к нему, для образования 
даты в XX веке. Конструкция `МЕСЯЦ/ДЕНЬ/ГОД', популярная в США допустима.
Также `МЕСЯЦ/ДЕНЬ', опуская год.


<P>
   Названия месяцев могут быть указаны полностью: `January', `February',
`March', `April', `May', `June', `July', `August', `September',
`October', `November' or `December'. Названия месяцев могут быть сокращены
до первых трех символов, возможно заканчивающихся точкой. Также можно
писать `Sept' вместо `September'.


<P>
   Когда месяцы указаны прописью, календарная дата может быть задана
следующим образом:



<PRE>
     ДЕНЬ МЕСЯЦ ГОД
     ДЕНЬ МЕСЯЦ
     МЕСЯЦ ДЕНЬ ГОД
     ДЕНЬ-МЕСЯЦ-ГОД
</PRE>

<P>
   Или, опуская год:



<PRE>
     МЕСЯЦ ДЕНЬ
</PRE>



<H2><A NAME="SEC6">3.3 Время суток</A></H2>

<P>
<A NAME="IDX26"></A>
<A NAME="IDX27"></A>
<A NAME="IDX28"></A>
<A NAME="IDX29"></A>
<A NAME="IDX30"></A>
<A NAME="IDX31"></A>
<A NAME="IDX32"></A>


<P>
   "Время суток" в строках даты указывает время в данный день. Вот 
несколько примеров, представляющие одно и то же время:



<PRE>
     20:02:0
     20:02
     8:02pm
     20:02-0500      # В EST (Стандартное восточное время в США).
</PRE>

<P>
   В общем случае время суток задается в виде `ЧАС:МИНУТЫ:СЕКУНДЫ',
где ЧАС -- эточисло между 0 и 23, МИНУТЫ -- число между 0 и 59, СЕКУНДЫ --
число между 0 и 59. `:СЕУКНДЫ' могут быть опущены, в этом случае
они считаются равными нулю.   


<P>
   Если после времени указывается `am' или `pm' (или `a.m.' или `p.m.')
ЧАС долен быть от 1 до 12, `:МИНУТЫ' можно опустить (считаются
равными нулю). `am' указывает на первую половину дня, `pm' -- на вторую.
В такой записи 12 предшествует 1: полночь это `12am', полдень -- `12pm'.


<P>
   После времени может быть указан часовой пояс в виде `ЗЧЧММ',
где З -- `+' или `-', ЧЧ -- количество часов в поясе, ММ -- количество
минут в поясе. Когда часовой пояс задан таким образом, время интерпретируется 
относительно Coordinated Universal Time (UTC), перекрывая любые предыдущие
спецификации часового пояса или местный частовой пояс. МИНУТЫ во времени 
суток не могут быть опущены, если указан часовой пояс. Это единственный
способ указать часовой пояс используя дробные части часа.


<P>
   Или `am'/`pm' или часовой пляс могут быть указаны, но не оба.




<H2><A NAME="SEC7">3.4 Часовой пояс</A></H2>

<P>
<A NAME="IDX33"></A>


<P>
   "Часовой пояс" определяет международный часовой пояс, указываемый
небоьшим количеством букв. Они поддерживаются для обратной совместимости
и не рекомендуются, потому что они неодносзначны на практике: сокращение
`EST' имеет разное значение в США и Австралии. Точки игнорируются.
В настоящее время только целые часы в поясах огут быть представлены в 
"часовом поясе". См. предыдущий раздел для лучшего управления часовыми
поясами.


<P>
   Здесь приведены не сберегащие дневное время часовые пояса, 
индексированные по поясному часу


<DL COMPACT>

<DT><SAMP>`-1200'</SAMP>
<DD>
`Y' для военных.
<DT><SAMP>`-1100'</SAMP>
<DD>
`X' для военных.
<DT><SAMP>`-1000'</SAMP>
<DD>
`W' для военных.
<DT><SAMP>`-0900'</SAMP>
<DD>
`V' для военных.
<DT><SAMP>`-0800'</SAMP>
<DD>
`PST' для стандартного тихоокеанского, и `U' для военных.
<DT><SAMP>`-0700'</SAMP>
<DD>
`MST' для стандартного горного, and `T' для военных.
<DT><SAMP>`-0600'</SAMP>
<DD>
`CST' для стандартного центрального, and `S' для военных.
<DT><SAMP>`-0500'</SAMP>
<DD>
`EST' для стандартного восточного, and `R' для военных.
<DT><SAMP>`-0400'</SAMP>
<DD>
`AST' для стандартного атлантического, and `Q' для военных.
<DT><SAMP>`-0300'</SAMP>
<DD>
`P' для военных.
<DT><SAMP>`-0200'</SAMP>
<DD>
`O' для военных.
<DT><SAMP>`-0100'</SAMP>
<DD>
`N' для военных.
<DT><SAMP>`+0000'</SAMP>
<DD>
`GMT' для Гривича, `UT' для универсального, `UTC' для
Coordinated Universal, `WET' для восточно-европейского, and `Z' для ISO
8601 и военных.
<DT><SAMP>`+0100'</SAMP>
<DD>
`A' для военных, `CET' для центрально-европейского, `MET' для Голландии, и
`MEZ' для Германии.
<DT><SAMP>`+0200'</SAMP>
<DD>
`B' для военных, и `EET' для восточно-европейского.
<DT><SAMP>`+0300'</SAMP>
<DD>
`C' для военных.
<DT><SAMP>`+0400'</SAMP>
<DD>
`D' для военных.
<DT><SAMP>`+0500'</SAMP>
<DD>
`E' для военных.
<DT><SAMP>`+0600'</SAMP>
<DD>
`F' для военных.
<DT><SAMP>`+0700'</SAMP>
<DD>
`G' для военных.
<DT><SAMP>`+0800'</SAMP>
<DD>
`H' для военных.
<DT><SAMP>`+0900'</SAMP>
<DD>
`I' для военных, и `JST' для стандартного японского.
<DT><SAMP>`+1000'</SAMP>
<DD>
`GST' for Guam Standard, and `K' для военных.
<DT><SAMP>`+1100'</SAMP>
<DD>
`L' для военных.
<DT><SAMP>`+1200'</SAMP>
<DD>
`M' для военных, and `NZST' для стандарного ново-зеландского.
</DL>

<P>
   Здесь приведены сберегающие дневное время часовые пояса, индексированные 
по поясному часу. Также окончивая не  сберегающие дневное время часовые 
пояса строкой `DST' отдельным словом (отделенным пробелом), соответсвующий
сберегающий дневное время часовой пояс может быть указан.


<DL COMPACT>

<DT><SAMP>`-0700'</SAMP>
<DD>
`PDT' для тихоокеанского дневного.
<DT><SAMP>`-0600'</SAMP>
<DD>
`MDT' для горного дневного.
<DT><SAMP>`-0500'</SAMP>
<DD>
`CDT' для центрального дневного.
<DT><SAMP>`-0400'</SAMP>
<DD>
`EDT' для восточного дневного.
<DT><SAMP>`-0300'</SAMP>
<DD>
`ADT' для атлантического дневного.
<DT><SAMP>`+0100'</SAMP>
<DD>
`BST' для британского летнего, и `WEST' западно-европейского летнего.
<DT><SAMP>`+0200'</SAMP>
<DD>
`CEST' для центрально-европейского летнего, `MEST' для Голландии, и 
`MESZ' для Германии.
<DT><SAMP>`+1300'</SAMP>
<DD>
`NZDT' для ново-зеландского дневного.
</DL>



<H2><A NAME="SEC8">3.5 День недели</A></H2>

<P>
<A NAME="IDX34"></A>
<A NAME="IDX35"></A>
<A NAME="IDX36"></A>
<A NAME="IDX37"></A>
<A NAME="IDX38"></A>
<A NAME="IDX39"></A>
<A NAME="IDX40"></A>
<A NAME="IDX41"></A>


<P>
   Явное указание дня недели увеличавает дату (только в случае 
необходимости) для достижения того дня недели в будущем.


<P>
   Дни недели могут быть написаны полностью: `Sunday', `Monday',
`Tuesday', `Wednesday', `Thursday', `Friday' or `Saturday'.  
Дни могут быть сокращены до первых трех букв, возможно заканичаващихся 
точкой. Специальные сокращения `Tues' для `Tuesday', `Wednes' для
`Wednesday' и `Thur' или `Thurs' для `Thursday' также допустимы.


<P>
   Число может предшествовать дню недели для сдвига вперед дополнительных
недель. Лучше всего это использовать в выражениях вида `third monday'.  
В этом контексте `last ДЕНЬ' или `next ДЕНЬ' также допустимы; они
сдигают на неделю вперед или назад день, представляемый ДНЕМ.


<P>
   Запятая, следующая за днем недели, игнорируется




<H2><A NAME="SEC9">3.6 Относительные элементы в строке даты</A></H2>

<P>
<A NAME="IDX42"></A>
<A NAME="IDX43"></A>
<A NAME="IDX44"></A>


<P>
   "Относительные элементы" устанавливают дату (или текущюу дату) вперед 
или назад. Эффект относительных пукнктов накпиливается. Вот несколько 
примеров.



<PRE>
     1 year
     1 year ago
     3 years
     2 days
</PRE>

<P>
<A NAME="IDX45"></A>
<A NAME="IDX46"></A>
<A NAME="IDX47"></A>
<A NAME="IDX48"></A>
<A NAME="IDX49"></A>
<A NAME="IDX50"></A>
<A NAME="IDX51"></A>
<A NAME="IDX52"></A>
<A NAME="IDX53"></A>


<P>
   Единица изменения времени может быть выбрана строкой `year' или
`month' для изменения на целы годы или месяцы. Это не точные единицы,
т.к. не все месяцы и годы имеют одинаковую продолжительность. Более 
точные единицы это: `fortnight', которая значаит 14 дней, `week' ---
7 дней, `day' -- 24 часа, `hour' -- 60 минут, `minute' или `min' ---
60 секунд и `second' или `sec' -- 1 секунда. Суффикс `s' для этих 
единииц допустим и игнорируется.


<P>
   Единица времени может быть предворена множителем, данным как 
возможно число со знаком. Беззнаковые числа считатются положительными. 
Отсутсвие числа применяет 1 как множитель. Указывая за относительным 
пунктам слово `ago' эквивалентно предварению единицы множителем -1.


<P>
<A NAME="IDX54"></A>
<A NAME="IDX55"></A>


<P>
   Строка `tomorrow' значит один день в будущее, завтра, (эквивалентно
`day'), строка `yesterday' -- один день в прошлое, вчера, (эквивалентно
`day ago').


<P>
<A NAME="IDX56"></A>
<A NAME="IDX57"></A>
<A NAME="IDX58"></A>


<P>
   Строки `now' или `today' -- это относительные пункты, указывающие
нулевое смещение даты, эти строки исходят из факта, что нулевое 
смещение представляет собой текущее время, если предыдущие пункты его 
не изменили. Они могут использоваться для выделить другие пункты,
как, например, в `12:00 today'.  Строка `this' также иммет смысл
нудевого смещения времени, но предподчительно в строках даты как
`this thursday'.


<P>
   Когда относительный пункт изменяет дату так, что сберегающий дневное 
время часовой пояс сменяется на не сберегающий дневное время часовой 
пояс или наоборот, что время выавнивается в соответвии с местным временем.




<H2><A NAME="SEC10">3.7 Непосредственные числа в строках данных</A></H2>

<P>
<A NAME="IDX59"></A>


<P>
   Точная интерпретация непосредственного десятичного числа заисит от
контекста в строке даты.


<P>
   Если десятичное число имеет вид ГГГГММДД и никаких элементов 
календарной даты (раздел <A HREF="shellutils_3.html#SEC5">3.2 Календарная дата</A> перед ним нет в этой 
строке даты, то ГГГГ означает год, ММ -- месяц, а ДД -- день месяца.


<P>
   Если десятичное число имеет вид ЧЧММ и никаких элементов времени суток
перед ним нет в этой строке даты, то ЧЧ означает час суток, а ММ -- минуты
часа. ММ может быть опущено.


<P>
   Если календарная дата и время суток записаны слева от числа в
строке даты, и нет относительных элементов, то число переопределяет год.




<H2><A NAME="SEC11">3.8 Авторы `getdate'</A></H2>

<P>
<A NAME="IDX60"></A>
<A NAME="IDX61"></A>
<A NAME="IDX62"></A>
<A NAME="IDX63"></A>
<A NAME="IDX64"></A>
<A NAME="IDX65"></A>
<A NAME="IDX66"></A>
<A NAME="IDX67"></A>


<P>
   `getdate' был первоначально реализован Стивеном М. Белловином
(<A HREF="mailto:smb@research.att.com">smb@research.att.com</A>) в Университете Северной Каролины. Код
был позже подправлен парой людей из Usenet, затем полностью 
переработан Ричем Сальцем (<A HREF="mailto:rsalz@bbn.com">rsalz@bbn.com</A>) и Джимом Беретсом
(<A HREF="mailto:jberets@bbn.com">jberets@bbn.com</A>) в августе 1990. Различные ревизии для системы
GNU были сделаны Дэвидом МакКензи, Джимом Мейерингом и др.


<P>
   Эта глава первоначально была создана Franc,ois Pinard (Френсисом 
Пинардом, наверное, если кому известно как его имя читается по-русски
напишите) (<A HREF="mailto:pinard@iro.umontreal.ca">pinard@iro.umontreal.ca</A>) из исходных текстов `getdate.y', 
а затем подкорректирована К. Берри (<A HREF="mailto:kb@cs.umb.edu">kb@cs.umb.edu</A>).


<P></P><HR>
 [<A HREF="shellutils_toc.html">Содержание</A>] &#160; [<A HREF="shellutils_2.html">Назад</A>] &#160; [<A>Пред</A>] &#160; [<A>Вверх</A>] &#160; [<A>След</A>] &#160; [<A HREF="shellutils_4.html">Вперед</A>] &#160;

</BODY>
</HTML>
