<HTML>
<HEAD>
<!-- Created by texi2html 1.57 from shellutils.texi on January, 31  2002 -->

<TITLE>Утилиты оболочки GNU - 11. Измененное выполнение команд</TITLE>
</HEAD>
<BODY >
 [<A HREF="shellutils_toc.html">Содержание</A>] &#160; [<A HREF="shellutils_10.html">Назад</A>] &#160; [<A>Пред</A>] &#160; [<A>Вверх</A>] &#160; [<A>След</A>] &#160; [<A HREF="shellutils_12.html">Вперед</A>] &#160;<BR><HR><BR>


<H1><A NAME="SEC67">11. Измененное выполнение команд</A></H1>

<P>
<A NAME="IDX541"></A>


<P>
   Эта главва описывает команды, которые выполняют другие команды
в некотором контексте, отличном от текушщего: с измененным окружением,
от другого пользователя и др.




<H2><A NAME="SEC68">11.1 `chroot': Выполнить команду с измененным корневым каталогом</A></H2>

<P>
<A NAME="IDX542"></A>
<A NAME="IDX543"></A>


<P>
   `chroot' выполняет команду с указанным корневым каталогом. На многих 
системах только супер-пользователь может делать это. Синтаксис.



<PRE>
     chroot НОВЫЙ-КОРЕНЬ [КОМАНДА [АРГУМЕНТЫ]...]
     chroot ПАРАМЕТР
</PRE>

<P>
<A NAME="IDX544"></A>


<P>
   Обычно имена файлов ищутся начиная с корневого каталога, т.е. `/'.
`chroot' изменяет корневой каталог на НОВЫЙ-КОРЕНЬ (который должет
существовать) и заетм запускает КОМАНДу с необязательными АРГУМЕНТами.
Если КОМАНДА не указана, используется значение переменной окружения 
`SHELL' или, если она не установлена, `/bin/sh' с параметром `-i'.


<P>
   Параметрами являются `--help' и `--version'. раздел <A HREF="shellutils_2.html#SEC2">2. Общие параметры</A>.   




<H2><A NAME="SEC69">11.2 `env': Запустить программу с измененным окружением</A></H2>

<P>
<A NAME="IDX545"></A>
<A NAME="IDX546"></A>


<P>
   `env' запускает программу с измененным окружением. Синтаксис:



<PRE>
     env [ПАРМЕТР]... [ИМЯ=ЗНАЧЕНИЕ]... [КОМАНДА [АРГУМЕНТЫ]...]
     env
</PRE>

<P>
   Аргументы вида `ИМЯ=ЗНАЧЕНИЕ' устанавливают переменной окружения
ПЕРЕМЕННАЯ значение ЗНАЧЕНИЕ. ЗНАЧЕНИЕ может быть пустым (`ПЕРЕМЕННАЯ=').
Задавая переменной пустое значение отличается от ее удаления.


<P>
   Первый следующий за ними аргумент указывает имя программы, которую 
требуется выполнить; она ищется согласно переменной окружения `PATH'.
Любые последующие аргументы воспринимаются как аргументы для этой 
программы.


<P>
   Если имя команды не указано за спецификациями окружения, печатается 
результурующее окружение. Это подобно указанию имени команды `printenv'.


<P>
   Программа понимает следующие параметры. См. также раздел <A HREF="shellutils_2.html#SEC2">2. Общие параметры</A>


<DL COMPACT>

<DT><SAMP>`-u ИМЯ'</SAMP>
<DD>
<DT><SAMP>`--unset=ИМЯ'</SAMP>
<DD>
Удалить переменную ИМЯ из окружения, если она есть в нем.
<A NAME="IDX547"></A>
<A NAME="IDX548"></A>
<A NAME="IDX549"></A>

<DT><SAMP>`-'</SAMP>
<DD>
<DT><SAMP>`-i'</SAMP>
<DD>
<DT><SAMP>`--ignore-environment'</SAMP>
<DD>
Начать с пустым окружением, игнорирую унаследованное.
<A NAME="IDX550"></A>
<A NAME="IDX551"></A>
<A NAME="IDX552"></A>
<A NAME="IDX553"></A>
</DL>



<H2><A NAME="SEC70">11.3 `nice': Выполнить программу с измененным приоритетом</A></H2>

<P>
<A NAME="IDX554"></A>
<A NAME="IDX555"></A>


<P>
   `nice' печатает или изменяет приоритет задачи. Синтаксис:



<PRE>
     nice [ПАРАМЕТР]... [КОМАНДА [АРГУМЕНТ]...]
</PRE>

<P>
   Если аргументы не заданы, `nice' печатает текущий приоритет, который 
наследуется. Иначе `nice' выполняет данную КОМАНДу с измененным приоритетом.
Если ИЗМЕНЕНИЕ не задано, приоритет команды возрастает на 10. Вы должны
олдадать соответсвующими правами для указания отрицательного приращения.
Приоритет может быть изменен в пределах от -20 (наивысший) до 19 (наименьший).


<P>
   Поскольку многие командные оболочки имеют встроенную команду с таким именем,
использование неуточненного имени в скрипте или интерактивно может привести к
отличиям в функциональности от описанной здесь.


<P>
   Программа понимает следующие параметры. См. также раздел <A HREF="shellutils_2.html#SEC2">2. Общие параметры</A>.


<P>
<A NAME="IDX556"></A>
<A NAME="IDX557"></A>
<DL COMPACT>

<DT><SAMP>`-n ИЗМЕНЕНИЕ'</SAMP>
<DD>
<DT><SAMP>`-ИЗМЕНЕНИЕ'</SAMP>
<DD>
<DT><SAMP>`--adjustment=ИЗМЕНЕНИЕ'</SAMP>
<DD>
Добавить ИЗМЕНЕНИЕ вместо 10 к приоритету команды.  
</DL>



<H2><A NAME="SEC71">11.4 `nohup': Запустить программу с игнорированием к разрыву линии</A></H2>

<P>
<A NAME="IDX558"></A>
<A NAME="IDX559"></A>


<P>
   `nohup' запускает КОМАНДУ с игнорированием к разрыву линии, так что
команда может продолжать выполнение в фоновом режиме после того как
Вы выйдете из системы. Синтаксис:



<PRE>
     nohup КОМАНДА [АРГУМЕНТЫ]...
</PRE>

<P>
   `nohup' увеличичвает приоритет КОМАНДЫ на 5, т.о. она имеет небольшое
изменение в работе. Если стандартный вывод это терминал, он и стандартный 
вывод ошибок перенаправляются таким образом, что они добавляются в файл
`nohup.out'; если он не доступен для записи то, они дописываются в `$HOME/nohup.out'.
Если это невозможно, то команда не выполняется.


<P>
   Если `nohup' создает `nohup.out' или `$HOME/nohup.out', она создает
его без разрешений для группы и остальных. Она не изменет разрешения,
если выходной файл уже существует.


<P>
   `nohup' не помещает команду автоматически в фоновый режим, Вы
должны сделать это явно, завершив командную строку символом `&#38;'/


<P>
   Параметрами являются `--help' и `--version'. См. раздел <A HREF="shellutils_2.html#SEC2">2. Общие параметры</A>.




<H2><A NAME="SEC72">11.5 `su': Выполнить команду с подстановкой идентификаторов пользователя и группы</A></H2>

<P>
<A NAME="IDX560"></A>
<A NAME="IDX561"></A>


<P>
   `su' позволяет одному пользователю временно стать другим пользователем.
Она запускает программу (обычно интерактивную оболочку) с реальным и
эффективным идентификатором пользователя, группы и дополнительных групп
для данного ПОЛЬЗОВАТЕЛЯ. Синтаксис:



<PRE>
     su [ПАРАМЕТР]... [ПОЛЬЗОВАТЕЛЬ [АРГУМЕНТ]...]
</PRE>

<P>
   Если ПОЛЬЗОВАТЕЛЬ не задан, считается, что это `root', супер-пользователь.
Используемая оболочка берется из ПОЛЬЗОВАТЕЛЬской записи в `passwd' или
`/bin/sh' если ни одна там не указана. Если ПОЛЬЗОВАТЕЛЬ имеет пароль, `su'
спрашивает его, если эффективный идентификатор пользователя не равен нулю
(супер-пользователь).


<P>
<A NAME="IDX562"></A>
<A NAME="IDX563"></A>


<P>
   По умолчанию, `su' не изменяет текущий каталог. Она устанавливает 
переменные окружения `HOME' и `SHELL' из записи пароля для ПОЛЬЗОВАТЕЛЯ,
и если ПОЛЬЗОВАТЕЛЬ не является супер-пользователем, устанавлтвает `USER' и
`LOGNAME' в значение ПОЛЬЗОВАТЕЛЬ. По умолчанию, оболочка не является
оболочкой входа (login shell).


<P>
   Любые дополнительные АРГУМЕНТЫ передаются как дополнительные аргументы
командной оболочке.


<P>
   GNU `su' не трактует `/bin/sh' или дюбые другие оболочки специально
(т.е. устанавливая `argv[0]' в `-su', передавая `-c' только отдельным
оболочкам, и т.д.)


<P>
   `su' может быть опционально скомпилирован для использования `syslog' для сообщения
неуачных, и опционально успешных, попыток. (Если система поддерживает `syslog'.)
Однако, GNU `su' не проверяет, является ли пользователем группы `wheel'; см. ниже.


<P>
   Программа понимает следующие параметры. См. также раздел <A HREF="shellutils_2.html#SEC2">2. Общие параметры</A> 


<DL COMPACT>

<DT><SAMP>`-c КОМАНДА'</SAMP>
<DD>
<DT><SAMP>`--command=КОМАНДА'</SAMP>
<DD>
Передать КОМАНДУ, единственную командную строку для выполнения, оболочке
с параметром `-c' вместо запуска интерактивной оболочки.
<A NAME="IDX564"></A>
<A NAME="IDX565"></A>

<DT><SAMP>`-f'</SAMP>
<DD>
<DT><SAMP>`--fast'</SAMP>
<DD>
Передать параметр `-f' оболочке. Это возвожно имеет смысл только, если
оболочка это `csh' или `tcsh', для которых парметр `-f' предотвращает
чтение файла запуска (`.cshrc'). Для Борновских оболочек, параметр `-f'
отключает подстановку имени файла по шаблону, что вряд ли полезно.
<A NAME="IDX566"></A>
<A NAME="IDX567"></A>

<DT><SAMP>`-'</SAMP>
<DD>
<DT><SAMP>`-l'</SAMP>
<DD>
<DT><SAMP>`--login'</SAMP>
<DD>
Сделать оболочку входной. Это означяет следующее. Удалить все переменные
окружения кроме `TERM', `HOME' и `SHELL' (которые устанавливаются как описано
выше), и `USER', и `LOGNAME' (которые устанавливаются даже для супер-пользователя,
как описано выше), и установить `PATH' к "зашитому" при компиляции значению.
Изменить ПОЛЬЗОВАТЕЛЬский домашний каталог. Предварить имя оболочки
символом `-', чтобы она прочитала свой(и) стартовый(е) файл(ы).
<A NAME="IDX568"></A>
<A NAME="IDX569"></A>
<A NAME="IDX570"></A>

<DT><SAMP>`-m'</SAMP>
<DD>
<DT><SAMP>`-p'</SAMP>
<DD>
<DT><SAMP>`--preserve-environment'</SAMP>
<DD>
Не изменять переменные окружения `HOME', `USER', `LOGNAME' или `SHELL'.
Запустить оболочку, указанную в переменной окружения `SHELL' вместо
оболочки, указанной в ПОЛЬЗОВАТЕЛЬской записи в passwd, если 
пользователь, запускающий `su', не супер-пользователь и ПОЛЬЗОВАТЕЛЬская 
оболочка не ограниченная. "Ограниченная оболочка" это одна из неуказанных в 
файле `/etc/shells', или в "вшитом" при компиляции списке, если этот файл не 
существует. Частично действие этого параметра может быть перекрыто
параметрами `--login' и `--shell'.
<A NAME="IDX571"></A>
<A NAME="IDX572"></A>
<A NAME="IDX573"></A>
<A NAME="IDX574"></A>

<DT><SAMP>`-s ОБОЛОЧКА'</SAMP>
<DD>
<DT><SAMP>`--shell=ОБОЛОЧКА'</SAMP>
<DD>
Запустить ОБОЛОЧКУ вместо оболочки, указанной в ПОЛЬЗОВАТЕЛЬской записи в passwd, если 
пользователь, запускающий `su', не супер-пользователь и ПОЛЬЗОВАТЕЛЬская 
оболочка не ограниченная (см `-m' выше).
<A NAME="IDX575"></A>
<A NAME="IDX576"></A>
</DL>

<P></P><HR>
 [<A HREF="shellutils_toc.html">Содержание</A>] &#160; [<A HREF="shellutils_10.html">Назад</A>] &#160; [<A>Пред</A>] &#160; [<A>Вверх</A>] &#160; [<A>След</A>] &#160; [<A HREF="shellutils_12.html">Вперед</A>] &#160;

</BODY>
</HTML>
