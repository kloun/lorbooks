<HTML>
<HEAD>
<!-- Created by texi2html 1.56k from texinfo.texi on 31 May 2000 -->

<TITLE>Texinfo 4.0 - Использование режима Texinfo</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="texinfo_1.html">first</A>, <A HREF="texinfo_2.html">previous</A>, <A HREF="texinfo_4.html">next</A>, <A HREF="texinfo_33.html">last</A> section, <A HREF="texinfo_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC14" HREF="texinfo_toc.html#TOC14">Использование режима Texinfo</A></H1>
<P>
<A NAME="IDX57"></A>
<A NAME="IDX58"></A>
<A NAME="IDX59"></A>
<A NAME="IDX60"></A>


<P>
Вы можете редактировать Texinfo-файл любым текстовым редактором,
выбранным вами по вашему усмотрению.  Texinfo-файл никак не отличается
от любого другого ASCII-файла.  Однако, при установке GNU Emacs вы
получаете возможность воспользоваться специальным режимом, называемым
режимом Texinfo, который снабжает вас командами Emacs и дополнительными
средствами, которые могут сильно облегчить вашу работу.


<P>
Эта глава описывает только особенности режима Texinfo GNU Emacs.  Здесь
не рассматриваются все возможности языка форматирования документов
Texinfo.  Если вы читаете это руководство с самого начала, вы, вероятно,
захотите быстро пролистать эту главу и вернуться к ней уже после
изучения разделов, где язык форматирования документов Texinfo
описывается более детально.


<P>
Режим Texinfo дает вам специальные возможности для работы с
Texinfo-файлами:



<UL>
<LI>

Быстрая вставка часто используемых @-команд.
<LI>

Автоматическое создание строк <CODE>@node</CODE>.
<LI>

Визуализация структуры Texinfo-файла.
<LI>

Автоматическое создание или изменение указателей на ноды `Next',
`Previous' и `Up'.
<LI>

Автоматическое создание или модификация меню.
<LI>

Автоматическое создание главного меню.
<LI>

Форматирование части или всего файла в формат Info.
<LI>

Вывод документа на печать, печать всего файла или какой-либо его части.
</UL>

<P>
Вероятно, две наиболее полезных возможности -- это возможность быстрой
вставки часто используемых @-команд и возможность создания меню и
указателей на ноды.




<H2><A NAME="SEC15" HREF="texinfo_toc.html#TOC15">Обычные команды редактирования GNU Emacs</A></H2>

<P>
В большинстве случаев команды режима Text работают в режиме Texinfo
точно так же, как бы они работали и в самом режиме Text.  В режиме
Texinfo к основным возможностям редактора GNU Emacs добавляется
дополнительный набор инструментов и команд редактирования.  Основное
различие между режимом Text и режимом Texinfo касается заполнения
текста.  Переменная, отвечающая за разделение абзацев, и таблица
синтаксиса переопределяются в режиме Texinfo так, чтобы команды Texinfo,
которые должны стоять в своих собственных строках, не были включены в
другие абзацы.  Поэтому команда <KBD>M-q</KBD> (<CODE>fill-paragraph</CODE>)
перезаполняет абзацы, но не смешивает команды, требующие своей строки,
со смежными абзацами.


<P>
Кроме того, режим Texinfo устанавливает переменную <CODE>page-delimiter</CODE>
равной значению <CODE>texinfo-chapter-level-regexp</CODE>; по умолчанию, это
регулярное выражение, совпадающее с командами определения глав и их
аналогов, таких как приложения.  С таким значением разделителя страницы
вы можете переходить от одного заголовка главы к другому с помощью
команд <KBD>C-x ]</KBD> (<CODE>forward-page</CODE>) и <KBD>C-x [</KBD>
(<CODE>backward-page</CODE>) и сужать буфер до текста главы с помощью команды
<KBD>C-x p</KBD> (<CODE>narrow-to-page</CODE>).  (@xref{Страницы,,, @external{emacs}, Руководство по GNU Emacs}, для более подробного
описания команд, работающих со страницами.)


<P>
Вы можете называть Texinfo-файл так, как пожелаете, но по соглашению в
качестве расширения следует выбрать одно из этих: <TT>`.texinfo'</TT>,
<TT>`.texi'</TT>, <TT>`.txi'</TT> или <TT>`.tex'</TT>.  Для использования
предпочтительно более длинное расширение, так как оно однозначно
определяет тип файла.  Более короткое расширение необходимо использовать
в тех случаях, когда операционная система ограничивает длину имени
файла.  GNU Emacs автоматически входит в режим Texinfo, если вы
обратитесь к файлу с расширением <TT>`.texinfo'</TT>, <TT>`.txi'</TT> или
<TT>`.texi'</TT>.  Кроме того, Emacs переходит в режим Texinfo, если в теле
файла в его первой строке присутствует текст <SAMP>`-*- texinfo -*-'</SAMP>.
Если вы находитесь в другом режиме и желаете переключиться в режим
Texinfo, выполните команду <CODE>M-x texinfo-mode</CODE>.

<P>
Естественно, как и другие возможности Emacs, режим Texinfo может быть
расширен и настроен так, как вы этого пожелаете.  В частности, очень
легко изменить привязку ключей.  Здесь описываются сделанные по
умолчанию или стандартные привязки ключей.




<H2><A NAME="SEC16" HREF="texinfo_toc.html#TOC16">Быстрая вставка часто используемых команд.</A></H2>
<P>
<A NAME="IDX61"></A>
<A NAME="IDX62"></A>
<A NAME="IDX63"></A>


<P>
Режим Texinfo дает возможность быстро вставлять часто используемые
@-команды в буфер редактирования.  Вы можете использовать эти команды
для уменьшения времени набора команд.


<P>
Чтобы вызвать команды вставки, следует дважды набрать <KBD>C-c</KBD> и затем
нажать первый символ @-команды:


<DL COMPACT>

<DT><KBD>C-c C-c c</KBD>
<DD>
<DT><KBD>M-x texinfo-insert-@code</KBD>
<DD>
<A NAME="IDX64"></A>
Вставить <CODE>@code{}</CODE> и поместить точку между фигурными скобками.

<DT><KBD>C-c C-c d</KBD>
<DD>
<DT><KBD>M-x texinfo-insert-@dfn</KBD>
<DD>
<A NAME="IDX65"></A>
Вставить <CODE>@dfn{}</CODE> и поместить точку между фигурными скобками.

<DT><KBD>C-c C-c e</KBD>
<DD>
<DT><KBD>M-x texinfo-insert-@end</KBD>
<DD>
<A NAME="IDX66"></A>
Вставить <CODE>@end</CODE> и попытаться добавить правильно следующее слово,
такое как <SAMP>`example'</SAMP> или <SAMP>`table'</SAMP>.  (Эта команда не может
правильно обрабатывать вложенные списки, зато вставляет слово, наиболее
соответствующее предшествующему списку).

<DT><KBD>C-c C-c i</KBD>
<DD>
<DT><KBD>M-x texinfo-insert-@item</KBD>
<DD>
<A NAME="IDX67"></A>
Вставить <CODE>@item</CODE> и поместить точку в начале следующей
строки.
<DT><KBD>C-c C-c k</KBD>
<DD>
<DT><KBD>M-x texinfo-insert-@kbd</KBD>
<DD>
<A NAME="IDX68"></A>
Вставить <CODE>@kbd{}</CODE> и поместить точку между фигурными скобками.

<DT><KBD>C-c C-c n</KBD>
<DD>
<DT><KBD>M-x texinfo-insert-@node</KBD>
<DD>
<A NAME="IDX69"></A>
Вставить <CODE>@node</CODE> и добавить строку комментария, перечисляющую
последовательность нод `Next', `Previous' и `Up'.  Оставить точку после
<CODE>@node</CODE>.

<DT><KBD>C-c C-c o</KBD>
<DD>
<DT><KBD>M-x texinfo-insert-@noindent</KBD>
<DD>
<A NAME="IDX70"></A>
Вставить <CODE>@noindent</CODE> и поместить точку в начале следующей строки.

<DT><KBD>C-c C-c s</KBD>
<DD>
<DT><KBD>M-x texinfo-insert-@samp</KBD>
<DD>
<A NAME="IDX71"></A>
Вставить <CODE>@samp{}</CODE> и поместить точку между фигурными скобками.

<DT><KBD>C-c C-c t</KBD>
<DD>
<DT><KBD>M-x texinfo-insert-@table</KBD>
<DD>
<A NAME="IDX72"></A>
Вставить <CODE>@table</CODE>, затем вставить <KBD>SPC</KBD> и поместить точку
после <KBD>SPC</KBD>.

<DT><KBD>C-c C-c v</KBD>
<DD>
<DT><KBD>M-x texinfo-insert-@var</KBD>
<DD>
<A NAME="IDX73"></A>
Вставить <CODE>@var{}</CODE> и поместить точку между фигурными скобками.

<DT><KBD>C-c C-c x</KBD>
<DD>
<DT><KBD>M-x texinfo-insert-@example</KBD>
<DD>
<A NAME="IDX74"></A>
Вставить <CODE>@example</CODE> и поместить точку в начале следующей строки.

<DT><KBD>C-c C-c {</KBD>
<DD>
<DT><KBD>M-x texinfo-insert-braces</KBD>
<DD>
<A NAME="IDX75"></A>
Вставить <CODE>{}</CODE> и поместить точку между фигурными скобками.

<DT><KBD>C-c C-c }</KBD>
<DD>
<DT><KBD>C-c C-c ]</KBD>
<DD>
<DT><KBD>M-x up-list</KBD>
<DD>
<A NAME="IDX76"></A>
Внутри пары скобок переместить точку до тех пор, пока не встретится
закрывающая скобка.  Набрать <KBD>C-c C-c ]</KBD> проще, чем <KBD>C-c C-c
}</KBD>, что, однако, проще запоминается; поэтому для перехода между
скобками существуют два ключа.  (Вы также можете переходить между двумя
фигурными скобками, вводя <KBD>C-f</KBD>.)
</DL>

<P>
Для того, что бы вставить команду, такую как
<CODE>@code{...}</CODE> вокруг <EM>существующего</EM> слова, надо
установить точку перед этим словом и ввести последовательность <KBD>C-u
1 C-c C-c c</KBD>.  Это облегчает редактирование уже существующего обычного
текста.  Величина параметра, следующего за <KBD>C-u</KBD>, сообщает Emacs
сколько слов после точки следует заключить между фигурными скобками:
<SAMP>`1'</SAMP> -- только одно слово, <SAMP>`2'</SAMP> -- два слова и так далее.
Используйте отрицательное число, чтобы заключить между скобками
предыдущее слово или слова.  Если вы оставите параметр неопределенным,
то Emacs вставит строку с @-командой и поместит точку между фигурными
скобками.  Это сработает только для тех @-команд, которые действуют на
слово или на слова внутри одной строки, вроде <CODE>@kbd</CODE> и
<CODE>@var</CODE>.

<P>
Этот набор команд вставки был создан после анализа частоты, с которой
различные @-команды используются в <CITE>Руководстве по GNU Emacs</CITE> и в
<CITE>Руководстве по GDB</CITE>.  Если вы желаете добавить ваши собственные
команды быстрой вставки, вы можете привязать к ключу макрос клавиатуры,
использовать сокращение или расширить код в <TT>`texinfo.el'</TT>.

<P>
<A NAME="IDX77"></A>
<A NAME="IDX78"></A>
<KBD>C-c C-c C-d</KBD> (<CODE>texinfo-start-menu-description</CODE>) -- это
команда быстрой вставки, действие которой отличается от действия других
команд вставки.  Она вставляет название ноды или заголовок главы в месте
для описания в пункте меню.  (Пункт меню состоит из трех частей: имени
пункта меню, имени ноды и описания.  Требуется только имя ноды, но
описание сильно помогает объяснить, о чем говорится в разделе
описываемой ноды.  See section <A HREF="texinfo_8.html#SEC79">Составные части меню</A>.)

<P>
Чтобы использовать <CODE>texinfo-start-menu-description</CODE>, установите
точку в строку пункта меню, и введите <KBD>C-c C-c C-d</KBD>.  Команда ищет и
копирует заголовок, который сопутствует имени ноды и вставляет этот
заголовок как описание; затем устанавливает курсор в начале вставленного
текста, так что вы можете отредактировать это текст.  Эта функция не
вставляет заголовок, если данный пункт меню уже содержит
описание.

<P>
Эта команда только помогает при создании описаний; она не делает всей
работы.  Вы должны отредактировать вставленный текст, так как при
создании заголовка обычно используют те же слова, что используются в
имени ноды, но полезное описание использует другие слова.




<H2><A NAME="SEC17" HREF="texinfo_toc.html#TOC17">Визуализация структуры разделов файла</A></H2>
<P>
<A NAME="IDX79"></A>
<A NAME="IDX80"></A>
<A NAME="IDX81"></A>
<A NAME="IDX82"></A>
<A NAME="IDX83"></A>


<P>
Вы можете визуализировать структуру разделов Texinfo-файла, используя
команду <KBD>C-c C-s</KBD> (<CODE>texinfo-show-structure</CODE>).  Эта команда
показывает структуру разделов Texinfo-файла, перечисляя строки, которые
начинаются с @-команд, а именно, с команд <CODE>@chapter</CODE>,
<CODE>@section</CODE> и подобных.  Эта команда создает такую же структуру,
какую представляет из себя оглавление.  Эти строки отображаются в другом
буфере, называемом <TT>`*Occur*'</TT>.  В том буфере вы можете установить
курсор на одной из этих строк и воспользоваться для перехода к
соответствующему разделу в Texinfo-файле последовательностью <KBD>C-c
C-c</KBD> (<CODE>occur-mode-goto-occurrence</CODE>).


<DL COMPACT>

<DT><KBD>C-c C-s</KBD>
<DD>
<DT><KBD>M-x texinfo-show-structure</KBD>
<DD>
<A NAME="IDX84"></A>
Показать строки <CODE>@chapter</CODE>, <CODE>@section</CODE>, и подобные строки
Texinfo-файла.

<DT><KBD>C-c C-c</KBD>
<DD>
<DT><KBD>M-x occur-mode-goto-occurrence</KBD>
<DD>
<A NAME="IDX85"></A>
Перейти к строке в Texinfo-файле, соответствующей строке под курсором в
буфере <TT>`*Occur*'</TT>.

</DL>

<P>
Если вы вызываете <CODE>texinfo-show-structure</CODE> с префиксным аргументом,
набирая <KBD>C-u C-c C-s</KBD>, это перечислит не только строки с
@-командами, такими как <CODE>@chapter</CODE>, <CODE>@section</CODE> и подобными,
но также и строки <CODE>@node</CODE>.  Вы можете использовать
<CODE>texinfo-show-structure</CODE> с префиксным аргументом для того, чтобы
проверить, являются ли указатели `Next', `Previous' и `Up' в строке
<CODE>@node</CODE> правильными.


<P>
Часто, когда вы работаете над руководством, вам будете нужна только
структура текущей главы.  В этом случае вы можете выделить область
буфера, структура которой вам нужна, используя команду <KBD>C-x n n</KBD>
(<CODE>narrow-to-region</CODE>), и <CODE>texinfo-show-structure</CODE> будет
действовать только в этой области.  Чтобы снова увидеть весь буфер,
следует использовать <KBD>C-x n w</KBD> (<CODE>widen</CODE>).  (@xref{Сужение, , ,@external{emacs}, Руководство по GNU Emacs}, для получения детальной
информации.)


<P>
<A NAME="IDX86"></A>
<A NAME="IDX87"></A>


<P>
Помимо предоставления команды визуализации структуры документа,
<CODE>texinfo-show-structure</CODE>, режим Texinfo устанавливает значение
переменной разделителя страницы таким образом, чтобы она соответствовала
@-командам уровня глав.  Это дает вам возможность использовать команды
<KBD>C-x ]</KBD> (<CODE>forward-page</CODE>) и <KBD>C-x [</KBD> (<CODE>backward-page</CODE>)
для перемещения вперед и назад по главам, а команду <KBD>C-x p</KBD>
(<CODE>narrow-to-page</CODE>) -- для сужения до главы.  @xref{Страницы, , , @external{emacs}, Руководство по GNU Emacs}, для получения
дополнительной информации.




<H2><A NAME="SEC18" HREF="texinfo_toc.html#TOC18">Обновление нод и меню</A></H2>
<P>
<A NAME="IDX88"></A>
<A NAME="IDX89"></A>
<A NAME="IDX90"></A>
<A NAME="IDX91"></A>


<P>
В режиме Texinfo доступны команды для автоматического создания или
обновления меню и указателей на ноды.  Эти команды называются
"update"-командами (командами обновления), потому что их основное
применение -- обновление Texinfo-файла после его редактирования; но вы
можете использовать их, чтобы вставить указатели `Next', `Previous' и
`Up' в строку <CODE>@node</CODE>, если их там еще нет, или создать меню в
файле, в котором его пока нет.


<P>
Если вы не пользуетесь командами обновления, то вам придется набирать
меню и указатели на ноды вручную, а это утомительное занятие.


<P>
Вы можете использовать следующие команды обновления, чтобы



<UL>
<LI>

вставить или обновить указатели на ноды `Next', `Previous' и `Up',

<LI>

вставить или обновить меню текущего раздела и

<LI>

создать главное меню для исходного Texinfo-файла.

</UL>

<P>
Вы можете использовать эти команды для обновления всех нод и меню в
выделенной области или во всем Texinfo-файле.


<P>
Команды обновления работают только со стандартными Texinfo-файлами,
которые имеют такую же структуру, как и книги.  В таких файлах, строка с
командой, объявляющей начало раздела, должна следовать сразу после
каждой строки <CODE>@node</CODE>, если только это не строка <CODE>@node</CODE> для
ноды `Top'.  (<EM>Строка с командой описания структуры глав</EM> -- это
строка, начинающаяся с <CODE>@chapter</CODE>, <CODE>@section</CODE> или с другой
подобной команды.)


<P>
Вы можете вставить строку с командой описания структуры глав либо вслед
за строкой <CODE>@node</CODE>, либо в строке, которая следует после одиночной
строки комментария <CODE>@comment</CODE>, либо после одиночной строки
<CODE>@ifinfo</CODE>.  Вы не можете вставить между строкой <CODE>@node</CODE> и
строкой с командой описания структуры глав больше одной строки; и
вставить вы можете только строку <CODE>@comment</CODE> или строку
<CODE>@ifinfo</CODE>.


<P>
Команды, которые действуют на весь текст в буфере, требуют, чтобы вслед
за нодой `Top' следовала нода с командой <CODE>@chapter</CODE> или с
эквивалентной по уровню командой.  Команды обновления меню не будут
создавать основное или главное меню для Texinfo-файла, который имеет
ноды только уровня <CODE>@chapter</CODE>!  Команды обновления меню создают
меню только <EM>внутри</EM> нод для нод более низкого уровня.  Чтобы
создать меню глав, вы должны предоставить ноду `Top'.


<P>
Команды обновления меню удаляют пункты меню, которые относятся к другим
Info-файлам, так как они не относятся к внутренним нодам текущего
буфера.  Это недостаток этих команд.  Вместо пунктов меню вы можете
использовать перекрестные ссылки на другие Info-файлы.  Ни одна из
команд обновления не затрагивает перекрестные ссылки.


<P>
В режиме Texinfo существует пять наиболее часто используемых команд
обновления: две из них -- для обновления всех указателей нод или меню в
пределах одной ноды; две -- для обновления всех указателей нод или меню
во всем файле; и одна команда, <CODE>texinfo-master-menu</CODE>, предназначена
для создания основного или главного меню для всего файла и (что не
является обязательным свойством этой команды) для обновления каждой ноды
и каждого меню во всем Texinfo-файле.


<P>
Команда <CODE>texinfo-master-menu</CODE> является основной
командой:


<DL COMPACT>

<DT><KBD>C-c C-u m</KBD>
<DD>
<DT><KBD>M-x texinfo-master-menu</KBD>
<DD>
<A NAME="IDX92"></A>
Создает или обновляет главное меню, которое включает в себя все другие
меню (включая описания из меню, уже существующих к моменту создания
основного меню, если таковые есть).
При активизации этой команды с префиксным аргументом, с использованием
последовательности <KBD>C-u</KBD>, в начале создаются или обновляются все
обычные ноды и меню в текущем буфере перед созданием главного меню.
(See section <A HREF="texinfo_4.html#SEC43">Нода Top и главное меню</A>, для детального описания.)

Для функционирования <CODE>texinfo-master-menu</CODE> требуется, чтобы
Texinfo-файл содержал ноду `Top' и по крайней мере еще одну уровнем
ниже.
После обширного редактирования Texinfo-файла вы можете ввести следующую
команду:


<PRE>
C-u M-x texinfo-master-menu
или
C-u C-c C-u m
</PRE>

Эта команда полностью обновляет все ноды и меню за один проход.</DL>

<P>
Остальные основные команды обновления выполняют работу меньшего объема и
предназначены для человека, который обновляет ноду и меню в процессе
создания Texinfo-файла.


<P>
Далее перечислены оставшиеся основные команды обновления:

<DL COMPACT>

<DT><KBD>C-c C-u C-n</KBD>
<DD>
<DT><KBD>M-x texinfo-update-node</KBD>
<DD>
<A NAME="IDX93"></A>
Вставляет указатели на ноды `Next', `Previous' и `Up' для текущей ноды
(то есть модифицирует ближайшую предшествующую строку <CODE>@node</CODE>).
Если указатели `Next', `Previous' и `Up' уже были в строке
<CODE>@node</CODE>, то старые указатели удаляются и на их место помещаются
обновленные.  При запуске этой команды с аргументом (с префиксным
аргументом, <KBD>C-u</KBD>, при интерактивном вызове), команда действует на
все строки <CODE>@node</CODE> в выделенной области.
<DT><KBD>C-c C-u C-m</KBD>
<DD>
<DT><KBD>M-x texinfo-make-menu</KBD>
<DD>
<A NAME="IDX94"></A>
Создает или обновляет меню в ноде, где находится точка.  При вызове этой
команды с аргументом (с префиксным аргументом, <KBD>C-u</KBD>, при
интерактивном вызове), команда создает или обновляет меню для нод,
которые находятся внутри выделенной области.
Всякий раз, когда <CODE>texinfo-make-menu</CODE> обновляет существующее меню,
описания из этого меню включается в новое.  Это достигается с помощью
копирования описаний пунктов существующего меню в те пункты нового меню,
которые имеют те же имена нод.  Если пункты меню различаются, то
описания в новое меню не копируются.

<DT><KBD>C-c C-u C-e</KBD>
<DD>
<DT><KBD>M-x texinfo-every-node-update</KBD>
<DD>
<A NAME="IDX95"></A>
Вставляет указатели на ноды `Next', `Previous' и `Up' для каждой ноды в
данном буфере.
<DT><KBD>C-c C-u C-a</KBD>
<DD>
<DT><KBD>M-x texinfo-all-menus-update</KBD>
<DD>
<A NAME="IDX96"></A>
Создает или обновляет все меню в данном буфере.  С аргументом (с
префиксным аргументом, <KBD>C-u</KBD>, при интерактивном вызове), перед
работой над меню сначала вставляются или обновляются все указатели
на ноды.

Если существует главное меню, команда <CODE>texinfo-all-menus-update</CODE>
обновляет его; но она не создает новое главное меню, если его не
существует.  (Для этого используйте команду
<CODE>texinfo-master-menu</CODE>.)
При работе над документом, в котором главное меню не нужно, можно
сделать следующее:


<PRE>
C-u C-c C-u C-a
или
C-u M-x texinfo-all-menus-update
</PRE>

Это модифицирует все ноды и меню.
</DL>

<P>
Переменная <CODE>texinfo-column-for-description</CODE> определяет позицию, по
которой выровнены описания меню.  По умолчанию она равна 32, хотя часто
бывает полезно уменьшить ее до 24.  Вы можете установить эту переменную
с помощью команды <KBD>M-x edit-options</KBD>, (@xref{Edit Options, , Editing Variable Values, @external{emacs}, Руководство по GNU Emacs})
или с помощью команды <KBD>M-x set-variable</KBD> (@xref{Examining, , Examining and Setting Variables, @external{emacs}, Руководство по GNU
Emacs}).


<P>
Также, команда <CODE>texinfo-indent-menu-description</CODE> может
использоваться, чтобы выровнять существующие описания меню по
определенной позиции.  И наконец, если вы пожелаете, то вы можете
использовать команду <CODE>texinfo-insert-node-lines</CODE>, чтобы вставить в
файл недостающие строки <CODE>@node</CODE>. (See section <A HREF="texinfo_3.html#SEC20">Другие команды обновления</A>, для дополнительной информации.)




<H3><A NAME="SEC19" HREF="texinfo_toc.html#TOC19">Требования для обновления</A></H3>
<P>
<A NAME="IDX97"></A>
<A NAME="IDX98"></A>


<P>
Чтобы использовать команды обновления, вы должны организовать
Texinfo-файл иерархически, с главами, разделами, подразделами и так
далее.  Когда вы создаете иерархию руководства, не `спускайтесь' больше
чем на один уровень за один раз: вслед за нодой `Top' должна начинаться
глава, и ни в коем случае не раздел; вслед за главой следует раздел, но
не подраздел.  Однако, вы можете за один раз "подняться" на любое число
уровней, например от подраздела до главы.


<P>
Каждая строка <CODE>@node</CODE> за исключением строки для ноды `Top'
должна сопровождаться строкой с командой структурирования вроде
<CODE>@chapter</CODE>, <CODE>@section</CODE> или <CODE>@unnumberedsubsec</CODE>.


<P>
Каждая комбинация (строка <CODE>@node</CODE>)/(строка команды
структурирования) должна выглядеть подобно этой:


<PRE>
@node Комментарии, Минимум, Соглашения, Обзор
@comment  node-name, next,    previous,    up
@section Комментарии
</PRE>

<P>
Или подобно этой (без строки <CODE>@comment</CODE>):



<PRE>
@node Комментарии, Минимум, Соглашения, Обзор
@section Комментарии
</PRE>

<P>
В этом примере, `Комментарии' -- это имя и ноды, и раздела.  Следующая
нода называется `Минимум', а предыдущая называется `Соглашения'.  Раздел
`Комментарии' находится внутри ноды `Обзор', которая определена как
указатель`Up'.  (Вместо строки <CODE>@comment</CODE> вы можете также вписать
строку <CODE>@ifinfo</CODE>.)


<P>
Если файл имеет ноду `Top', то она должна назваться <SAMP>`top'</SAMP> или
<SAMP>`Top'</SAMP> и быть первой нодой в файле.


<P>
Команды обновления меню создают меню разделов внутри главы, меню
подразделов внутри раздела и так далее.  Это означает, что если вы
хотите получить меню глав, у вас должна быть нода `Top'.


<P>
Команда @command{makeinfo} может создать Info-файл из иерархически
организованного Texinfo-файла, в котором отсутствуют указатели `Next',
`Previous' и `Up'.  Как следствие этого, если вы уверены, что ваш
Texinfo-файл будет отформатирован с помощью @command{makeinfo}, команды
обновления меню вам не нужны.  (See section <A HREF="texinfo_21.html#SEC230">Создание Info-файла</A>, для более
детальной информации о <CODE>makeinfo</CODE>.)  Однако, и @command{makeinfo},
и команды <CODE>texinfo-format-...</CODE> требуют, чтобы вы вставили в
файл меню.




<H3><A NAME="SEC20" HREF="texinfo_toc.html#TOC20">Другие команды обновления</A></H3>

<P>
Кроме пяти основных команд обновления, режим Texinfo дает доступ к
несколько менее часто используемым командам обновления:

<DL COMPACT>

<DT><KBD>M-x texinfo-insert-node-lines</KBD>
<DD>
<A NAME="IDX99"></A>
Вставляет строки <CODE>@node</CODE> перед <CODE>@chapter</CODE> <CODE>@section</CODE>,
и другими командами структурирования, если они отсутствуют.

При запуске с аргументом (с префиксным аргументом, <KBD>C-u</KBD>, при
интерактивном вызове), команда <CODE>texinfo-insert-node-lines</CODE> не
только вставляет строки <CODE>@node</CODE>, но также вставляет и названия
глав или разделов в качестве имен соответствующих нод.  Кроме того, она
вставляет названия в качестве имен нод в уже существующие строки
<CODE>@node</CODE>, не имеющие имен.  Так как имена нод должны быть более
краткими, чем названия разделов или глав, вы должны вручную
отредактировать вставленные имена.
Например, для того, чтобы выделить весь буфер и везде вставить строки
<CODE>@node</CODE> и названия, следует сделать это:


<PRE>
C-x h C-u M-x texinfo-insert-node-lines
</PRE>

Эта команда вставляет в качестве имен нод в строках <CODE>@node</CODE>
названия разделов; команда <CODE>texinfo-start-menu-description</CODE>
(see section <A HREF="texinfo_3.html#SEC16">Быстрая вставка часто используемых команд.</A>)
вставляет названия как описания пунктов меню -- это разные действия.
Однако в обоих случаях вы должны отредактировать вставленный текст.

<DT><KBD>M-x texinfo-multiple-files-update</KBD>
<DD>
<A NAME="IDX100"></A>
Обновляет ноды и меню в документе, сформированном из отдельных файлов.
При запуске с <KBD>C-u</KBD> создает и вставляет главное меню во внешний
файл.  При запуске с числовым аргументом, как <KBD>C-u 2</KBD>, перед
созданием и вставкой главного меню во внешнем файле сначала модифицирует
все меню и все указатели `Next', `Previous' и `Up' во всех файлах.
Команда <CODE>texinfo-multiple-files-update</CODE> описана в приложении о
включаемых файлах.
See section <A HREF="texinfo_26.html#SEC254"><CODE>texinfo-multiple-files-update</CODE></A>.

<DT><KBD>M-x texinfo-indent-menu-description</KBD>
<DD>
<A NAME="IDX101"></A>
Выравнивает каждое описание в меню после точки по определенному столбцу.
Вы можете использовать эту команду, чтобы создать для описаний больше
места.  При запуске с аргументом (с префиксным аргументом, <KBD>C-u</KBD>,
при интерактивном вызове), команда
<CODE>texinfo-indent-menu-description</CODE> выравнивает каждое описание в
каждом меню в выделенной области.  Однако, эта команда не выравнивает
вторые и последующие строки многострочного описания.

<DT><KBD>M-x texinfo-sequential-node-update</KBD>
<DD>
<A NAME="IDX102"></A>
Вставляет имена нод, находящихся непосредственно перед и после текущей
ноды как `Next' или `Previous', независимо от иерархического положения
этих нод.  Это означает, что следующая нода подраздела может быть
следующей главой.  Последовательная структура нод полезна для романов и
других документов, которые следует читать последовательно.  (Однако,
команда Info <KBD>g *</KBD> позволяет вам просматривать файл последовательно,
а значит, такая упорядоченность нод не является строго необходимой).
При запуске с аргументом, команда <CODE>texinfo-sequential-node-update</CODE>
последовательно обновляет все ноды в области.
</DL>



<H2><A NAME="SEC21" HREF="texinfo_toc.html#TOC21">Форматирование для Info</A></H2>
<P>
<A NAME="IDX103"></A>
<A NAME="IDX104"></A>
<A NAME="IDX105"></A>
Режим Texinfo обеспечивает отдельные команды для форматирования части
или всего Texinfo-файла для Info.  Часто, когда вы пишете документ, вы
хотите отформатировать только часть файла -- то есть некую
область.

<P>
Вы можете использовать команду <CODE>texinfo-format-region</CODE> или
<CODE>makeinfo-region</CODE>, чтобы отформатировать область:

<DL COMPACT>

<DT><KBD>C-c C-e C-r</KBD>
<DD>
<A NAME="IDX106"></A>
 
<DT><KBD>M-x texinfo-format-region</KBD>
<DD>
<DT><KBD>C-c C-m C-r</KBD>
<DD>
<DT><KBD>M-x makeinfo-region</KBD>
<DD>
Форматирует текущую область для Info.
</DL>

<P>
Вы можете использовать команду <CODE>texinfo-format-buffer</CODE> или
<CODE>makeinfo-buffer</CODE> для того, чтобы отформатировать весь буфер:


<DL COMPACT>

<DT><KBD>C-c C-e C-b</KBD>
<DD>
<A NAME="IDX107"></A>
 
<DT><KBD>M-x texinfo-format-buffer</KBD>
<DD>
<DT><KBD>C-c C-m C-b</KBD>
<DD>
<DT><KBD>M-x makeinfo-buffer</KBD>
<DD>
Форматирует текущий буфер для Info.
</DL>

<P>
Например, после создания Texinfo-файла вы можете набрать следующее:



<PRE>
C-u C-c C-u m
или
C-u M-x texinfo-master-menu
</PRE>

<P>
Это модифицирует все ноды и меню.  Затем наберите следующее, чтобы
создать Info-файл:



<PRE>
C-c C-m C-b
или
M-x makeinfo-buffer
</PRE>

<P>
Для того, чтобы могли работать TeX или команды форматирования для
Info, в заголовке файла <EM>должна</EM> быть строка <CODE>@setfilename</CODE>.


<P>
See section <A HREF="texinfo_21.html#SEC230">Создание Info-файла</A>, для более подробного описания форматирования
для Info.



<H2><A NAME="SEC22" HREF="texinfo_toc.html#TOC22">Форматирование и печать</A></H2>
<P>
<A NAME="IDX108"></A>
<A NAME="IDX109"></A>
<A NAME="IDX110"></A>
<A NAME="IDX111"></A>
<A NAME="IDX112"></A>
<A NAME="IDX113"></A>
<A NAME="IDX114"></A>


<P>
Набор и печать Texinfo-файла -- процесс многоступенчатый, в котором вы
сначала создаете файл для печати (называемый DVI-файлом) и затем
печатаете его.  Кроме того, вы можете также создавать именные указатели.
Чтобы сделать это, вы должны выполнить команду @command{texindex} после
первичного выполнения команды @command{tex}; а затем выполнить команду
@command{tex} снова.  Или следует выполнить команду @command{texi2dvi},
которая сама автоматически создает именные указатели.
(see section <A HREF="texinfo_20.html#SEC216">Форматирование с помощью <CODE>texi2dvi</CODE></A>).


<P>
Часто, когда вы пишете документ, вы хотите вывести на печать только
часть файла, чтобы увидеть, как она будет выглядеть.  Для этой цели вы
можете использовать команду <CODE>texinfo-tex-region</CODE> или похожие
команды.  Используйте команду <CODE>texinfo-tex-buffer</CODE>, чтобы
отформатировать весь буфер.


<DL COMPACT>

<DT><KBD>C-c C-t C-b</KBD>
<DD>
<DT><KBD>M-x texinfo-tex-buffer</KBD>
<DD>
<A NAME="IDX115"></A>
Выполняет команду @command{texi2dvi} для буфера.  Помимо запуска TeX
для буфера, эта команда автоматически создает или обновляет именные
указатели.

<DT><KBD>C-c C-t C-r</KBD>
<DD>
<DT><KBD>M-x texinfo-tex-region</KBD>
<DD>
<A NAME="IDX116"></A>
Выполняет команду TeX для области.

<DT><KBD>C-c C-t C-i</KBD>
<DD>
<DT><KBD>M-x texinfo-texindex</KBD>
<DD>
Запускает @command{texindex}, чтобы отсортировать именные указатели
Texinfo-файла, отформатированного с помощью команды
<CODE>texinfo-tex-region</CODE>.  Команда <CODE>texinfo-tex-region</CODE> не
запускает @command{texindex} автоматически; она только выполняет команду
@command{tex}.  Вы должны запустить команду <CODE>texinfo-tex-region</CODE> во
второй раз после сортировки необработанного именных указателей командой
@command{texindex}.  (Обычно, когда форматируют область, именные
указатели не формируют; это делается только для всего буфера.  Сейчас,
когда существует команда @command{texi2dvi}, обсуждаемая команда
практически не нужна.)

<DT><KBD>C-c C-t C-p</KBD>
<DD>
<DT><KBD>M-x texinfo-tex-print</KBD>
<DD>
<A NAME="IDX117"></A>
Печатает файл (или часть файла), предварительно отформатированный с
помощью команды <CODE>texinfo-tex-buffer</CODE> или <CODE>texinfo-tex-region</CODE>.
</DL>

<P>
Для того, чтобы команда <CODE>texinfo-tex-region</CODE> или
<CODE>texinfo-tex-buffer</CODE> сработала, файл <EM>должен</EM> начинаться со
строки <SAMP>`\input texinfo'</SAMP> и должен включать строку <CODE>@settitle</CODE>.
Файл должен заканчиваться командой <CODE>@bye</CODE>, набранной в отдельной
строке.  (Когда вы используете команду <CODE>texinfo-tex-region</CODE>, вы
должны окружить <CODE>@settitle</CODE> строками start-of-header и
end-of-header.)


<P>
See section <A HREF="texinfo_20.html#SEC213">Форматирование и печать твердой копии</A>, для подробного описания других команд для TeX, вроде
<CODE>tex-show-print-queue</CODE>.




<H2><A NAME="SEC23" HREF="texinfo_toc.html#TOC23">Резюме по режиму Texinfo</A></H2>
<P>
Каждый набор команд режима Texinfo имеет привязки по умолчанию,
начинающиеся с одних ключей.  Все команды, созданные специально для
режима Texinfo, начинаются с <KBD>C-c</KBD>.  Ключи отчасти мнемонические.



<H3>Команды вставки</H3>

<P>
Команды вставки вызываются с помощью набора двух <KBD>C-c</KBD> и затем
первого символа вставляемой @-команды.  (Вероятно правильнее было бы
для мнемоничности использовать <KBD>C-c C-i</KBD>, от `custom insert', но
<KBD>C-c C-c</KBD> набирается гораздо быстрее.)



<PRE>
C-c C-c c       Вставить <SAMP>`@code'</SAMP>.
C-c C-c d       Вставить <SAMP>`@dfn'</SAMP>.
C-c C-c e       Вставить <SAMP>`@end'</SAMP>.
C-c C-c i       Вставить <SAMP>`@item'</SAMP>.
C-c C-c n       Вставить <SAMP>`@node'</SAMP>.
C-c C-c s       Вставить <SAMP>`@samp'</SAMP>.
C-c C-c v       Вставить <SAMP>`@var'</SAMP>.
C-c C-c {       Вставить фигурные скобки.
C-c C-c ]
C-c C-c }       Перейти за пределы огражденного скобками участка.
C-c C-c C-d     Вставить название раздела для ноды
                в месте для описания в пункте меню.
</PRE>


<H3>Визуализация структуры</H3>

<P>
Команда <CODE>texinfo-show-structure</CODE> часто используется внутри суженной
области.



<PRE>
C-c C-s         Перечислить все заголовки.
</PRE>


<H3>Команда обновления главного меню</H3>

<P>
Команда <CODE>texinfo-master-menu</CODE> создает главное меню; может
использоваться для того, чтобы модифицировать каждую ноду и каждое меню
в файле.



<PRE>
C-c C-u m M-x texinfo-master-menu
                Создать или обновить главное меню.
C-u C-c C-u m   С <KBD>C-u</KBD> в качестве префиксного
                аргумента, сначала создать или обновить
                все ноды и обычные меню, а затем
                создать главное меню.
</PRE>


<H3>Обновление указателей</H3>

<P>
Команды обновления указателей вызываются при наборе <KBD>C-c C-u</KBD> и
затем или <KBD>C-n</KBD> для <CODE>texinfo-update-node</CODE>, или <KBD>C-e</KBD> для
<CODE>texinfo-every-node-update</CODE>.



<PRE>
C-c C-u C-n     Обновить ноду.
C-c C-u C-e     Обновить все ноды в буфере.
</PRE>


<H3>Обновление меню</H3>

<P>
Команды обновления меню вызываются при наборе <KBD>C-c C-u</KBD>, и затем или
<KBD>C-m</KBD> для <CODE>texinfo-make-menu</CODE>, или <KBD>C-a</KBD> для
<CODE>texinfo-all-menus-update</CODE>.  Чтобы обновить и ноды, и меню в одно и
то же время, перед набором командной последовательности <KBD>C-c C-u
C-a</KBD> наберите <KBD>C-u</KBD>.



<PRE>
C-c C-u C-m     Создать или обновить меню.
C-c C-u C-a     Создать или обновить все
                меню в буфере.
C-u C-c C-u C-a С префиксным аргументом <KBD>C-u</KBD>,
                сначала создать или обновить все ноды,
                а затем создать или обновить все меню.
</PRE>


<H3>Форматирование для Info</H3>

<P>
Команды форматирования для Info, которые написаны на языке Emacs Lisp,
вызываются при наборе <KBD>C-c C-e</KBD> и затем или <KBD>C-r</KBD> для выделенной
области, или <KBD>C-b</KBD> для всего буфера.


<P>
Команды форматирования для Info, которые написаны на Си и основаны на
программе @command{makeinfo}, вызываются при наборе <KBD>C-c C-m</KBD> и
затем или <KBD>C-r</KBD> для выделенной области, или <KBD>C-b</KBD> для всего
буфера.


<P>
Использование команды <CODE>texinfo-format...</CODE>:



<PRE>
C-c C-e C-r     Форматировать область.
C-c C-e C-b     Форматировать буфер.
</PRE>

<P>
Использование @command{makeinfo}:



<PRE>
C-c C-m C-r     Форматировать область.
C-c C-m C-b     Форматировать буфер.
C-c C-m C-l     Обновить выходной буфер <CODE>makeinfo</CODE>.
C-c C-m C-k     Прекратить выполнение <CODE>makeinfo</CODE>.
</PRE>


<H3>Вывод и печать</H3>

<P>
Команды набора и печати через TeX вызываются при наборе
последовательности <KBD>C-c C-t</KBD> и затем другой управляющей
последовательности: <KBD>C-r</KBD> для <CODE>texinfo-tex-region</CODE>, <KBD>C-b</KBD>
для <CODE>texinfo-tex-buffer</CODE> и так далее.



<PRE>
C-c C-t C-r     Выполнить TeX для области.
C-c C-t C-b     Выполнить @command{texi2dvi} для буфера.
C-c C-t C-i     Выполнить @command{texindex}.
C-c C-t C-p     Напечатать DVI-файл.
C-c C-t C-q     Показать очередь заданий на принтер.
C-c C-t C-d     Удалить задание из очереди заданий на принтер.
C-c C-t C-k     Прекратить выполнение команды форматирования в TeX.
C-c C-t C-x     Выйти из приостановленного задания
                форматирования в TeX.
C-c C-t C-l     Обновить выходной буфер.
</PRE>


<H3>Другие команды обновления</H3>

<P>
Для вызова остальных команд обновления нет стандартных ключей, потому
что они используются редко.



<PRE>
M-x texinfo-insert-node-lines
               Вставить пропущенные строки <CODE>@node</CODE>
               в области.  С префиксным аргументом <KBD>C-u</KBD>,
               использует названия разделов, как имена нод.
M-x texinfo-multiple-files-update
               Обновить документ, состоящий из нескольких файлов.
               С префиксным аргументом  <KBD>C-u 2</KBD>, создать или
               обновить все ноды или меню во всех файлах документа.
M-x texinfo-indent-menu-description
               Выровнять описания.
M-x texinfo-sequential-node-update
               Вставить указатели на ноды в строгой
               последовательности.
</PRE>

<P><HR><P>
Go to the <A HREF="texinfo_1.html">first</A>, <A HREF="texinfo_2.html">previous</A>, <A HREF="texinfo_4.html">next</A>, <A HREF="texinfo_33.html">last</A> section, <A HREF="texinfo_toc.html">table of contents</A>.
</BODY>
</HTML>
