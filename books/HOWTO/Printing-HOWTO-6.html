<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Печать в Linux HOWTO (Linux Printing HOWTO) : Как это работает, основы</TITLE>
 <LINK HREF="Printing-HOWTO-7.html" REL=next>
 <LINK HREF="Printing-HOWTO-5.html" REL=previous>
 <LINK HREF="Printing-HOWTO.html#toc6" REL=contents>
</HEAD>
<BODY>
<A HREF="Printing-HOWTO-7.html">Следующий</A>
<A HREF="Printing-HOWTO-5.html">Предыдущий</A>
<A HREF="Printing-HOWTO.html#toc6">Содержание</A>
<HR>
<H2><A NAME="s6">6. Как это работает, основы</A>      </H2>

<P>Для того чтобы печать работала хорошо, вам необходимо понять как
работает система буферизации.
<P>
<P>
<H2><A NAME="ss6.1">6.1 PDQ</A>
        </H2>

<P>Pdq обозначает "Print, Don't Queue (Печатать не буферизуя)", и
способ который он использует для работы отражает этот
дизайн. Следующая последовательность событий происходит при
использовании для печати PDQ:
<P>
<UL>
<LI>Вы запускаете  pdq или xpdq, указав файл.</LI>
<LI>Вы указываете принтер.
</LI>
<LI>Вы указываете настройки для различных параметров и
аргументов определенных в файле драйвера PDQ для данного принтера
(двухстороннюю печать, количество копий, качество печати и так
далее).
</LI>
<LI>PDQ анализирует содержимое файла, который вы печатаете и
следует инструкциям записанным в файле драйвера PDQ, которые
описывают как обрабатывать ваши данные для печати на данном
принтере с заданными параметрами. 
</LI>
<LI>PDQ посылает обработанные данные на принтер через
указанный интерфейс (прямо на /dev/lp0, или сетевому демону LPD,
или через сеть на машину с  an Apple or
Microsoft system, or even to a fax machine).
</LI>
<LI>Если PDQ не может послать данные на принтер указанным
способом, то он запускает процесс в фоновом режиме, который
пытается произвести печать, до тех пор пока это не удастся, или
не будет исчерпан временной предел.</LI>
</UL>
<P>
<P>Во время этого процесса и после, состояние каждого задания может 
быть увидено с помощью xpdq. Задания, которые не смогли быть
выполнены показаны красным цветом и могут быть посланы заново.
<P>
<H2><A NAME="ss6.2">6.2 LPD</A>
        </H2>

<P>Lpd обозначает Line Printer Daemon (демон линейной печати), и
ссылается в разных контекстах и на программу-демона и на весь набор
программ которые работают с системой печати. Это:
<P>
<DL>
<DT><B><CODE>
<A HREF="http://www.picante.com/~gtaylor/pht/man/lpd.8.html">lpd</A></CODE></B><DD><P>Демон системы печати. Один из них работает для контроля действий
на машине, И запускается один на каждый принтер пока принтер
печатает.
<P>
<DT><B><CODE>
<A HREF="http://www.picante.com/~gtaylor/pht/man/lpr.1.html">lpr</A></CODE></B><DD><P>Пользовательская команда печати. Lpr контактирует с lpd и выдает
новое задание печати в очередь печати.
<P>
<DT><B><CODE>
<A HREF="http://www.picante.com/~gtaylor/pht/man/lpq.1.html">lpq</A></CODE></B><DD><P>Перечисляет
задания в очереди печати.
<P>
<DT><B><CODE>
<A HREF="http://www.picante.com/~gtaylor/pht/man/lpc.8.html">lpc</A></CODE></B><DD><P>Команда
контроля системы lpd. С помощью lpc вы можете останавливать,
начинать, переупорядочивать и т.п. очереди печати.
<P>
<DT><B><CODE>
<A HREF="http://www.picante.com/~gtaylor/pht/man/lprm.1.html">lprm</A></CODE></B><DD><P><CODE>lprm</CODE>
удаляет задание из очередей печати.
<P>
</DL>
<P>
<P>Теперь как это работает вместе? Когда система загружается,
стартует процесс под названием lpd. Он сканирует файл
/etc/printcap чтобы узнать какие принтера он будет
обслуживать. Каждый раз при запуске lpr, lpr контактирует с lpd
через именованный сокет <EM>/dev/printer</EM>, и передает lpd и
файл для печати и некоторую информацию о том кто печатает и как
печатать файл. Затем lpd печатает файл на соответствующем принтере
в порядке очереди.
<P>
<P>Система lp была спроектирована когда большинство принтеров было
линейными принтерами&nbsp;-- так что люди в большинстве печатали
чистый ascii. Как показало время, только небольшое добавление было
необходимо чтобы заставить lpd работать довольно хорошо с заданиями
сегодняшнего дня, которые часто идут в формате PostScript, или текст,
или dvi, или..
<P>
<P>
<HR>
<A HREF="Printing-HOWTO-7.html">Следующий</A>
<A HREF="Printing-HOWTO-5.html">Предыдущий</A>
<A HREF="Printing-HOWTO.html#toc6">Содержание</A>
</BODY>
</HTML>
