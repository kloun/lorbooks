<HTML>
<HEAD>
<meta http-equiv="Content-Language" content="ru">
<meta http-equiv="Content-Type" content="text/html; charset=koi8-r">

<TITLE>Small Memory mini-HOWTO</TITLE>
</HEAD>
<BODY LINK="#0000ff" VLINK="#800080">

<H1 ALIGN="CENTER">Мини-HOWTO: Малый объем памяти версия 0.1</H1>
<H1 ALIGN="CENTER">Todd Burgess, <a href="mailto:tburgess@uoguelph.ca">tburgess@uoguelph.ca</a></H1>
<h2 ALIGN="CENTER">Перевод: <a href="mailto:pax@asp-linux.com">Павел
Гашев</a>, <a href="http://www.asp-linux.com">SWSoft Pte Ltd.</a></h2>
<FONT FACE="Times New Roman"><H2>Введение</H2>
<P>В этом документе описывается, как запустить </FONT>Linux<FONT FACE="Times New Roman"> на машинах с небольшим объемом
оперативной памяти. Предположим, что в вашем случае установка дополнительной памяти не представляется возможной. В любом случае, есть много способов уменьшить использование памяти в
Linux.</P>
<P>Большинство дистрибутивов Linux рассчитаны на большой размер оперативной памяти. Они запускают много сервисов и предлагают множество возможностей, которые могут и не понадобиться. Снимая
большинство таких сервисов, вы можете реально освободить несколько мегабайт памяти.</P>
<P>Я работаю на машине 486DX2-66 с 12Мб оперативной памяти и разделом подкачки в 12Мб.</FONT><FONT FACE="Times New Roman"> Машина работает вполне
нормально уже три года и проработает еще несколько лет. :)</P>
<H2>Ядро </FONT>Linux</H2>
<FONT FACE="Times New Roman"><P>Все ядра </FONT>Linux<FONT FACE="Times New Roman">, которые поставляются вместе с дистрибутивами, раздуты и поддерживают множество возможностей, которые нам могут никогда не понадобиться. Если вы еще не пересобирали ядро,
то я настоятельно рекомендую это сделать. В этом документе содержатся рекомендации по сборке ядра. Впрочем, существуют множество прекрасных книг и руководств по </FONT>Linux<FONT FACE="Times New Roman">, которые также
рассказывают об этом.</P>
<P>Если вы пересобираете ядро, запомните, что совсем не надо использовать все возможности ядра. Например, как часто вы включаете поддержку PLIP в ядро? Как часто вы будете это использовать? Маленькое ядро требует меньше времени для загрузки, меньше памяти и меньше загружает процессор.</P>
<P>Другая важная вещь - модули. Лично я не использую их, так как считаю, что они слишком громоздки. Рекомендация проста: если хотите действительно раздуть ядро, то используйте модули.</P>
<H2>Виртуальные консоли</H2>
<P>Виртуальные консоли - это прекрасный путь освободить память. Большинство дистрибутивов </FONT>Linux<FONT FACE="Times New Roman"> запускают около 6 виртуальных консолей. В среднем, использование 6 консолей требует около 4 Мб памяти. Если убрать пару консолей, можно освободить пару мегабайт памяти.</P>
<P>Большинство пользователей используют только 3-4 консоли. Сколько консолей вы уберете - это ваше личное дело. Просто запомните, что чем меньше виртуальных консолей вы используете, тем больше памяти остается для работающих приложений.</P>
<P>Количество используемых консолей описывается в файле /etc/inittab . Для того, чтобы убрать виртуальную консоль: </P>
<OL>

<LI>Загрузите /etc/inittab в текстовый редактор</LI>
<LI>Найдите строки, похожие на: <BR>
c1:12345:respawn:/sbin/getty tty1 38400 linux <BR>
c2:12345:respawn:/sbin/getty tty2 38400 linux <BR>
Начиная с наибольшего номера (например c6), закомментируйте строку, поставив знак '#' в начале строки. Повторите этот шаг столько раз, сколько вам нужно. Запомните, каждая
  закомментированная строка убирает одну виртуальную консоль. </LI>
<LI>Перезапустите систему, чтобы изменения вступили в силу.</LI>
<H2>Демоны</H2>
<P>Большинство дистрибутивов Linux запускают множество демонов, которые никогда не используются. Чаще всего они запускаются через скрипты. Где находятся скрипты и какие из них запускаются, зависит от дистрибутива. В Slackware они
находятся в /etc/rc.d/rc.* .</P>
<P>Прежде чем продолжить, вам было бы неплохо уметь писать скрипты. Если же вы этого не умеете, могу предложить краткое введение в написание
скриптов.</P>
<P>Возьмем следующий скрипт:</P>
<P>#!/bin/sh<BR>
echo "Привет!"<BR>
# echo "Пока!"</P>
<P>В результате, на экран будет выведена строка "Привет!". Скрипт должен начинаться со строки "#!/bin/sh&quot;, после которой каждая строка запускается командным интерпретатором
так, как будто она была введена с клавиатуры (так что скрипт -
не что иное, как простые макросы клавиатуры).</P>
<P>Строки, начинающиеся с '#', являются комментариями и не исполняются. Большинство скриптов запуска демонов выглядят следующим образом:</P>
<P>if условие then <BR>
что-то <BR>
fi</P>
<P>Все, что мы хотим сделать - это закомментировать строки, между if и fi. </P>
<P>Для того чтобы найти скрипт, в котором запускается демон, нужно поискать скрипт, на предмет наличия в нем названия демона. Если я хочу найти, где запускается inetd в
Slackware, то должен сделать следующее: </P>
<OL>

</FONT><LI>cd /etc/rc.d</LI>
<LI>grep -n inetd rc.*</LI></OL>
</OL>

<H3>&nbsp;inetd</H3>
<FONT FACE="Times New Roman"><P>inetd поддерживает такие вещи, как telnet, ftp и talk. Если вы не используете свою машину как сервер или не хотите иметь удаленный доступ к своей машине,
то можете убрать inetd.</P>
</FONT><H3>lpd</H3>
<FONT FACE="Times New Roman"><P>lpd используется для печати файлов на принтере командой lpr. Если вы не пользуетесь печатью на своей машине,
то можете убрать lpd. Если, тем не менее, у вас есть принтер HP Deskjet, я настоятельно рекомендую установить пакет dj-printcap доступный на </FONT><A HREF="ftp://sunsite.unc.edu/pub/Linux/system/Printing/dj-printcap.tar.gz">ftp://sunsite.unc.edu/pub/Linux/system/Printing/dj-printcap.tar.gz</A> </P>
<FONT FACE="Times New Roman"><H3>nfsd и mountd</H3>
<P>Это два демона, образующие NFS сервер. Если вы не используете свою машину как NFS сервер,
то можете спокойно убрать эти два демона. </P>
</FONT><H3>portmap</H3>
<FONT FACE="Times New Roman"><P>Демон portmap используется для поддержки сервиса RPC. Если вы не используете NFS или любую другую программу, использующую
RPC, то можете убрать portmap. </P>
</FONT><H3>sendmail</H3>
<P>sen<FONT FACE="Times New Roman">dmail - это еще один демон, требующий достаточно много памяти. Если вы не используете свою машину в качестве почтового сервера,
то можете убрать sendmail. Если вы пользуетесь электронной почтой, то программу чтения почты можно настроить на другой почтовый сервер.</P>
<H3>другие</H3>
<P>Могут быть также другие демоны в системе, которые вам не нужны. Удалите их, если они не нужны. Вы должны
обязательно оставить только два демона. Это syslogd и klogd. </P>
<H2>Выводы</H2>
<P>Вышеперечисленное иллюстрирует шаги, достаточные для работы </FONT>Linux<FONT FACE="Times New Roman"> на компьютере с небольшой оперативной памятью. Надеюсь, я предоставил вам
информацию о некоторых возможных действиях, которые позволят увеличить количество свободной памяти в Linux.</P>
<P>Удачи</FONT>!<BR>
Todd Burgess<BR>
<A HREF="mailto:tburgess@uoguelph.ca">tburgess@uoguelph.ca</A><BR>
<A HREF="http://eddie.cis.uoguelph.ca/~tburgess">http://eddie.cis.uoguelph.ca/~tburgess</A> </P>
<hr>
<h2>Авторские права</h2>
<p>Авторские права на русский перевод этого
текста принадлежат © 2000 SWSoft Pte Ltd. Все права
зарезервированы.</p>
<p>Этот документ является частью проекта Linux
HOWTO.</p>
<p>Авторские права на документы Linux HOWTO
принадлежат их авторам, если явно не
указано иное. Документы Linux HOWTO, а также их
переводы, могут быть воспроизведены и
распространены полностью или частично на
любом носителе, физическом или электронном,
при условии сохранения этой заметки об
авторских правах на всех копиях.
Коммерческое распространение разрешается
и поощряется; но, так или иначе, автор текста
и автор перевода желали бы знать о таких
дистрибутивах.</p>
<p>Все переводы и производные работы,
выполненные по документам Linux HOWTO должны
сопровождаться этой заметкой об авторских
правах. Это делается в целях предотвращения
случаев наложения дополнительных
ограничений на распространение документов
HOWTO. Исключения могут составить случаи
получения специального разрешения у
координатора Linux HOWTO, с которым можно
связаться по адресу, приведенному ниже.</p>
<p>Мы бы хотели распространить эту
информацию по всем возможным каналам. Но
при этом сохранить авторские права и быть
уведомленными о всех планах
распространения HOWTO. Если у вас возникли
вопросы, пожалуйста, обратитесь к
координатору проекта Linux HOWTO по электронной
почте: <tt CLASS="EMAIL">&lt;<a HREF="mailto:linux-howto@metalab.unc.edu">linux-howto@metalab.unc.edu</a>&gt;</tt>
или к координатору русского перевода Linux HOWTO
компании SWSoft Pte Ltd. по адресу <tt CLASS="EMAIL">&lt;<a HREF="mailto:linux-howto@asplinux.ru">linux-howto@asplinux.ru</a>&gt;</tt></p>
<p>&nbsp;</BODY>
</HTML>
