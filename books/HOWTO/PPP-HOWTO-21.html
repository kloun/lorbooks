<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>PPP HOWTO: Использование услуг Интернет с динамическими IP адресами</TITLE>
 <LINK HREF="PPP-HOWTO-22.html" REL=next>
 <LINK HREF="PPP-HOWTO-20.html" REL=previous>
 <LINK HREF="PPP-HOWTO.html#toc21" REL=contents>
</HEAD>
<BODY>
<A HREF="PPP-HOWTO-22.html">Next</A>
<A HREF="PPP-HOWTO-20.html">Previous</A>
<A HREF="PPP-HOWTO.html#toc21">Contents</A>
<HR>
<H2><A NAME="s21">21. Использование услуг Интернет с динамическими IP адресами</A></H2>

<P>Если вы используете динамические IP адреса (и многие поставщики услуг дадут
вам только динамический IP адрес, если вы не захотите платить значительно 
больше для вашего соединения), то вы должны знать об ограничениях, которые при 
этом налагаются.
<P>Прежде всего, прекрасно будут работать только исходящие запросы на обслуживание.
То есть вы можете посылать email используя sendmail (если он у вас правильно 
установлен), скачивать по ftp файлы из удаленных мест, использовать finger
на другие машины, бродить по веб и т.д.
<P>В частности, вы можете отвечать на email, который вы сбросили на вашу машину, 
хотя вы отключены от линии. Почта будет просто находиться в вашей почтовой
очереди, пока вы не позвоните опять вашему ISP.
<P>Однако, ваша машина не соединена с Интернетом 24 часа в день и вдобавок не 
имеет один и тот же IP адрес при каждом соединении. Так что вы не можете
получить email, отправленный вашей машине, и очень трудно установить такой 
веб или ftp сервер, к которому могут обращаться ваши друзья! Относительно 
Интернет, ваша машина не существует как уникальная, постоянно доступная машина,
поскольку не имеет уникального IP адреса (помните - другие машины будут 
использовать этот IP адрес, когда они звонят вашему провайдеру).
<P>Если вы устанавливаете WWW (или любой другой сервер), это полностью неизвестно 
остальным пользователем Интернет, ЕСЛИ они не знают, что ваша машина сейчас
соединена с Интернет И каков ваш текущий IP адрес. Имеется ряд способов, 
которым они могут получать эту информацию, надо им об этом сообщить либо почтой,
либо хитрым использованием ".plan" файлов в shell аккаунта вашего поставщика 
услуг (полагая, что ваш поставщик позволяет доступ к shell и finger).
<P>Теперь, для большинства пользователей, это не проблема - все, что хочет 
большинство людей - это посылать и получать email (используя учетную запись
поставщика услуг) и бродить по WWW, ftp и другим серверам в Интернет. Если вы 
ДОЛЖНЫ осуществлять входящие соединения с вашим сервером, вы должны 
получить статический IP адрес. В качестве альтернативы вы можете исследовать 
методы, упомянутые выше ...
<P>
<P>
<H2><A NAME="ss21.1">21.1 Установка email</A>
</H2>

<P>Даже для динамических IP чисел, вы, конечно, можете настроить sendmail на 
вашей машине для отправки любого email, который вы написали локально.
<P>Конфигурация sendmail может быть трудной - так что этот документ не пытается 
сообщать вам, как это сделать. Однако, вы вероятно должны сконфигурировать 
sendmail так, чтобы ваш поставщик услуг Интернет был обозначен как ваш 
"smart host" (sendmail.cf - опция DS). (Для подробностей по настройке sendmail
см. документацию sendmail - и посмотрите конфигурации m4, которые поставляются с 
sendmail. Там имеется почти все, что может вам потребоваться).
<P>Имеются также превосходные книги по Sendmail (особенно 'библия' от O'Reilly и 
Ассоциации), но эти книги - почти массовое убийство для большинства 
пользователей!
<P>Как только вы сконфигурировали sendmail, вы вероятно захотите чтобы sendmail  
посылал любые сообщения, которые стоят в исходящей почтовой очереди, при
установлении PPP соединения. Чтобы сделать это, добавьте команду
<PRE>
sendmail -q &amp;
</PRE>

в ваш скрипт /etc/ppp/ip-up (см. ниже).
<P>Входящая почта - это проблема для динамических IP адресов. Способ обрабатывать 
ее:
<P>настройте вашего почтового агента пользователя так, чтобы вся почта была 
выпущена с заголовком "reply to", дающим ваш email адрес, выданный вашем 
поставщиком услуг Интернета.
<P>Если вы можете, вы должны также установить ваш FROM адрес, чтобы ваш адрес 
email, выданный вашим ISP был правилен.
<P>Используйте программы popclient, fetchmail, чтобы забрать вашу почту с вашего 
поставщика услуг. В качестве альтернативы, если ваш ISP использует IMAP, 
используйте почтового агента пользователя, умеющего работать с IMAP (типа 
pine).
<P>Вы можете автоматизировать этот процесс в случае модемного соединения, помещая
необходимые команды в скрипте /etc/ppp/ip-up (см. ниже).
<P>
<P>
<H2><A NAME="ss21.2">21.2 Установка локального сервера доменных имен</A>
Хотя вы можете совершенно спокойно использовать сервер доменных имен вашего ISP,также вы можете установить локальный кэширующий (вторичный) сервер имен, которыйуказывается в скрипте ip-up. Преимущество локального (кэширующего) сервера доменных имен в том, что он сэкономит вам время (и снизит трафик), если вы часто заходите на одни и те же места Интернет в течение долгого интерактивного сеанса.</H2>

<P>Настройка DNS в качестве кэширующего сервера имен (который использует строку 
"forwarders' в файле named.boot, указывающем на DNS вашего ISP) относительно 
проста. Книга O'Reilly (DNS и Bind) объясняет все, что вы хотите знать об этом.
<P>Имеется также DNS-HOWTO.
<P>Если вы работаете с маленькой LAN, которая может обращаться к Интернету через 
ваш Linux PC (используя IP Masquerade, например), то вероятно хорошая идея 
запустить локальный сервер имен (с директивой forwarders) пока связь 
установлена поскольку это минимизирует трафик и задержки, связанные с 
определением IP адреса по доменному имени.
<P>Тонкость сетевого этикета: спросите разрешение вашего ISP, прежде чем вы 
начнете использовать вторичный кэширующий сервер имен в домене вашего ISP. 
Правильно сконфигурированный ваш DNS не будет вызывать никаких проблем для 
вашего ISP вообще, но если вы настроите что-то неправильно, то это может 
привести к проблемам.
<HR>
<A HREF="PPP-HOWTO-22.html">Next</A>
<A HREF="PPP-HOWTO-20.html">Previous</A>
<A HREF="PPP-HOWTO.html#toc21">Contents</A>
</BODY>
</HTML>
