<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Мини-HOWTO: "Linux и питание от батарей" </TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.57"></HEAD
><BODY
CLASS="ARTICLE"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="AEN2"
>Мини-HOWTO: "Linux и питание от батарей"</A
></H1
><DIV
CLASS="AUTHORGROUP"
><A
NAME="AEN4"
></A
><H3
CLASS="AUTHOR"
><A
NAME="AEN5"
>Hanno Mueller</A
></H3
><DIV
CLASS="AFFILIATION"
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
>&nbsp;&nbsp;&nbsp;&nbsp;     hanno@lava.de
    <br>
&nbsp;&nbsp;&nbsp;</P
></DIV
></DIV
><H3
CLASS="CORPAUTHOR"
> Перевод: <A
HREF="mailto:denm@asp-linux.com"
TARGET="_top"
>Денис Дементьев</A
>,
 <A
HREF="http://www.asplinux.com"
TARGET="_top"
>SWSoft Pte Ltd.</A
>
 </H3
></DIV
><P
CLASS="PUBDATE"
>21 декабря 1997<BR></P
><DIV
><DIV
CLASS="ABSTRACT"
><A
NAME="AEN15"
></A
><P
></P
><P
>В этом документе приводится описание того, как, изменив некоторые
настройки, снизить потребление электроэнергии системой Linux. Это может
пригодиться тем, кто работает в Linux на переносном компьютере. В документе
также содержится общая информация по обслуживанию батарей. Если ваш Linux
установлен на настольном компьютере, то, наверное, вам незачем читать все
это.</P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Содержание</B
></DT
><DT
>1. <A
HREF="Battery-Powered.html#AEN17"
>Вступление</A
></DT
><DD
><DL
><DT
>1.1. <A
HREF="Battery-Powered.html#AEN20"
>Перед тем, как вы спросите</A
></DT
><DT
>1.2. <A
HREF="Battery-Powered.html#AEN27"
>О чем этот документ</A
></DT
><DT
>1.3. <A
HREF="Battery-Powered.html#AEN40"
>Путеводитель</A
></DT
><DT
>1.4. <A
HREF="Battery-Powered.html#AEN46"
>Отзывы</A
></DT
><DT
>1.5. <A
HREF="Battery-Powered.html#AEN54"
>Ответственность</A
></DT
><DT
>1.6. <A
HREF="Battery-Powered.html#AEN57"
>Copyright</A
></DT
><DT
>1.7. <A
HREF="Battery-Powered.html#AEN62"
>Авторские права</A
></DT
></DL
></DD
><DT
>2. <A
HREF="Battery-Powered.html#GENERALINFORMATION"
>Общая информация</A
></DT
><DD
><DL
><DT
>2.1. <A
HREF="Battery-Powered.html#AEN74"
>О батареях</A
></DT
><DT
>2.2. <A
HREF="Battery-Powered.html#AEN108"
>Сохранение энергии - очевидные вещи</A
></DT
></DL
></DD
><DT
>3. <A
HREF="Battery-Powered.html#AEN139"
>Улучшенное управление питанием (Advanced Power Management)</A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="Battery-Powered.html#AEN142"
>Что APM может сделать для вас</A
></DT
><DT
>3.2. <A
HREF="Battery-Powered.html#AEN154"
>Как включить поддержку APM под Linux</A
></DT
><DT
>3.3. <A
HREF="Battery-Powered.html#AEN167"
>Поддержка APM и драйвера PCMCIA</A
></DT
><DT
>3.4. <A
HREF="Battery-Powered.html#AEN176"
>Пакет apmd</A
></DT
><DT
>3.5. <A
HREF="Battery-Powered.html#AEN197"
>А что если мой лэптоп не поддерживает APM?</A
></DT
></DL
></DD
><DT
>4. <A
HREF="Battery-Powered.html#CHANGINGSOMEGENERALSYSTEMSETTINGS"
>Изменение некоторых настроек системы</A
></DT
><DD
><DL
><DT
>4.1. <A
HREF="Battery-Powered.html#AEN207"
>Демон crond и atrun</A
></DT
><DT
>4.2. <A
HREF="Battery-Powered.html#AEN228"
>Демон update / bdflush</A
></DT
><DT
>4.3. <A
HREF="Battery-Powered.html#AEN250"
>Демон syslogd</A
></DT
><DT
>4.4. <A
HREF="Battery-Powered.html#AEN262"
>Команда init</A
></DT
><DT
>4.5. <A
HREF="Battery-Powered.html#AEN273"
>Раздел подкачки</A
></DT
><DT
>4.6. <A
HREF="Battery-Powered.html#AEN289"
>Демон apache httpd</A
></DT
><DT
>4.7. <A
HREF="Battery-Powered.html#THEXFREE86PACKAGE"
>Пакет XFree86</A
></DT
><DT
>4.8. <A
HREF="Battery-Powered.html#AEN314"
>Редактор emacs</A
></DT
><DT
>4.9. <A
HREF="Battery-Powered.html#AEN325"
>Как найти другие пути оптимизации</A
></DT
></DL
></DD
><DT
>5. <A
HREF="Battery-Powered.html#AEN333"
>Приложение</A
></DT
><DD
><DL
><DT
>5.1. <A
HREF="Battery-Powered.html#AMESSAGETOLINUXDISTRIBUTORS"
>Послание дистрибьюторам Linux</A
></DT
><DT
>5.2. <A
HREF="Battery-Powered.html#CREDITS"
>Благодарности</A
></DT
><DT
>5.3. <A
HREF="Battery-Powered.html#AEN362"
>Об этом документе</A
></DT
></DL
></DD
></DL
></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN17"
>1. Вступление</A
></H1
><P
>"Для детей от 6 лет. Батарейки входят в комплект".&#13;</P
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN20"
>1.1. Перед тем, как вы спросите</A
></H2
><P
>В этом документе дается описание того, как оптимизировать Linux, уже
установленный на переносной компьютер, а не как его устанавливать. Если вам
нужна помощь по установке Linux, то читайте <I
CLASS="EMPHASIS"
>HOWTO:
"Установка"</I
> или руководство вашего поставщика.</P
><P
>Здесь также нет информации о том, как использовать источник бесперебойного питания
(UPS) или демон <TT
CLASS="LITERAL"
>powerd</TT
> (хотя ИБП - это большая батарея). По этому вопросу
читайте <I
CLASS="EMPHASIS"
>UPS-HOWTO</I
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN27"
>1.2. О чем этот документ</A
></H2
><P
>Все больше людей в наше время покупает переносные компьютеры, и все больше людей устанавливает на них Linux.</P
><P
>Установка и использование Linux на переносной компьютер обычно не вызывает проблем - попробуйте сами. В отличие от большинства других операционных систем, Linux все еще поддерживает очень старое аппаратное обеспечение и прекрасно работает на нем, так что установка Linux на ваш устаревший лэптоп может вдохнуть в него новую жизнь.</P
><P
>Если вам нужна помощь по установке Linux на лэптоп, или у вас есть вопросы
по аппаратному обеспечению переносных компьютеров, то вы можете взглянуть
на прекрасную страницу <I
CLASS="EMPHASIS"
>Linux Laptop webpage</I
> по адресу
http://www.cs.utexas.edu/users/kharker/linux-laptop/. 
<TT
CLASS="LITERAL"
><A
HREF="http://www.cs.utexas.edu/users/kharker/linux-laptop/"
TARGET="_top"
>http://www.cs.utexas.edu/users/kharker/linux-laptop/</A
></TT
>
&#13;</P
><P
>В этом документе акцентируется внимание на одной общей для всех переносных систем
проблеме - <I
CLASS="EMPHASIS"
>потребление электроэнергии</I
>.</P
><P
>Пока что я не нашел дистрибутива Linux, включающего в себя конфигурацию,
<I
CLASS="EMPHASIS"
>оптимизированную</I
> под переносной компьютер. Так как я нигде не мог найти
информацию на эту тему, то начал собирать простые, но эффективные уловки,
помогающие уменьшить потребление энергии батарей, что, в свою очередь,
увеличивает время работы системы.</P
><P
>(Небольшое отступление. Я получил от читателя жалобу на то, что эти
подсказки не очень то помогли его лэптопу. Вообще, это все работает? Да, но
не ждите чудес. Я смог увеличить время работы моего лэптопа с 90 до более
чем 120 минут.)&#13;</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN40"
>1.3. Путеводитель</A
></H2
><P
>Если вы - профессионал в лэптопах, то можете пропустить раздел "<A
HREF="Battery-Powered.html#GENERALINFORMATION"
><I
>Общая информация</I
></A
>". Если вы -
профессионал в Linux, то можете сразу читать раздел "<A
HREF="Battery-Powered.html#CHANGINGSOMEGENERALSYSTEMSETTINGS"
><I
>Изменение некоторых настроек системы</I
></A
>". Если вы дистрибьютор
Linux, то, пожалуйста, прочитайте "<A
HREF="Battery-Powered.html#AMESSAGETOLINUXDISTRIBUTORS"
><I
>Послание дистрибьюторам Linux</I
></A
>".</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN46"
>1.4. Отзывы</A
></H2
><P
>Ваши отзывы приветствуются. Пожалуйста шлите комментарии на 
<TT
CLASS="LITERAL"
><A
HREF="mailto:hanno@lava.de"
TARGET="_top"
>hanno@lava.de</A
></TT
>. Работает ли это на вашей системе? Есть ли у вас новые подсказки? Встречаются ли в тексте устаревшие ссылки или адреса?&#13;</P
><P
>К сожалению, я не смогу ответить вам на вопросы об отдельных моделях переносных компьютеров. Я не претендую на звание гуру в переносных компьютерах, просто у меня есть один лэптоп, и я хочу поделиться собранной мной информацией. Сходите на страничку Linux Laptop webpage, может быть кто-то еще создал страничку, посвященную вашей модели. Обратитесь в службу поддержки вашего производителя. Или загляните в телеконференцию 
<TT
CLASS="LITERAL"
><A
HREF="news:comp.sys.laptops"
TARGET="_top"
>comp.sys.laptops</A
></TT
>
и спросите там.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN54"
>1.5. Ответственность</A
></H2
><P
>Все методы, описанные здесь, были опробованы мной, и прекрасно работают
(если не оговорено иначе) на моем лэптопе. Тем не менее, я не гарантирую,
что один из них не разрушит или не повредит вашу систему. Жизнь - довольно
опасная штука, так что делайте резервные копии важных файлов, если хотите
поиграться с настройками Linux. Я не несу никакой ответственности за потерю
данных, если что-то пойдет не так. Другими словами: не предъявляйте мне
судебных исков. Благодарю.&#13;</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN57"
>1.6. Copyright</A
></H2
><P
>This document shall be distributed under the standard
HOWTO-copyright notice, found in the HOWTO folder at
<TT
CLASS="LITERAL"
><A
HREF="http://sunsite.unc.edu/mdw/linux.html"
TARGET="_top"
>http://sunsite.unc.edu/mdw/linux.html</A
></TT
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN62"
>1.7. Авторские права</A
></H2
><P
>Авторские права на русский перевод этого текста принадлежат &copy; 2000 SWSoft Pte Ltd.
Все права зарезервированы.</P
><P
>Этот документ является частью проекта Linux HOWTO.</P
><P
>Авторские права на документы Linux HOWTO принадлежат их авторам, если явно
не указано иное. Документы Linux HOWTO, а также их переводы, могут
быть воспроизведены и распространены полностью или частично на любом
носителе, физическом или электронном, при условии сохранения этой заметки об
авторских правах на всех копиях. Коммерческое распространение разрешается и
поощряется; но, так или иначе, автор текста и автор перевода желали бы знать о
таких дистрибутивах.</P
><P
>Все переводы и производные работы, выполненные по документам Linux HOWTO,
должны сопровождаться этой заметкой об авторских правах. Это делается в
целях предотвращения случаев наложения дополнительных ограничений на
распространение документов HOWTO. Исключения могут составить случаи
получения специального разрешения у координатора Linux HOWTO, с которым
можно связаться по адресу приведенному ниже.</P
><P
>Мы бы хотели распространить эту информацию по всем возможным каналам. Но
при этом сохранить авторские права и быть уведомленными о всех планах
распространения HOWTO. Если у вас возникли вопросы, пожалуйста, обратитесь
к координатору проекта Linux HOWTO по электронной почте:
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:linux-howto@metalab.unc.edu"
>linux-howto@metalab.unc.edu</A
>&#62;</TT
> или к координатору русского
перевода Linux HOWTO компании SWSoft Pte Ltd. по адресу
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:linux-howto@asplinux.ru"
>linux-howto@asplinux.ru</A
>&#62;</TT
></P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="GENERALINFORMATION"
>2. Общая информация</A
></H1
><P
>В этом разделе дается информация о некоторых технических деталях
использования батарей переносных компьютеров, а также общие подсказки по
сохранению энергии батарей. Этот раздел не является специфичным для Linux,
и если вы опытный пользователь переносных компьютеров, то, наверное, все
это уже знаете.&#13;</P
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN74"
>2.1. О батареях</A
></H2
><P
>(Пожалуйста, обратите внимание на раздел "<A
HREF="Battery-Powered.html#CREDITS"
><I
>Благодарности</I
></A
>".)&#13;</P
><P
>В данный момент для переносных компьютеров в основном используются три типа батарей.</P
><P
>&#13;<P
></P
><UL
><LI
><P
><I
CLASS="EMPHASIS"
>NiCd</I
> (никель-кадмиевые) батареи многие годы были
стандартом, но сейчас они устарели, и более не используются в новых
лэптопах. Они тяжелы и очень склонны к "эффекту памяти". При неполной
перезарядке разряженной NiCd батареи, она "запоминает" старый заряд, и при
следующем использовании уровень заряда будет равен старому.</P
><P
>Эффект памяти вызван кристаллизацией вещества батареи и может уменьшить
время жизни батареи, или даже вывести ее из строя. Чтобы его избежать,
необходимо полностью разряжать и затем полностью заряжать батарею, как
минимум, раз в несколько недель. (Небольшое отступление, касающееся эффекта
памяти. James Youngman предложил довольно радикальный метод - э-э-э -
"починки" батарей: "Если ваша NiCd батарея страдает от эффекта памяти, то
извлеките ее из компьютера, поднимите примерно на 30 см от
поверхности стола или пола и бросьте (только убедитесь, что она приземлится
ровно)." По его словам, при этом наслоения внутри батареи, вызывающие
эффект памяти, отламываются. "Я не знаю, будет ли это работать не
с NiCd батареями.")
&#13;</P
><P
>Кадмий - очень опасный яд, но легко может практически полностью переработан, если вы возвратите его продавцу.</P
><P
>На случай, если вам интересны некоторые характеристики NiCd:</P
><P
>&#13;<PRE
CLASS="SCREEN"
>Напряжение элемента: 1,2 В
Энергоемкость / массу: 40 Вч/кг
Энергоемкость / объем: 100 Вч/л
Макс. энергоемкость: 20 Вч
Температура зарядки: от 10 до 35 C (от 50 до 95 F)
Температура разрядки: от -20 до 50 C (от -5 до 120 F)
Температура хранения: от 0 до 45 C (от 30 до 115 F)</PRE
>&#13;</P
></LI
><LI
><P
>&#13;<I
CLASS="EMPHASIS"
>NiMh</I
> (никель-метал-гидридные) батареи в данный момент являются стандартом и используются в большинстве недорогих лэптопов. Они меньше размером и меньше, чем NiCd, подвержены эффекту памяти. &#13;</P
><P
>Впрочем, с этими батареями возникаю проблемы при очень высоких или очень
низких температурах. И, хотя в них используются менее опасные и неядовитые
вещества, на данный момент они не могут быть полностью переработаны (но,
похоже, в будущем ситуация перемениться к лучшему).</P
><P
>Характеристики NiMh:</P
><P
>&#13;<PRE
CLASS="SCREEN"
>Напряжение элемента: 1,2 В
Энергоемкость / массу: 55 Вч/кг
Энергоемкость / объем: 160 Wh/l
Макс. энергоемкость 35 Вч
Температура зарядки: от 10 до 35 C (от 50 до 95 F)
Температура разрядки: от 0 до 45 C (от 30 до 115 F)
Температура хранения: от 0 до 30 C (от 30 до 85 F)</PRE
>&#13;</P
></LI
><LI
><P
>Новые высокопроизводительные батареи используют <I
CLASS="EMPHASIS"
>LiIon</I
> (литий-ионную) технологию. Теоретически, у этих батарей отсутствует эффект памяти, но иногда схожие эффекты у них наблюдаются. Составляющие вещества безопасны для окружающей среды, но также должны быть возвращены для переработки. </P
><P
>Характеристики LiIon:</P
><P
>&#13;<PRE
CLASS="SCREEN"
>Напряжение элемента: 3,6 В
Энергоемкость / массу: 100 Вч/кг
Энергоемкость / объем: 230 Wh/l
Макс. энергоемкость 60 Вч
Температура зарядки: от 0 до 45 C (от 30 до 115 F)
Температура разрядки: от -20 до 60 C (от -5 до 140 F)
Температура хранения: от -20 до 60 C (от -5 до 140 F)</PRE
>&#13;</P
></LI
></UL
>&#13;</P
><P
>Нельзя менять тип батарей, даже если они выглядят одинаково - процесс зарядки различных типов не совпадает.</P
><P
>Некоторые производители включают схему перезарядки во внешний блок питания
компьютера, поэтому избегайте покупки нового блока питания, взамен старого.
Хороший признак внешнего блока перезарядки - многожильный шнур
блока питания со специальным разъемом.</P
><P
>Другие производители устанавливают блок перезарядки внутри компьютера, где
пользователи не могут просто заменить его на более новый. Если шнур вашего
блока питания - двужильный (как мой), то, скорее всего, блок перезарядки
находится внутри.</P
><P
>Если вы сомневаетесь, то обратитесь к производителю вашего лэптопа с вопросом о замене батарей на более современный тип.</P
><P
>Не используемые в течение долгого времени, батареи постепенно разряжаются.
Даже при самом тщательном уходе батарея требует замены после 500 - 1000
перезарядок. Тем не менее, не рекомендуется работать на лэптопе, при питании
от сети, совсем без батарей - они часто используются, как большие
конденсаторы для защиты компьютера от скачков напряжения в сети.</P
><P
>Производители имеют привычку менять форму батарей каждые несколько месяцев, поэтому через пару лет найти новую батарею для вашего компьютера будет практически невозможно. Купите запасную батарею сейчас - пока они не кончились.&#13;</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN108"
>2.2. Сохранение энергии - очевидные вещи</A
></H2
><P
>Есть несколько очевидных правил, помогающих снизить потребление электроэнергии. Ну, может быть, не столь очевидных, потому что не так уж много людей следуют им...</P
><P
>&#13;<P
></P
><UL
><LI
><P
>Уменьшайте подсветку вашего дисплея или выключайте его, когда он вам не нужен. Кстати, дисплеи с активной матрицей tft потребляют меньше электроэнергии, чем с пассивной матрицей dstn (теперь у вас есть прекрасное оправдание тому, что вы купили дешевый лэптоп...).</P
><P
>David Bateman сообщил мне, что использование ЭЛТ-дисплея, при работе на
батареях (с выключенным дисплеем лэптопа), увеличивает время работы примерно
на 30%: "Не очень полезные сведения, так как если у вас есть, куда включать ЭЛТ
дисплей, то почему бы не включить и лэптоп.")</P
></LI
><LI
><P
>Насколько вы используете процессор? Я сомневаюсь, что вы будете заниматься
чем-нибудь, кроме редактирования текстов в дороге (по крайней мере, я не
занимаюсь сборкой ядра Linux). При работе на батареях снижение скорости
работы процессора снизит потребление энергии. Впрочем, немногие лэптопы
имеют возможность переключать скорость работы процессора между нормальной и
пониженной.</P
></LI
><LI
><P
>Вентилятор процессора (если таковой у вас установлен). Многие современные
лэптопы имеют опцию bios, называемую "контроль охлаждения" (cooling
control). Эта опция позволяет вам выбирать, в случае перегрева процессора,
между охлаждением его небольшим вентилятором (установка
"производительность"(performance)) и снижением тактовой частоты (установка
"понижение" (silence)). Для увеличения времени работы на батареях выберите
"понижение".</P
></LI
><LI
><P
>Избегайте использования внешних устройств (принтера, ЭЛТ дисплея, ZIP
дисковода, портативной камеры и т. п.), при работе с компьютером на
батареях. При подключении обычного струйного принтера, время работы моего
компьютера уменьшилось со 120 до 20 минут.</P
></LI
><LI
><P
>Избегайте использования без необходимости встроенных устройств: дисковода, жесткого диска, привода компакт-дисков. Особенно последнего - доступ к нему сильно уменьшает время работы на батареях.</P
></LI
><LI
><P
>Pcmcia устройства также потребляют много энергии, так что не оставляйте ваш
модем или сетевую карту подключенными, если они не используются. Впрочем,
платы разных производителей потребляют разное количество энергии, так что
смотрите их спецификации перед покупкой (некоторые карты никогда не
выключаются сами, даже если они не используются).</P
><P
>(Кстати, я недавно прочитал, что pcmcia-карты - это
очень большая проблема для Windows CE PalmTop. Они потребляют
столько энергии, что маленькие батарейки этих микрокомпьютеров
должны заменяться каждые несколько минут...)</P
></LI
><LI
><P
>Используйте простое программное обеспечение. Полновесное мультимедиа-приложение гораздо больше загрузит систему/жесткий диск/привод компакт дисков, нежели простенький текстовый редактор. 
(Между прочим, я недавно прочитал, что pcmcia карты - самая большая проблема для палмтопов, работающих под управлением Windows CE. Они потребляют так много энергии, что маленькие батарейки этих малышек приходится заменять буквально через несколько минут...)</P
></LI
><LI
><P
>Grant Taylor дал следующую подсказку для тех, кто желает обновить свою систему: "Новые версии некоторых обновляемых компонентов потребляют меньше энергии. Например IBM Travelstar 2.5 дюймовый 1.6-гигабайтный IDE жесткий диск потребляет на 20 процентов меньше энергии, чем 500 мегабайтный жесткий диск toshiba, с которым поставлялся мой лэптоп".</P
></LI
><LI
><P
>Если вы все собираетесь купить лэптоп, и для вас важна продолжительность
работы на батареях, то не покупайте компьютер с кэшем 2-го уровня. Он на 10
- 20 % быстрее, что намного лучше для мультимедиа приложений, но потребляет
намного больше энергии. Бьорн Криус (Bjoern Kriews) сообщил мне, что у него
имеется два почти одинаковых лэптопа: один - с кэшем, работает 2ч 30мин;
другой - без кэша, работает 4ч 30 мин.</P
><P
>Если у вас уже стоит кэш второго уровня, то, возможно, вам стоит выключить его. Попробуйте и напишите мне, что у вас вышло.</P
></LI
><LI
><P
>Другая подсказка для тех, кто еще не купил лэптоп - не покупайте последнюю,
самую быструю модель. Как правило, компьютеры более старого поколения через
некоторое время оптимизируются производителями без какого-либо
предупреждения. "Новые" версии старых моделей зачастую меньше греются и
потребляют меньше энергии, чем первые.</P
><P
>Кроме того, есть франкенштейновские лэптопы, основанные на процессорах, не
оптимизированных под переносные компьютеры. Как я писал в мае 97-го,
лэптопы нового поколения, основанные на pentium-200, работали на батареях
около 20 минут и так нагревались, что могли сжечь компьютер. Когда я писал
вторую версию документа в октябре 97-го, лэптопы на pentium-233 работали на
батареях более двух часов. Делайте выводы.</P
></LI
></UL
>&#13;</P
><P
>Итак, идея вам понятна. Большинство этих ограничений наверняка избавят вас от необходимости каких-либо серьезных изменений в вашей Linux системе. (Лучший способ сохранить энергию батарей - это... не делать вообще ничего. При этом время работы батарей моего лэптопа увеличилось почти до 100 процентов.)</P
><P
>Итак, займемся рассмотрением более полезных мер по сохранению энергии, которые не мешали бы вашей работе.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="AEN139"
>3. Улучшенное управление питанием (Advanced Power Management)</A
></H1
><P
>Переносные компьютеры, в общем случае, (и многие настольные) поддерживают apm
- "advanced power management" (улучшенное управление питанием). В этом разделе
рассказывается о том, как включить поддержку apm в ядре Linux. Те, кто имеет богатый
опыт работы с Linux, могут посчитать этот раздел довольно скучным и
предпочтут пропустить его.&#13;</P
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN142"
>3.1. Что APM может сделать для вас</A
></H2
><P
>Я не буду вдаваться здесь в детали - за более подробной информацией обращайтесь к 
<I
CLASS="EMPHASIS"
>Linux APM drivers page</I
> по адресу
<TT
CLASS="LITERAL"
><A
HREF="http://www.cs.utexas.edu/users/kharker/linux-laptop/apm.html"
TARGET="_top"
>http://www.cs.utexas.edu/users/kharker/linux-laptop/apm.html</A
></TT
>
Все, что вам нужно знать - это то, как с помощью apm процессор может
указать bios, что в данный момент не происходит ничего интересного, так что
bios может немножко позаботиться о сохранении энергии: снизить тактовую
частоту, выключить жесткий диск и дисплей, ну и т.п.&#13;</P
><P
>Apm отвечает за режимы "ожидания" (suspend) и "сна" (sleep), а также
за режим "выключения диска" (suspend to disk) или "состояния ожидания"
(hibernation). Другая замечательная, хотя и не столь важная возможность - с
помощью apm <TT
CLASS="LITERAL"
>shutdown -h</TT
> не только остановит вашу систему, но и выключит
компьютер.</P
><P
>(Кстати, большинство систем Linux вставляют <TT
CLASS="LITERAL"
>shutdown -r</TT
> в файл <TT
CLASS="LITERAL"
>/etc/inittab</TT
>
и связывают его с нажатием control-alt-delete. Я предпочитаю вместо -r
прописывать -h, так что нажатие известной комбинации клавиш просто
выключает мой компьютер.)</P
><P
>Не все производители корректно реализуют apm bios, так что на некоторых лэптопах могут возникать проблемы с драйверами apm под Linux (если это относится к вашей машине, то, скорее всего, она будет зависать либо при загрузке системы, либо при выходе из режима ожидания). Если вы не уверены, посмотрите информацию про вашу модель на Linux laptop page.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN154"
>3.2. Как включить поддержку APM под Linux</A
></H2
><P
>Это просто - достаточно перекомпилировать ядро Linux. Если вы не знаете, как это сделать - посмотрите Kernel-HOWTO.</P
><P
>Ниже приведены значения опций ядер 2.0.30 и выше, установленные по умолчанию (раздел "символьные устройства"):</P
><P
>&#13;<PRE
CLASS="SCREEN"
>Поддержка APM BIOS (Advanced Power Management BIOS support): Да (Yes)
Игнорировать USER SUSPEND (Ignore USER SUSPEND): Нет (No)
Включать управление питанием при загрузке (Enable PM at boot time): Да (Yes)
Выполнять idle вызовы процессора при простое (Make CPU Idle calls when idle): Да (Yes)
Разрешить выключение консоли с помщью APM (Enable console blanking using APM): Да (Yes)
Выключать питание при завершении работы системы (Power off on shutdown): Да (Yes)</PRE
>&#13;</P
><P
>Прочитайте справку по тем или иным опциям конфигурации - она подробно объясняет, что делает каждая опция, так что я не буду повторяться.</P
><P
>Если ваш компьютер не полностью поддерживает стандарт apm bios, то
включение некоторых из этих опций может привести к сбою системы. Проверьте
все опции после сборки нового ядра, чтобы убедиться, все ли работает.</P
><P
><A
NAME="SIDENOTEABOUTCONSOLEBLANKING"
></A
>Примечание о выключении консоли:
Дэвид Бэйтмэн (David Bateman) сообщил мне, что эту опцию включать не стоит,
так как в текущей версии XFree 3.2 с ней возникают проблемы: "Симптомы
следующие: при старте X экран выключается. Исправляется это простым
нажатием клавиши. Маленькая, но досадная проблема. В следующей версии XFree
будет реализована нормальная поддержка DPMS для микросхем лэптопов,
включающая код для выключения ЖКД (LCD). Читайте руководство (manpage) по
<TT
CLASS="LITERAL"
>xset</TT
> в XFree 3.2A." Дэвид также заметил, что продолжительность жизни
подсветки монитора зависит от количества ее включений и выключений: "Так
что ищите компромисс между временем жизни батареи и временем жизни
подсветки.")&#13;</P
><P
>(<I
CLASS="EMPHASIS"
>Обновление: </I
> С XFree 3.3 эта проблема на моем лэптопе осталась. Мне сказали, что она будет исправлена в одной из следующих версий ядра.)</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN167"
>3.3. Поддержка APM и драйвера PCMCIA</A
></H2
><P
>После перекомпилирования ядра не забудьте перекомпилировать драйвера pcmcia.</P
><P
>Готовые драйвера pcmcia, поставляемые с большинством дистрибутивов, не имеют поддержки apm, из-за чего bios не может дать команду на выключение вашим PCMCIA-картам.</P
><P
>Кроме того, драйвера нужно перекомпилировать при обновлении версии ядра, если старое ядро было скомпилировано с выключенной поддержкой информации о версиях модулей (эта опция находится в разделе "поддержка загружаемых модулей" (loadable module support) конфигурации ядра).</P
><P
>За более подробной информацией по компилированию драйверов обращайтесь к PCMCIA-HOWTO или к 
<I
CLASS="EMPHASIS"
>Linux PCMCIA drivers homepage</I
> на
<TT
CLASS="LITERAL"
><A
HREF="http://hyper.stanford.edu/HyperNews/get/pcmcia/home.html"
TARGET="_top"
>http://hyper.stanford.edu/HyperNews/get/pcmcia/home.html</A
></TT
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN176"
>3.4. Пакет apmd</A
></H2
><P
>После того, как вы включили поддержку APM, скачайте пакет <TT
CLASS="LITERAL"
>apmd</TT
> с <I
CLASS="EMPHASIS"
>Linux APM
drivers page</I
>. Он не является обязательным, но в нем есть несколько полезных
утилит. Демон <TT
CLASS="LITERAL"
>apmd</TT
> ведет журнал состояния батарей и посылает
предупреждение, когда они садятся. Команда <TT
CLASS="LITERAL"
>apm</TT
> может перевести систему в
режим ожидания, а <TT
CLASS="LITERAL"
>xapm</TT
> показывает состояние ваших батарей.</P
><P
>(Кстати, если у вас возникают проблемы с pcmcia картами при возврате из
режима ожидания, то попробуйте альтернативный пакет <TT
CLASS="LITERAL"
>apmd</TT
> с
<TT
CLASS="LITERAL"
><A
HREF="http://www.cut.de/bkr/linux/apmd/apmd.html"
TARGET="_top"
>http://www.cut.de/bkr/linux/apmd/apmd.html</A
></TT
>. Он выгружает драйвер pcmcia
перед переходом в режим ожидания и загружает его при возобновлении
нормальной работы.)</P
><P
>Grant Taylor немного поэкспериментировал с пакетом <TT
CLASS="LITERAL"
>apmd</TT
> и дал следующие полезные подсказки.</P
><P
>Он обнаружил, что жесткий диск его лэптопа забывает параметр <TT
CLASS="LITERAL"
>hdparm -S</TT
>
(время до перехода диска в режим ожидания) при выходе из режима ожидания:
"Я подправил <TT
CLASS="LITERAL"
>apmd</TT
> так, чтобы он сбрасывал этот параметр при каждом выходе
из режима ожидания. Это важная вещь, хотя и системно-зависимая..."</P
><P
>(Примечание: На моем лэптопе время до перехода жесткого диска в режим ожидания контролируется (и сбрасывается в случае необходимости) bios-ом, так что я не могу проверить, является ли эта маленькая проблема системно-зависимой. Если это так, пошлите мне сообщение.)</P
><P
>Grant также использовал хорошую уловку для гашения экрана 
<A
HREF="Battery-Powered.html#THEXFREE86PACKAGE"
>XFree86</A
>, с помощью <TT
CLASS="LITERAL"
>apmd</TT
></P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN197"
>3.5. А что если мой лэптоп не поддерживает APM?</A
></H2
><P
>Если в bios вашего компьютера нет настроек сохранения энергии (хотя даже
старые лэптопы, не поддерживающие apm, позволяют, как минимум, установить
время до перехода компьютера и жесткого диска в режим ожидания), то
воспользуйтесь командой <TT
CLASS="LITERAL"
>hdparm -S</TT
>. Даже это сильно поможет, так как жесткие
диски потребляют много энергии. <TT
CLASS="LITERAL"
>hdparm</TT
> должен быть установлен в системе,
синтаксис команды описан в <TT
CLASS="LITERAL"
>man hdparm</TT
>.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="CHANGINGSOMEGENERALSYSTEMSETTINGS"
>4. Изменение некоторых настроек системы</A
></H1
><P
>После установки Linux-а на своем лэптопе я обнаружил, что он обращается к жесткому диску каждые несколько секунд, даже если нет пользователей, вошедших в систему. Соответственно, жесткий диск не мог войти в режим ожидания. Снижение активности жесткого диска может намного увеличить время работы на батареях. Поэтому я собрал эту коллекцию рецептов.</P
><P
>Все они проверены на RedHat 4.1, в вашем дистрибутиве пути к файлам конфигурации могут отличаться. (если так, дайте мне знать.)</P
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN207"
>4.1. Демон crond и atrun</A
></H2
><P
>Проверьте файл  <TT
CLASS="LITERAL"
>/etc/crontab</TT
> и убедитесь в том, что он запускается каждую минуту. Часто здесь можно найти <TT
CLASS="LITERAL"
>atrun</TT
>.</P
><P
>С помощью команды <TT
CLASS="LITERAL"
>at</TT
> реализуется отложенный запуск команд. Некоторые
системы Linux используют для этого выделенный демон <TT
CLASS="LITERAL"
>atd</TT
>, другие (например
RedHat) используют <TT
CLASS="LITERAL"
>crond</TT
> для запуска раз в минуту <TT
CLASS="LITERAL"
>atrun</TT
>.</P
><P
>На большинстве систем не требуется запуск команд <TT
CLASS="LITERAL"
>at</TT
> точно в определенное
время. Поэтому, если в вашем <TT
CLASS="LITERAL"
>/etc/crontab</TT
> есть строки</P
><P
>&#13;<PRE
CLASS="SCREEN"
># Запускаем задания at каждую минуту
* * * * * root [ -x /usr/sbin/atrun ] &#38;&#38; /usr/sbin/atrun</PRE
>&#13;</P
><P
>то можно смело изменить их на</P
><P
>&#13;<PRE
CLASS="SCREEN"
># Запускаем задания at каждый час
00 * * * * root [ -x /usr/sbin/atrun ] &#38;&#38; /usr/sbin/atrun</PRE
>&#13;</P
><P
>Для получения более подробной информации читайте <TT
CLASS="LITERAL"
>man 5 crontab</TT
>. Некоторые
могут нормально работать вообще без демона <TT
CLASS="LITERAL"
>crond</TT
>, так что, если вы знаете,
что делаете, то можете вообще его выключить.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN228"
>4.2. Демон update / bdflush</A
></H2
><P
>Linux работает со множеством одновременно открытых файлов, поэтому система
должна быть уверена, что изменения, произведенные в них, будут сохранены на
жесткий диск, как можно быстрее. В случае аварии системы эти изменения
будут потеряны.</P
><P
>Этим занимается демон <TT
CLASS="LITERAL"
>update</TT
> / <TT
CLASS="LITERAL"
>bdflush</TT
>. (Это имена одной программы, для
запуска демона можно использовать и то, и другое.) По умолчанию <TT
CLASS="LITERAL"
>flush</TT
>
вызывается каждые 5 секунд и <TT
CLASS="LITERAL"
>sync</TT
> - каждые 30 секунд.</P
><P
>Это приводило к постоянному доступу к моему диску Fujitsu. (Похоже, этот
жесткий диск сбрасывает (записывает) свой кэш даже при отсутствии в нем
каких-либо изменений. Впрочем, это зависит от производителя - по сообщениям
других некоторые диски переходят в режим ожидания даже без нижеприведенных
изменений.)</P
><P
>Сбои Linux теперь - это не такое уж частое явление, поэтому я сменил оба
значения на 3600 секунд (= один час), что не вызвало никаких проблем и
остановило постоянный доступ к диску. (Но если сейчас моя система аварийно
завершит работу, то испорченных файлов будет, конечно, больше)</P
><P
>RedHat 4.1: B <TT
CLASS="LITERAL"
>/etc/inittab</TT
>, измените вызов update на:</P
><P
>&#13;<PRE
CLASS="SCREEN"
>ud::once:/sbin/update -s 3600 -f 3600</PRE
>&#13;</P
><P
>Suse 4.4.1: <TT
CLASS="LITERAL"
>update</TT
> вызывается из <TT
CLASS="LITERAL"
>/sbin/init.d/boot</TT
>.</P
><P
>Slackware: <TT
CLASS="LITERAL"
>update</TT
> вызывается из <TT
CLASS="LITERAL"
>/etc/rc.d/rc.S</TT
>.</P
><P
>Если хотите углубиться в подробности - читайте <TT
CLASS="LITERAL"
>man update</TT
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN250"
>4.3. Демон syslogd</A
></H2
><P
>Демон <TT
CLASS="LITERAL"
>syslogd</TT
> отвечает за различные файлы системных журналов Linux,
находящихся в каталоге <TT
CLASS="LITERAL"
>/var/log/</TT
>. По умолчанию <TT
CLASS="LITERAL"
>syslogd</TT
> сбрасывает на диск
(sync) файлы журналов всякий раз после записи в них системного сообщения.</P
><P
>Вы можете отключить сброс, поставив перед именем файла в файле
<TT
CLASS="LITERAL"
>/etc/syslog.conf</TT
> знак "минус". Вот пример <TT
CLASS="LITERAL"
>syslog.conf</TT
> из моей системы:</P
><P
>&#13;<PRE
CLASS="SCREEN"
># Ведем журнал всех сообщений (кроме почтовых) уровня info и выше.
# Не включаем в журнал сообщения об аутентификации!
*.info;mail.none;authpriv.none                  -/var/log/messages</PRE
>&#13;</P
><P
>Опять таки, в случае аварии системы, сообщение о возникшей проблеме, скорее
всего, не будет записано на диск. Дилемма...</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN262"
>4.4. Команда init</A
></H2
><P
>Во время загрузки начальные процессы и демоны запускаются командой <TT
CLASS="LITERAL"
>init</TT
>.
Эта команда (опять таки) вызывает <TT
CLASS="LITERAL"
>sync</TT
> перед созданием любого нового
процесса.</P
><P
>Это можно изменить, убрав вызов <TT
CLASS="LITERAL"
>sync()</TT
> в
исходных текстах и перекомпилировав <TT
CLASS="LITERAL"
>init</TT
>.&#13;</P
><P
>Чтобы избежать проблемы с потерянными файловыми буферами, следует добавить в
скрипт <TT
CLASS="LITERAL"
>/etc/rc.d/init.d/halt</TT
> перед отключением файловых систем вызов <TT
CLASS="LITERAL"
>sync</TT
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN273"
>4.5. Раздел подкачки</A
></H2
><P
>Раздел подкачки Linux используется для увеличения размера физической памяти
за счет виртуальной памяти, что, опять-таки, может послужить причиной
доступа к диску. Если на вашем лэптопе много памяти, или используемые вами
приложения довольно просты (подумайте о <TT
CLASS="LITERAL"
>vi</TT
>),то, возможно, вам стоит
подумать об отключении этого раздела.</P
><P
>Само собой, решение должно зависеть от того, что вы собираетесь делать. 4 - 8 Мб памяти однозначно недостаточно для работы без раздела подкачки. 8 - 16 Мб достаточно для работы текстовых консольных приложений, если вы, конечно, не используете активно многозадачность. Работа в X-Windows требует большого количества памяти - если размер памяти вашего компьютера не намного превышает 16 мб, то отключать раздел подкачки не следует.</P
><P
>(Отступление: Мой лэптоп с 16 мб и отключенным разделом подкачки
одновременно работал с <TT
CLASS="LITERAL"
>emacs</TT
>, четырьмя оболочками <TT
CLASS="LITERAL"
>bash</TT
> и компилировал ядро,
не испытывая недостатка в памяти. Этого для меня достаточно.)</P
><P
>Если вы уже установили раздел подкачки, то можете отключить его, поставив
символ решетки перед командой командой <TT
CLASS="LITERAL"
>swapon</TT
>, вызываемой из
<TT
CLASS="LITERAL"
>/etc/rc.d/rc.sysinit</TT
>. Если вы не хотите насовсем отключать раздел подкачки,
то можно заставить систему спрашивать вас во время загрузки, следует ли
использовать подкачку. В файле <TT
CLASS="LITERAL"
>/etc/rc.d/rc.sysinit</TT
> (RedHat 4.1) или
<TT
CLASS="LITERAL"
>/sbin/init.d/boot</TT
> (Suse 4.4.1):</P
><P
>&#13;<PRE
CLASS="SCREEN"
>echo "Должна ли система использовать подкачку?"
echo "  0: Нет."
echo "  1: Да."
/bin/echo "Ваш выбор: \c"
read SWAPCHOICE

case "$SWAPCHOICE" in
    0)
        # Ничего не делаем.
        echo "(Разделы подкачки отключены)"
        ;;
    *)
        # Включаем подкачку.
        echo "Подключение разделов подкачки"
        swapon -a
esac</PRE
>&#13;</P
><P
>В этом случае можно включать подкачку при работе от сети и не использовать при работе на батареях.&#13;</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN289"
>4.6. Демон apache httpd</A
></H2
><P
>Я использую мой лэптоп для написания и отладки cgi скриптов, поэтому на нем
работает локальный веб-сервер. В стандартной конфигурации он слишком велик,
если все, что вам нужно - просто проверять, работает ли скрипт или, иногда,
как выглядит страничка.</P
><P
>Просто смените в файле <TT
CLASS="LITERAL"
>httpd.conf</TT
> значения <TT
CLASS="LITERAL"
>MinSpareServers</TT
> и <TT
CLASS="LITERAL"
>StartServers</TT
>
на <TT
CLASS="LITERAL"
>1</TT
>. Этого вполне достаточно для локального тестирования.&#13;</P
><P
>Если вы хотите выключить ведение веб-сервером журнала, то перекомпилируйте
демон <TT
CLASS="LITERAL"
>httpd</TT
>. За подробностями обращайтесь к документации.</P
><P
>Grant Taylor перекомпилировал ведение журнала и обнаружил, что от этого
apache не перестал "дергать" диск. Поэтому я нашел, как мне кажется, лучшее
решение - запуск apache не демоном, а через inetd." Читайте <TT
CLASS="LITERAL"
>man inetd</TT
>.

&#13;</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="THEXFREE86PACKAGE"
>4.7. Пакет XFree86</A
></H2
><P
>Настройка XFree86 для лэптопов - это отдельная история. Я, опять таки,
отсылаю вас к Linux Laptop page, где можно найти помощь по этому вопросу.</P
><P
>Гашение экрана X консоли всего лишь очищает его (делает черным), но не выключает. Как было отмечено в 
<A
HREF="Battery-Powered.html#SIDENOTEABOUTCONSOLEBLANKING"
>"Примечании о выключении консоли"</A
>
, для настройки гашения можно использовать опцию dpms команды <TT
CLASS="LITERAL"
>xset</TT
>
Впрочем, эта возможность зависит от графического адаптера и bios вашего лэптопа.</P
><P
>Grant Taylor использовал следующие настройки для выключения экрана своего
лэптопа, с помощью <TT
CLASS="LITERAL"
>apmd</TT
> и хранителя экрана:</P
><P
>&#13;<PRE
CLASS="SCREEN"
># Запускаем xscreensaver, с помощью программы APM

xscreensaver -timeout 5 \
             -xrm xscreensaver.programs:apm_standby \ 
             -xrm xscreensaver.colorPrograms:apm_standby &#38;</PRE
>&#13;</P
><P
>где <TT
CLASS="LITERAL"
>apm_standby</TT
> - это suid perl скрипт, позволяющий лишь некоторым
пользователям запускать <TT
CLASS="LITERAL"
>apm -S</TT
>.</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN314"
>4.8. Редактор emacs</A
></H2
><P
>Ладно, <TT
CLASS="LITERAL"
>emacs</TT
> - это не редактор, а стиль жизни. Вот подсказка Florent
Chabaud: "Если вы использовали <TT
CLASS="LITERAL"
>emacs</TT
>, то, может быть, заметили, что этот
редактор кое-что сохраняет автоматически. Эта возможность, конечно, очень
полезна и <I
CLASS="EMPHASIS"
>не</I
> должна быть выключена, но ее параметры могут быть немного
подстроены под лэптоп.</P
><P
>Я добавил в файл 
<TT
CLASS="LITERAL"
>/usr/share/emacs/site-lisp/site-start.el</TT
>
следующие две строки:</P
><P
>&#13;<PRE
CLASS="SCREEN"
>(setq auto-save-interval 2500)
(setq auto-save-timeout nil)</PRE
>&#13;</P
><P
>При этом выключается автосохранение по времени, и включается автосохранение по количеству нажатий (2500) на клавиши. Если вы набираете текст, то можно уменьшить количество нажатий; для программирования же это в самый раз. Так как считается любое нажатие (вверх, вниз, влево, удаление символа, вставка из буфера, и т. д.), то лимит в 2500 нажатий достигается довольно быстро."&#13;</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN325"
>4.9. Как найти другие пути оптимизации</A
></H2
><P
>Если ваша система Linux все равно слишком часто обращается к диску, то с
помощью команды <TT
CLASS="LITERAL"
>ps ax</TT
> можно выяснить, что происходит внутри. Она выводит
список процессов с полным именем каждого, иногда даже хватает места для
аргументов командной строки.</P
><P
>После этого прочитайте руководство (<TT
CLASS="LITERAL"
>man</TT
>) по
каждому процессу, с целью найти способ, изменить его поведение. Так вы
наверняка обнаружите процесс, виновный в частом обращении к диску. Команда
<TT
CLASS="LITERAL"
>strace</TT
> также может пригодиться.</P
><P
>Пожалуйста, пошлите мне письмо, если найдете что-то новое.&#13;</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="AEN333"
>5. Приложение</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AMESSAGETOLINUXDISTRIBUTORS"
>5.1. Послание дистрибьюторам Linux</A
></H2
><P
>Если вы дистрибьютор Linux, то благодарю вас за то, что вы это все прочитали. Лэптопы становятся все популярнее, но большинство дистрибьюторов Linux до сих пор не совсем готовы к использованию этой системы на переносных компьютерах. Пожалуйста, измените ситуацию - сделайте так, чтобы этот документ устарел.</P
><P
>&#13;<P
></P
><UL
><LI
><P
>Процедура установки должна включать конфигурацию, оптимизированную для переносных компьютеров. "Минимальной установки" почти всегда достаточно - многие вещи не требуются для пользователя лэптопа в дороге. Несколько примеров: нет нужды в трех различных версиях vi (как в Suse Linux); большинству переносных систем не требуется поддержка принтера (печать обычно производится дома с настольного компьютера); очень немногим лэптопам необходима поддержка сети.</P
></LI
><LI
><P
>Не забудьте описать специфичные для лэптопов проблемы - как, например, установить ваш дистрибутив без привода компакт-диска или как настроить драйвер plip.</P
></LI
><LI
><P
>Улучшите управление питанием и добавьте полную поддержку pcmcia. Добавьте
готовое ядро и альтернативный набор драйверов pcmcia с включенной
поддержкой apm, чтобы пользователь мог при желании поставить их. Включите в
состав дистрибутива пакет <TT
CLASS="LITERAL"
>apmd</TT
>.</P
></LI
><LI
><P
>Добавьте поддержку динамически переключаемых конфигураций сети. Большинство
лэптопов путешествуют между местами с различными сетями (например, сеть
дома, на работе и в университете), из-за чего приходится часто менять
сетевые настройки. Изменение сетевых настроек - головная боль большинства
дистрибутивов.</P
></LI
></UL
>&#13;</P
><P
>Пожалуйста, напишите мне, если ваш дистрибутив оптимизирован для переносных
компьютеров. Если вас не затруднит, укажите также, что было для этого
добавлено. Следующие версии этого HOWTO будут содержать раздел,
рекламирующий поддержку лэптопов вашим дистрибутивом.&#13;</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="CREDITS"
>5.2. Благодарности</A
></H2
><P
>&#13;<P
></P
><UL
><LI
><P
>Информация про батареи, по большей части, базируется на статье "Stromkonserve" Микаэля Рейтера (Michael Reiter), опубликованной в "c't Magazin fuer Computertechnik" (Heise Verlag Hannover, Germany), выпуск 10/96, страница 204. Использована с разрешения. Посетите их страничку: 
<TT
CLASS="LITERAL"
><A
HREF="http://www.heise.de/"
TARGET="_top"
>http://www.heise.de/</A
></TT
>.</P
></LI
><LI
><P
>Следующие люди внесли вклад в этот документ: </P
><P
>&#13;<PRE
CLASS="SCREEN"
>Frithjof Anders &#60;anders@goethe.ucdavis.edu&#62;
David Bateman &#60;dbateman@ee.uts.edu.au&#62;
Florent Chabaud &#60;chabaud@celar.fr&#62;
Markus Gutschke &#60;gutschk@uni-muenster.de&#62;
Kenneth E. Harker &#60;kharker@cs.utexas.edu&#62;
Bjoern Kriews &#60;bkr@rrz.uni-hamburg.de&#62;
R. Manmatha &#60;manmatha@bendigo.cs.umass.edu&#62;
Juergen Rink &#60;jr@ct.heise.de&#62;
Grant Taylor &#60;gtaylor@picante.com&#62;
James Youngman &#60;JYoungman@vggas.com&#62;</PRE
>&#13;</P
></LI
></UL
>&#13;</P
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN362"
>5.3. Об этом документе</A
></H2
><P
>В этом тексте упоминание о батареях встречается 53 раза.</P
><P
>Свежая версия этого и многих других HOWTO, большинство из которых намного полезнее этого, может быть найдена на главном сайте документации Linux 
<TT
CLASS="LITERAL"
><A
HREF="http://sunsite.unc.edu/mdw/linux.html"
TARGET="_top"
>http://sunsite.unc.edu/mdw/linux.html</A
></TT
> или на одном из его многочисленных зеркальных сайтов.&#13;</P
><P
>Большая часть текста была написана во время моих путешествий в поезде между Гамбургом и Ганновером. (Новые вагоны ice-2 имеют розетки для лэптопов, урра!).</P
><P
>А теперь напевайте со мной: "...дорога, дорога..."&#13;</P
></DIV
></DIV
></DIV
></BODY
></HTML
>