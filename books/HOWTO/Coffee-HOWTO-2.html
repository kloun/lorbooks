<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>COFFEE-HOWTO: Электронная схема</TITLE>
 <LINK HREF="Coffee-HOWTO-3.html" REL=next>
 <LINK HREF="Coffee-HOWTO-1.html" REL=previous>
 <LINK HREF="Coffee-HOWTO.html#toc2" REL=contents>
</HEAD>
<BODY>
<A HREF="Coffee-HOWTO-3.html">Next</A>
<A HREF="Coffee-HOWTO-1.html">Previous</A>
<A HREF="Coffee-HOWTO.html#toc2">Contents</A>
<HR>
<H2><A NAME="s2">2. Электронная схема</A></H2>

<P>Общая диаграмма примерно такая:
<P>
<PRE>
--------- 0-5V  --------- ~220V  ---------------
|  PC   |===>===| Цепь  |========|  Кофеварка  | 
---------       ---------        ---------------
</PRE>

Концепция такая - мы подаем управляющее напряжение с компьютера, который 
управляет электрически изолированной схемой с помощью реле или Triac.
<P>Вы должны выбрать схему с реле, если у вас большая кофеварка (более 200W или 
около того), иначе вы можете использовать схему с triac.
<P>Все представленные схемы проверены по крайней мере один раз, но ответственность 
за последствия - ПОЛНОСТЬЮ ВАША. Если вы не знакомы с электроникой, вы не должны 
пробовать сделать эти схемы, иначе вы можете заработать неприятности...
<P>Вы должны быть очень осторожны при экспериментировании с 220V, и в выборе 
соответствующего плавкого предохранителя.
<P>
<P>
<H2><A NAME="ss2.1">2.1 Подача напряжения 0-5V из компьютера</A>
</H2>

<P>Вот простой пример, как получить напряжение 0-5V из параллельного порта 
компьютера.
<PRE>
Разъем DB-25         -----    Pin 10 - ACK
(мама) вид           |   |    Pin  9 - D7 
сзади                |   |                           Pin 2 - D0 
                     v   v                           v   Pin 1 ~Strobe
 ____________________________________________________________
/                                                            \ 
\     13  12  11  10   9   8   7   6   5   4   3   2   1     / 
 \                                                          /
  \     25  24  23  22  21  20  19  18  17  16  15  14     /
   \______________________________________________________/
</PRE>

Штырек 1 - Строб (инверсная логика)
<P>Штырьки 2-9 - сигналы ШИНЫ ДАННЫХ, именно то, что записывается в защелки 
параллельного порта командой OUTB.
<P>Штырек 10 - сигнал подтверждения (ACK), управляемый вами, чтобы вы могли подать 
сигнал прерывания на центральный процессор.
<P>Штырьки 18-25 закорочены на землю (GND).
<P>Подробно:
<PRE>
 &lt;= вход  DB25    Cent    Название        Рег
 => выход вывод   pin     сигнала         Бит   Примечание
------  ----    ----    --------          ---     -----------------------------
  =>       1       1      -Strobe         C0-     Set Low pulse >0.5 us to send
  =>       2       2      Data 0          D0      Set to least significant data
  =>       3       3      Data 1          D1      ...
  =>       4       4      Data 2          D2      ...
  =>       5       5      Data 3          D3      ...
  =>       6       6      Data 4          D4      ...
  =>       7       7      Data 5          D5      ...
  =>       8       8      Data 6          D6      ...
  =>       9       9      Data 7          D7      Set to most significant data
  &lt;=      10      10      -Ack            S6+ IRQ Low Pulse ~ 5 uS, after accept
  &lt;=      11      11      +Busy           S7-     High for Busy/Offline/Error
  &lt;=      12      12      +PaperEnd       S5+     High for out of paper
  &lt;=      13      13      +SelectIn       S4+     High for printer selected
  =>      14      14      -AutoFd         C1-     Set Low to autofeed one line
  &lt;=      15      32      -Error          S3+     Low for Error/Offline/PaperEnd
  =>      16      31      -Init           C2+     Set Low pulse > 50uS to init
  =>      17      36      -Select         C3-     Set Low to select printer
  ==      18-25   19-30,  Ground
</PRE>
<P>
<H2><A NAME="ss2.2">2.2 Управление с помощью реле</A>
</H2>

<P>Самая простая схема, которую кто-то может построить:
<P>
<PRE>
                                    Vcc
                                     |
                                     +------+
                                     |    __|__
                                 Сердечник /^\  Диод 1N4002
                                    Реле  /---\
                                     |      |
                                     +------+
                                     |
                                  | /
                        4.7K    Б |/  К
штырек параллельного >-\/\/\/\/---|        Транзистор n-p-n: BC547A или 2N2222A
порта (данные)                    |\  Э
                                  | V
                                    |
штырек параллельного >--------------+
порта (земля)                       |
                                 Земля
</PRE>
<P>Vcc - напряжение, которое нужно реле по спецификации (обычно 5 или 12V). 
Очевидно, спецификации реле должны быть приемлемы для вашей кофеварки.
<P>Barmen, обычно, имеют тенденцию, помещать реле ПОСЛЕ транзистора, на эммитер (Э) 
вместо коллектора (К). Это - плохо, потому что транзистор ужасно смещен, и это 
может привести к плохому кофе: -). Диод 1N4002 полезен для защиты транзистора от 
токов реле. Если вы не будете его использовать, транзистор потемнеет и начнет 
вонять...
<P>
<P>
<H2><A NAME="ss2.3">2.3 Управление с TRIAC ©1</A>
</H2>

<P>Если вы хотите реализовать простую схему, то вы можете использовать драйвер 
triac фирмы Motorola MOC301 [012], вместе с универсальным TRIAC типа SC141D. 
Этот метод имеет то преимущество, что вы не нуждаетесь в дополнительном питании.
<P>Схема для неиндуктивных нагрузок:
<P>
<PRE>
               270     1 +-------+ 6    180
         +5v -VAVAVA-----+       +----VAVAVA-----+-------------- Горячая линия
                       2 |  MOC  |               |
       TTL-вход ---------+ 3012  +nc            VA  SC141D
                         |       | 4           / |
                       nc+       +------------/  |
                         +-------+               +----\/\/\/---- Нейтральная линия
                                                     Нагрузка
</PRE>

Если вы собираетесь работать с 220V, то выбирайте 3021. Индуктивные нагрузки 
должны использоваться совместно с блокировочными конденсаторами, см. примечание 
приложения фирмы Motorola AN-780. Кофеварки - это главным образом резистивная 
нагрузка, а не индуктивная (как у двигателя), но кто знает, что там у вас ...
<P>
<P>
<P>
<H2><A NAME="ss2.4">2.4 Управление с TRIAC ©2</A>
</H2>

<P>
<PRE>
       +5VDC
       |    180                      180            2.2k
       +---/\/\/\----+-----+   +----/\/\/-+--/\/\/\---+-------> 120V
                     |    1|   |6         |           |         Горячая
                     |    +=====+         |           | MT1
                     |    | MC  | TRIAC   |          +-+
                     |    | 3032| Драйвер |        G | | TRIAC
                     |    +=====+         |         /| |
                     \    2|   |4         |        / +-+
              2N3904  |----+   |          |        |  | MT2
                     /     |   +--------- | -------+  |
                    V      \              |        |  |
                    |      /              |        \  |
                    |      \ 43    .01u  ---   10k /  |
                    |      /       500V  ---       \  |
                    |      |              |        /  |
                    +------+              |        |  |            Нейтраль
                    |                     +--------+--+---o    o--> 120V
                    /                                    нагрузка
        >-/\/\--|  2N3904
                    \
                     V
                     |
                    ---
                   ///
       Для 220В вы должны соответственно изменить резисторы.
</PRE>
<P>Описание Схемы:
<P>MC3032 - оптопарный TRIAC драйвер. 180-омный резистор устанавливает ток для  
эммитера светодиода в оптопаре. Измените значение этого резистора в случае 
необходимости, чтобы получить приемлемый ток (например, 15 mA).
<P>Обратите внимание, что вы не можете проверить эту схему без нагрузки. TRIAC не 
будет включаться, если он не подключен к AC источнику напряжения, так что вы не 
сможете проверить его на простое переключение без применения AC и нагрузки. 
Обратите внимание на значение 500V на конденсаторе .01 .
<P>
<HR>
<A HREF="Coffee-HOWTO-3.html">Next</A>
<A HREF="Coffee-HOWTO-1.html">Previous</A>
<A HREF="Coffee-HOWTO.html#toc2">Contents</A>
</BODY>
</HTML>
