<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>The Linux ``Linux-DOS-Win95-OS2'' mini-HOWTO</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.57"></HEAD
><BODY
CLASS="ARTICLE"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="AEN2"
>The Linux ``Linux-DOS-Win95-OS2'' mini-HOWTO</A
></H1
><DIV
CLASS="AUTHORGROUP"
><A
NAME="AEN4"
></A
><H3
CLASS="AUTHOR"
><A
NAME="AEN5"
>Mike Harlan</A
></H3
><DIV
CLASS="AFFILIATION"
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
>&nbsp;&nbsp;&nbsp;&nbsp;     r3mdh@raex.com
    <br>
&nbsp;&nbsp;&nbsp;</P
></DIV
></DIV
><H3
CLASS="CORPAUTHOR"
>  Перевод: <A
HREF="mailto:sam@asp-linux.com"
TARGET="_top"
>Станислав Рогин</A
>,
  <A
HREF="http://www.asplinux.com"
TARGET="_top"
>SWSoft Pte Ltd.</A
>
 </H3
></DIV
><P
CLASS="PUBDATE"
>v1.3.1, 11 November 1997<BR></P
><DIV
><DIV
CLASS="ABSTRACT"
><A
NAME="AEN15"
></A
><P
></P
><P
>Этот документ описывает необходимые действия для совмещения и нормального
сосуществования четырех разных операционных систем на одном жестком диске.</P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Содержание</B
></DT
><DT
>1. <A
HREF="Linux+DOS+Win95+OS2.html#AEN50"
>Вступление</A
></DT
><DT
>2. <A
HREF="Linux+DOS+Win95+OS2.html#AEN58"
>Алгоритм действий</A
></DT
><DT
>3. <A
HREF="Linux+DOS+Win95+OS2.html#AEN175"
>Авторские права</A
></DT
></DL
></DIV
><P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Ответственность:</DT
><DD
><P
>За любой ущерб, нанесенный любой машине, возникший в результате
выполнения рекомендаций этого документа, автор ответственности НЕ НЕСЕТ.
Когда вы читаете информацию об удалении разделов и форматировании
дисков, будьте ОСТОРОЖНЫ!
Вы должны осознавать, что это может привести к потере информации.
Поэтому, ЧАСТО И РЕГУЛЯРНО ДЕЛАЙТЕ РЕЗЕРВНЫЕ КОПИИ.
Это предпоследнее предупреждение!</P
></DD
><DT
>Stuff to make the lawyers happy:</DT
><DD
><P
>Unless otherwise stated, Linux HOWTO documents are copyrighted by
their respective authors. Linux HOWTO documents may be reproduced and
distributed in whole or in part, in any medium physical or electronic,
as long as this copyright notice is retained on all copies.
Commercial redistribution is allowed and encouraged&semi;
however, the author would like to be notified of any such distributions.</P
><P
>All translations, derivative works, or aggregate works incorporating
Linux HOWTO documents must be covered under this copyright notice.
That is, you may not produce a derivative work from a HOWTO
and impose additional restrictions on its distribution.
Exceptions to these rules may be granted under certain conditions&semi;
please contact the Linux HOWTO coordinator at the address given below.</P
><P
>In short, we wish to promote dissemination of this information through
as many channels as possible. However, we do wish to retain copyright
on the HOWTO documents, and would like to be notified of any plans to
redistribute the HOWTOs.</P
><P
>If you have any questions, please contact Tim Bynum,
the Linux HOWTO coordinator, at
<A
HREF="mailto:linux-howto@sunsite.unc.edu"
TARGET="_top"
>linux-howto@sunsite.unc.edu</A
>
via email.</P
></DD
><DT
>Новое по сравнению с версией 1.3:</DT
><DD
><P
>&#13;<P
></P
><UL
><LI
><P
>Обновлен мой почтовый адрес.
Он изменился с
<A
HREF="mailto:r3mdh@imperium.net"
TARGET="_top"
>r3mdh@imperium.net</A
>
на
<A
HREF="mailto:r3mdh@raex.com"
TARGET="_top"
>r3mdh@raex.com</A
>.</P
></LI
></UL
>&#13;</P
></DD
><DT
>Новое по сравнению с версией 1.0:</DT
><DD
><P
>&#13;<P
></P
><UL
><LI
><P
>Обновлен мой почтовый адрес.
Он изменился с
<A
HREF="mailto:r3mdh@dax.cc.uakron.edu"
TARGET="_top"
>r3mdh@dax.cc.uakron.edu</A
>
на
<A
HREF="mailto:r3mdh@imperium.net"
TARGET="_top"
>r3mdh@imperium.net</A
>.</P
></LI
></UL
>&#13;</P
></DD
></DL
></DIV
></P
><P
>Ну что ж........ приступим!</P
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="AEN50"
>1. Вступление</A
></H1
><P
>После нескольких дней исследований и мучений, я наконец-то нашел алгоритм
осуществления своей идеи. У меня есть компьютер с 16Мб памяти и 1.2Гб
винчестером. Моей целью было установить 4 операционные системы на
компьютер: MSDOS v6.22, Windows 95, OS/2, и Linux. К моему великому
сожалению, я не обнаружил никакого Linux-руководства по осуществлению такой
задачи, как установка любой системы и дальнейшая ее нормальная загрузка и
работа на одном компьютере с другими операционными системами. Можно,
конечно, просто устанавливать их на разные разделы, но тогда вероятность
зависаний при перезагрузке с выводом строки ``Starting MSDOS'' становится
крайне велика. После многих попыток и ошибок, я нашел способ решить эту
проблему:</P
><P
>Перед тем, как начать описание действий, шаг-за-шагом, позвольте
сначала описать то, что я хотел получить в результате:

<PRE
CLASS="SCREEN"
>&#60;НАЗВАНИЕ&#62;                                &#60;РАЗМЕР&#62;&#60;ОБОЗНАЧЕНИЕ&#62;     &#60;НОМЕР РАЗДЕЛА&#62;
-----------------------------------------------------------------------------------
MSDOS v6.22                                  11Мб   P1       Раздел 1
-----------------------------------------------------------------------------------
Windows '95                                 350Мб   P2       Раздел 2
-----------------------------------------------------------------------------------
OS/2 Boot Manager                             2Мб   P3       Раздел 3
-----------------------------------------------------------------------------------
общие диск DOS/Win                          511Мб   E1       Раздел 4, разделенный 
OS/2 Warp 3.0                               127Мб   E2       на 4 логических диска,
Linux Slakware 3.2 временный файл подкачки    XМб   E3       обозначенных E1-E4
Linux Slakware 3.2 основной раздел        219-XМб   E4       
-----------------------------------------------------------------------------------</PRE
>
Что все это значит? Давайте пробежимся по списку. Во-первых, мы должны
иметь 4 раздела на одном нашем винчестере. Разделы с 1 по 3 - ОСНОВНЫЕ
загрузочные разделы. На них будут расположены MSDOS, Win95 и the OS/2 Boot
Manager (загрузчик OS/2, который, к сожалению, требует для себя ОТДЕЛЬНЫЙ
раздел). Остается еще один раздел. На нем должны быть расположены - диск
для общих данных DOS/Win95 (много пространства, где можно разместить все
архивы и файлы, скачанные с Интернета, а также различные программы, места
для которых на разделе Windows не хватило), OS/2, и весь Linux (основной
раздел Linux и раздел временного файла подкачки Linux).</P
><P
>По электронной почте я начал получать вопросы о том, почему в моем варианте
фигурируют отдельные стартовые разделы для DOS и Win95, а второй диск для
них общий. Ответом будет следующее: этот вариант, конечно, не обязателен
для ВСЕХ. Возможно, вы уже совсем не используете DOS. Возможно, все
программы Microsoft вы запускаете только под Windows '95. Но, представьте
себе, есть еще люди, работающие под DOS, которые жизнь свою не могут
представить без нее. Такое бывает не только потому, что под DOS быстрее и
эффективнее работают 16-битные приложения, но и просто потому, что
некоторые программы просто не запускаются под Windows (сразу вспоминается
система установки Gravis Ultrasound), так что время от времени всем
ПРИХОДИТСЯ загружаться в DOS. Это руководство создавалось с учетом таких
людей. Но если вам настолько не нравиться то, что слово ``MSDOS'' включено
в это руководство, то спокойно садитесь и пишите свое руководство по
использованию объединенной системы Linux-Win95-OS/2. :)</P
><P
>Итак, возвращаясь к нашей схеме. Как я говорил, на одном разделе должны
быть расположены 4 диска: общий диск для DOS/Win, диск OS/2, и диски Linux
- основной и временного файла подкачки. В такой ситуации используются так
называемые ЛОГИЧЕСКИЕ ДИСКИ (или логические разделы, их название
варьируется в зависимости от тех книг, что вы читали и изучали) внутри
одного основного раздела. В процессе создания логических дисков на
последнем разделе, обозначать его мы будем РАСШИРЕННЫМ (EXTENDED) РАЗДЕЛОМ,
так как он расширен (после простых начальных разделов) на несколько
(максимум на 3) логических дисков. Вы запутались? Ну если так, то тогда вам
придется обратиться к руководству OS/2 по этой теме. Там все будет
объяснено гораздо лучше и подробнее, чем здесь.</P
><P
>А теперь вы, должно быть, ломаете голову над тем, что ``он хочет поместить
4 диска на этот расширенный раздел, но он только что утверждал, что на
расширенном разделе может быть размещено максимум 3 диска!'' Это
действительно так, правда, только если вы работаете под MS-DOS или OS/2. Вот
вам одно из преимуществ Linux на сегодняшний день - он может создавать
БОЛЕЕ трех логических дисков на расширенном разделе! Сколько точно -- я не
знаю, но, по меньшей мере, он создает 4 диска, как раз столько, сколько нам
сейчас и надо... Так что, когда вы будете рассматривать алгоритм выполнения
всех дальнейших действий, то помните, что при создании логических дисков на
расширенном разделе под DOS или OS/2 мы создадим только 3 логических диска,
а в дальнейшем под Linux мы разобьем один из них на два... По существу,
можете рассматривать это как ``обман'' MSDOS и OS/2, так как они будут
видеть только 3 логических диска, а в действительности (для Linux), их
будет 4.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="AEN58"
>2. Алгоритм действий</A
></H1
><P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>ПРИМЕЧАНИЕ:</DT
><DD
><P
>Номера в круглых скобках - это размеры разделов и дисков (в мегабайтах) на
моем 1.2Гб винчестере.</P
></DD
></DL
></DIV
>
Итак, приступим к описанию алгоритма действий: 

<P
></P
><OL
TYPE="1"
><LI
><P
>Запустите программу <TT
CLASS="FILENAME"
>view.exe</TT
> с компакт-диска Linux Slakware и создайте
загрузочную (BOOT) и основную (ROOT) дискеты Linux. Не путайтесь -- по
каким-то причинам программа начальной загрузки Linux называет основную
(ROOT) дискету "RAMDISK floppy". Далее по тексту эта дискета будет
называться "основной".</P
></LI
><LI
><P
>Сделайте резервные копии всей вашей информации.</P
></LI
><LI
><P
>Загрузите MS-DOS с загрузочной дискеты </P
></LI
><LI
><P
>Когда появится ``<TT
CLASS="LITERAL"
>Starting MSDOS</TT
>'', нажмите F5 для отмены загрузки
<TT
CLASS="FILENAME"
>config.sys</TT
> и <TT
CLASS="FILENAME"
>autoexec.bat</TT
>.</P
></LI
><LI
><P
>Запустите <TT
CLASS="LITERAL"
>a:&bsol;fdisk.exe</TT
>. </P
></LI
><LI
><P
>Удалите ВСЕ существующие разделы (помните, что УДАЛЕНИЕ / ИЗМЕНЕНИЕ ЛЮБОГО
РАЗДЕЛА ПРИВЕДЕТ К ПОТЕРЕ ДАННЫХ НА РАЗДЕЛЕ!).</P
></LI
><LI
><P
>&#13;Добавьте основной раздел MSDOS. (11Мб) </P
></LI
><LI
><P
>Отформатируйте (<TT
CLASS="LITERAL"
>Format</TT
>) этот раздел. </P
></LI
><LI
><P
>Запустите <TT
CLASS="FILENAME"
>a:&bsol;setup.exe</TT
> для инсталляции MSDOS на этот раздел.</P
></LI
><LI
><P
>Загрузите программу установки OS/2. </P
></LI
><LI
><P
>Выберите "Advanced" установку. </P
></LI
><LI
><P
>Запустите <TT
CLASS="LITERAL"
>FDISK</TT
>. (этот пункт должен появиться перед вами, когда вы начнете
устанавливать OS/2)</P
></LI
><LI
><P
>Добавьте 1 раздел после раздела MSDOS. Это будет раздел под Windows 95.
(349Мб)</P
></LI
><LI
><P
>Добавьте следующим разделом Boot Manager. (2Мб) </P
></LI
><LI
><P
>Добавьте расширенный раздел. </P
></LI
><LI
><P
>Создайте логический диск на расширенном разделе. Это диск для общих данных MSDOS и Windows. (511Мб) </P
></LI
><LI
><P
>Добавьте еще один логический диск на расширенный раздел. Это будет раздел
под OS/2 с файловой системой HPFS - - Высоко Производительной Файловой
Системой (``High Performance File System''). (127Мб)</P
></LI
><LI
><P
>Добавьте последний логический диск в расширенный раздел, размером во все
оставшееся свободное место. В последствии этот диск будет разделен на 2
диска под Linux - на основной раздел и раздел для файла подкачки Linux. Но,
так как OS/2 (как и DOS) может создавать только 6 разделов на одном
винчестере (3 основных раздела и 3 логических диска на расширенном
разделе), мы создадим сейчас один раздел. И мы ДОЛЖНЫ создать этот раздел
СЕЙЧАС, не оставлять тут свободное место, ожидая, что Linux в последствии
создаст тут 2 логических диска. Из-за особого способа работы программы
FDISK для OS/2 там, где заканчивается последний (созданный этой программой)
логический диск, программа поставит маркер конца расширенного раздела. И
потом мы уже НЕ сможем использовать оставшееся свободное место для создания
дисков после этой отметки. Иными словами, мы создаем этот диск только для
того, чтобы зарезервировать место. Позже мы удалим этот диск и, под Linux,
создадим на его месте два новых диска.</P
></LI
><LI
><P
>Добавим разделы 1, 2, и 5 в Boot Manager. &#13;</P
></LI
><LI
><P
>Отметим раздел 5 как "инсталлируемый" для OS/2.
Сейчас экран <TT
CLASS="LITERAL"
>FDISK</TT
> должен показывать примерно следующее: 
<PRE
CLASS="SCREEN"
>&#13;                               FDISK

Диск 1
___________________________________________________________________________

Информация о разделах
Название        Статус          Доступ          Тип ФС          Мегабайт
___________________________________________________________________________

MSDOS           Загружаемый     C: Основной     FAT              11
WIN 95          Загружаемый      : Основной     FAT             350
                Стартовый        : Основной     BOOT MANAGER      2
                Нет             D: Логический   Неформатирован  511
OS/2            Инсталлируемый  E: Логический   Неформатирован  127
                Нет             F: Логический   Неформатирован  219
                  </PRE
>
&#13;</P
></LI
><LI
><P
>Продолжаем процесс инсталляции OS/2. </P
></LI
><LI
><P
>Перезагружаемся и выбираем в меню Boot Manager для загрузки раздел 2 (Windows 95). </P
></LI
><LI
><P
>Когда появится сообщение об ошибке из-за "отсутствия операционной системы",
загрузитесь с инсталляционной дискеты MSDOS. Мы выбрали этот раздел для
того, чтобы ``спрятать'' раздел MSDOS. Boot Manager для OS/2 работает
немного необычно. Из всех загружаемых разделов ВИДЕТЬ можно только один (в
нашем случае, либо MSDOS либо OS/2). То есть, при загрузке одного раздела,
например, MSDOS, другой раздел (Win95) будет невидим. Эти разделы, как бы
делят имя диска между собой. Поэтому в вышеуказанной таблице, в графе
``ДОСТУП'' у раздела MSDOS стоит имя диска C, а у раздела Win95 нет
никакого обозначения. Итак, сейчас ситуация такова, что в системе есть
раздел MSDOS, как диск C, а раздел Win95 невидим. Если мы при загрузке
выберем Win95, то ситуация совершенно противоположная: диск C - это раздел
с Win95, а раздел MSDOS невидим. К невидимому диску нет НИКАКОГО ДОСТУПА. И
если вы захотите скопировать файл с одного диска на другой, то придется
использовать общий (не основной, а логический) диск для обмена. В нашем
случае, диск DOS/Win95 (диск D размером 511Мб) будет таким общим диском.
Возможно, вы спросите: "Но ведь нам надо будет еще и Linux загружать?".
Вопрос справедлив, но мы вернемся к нему несколько позже.</P
></LI
><LI
><P
>Установите MSDOS на раздел 2 (это необходимо для дальнейшей установки туда Windows 95). </P
></LI
><LI
><P
>Загрузитесь со второго раздела. </P
></LI
><LI
><P
>Установите Windows 95 на этот раздел (если вы используете версию Win95,
которая устанавливается только на существующий продукт старой версии, то
приготовьте инсталляционную дискету ©1 с Win3.1).</P
></LI
><LI
><P
>&#13;Загрузитесь с первого раздела. </P
></LI
><LI
><P
>&#13;Отформатируйте раздел 4. </P
></LI
><LI
><P
>Восстановите ваши данные (если вы их сохраняли до этого) в разделах 1 и 4. </P
></LI
><LI
><P
>Загрузитесь с загрузочной дискеты Linux. </P
></LI
><LI
><P
>Продолжите загрузку с основной дискеты Linux. </P
></LI
><LI
><P
>Когда вы войдете в систему как root и увидите маркер приглашения к работе
<TT
CLASS="LITERAL"
>&num;</TT
>, наберите ``<TT
CLASS="LITERAL"
>fdisk</TT
>'', и нажмите enter.</P
></LI
><LI
><P
>Удалите последний раздел (тот, что мы создавали в пункте 18). </P
></LI
><LI
><P
>Добавьте 1 раздел размером в 16Мб, и отметьте его, как раздел подкачки Linux. (17Мб) </P
></LI
><LI
><P
>Добавьте последний раздел на все оставшееся свободное место и обозначьте его как основной раздел Linux. (198Мб) </P
></LI
><LI
><P
>Запишите изменения в загрузочный сектор и перезагрузитесь. </P
></LI
><LI
><P
>Когда вы снова увидите приглашение к работе <TT
CLASS="LITERAL"
>&num;</TT
>, запустите <TT
CLASS="LITERAL"
>setup</TT
>. </P
></LI
><LI
><P
>Установите Linux на последний раздел</P
></LI
><LI
><P
>Во время установки LILO убедитесь, что вы устанавливаете его на последний
раздел (НЕ на Основную Загрузочную Запись (MBR), ибо этим вы уничтожите всю
проделанную ранее работу!) В меню загрузки LILO добавьте только последний
раздел, а таймер установите на ноль. Тогда, при выборе Linux в меню Boot
Manager для OS/2, LILO начнет работу и далее загрузит Linux с его основного
диска на расширенном разделе. А так как Linux - единственный раздел,
который будет грузиться под LILO - таймер нам не нужен (кроме, конечно,
случая, если у вас не будет еще ядер для запуска. В таком случае таймер
нужно поставить на ненулевое число секунд)</P
></LI
><LI
><P
>Активизируйте раздел подкачки Linux (обратитесь к "Инструкции по установке
Linux" или руководству "Начинаем работу", автор Matt Welsh).</P
></LI
><LI
><P
>Загрузите OS/2. </P
></LI
><LI
><P
>&#13;Запустите FDISK. </P
></LI
><LI
><P
>Добавьте Linux в стартовое меню Boot Manager (ОСНОВНОЙ раздел Linux)
(наберите <TT
CLASS="LITERAL"
>83</TT
> а <I
CLASS="EMPHASIS"
>не</I
> <TT
CLASS="LITERAL"
>82</TT
>!).</P
></LI
></OL
>
Теперь экран <TT
CLASS="LITERAL"
>FDISK</TT
> должен показывать примерно следующее: 
<PRE
CLASS="SCREEN"
>&#13;                               FDISK

Диск 1
___________________________________________________________________________

Информация о разделах
Название        Статус          Доступ          Тип ФС          Мегабайт
___________________________________________________________________________

MSDOS           Загружаемый     C: Основной     FAT              11
WIN 95          Загружаемый      : Основной     FAT             350
                Стартовый        : Основной     BOOT MANAGER      2
                Нет             D: Логический   FAT             511
OS/2            Загружаемый     E: Логический   HPFS            127
                Нет              : Логический   Тип 82           17
Linux           Загружаемый      : Логический   Тип 83          198
&#13;</PRE
>

...Вот и все! &#13;</P
><P
>Присылайте любые комментарии/предложения/замечания и сообщения о проблемах (в крайнем случае) мне на адрес <A
HREF="mailto:r3mdh@raex.com"
TARGET="_top"
>r3mdh@raex.com</A
>. </P
><P
>Mike Harlan, 11 Ноября 1997 &#13;</P
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="AEN175"
>3. Авторские права</A
></H1
><P
>Авторские права на русский перевод этого текста принадлежат &copy; 2000 SWSoft Pte Ltd.
Все права зарезервированы.</P
><P
>Этот документ является частью проекта Linux HOWTO.</P
><P
>Авторские права на документы Linux HOWTO принадлежат их авторам, если явно
не указано иное. Документы Linux HOWTO, а также их переводы, могут
быть воспроизведены и распространены полностью или частично на любом
носителе, физическом или электронном, при условии сохранения этой заметки об
авторских правах на всех копиях. Коммерческое распространение разрешается и
поощряется; но, так или иначе, автор текста и автор перевода желали бы знать о
таких дистрибутивах.</P
><P
>Все переводы и производные работы, выполненные по документам Linux HOWTO,
должны сопровождаться этой заметкой об авторских правах. Это делается в
целях предотвращения случаев наложения дополнительных ограничений на
распространение документов HOWTO. Исключения могут составить случаи
получения специального разрешения у координатора Linux HOWTO, с которым
можно связаться по адресу приведенному ниже.</P
><P
>Мы бы хотели распространить эту информацию по всем возможным каналам. Но
при этом сохранить авторские права и быть уведомленными о всех планах
распространения HOWTO. Если у вас возникли вопросы, пожалуйста, обратитесь
к координатору проекта Linux HOWTO по электронной почте:
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:linux-howto@metalab.unc.edu"
>linux-howto@metalab.unc.edu</A
>&#62;</TT
> или к координатору русского
перевода Linux HOWTO компании SWSoft Pte Ltd. по адресу
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:linux-howto@asplinux.ru"
>linux-howto@asplinux.ru</A
>&#62;</TT
></P
></DIV
></DIV
></BODY
></HTML
>