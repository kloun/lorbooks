<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Software-RAID HOWTO: Высокая готовность RAID</TITLE>
 <LINK HREF="Software-RAID-HOWTO-2.2-10.html" REL=next>
 <LINK HREF="Software-RAID-HOWTO-2.2-8.html" REL=previous>
 <LINK HREF="Software-RAID-HOWTO-2.2.html#toc9" REL=contents>
</HEAD>
<BODY>
<A HREF="Software-RAID-HOWTO-2.2-10.html">Next</A>
<A HREF="Software-RAID-HOWTO-2.2-8.html">Previous</A>
<A HREF="Software-RAID-HOWTO-2.2.html#toc9">Contents</A>
<HR>
<H2><A NAME="s9">9. Высокая готовность RAID</A></H2>

<P>
<OL>
<LI><B>В</B>: 
RAID может помочь мне противостоять потерям данных.  Но как я могу 
быть уверенным, что система работает, настолько долго, насколько 
возможно, и не склонна к поломкам?  В идеале, я хочу, чтобы система 
работала 24 часа в день, 7 дней в неделю, 365 дней в году.

<BLOCKQUOTE>
<B>О</B>:
Высокая готовность дело трудное и дорогостоящее. Тяжело
Вам пробовать сделать систему отказоустойчивой, тяжело и
еще более дорого ее получить.   Следующие подсказки, советы,
идеи и не проверенные слухи могут помочь Вам в этом.
<UL>
<LI>IDE диски могут отказать так, что отказавший диск на 
на IDE шлейфе будет препятствовать работе хорошего диска 
на том же кабеле, таким образом это выглядит как отказ двух
дисков.  Так как RAID не защищает от отказа двух дисков,
нужно либо подключать по одному диску на IDE шлейф,
или, если два диска, то они должны относиться к различным
RAID томам.</LI>
<LI>SCSI диски могут отказать так, что отказавший диск
на SCSI цепочке может мешать работе любого устройства в 
цепочке.  Режим отказа приводит к замыканию 
общего (разделяемого) контакта готовности устройства;
так как этот контакт общий, не может быть выполнен никакой 
арбитраж, пока замыкание не устранено. Таким образом, 
два диска в одной цепочке SCSI не должны относиться к 
одному RAID массиву.</LI>
<LI>Подобные замечания применимы к контроллерам дисков. 
Не подгружайте каналы к одному контроллеру; используйте
несколько контроллеров.</LI>
<LI>Не используйте все диски одного производителя или модели.
Не так уж редко сильная гроза отключала два или более диска. 
(Да, мы все используем подавители бросков напряжения, 
но они вовсе не совершенны). Другими убийцами являются жара 
и плохое охлаждение диска.  Дешевые диски часто работают  
перегретыми. Использование различных марок дисков и 
контроллеров уменьшает вероятность того, что что бы то ни было 
отключит один диск (перегрев, физический удар, вибрация, бросок 
электричества) и одновременно повредит другие диски.</LI>
<LI>Для защиты от отказа контроллера или процессора, 
можно построить окружение SCSI диска с "двумя хвостами", 
т.е. подсоединенным к двум компьютерам.
Один компьютер монтирует файловую систему в 
режиме чтение-запись, а другой монтирует ее в как 
только-чтение, и действует как горячий резерв.  Когда горячий
резерв, определяет, что главный компьютер отказал (с 
помощью watchdog), он выключает питание главного
(для гарантии, что он в самом деле не работает), и затем  
выполняет fsck и перемонтируется в режиме чтение-запись.  
Если кто-либо запустит это, дайте мне знать.</LI>
<LI>Всегда используйте UPS, и  выполняйте правильное завершение.
Хотя неправильное завершение может не повредить диски,
запуск ckraid даже на маленьких массивах мучительно
медленный.  Вы должны избегать запуска ckraid насколько это 
возможно.  Или Вы можете покопаться в ядре и запустить
отлаживаемый код горячей реконструкции ...</LI>
<LI>SCSI кабеля, как известно, очень темпераментные создания,
и склонны создавать всяческие проблемы.
Используйте кабеля наивысшего качества, из тех которые можно 
купить. Используйте так называемый bubble-wrap, чтобы 
убедиться, что ленточные кабеля не слишком близко расположены
и не влияют друг на друга. Тщательно соблюдайте ограничения на 
длину.</LI>
<LI>Взгляните на SSI (Serial Storage Architecture).
Хотя она несколько дорога, по слухам менее
склонна к ошибочным режимам, чем SCSI.</LI>
</UL>
</BLOCKQUOTE>
</LI>
</OL>
<HR>
<A HREF="Software-RAID-HOWTO-2.2-10.html">Next</A>
<A HREF="Software-RAID-HOWTO-2.2-8.html">Previous</A>
<A HREF="Software-RAID-HOWTO-2.2.html#toc9">Contents</A>
</BODY>
</HTML>
