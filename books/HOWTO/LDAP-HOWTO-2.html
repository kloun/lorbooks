<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>LDAP Linux HOWTO: Установка LDAP сервера</TITLE>
 <LINK HREF="LDAP-HOWTO-3.html" REL=next>
 <LINK HREF="LDAP-HOWTO-1.html" REL=previous>
 <LINK HREF="LDAP-HOWTO.html#toc2" REL=contents>
</HEAD>
<BODY>
<A HREF="LDAP-HOWTO-3.html">Next</A>
<A HREF="LDAP-HOWTO-1.html">Previous</A>
<A HREF="LDAP-HOWTO.html#toc2">Contents</A>
<HR>
<H2><A NAME="s2">2. Установка LDAP сервера</A></H2>

<P>Необходимы четыре шага для установки сервера: скачать дистрибутив, распаковать, сконфигурировать Makefiles и собрать.
<P>
<H2><A NAME="ss2.1">2.1 Скачиваем дистрибутив</A>
</H2>

<P>Существует два дистрибутива LDAP серверов: LDAP сервер Мичиганского Университета и OpenLDAP сервер. Существует также Netscape Directory Server, который распространяется бесплатно только под определенными условиями (например, для учебных заведений). В основе OpenLDAP сервера лежит последняя версия сервера Мичиганского Университета, более того по нем есть списки рассылки и дополнительная документация. В этом документе предполагается, что Вы используете OpenLDAP сервер.
<P>Последняя версия доступна по адресу:
<P>
<A HREF="http://www.openldap.org">http://www.openldap.org</A><P>Если Вы хотите получить последнюю версию сервера Мичиганского Университета, посмотрите здесь:
<P>
<A HREF="ftp://terminator.rs.itd.umich.edu/ldap">ftp://terminator.rs.itd.umich.edu/ldap</A><P>Для написания этого документа я использовал последюю стабильную версию OpenLDAP и OpenLDAP 1.2.8 на дистрибутиве Slackware, который имел ядро версии 2.2.6. На сайте OpenLDAP Вы найдете последние разрабатываемую и стабильную версии OpenLDAP сервера. На момент последнего обновления этого документа, последней стабильной версией был openldap-stable-990918.tgz, также доступный через ссылку openldap-stable.tgz. Последней разрабатываемой версией был openldap-1_2_8.tgz.
<P>
<H2><A NAME="ss2.2">2.2 Распаковка сервера</A>
</H2>

<P>Теперь, когда у Вас на локальной машине есть скачанный запакованый дистрибутив, Вы можете распаковать его.
<P>Для начала скопируйте дистрибутив в желаемую директорию, например, /usr/local.
<P>Затем используйте следующую комманду:
<BLOCKQUOTE><CODE>
<PRE>
tar xvzf openldap-stable.tgz 
</PRE>
</CODE></BLOCKQUOTE>
<P>Вы также можете использовать другую комманду:
<BLOCKQUOTE><CODE>
<PRE>
gunzip openldap-stable.tgz | tar xvf - 
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss2.3">2.3 Настройка дистрибутива</A>
</H2>

<P>Существует несколько параметров, которые Вам следует изменить, чтобы получить исполняемый модуль, наилучшим образом соответствующий Вашей системе.
<P>Настройка дистрибутива происходит в 2 шага:
<UL>
<LI>Отредактируйте файл <I>ldapconfig.h.edit</I>, который находится в поддиректории <I>include</I>, той директории, куда Вы распаковали дистрибутив.</LI>
<LI>Запустите скрипт configure (если Вы ТОТ парень/девушка, Вы можете редактировать файл напрямую, без использования скрипта :^)</LI>
</UL>
<P>В файле include/ldapconfig.h.edit Вы можете изменять параметры наподобие местоположения демонов slapd и slurpd. Сам по себе этот файл очень хорошо документирован и имеет установки по умолчанию, которые удовлетворят большинство администраторов, так что если Вы спешите, можете пропустить этот шаг и сразу выполнить:
<BLOCKQUOTE><CODE>
<PRE>
vi include/ldapconfig.h.edit 
</PRE>
</CODE></BLOCKQUOTE>
<P>Исходники сервера OpenLDAP распространяются с конфигурационным скриптом для установки параметров наподобие директории инсталяции, флагов компилятора и линковщика. Выполните следующую комманду в директории, где Вы распоковали дистрибутив:
<BLOCKQUOTE><CODE>
<PRE>
./configure --help 
</PRE>
</CODE></BLOCKQUOTE>

Эта комманда выдаст все параметры, которые Вы можете изменять с помощью скрипта configure до сборки сервера. Вот некоторые полезные параметры --prefix=pref, --exec-prefix=eprefix и
--bindir=dir для директории инсталирования. Обычно, если Вы запускаете configure без параметров, он автоматически определяет подходящие параметры и подготавливает дистрибутив для установки в директорию по умолчанию. Так что просто выполните:
<BLOCKQUOTE><CODE>
<PRE>
./configure 
</PRE>
</CODE></BLOCKQUOTE>

и убедитесь по выходным данным, что все прошло успешно.
<P>
<H2><A NAME="ss2.4">2.4 Сборка сервера</A>
</H2>

<P>После конфигурирования дистрибутива, Вы можете начинать собирать его. Для начала постройте зависимости, используя комманду:
<BLOCKQUOTE><CODE>
<PRE>
make depend 
</PRE>
</CODE></BLOCKQUOTE>

После этого собирайте сервер, используя комманду:
<BLOCKQUOTE><CODE>
<PRE>
make 
</PRE>
</CODE></BLOCKQUOTE>

Если все шло хорошо, серевер соберется как был сконфигурирован. Если нет, вернитесь на предыдущий шаг и пересмотрите параметры конфигурации. В первую очередь нужно ознакомится с коментариями по специфике различных платформ, они находятся в поддиректории doc/install/hints директории, где Вы распаковали дистрибутив.
<P>Теперь инсталируем выполняемые модули и страницы man. Вам могут потребоваться права администратора, чтобы сделать это (в зависимости от того, куда Вы собираетесь инсталировать):
<BLOCKQUOTE><CODE>
<PRE>
su 
make install 
</PRE>
</CODE></BLOCKQUOTE>

Это все, теперь Вы имеете бинарники сереверов и еще некоторых утилит. Можете прямо перейти к 
<A HREF="LDAP-HOWTO-3.html#3">следующему разделу</A> для ознакомления с настройкой Вашего LDAP сервера.
<P>Если перед началом изучения, как конфигурировать Ваш LDAP серевер, Вы хотите протестировать только что собранные бинарники, то последние версии OpenLDAP серевера поставляются с тестовым скриптом. Во время последнего обновления этого документа тестовый скрипт не был на 100% стабильным во всех тестах, которые он проводил. В любом случае Вы можете попробовать запустить его, и если что-то со скриптом будет не так, прервать его выполнение нажатием Ctrl-C. В моем случае до того как скрипт завис, я смог увидеть несколько сообщений о благополучном прохождении наиболее общих тестов. Для запуска скрипта, перейдите в поддиректорию <CODE>/test</CODE> места распаковки дистрибутива и выполните:
<BLOCKQUOTE><CODE>
<PRE>
make
</PRE>
</CODE></BLOCKQUOTE>
<P>
<HR>
<A HREF="LDAP-HOWTO-3.html">Next</A>
<A HREF="LDAP-HOWTO-1.html">Previous</A>
<A HREF="LDAP-HOWTO.html#toc2">Contents</A>
</BODY>
</HTML>
