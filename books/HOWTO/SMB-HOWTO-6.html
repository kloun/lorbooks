<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>SMB HOWTO: Основная настройка (/etc/smb.conf) </TITLE>
 <LINK HREF="SMB-HOWTO-7.html" REL=next>
 <LINK HREF="SMB-HOWTO-5.html" REL=previous>
 <LINK HREF="SMB-HOWTO.html#toc6" REL=contents>
</HEAD>
<BODY>
<A HREF="SMB-HOWTO-7.html">Следующий</A>
<A HREF="SMB-HOWTO-5.html">Предыдущий</A>
<A HREF="SMB-HOWTO.html#toc6">Содержание</A>
<HR>
<H2><A NAME="s6">6. Основная настройка (/etc/smb.conf) </A></H2>

<P>Настройка Samba в Linux (или других UNIX-машинах) контролируется
единственным файлом, /etc/smb.conf. Этот файл определяет к
каким системным ресурсам вы хотите дать доступ для внешнего мира и какие
ограничения вы хотите дать на использование этих ресурсов.
<P>Так как следующие разделы посвящены организации доступа к дискам и
принтерам Linux для Windows-машин, то файл smb.conf,
показанный в этом разделе является примером, исключительно в целях
введения.
<P>Не беспокойтесь сейчас о деталях. Следующие разделы введут основные
концепции.
<P>Каждый раздел файла начинается с заголовка раздела, такого как [global],
[homes], [printers], и т.п..
<P>Секция [global] определяет некоторые переменные, которые Samba будет
использовать для определения доступа ко всем ресурсам.
<P>Раздел [homes] позволяет удаленным пользователям иметь доступ к своим (и
только своим) домашним директориям на локальной Linux-машине. Так что, если
пользователи Windows попытаются подключиться к этому разделу со своих
Windows-машин, то они будут подключены к своим персональным домашним
директориям. Заметим, что для того чтобы сделать это, они должны быть
зарегистрированы на Linux-машине.
<P>Простой файл smb.conf, приведенный ниже, позволяет удаленным
пользователям иметь доступ к их домашним директориям на локальной машине и
писать во временную директорию. Для того, чтобы пользователи Windows могли
увидеть эти ресурсы машина с Linux должна быть в локальной сети. Затем
пользователи просто подключают сетевые диски с помощью Windows File Manager
или Windows Explorer.
<P>Заметим, что в следующих разделах будут даны дополнительные записи для
этого файла, чтобы дать доступ к большему количеству ресурсов.
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
; /etc/smb.conf
;
; Убедитесь и перезапустите сервер после внесения изменений в этот
; файл, например:
; /etc/rc.d/init.d/smb stop
; /etc/rc.d/init.d/smb start

[global]
; Раскомментируйте эту строку, если вы хотите дать доступ пользователю "гость"
; guest account = nobody
   log file = /var/log/samba-log.%m
   lock directory = /var/lock/samba
   share modes = yes

[homes]
   comment = Home Directories
   browseable = no
   read only = no
   create mode = 0750

[tmp]
   comment = Temporary file space
   path = /tmp
   read only = no
   public = yes
</PRE>
<HR>
</CODE></BLOCKQUOTE>
<P>Написав новый файл smb.conf, полезно проверить его правильность. Вы можете
проверить правильность написания файла smb.conf, используя утилиту
'testparm'  (справочная страница: testparm); если testparm сообщает об
отсутствии проблем, то smbd правильно загрузит файл настроек.
<P>Полезный трюк: Если ваш сервер Samba имеет больше одного ethernet
интерфейса, то smbd может подключится к неправильному. Если это так, что вы 
можете явно заставит ее подключаться к нужному добавив строку в раздел
[global] файла /etc/smb.conf:
<P>
<BLOCKQUOTE><CODE>
<HR>
<PRE>
interfaces = 192.168.1.1/24
</PRE>
<HR>
</CODE></BLOCKQUOTE>
<P>здесь замените приведенный адрес на адрес вашего интерфейса ethernet.
Значение "24" является правильным для сети класса C, но вам может
понадобиться пересчитать это значение, если вы разделили ее на подсети. Это
число относится к сетевой маске. Числа для других классов сетей приведены в
IP-Masquerade mini-HOWTO.
<P>Также существует GUI-утилита для настройки Samba: GtkSamba. Смотрите
страницу по адресу 
<A HREF="http://www.open-systems.com/gtksamba.html">http://www.open-systems.com/gtksamba.html</A>.
<P>
<P>
<HR>
<A HREF="SMB-HOWTO-7.html">Следующий</A>
<A HREF="SMB-HOWTO-5.html">Предыдущий</A>
<A HREF="SMB-HOWTO.html#toc6">Содержание</A>
</BODY>
</HTML>
