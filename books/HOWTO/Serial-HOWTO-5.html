<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE> The Linux Serial HOWTO : Как сделать исходящий звонок через мой модем?</TITLE>
 <LINK HREF="Serial-HOWTO-6.html" REL=next>
 <LINK HREF="Serial-HOWTO-4.html" REL=previous>
 <LINK HREF="Serial-HOWTO.html#toc5" REL=contents>
</HEAD>
<BODY>
<A HREF="Serial-HOWTO-6.html">Next</A>
<A HREF="Serial-HOWTO-4.html">Previous</A>
<A HREF="Serial-HOWTO.html#toc5">Contents</A>
<HR>
<H2><A NAME="s5">5. Как сделать исходящий звонок через мой модем?</A></H2>

<P> 
<H2><A NAME="ss5.1">5.1 Аппаратные требования</A>
</H2>

<P> 
Вы можете использовать или внешний или внутренний модем. Внутренние стоят 
меньше и не занимают местоо на столе или корпусе компьютера. Но внешний 
проще в устанавке и имеет лампочки, которые дают вам сведения о том, что 
происходит. Однако внешние модемы нужно выключать, когда они не используются, 
и вероятно, они немного потребляют электричество даже когда выключены.
<P>
<P>
<H3>Внешние модемы</H3>

<P> 
Сначала, удостоверьтесь, что у вас правильный кабель. Ваш модем требует 
прямой кабель, без пересекающихся штырьков. Любой компьютерный магазин должен 
иметь их. Удостоверитесь, что вам дали то, что нужно. Если вы используете DB25 
последовательный порт, то он всегда будет будет "папа" DB25 (входящий разъем).
Не путайте его с параллельным портом, который является "мамой" DB25 
(охватывающим). Подключите ваш модем к одному из ваших последовательных 
портов. Проконсультируйтесь с руководством по вашему модему об том, как 
сделать это, если вам нужна справка.
<P>
<P>
<H3>Внутренние модемы</H3>

<P> 
Для внутреннего модема вам не нужен кабель. Внутренний модем не нуждается в 
последовательном порте, он в него встроен. Все, что вы должны сделать - 
настроить его на незанятые прерывание и адрес порта ввода-вывода. 
Проконсультируйтесь с вашим руководством по модему, если вы затрудняетесь. 
Также, см. раздел ``Я могу использовать более чем два последовательных 
устройства?", если вам нужна справка при выборе прерываний или адресов.
<P> 
На некоторых материнских платах вы должны будете отключить последовательный 
порт, который заменяет модем, чтобы избежать конфликтов. Это может быть 
выполнено перемычками или в установках BIOS, в зависимости от вашей материнской
платы.
<P> 
Проконсультируйтесь с руководством по вашей материнской плате.
<P> 
Если у вас видеоплата IBM8514, то вы должны знать о том, что в ней есть ошибка.
Вы можете столкнуться с проблемами, если захотите, чтобы ваш внутренний модем 
работал на ttyS3. Если Linux не обнаруживает ваш внутренний модем на ttyS3, вы 
можете использовать setserial, и модем будет прекрасно работать. Внутренние 
модемы на ttyS{0-2} не должны иметь каких-либо проблем.
<P> 
Linux не производит автоматической конфигурации на ttyS3 из-за ошибки этой 
видеоплаты.
<P>
<P>
<H2><A NAME="ss5.2">5.2 Общение с вашим модемом</A>
</H2>

<P> 
Используйте kermit, minicom или другую программу связи, чтобы проверить 
установку, прежде, чем вы перейдете к более сложным вещам типа SLIP или PPP. 
Вы можете найти последнюю версию kermit на 
<A HREF="http://www.columbia.edu/kermit/">http://www.columbia.edu/kermit/</A>.
<P> 
Например, надо сказать, что ваш модем был на ttyS3, и его быстродействие было 
115200 бит\сек. Вы должны были бы сделать следующее:
<BLOCKQUOTE><CODE>
<PRE>
 
      linux# kermit 
      C-Kermit 6.0.192, 6 Sep 96, for Linux 
       Copyright (C) 1985, 1996, 
        Trustees of Columbia University in the City of New York.
      Default file-transfer mode is BINARY Type ? or HELP for help.
      C-Kermit>set line /dev/ttyS3
      C-Kermit>set carrier-watch off
      C-Kermit>set speed 115200
      /dev/ttyS3, 115200 bps
      C-Kermit>c
      Connecting to /dev/ttyS3, speed 115200.
      The escape character is Ctrl-\ (ASCII 28, FS) 
      Type the escape character followed by C to get back, 
      or followed by ? to see other options.
      ATE1Q0V1                           ; you type this and then the Enter key 
      OK                                 ; modem should respond with this
</PRE>
</CODE></BLOCKQUOTE>
 
Если ваш модем отвечает на команды AT, то вы можете считать, что ваш модем 
на Linux стороне работает правильно. Теперь попробуйте позвонить на другой 
модем, напечатав:
<BLOCKQUOTE><CODE>
<PRE>
 
      ATDT7654321
</PRE>
</CODE></BLOCKQUOTE>
 
где 7654321 - номер телефона. Используйте ATDP вместо ATDT, если у вас номер
набирается пульсом. Если обращение проходит, то ваш модем работает.
<P> 
Чтобы вернуться к подсказке kermit, нажав клавишу Ctrl, нажмите клавишу 
наклонной черты влево, затем отпустите клавишу Ctrl, и нажимите клавишу C:
<BLOCKQUOTE><CODE>
<PRE>
 
      Ctrl-\-C
      (Back at linux)
      C-Kermit>quit
      linux#
</PRE>
</CODE></BLOCKQUOTE>
 
Это было только тест с использованием примитивного дозвона "вручную".
<P> 
Нормальный способ состоит в том, чтобы позволить kermit звонить с помощью 
встроенной базы данных модемов и возможностями автоматическими набора, 
например, для модема USRobotics (USR):
<BLOCKQUOTE><CODE>
<PRE>
 
        linux# kermit
        C-Kermit 6.0.192, 6 Sep 1997, for Linux
         Copyright (C) 1985, 1996,
          Trustees of Columbia University in the City of New York.
        Default file-transfer mode is BINARY
        Type ? or HELP for help
        C-Kermit>set modem type usr        ; Select modem type
        C-Kermit>set line /dev/ttyS3       ; Select communication device
        C-Kermit>set speed 115200          ; Set the dialing speed
        C-Kermit>dial 7654321              ; Dial
         Number: 7654321
         Device=/dev/ttyS3, modem=usr, speed=115200
         Call completed.&lt;BEEP>
        Connecting to /dev/ttyS3, speed 115200
        The escape character is Ctrl-\ (ASCII 28, FS).
        Type the escape character followed by C to get back,
        or followed by ? to see other options.
 
        Welcome to ...
 
        login:
</PRE>
</CODE></BLOCKQUOTE>
 
<P>См. раздел ``Программы cвязи" о программах связи, если вам нужны какие-либо
указания.
<P> 
Когда вы делаете исходящий звонок вашим модемом, установите быстродействие  
последовательного порта самым высоким, которое поддерживает ваш модем 
(обычно это не более 115200 бит\сек). This is not the same as the "advertised" 
speed of the modem such as 56K. Версии Linux с libc версии выше 5.x имеют 
поддержку для скоростей до 115200 бит\сек. В Linux работают даже более высокие 
скорости, чем эти.
<P>
<P>
<H2><A NAME="ss5.3">5.3 Настройка модема на исходящие звонки </A>
</H2>

<P> 
Для использования модема только для исходящих звонков, вы можете 
сконфигурировать ваш модем.
<P> 
Если вы предполагаете использовать ваш модем для входящих звонков, вы должны 
настроить ваш модем на то же самое быстродействие, которое вы предполагаете 
указать в getty. Однако, большинство модемов сегодня устанавливает свое 
быстродействие автоматически на одинаковое быстродействие, используя команды 
модема. Таким образом, getty, запущенный на скорости 115200, автоматически 
установит модем на это быстродействие, когда getty пошлет init строку на 
последовательный порт, на котором установлен модем. Вообще, фабричные значения 
по умолчанию, которые дают возможность исправления ошибок и аппаратного 
управления потоком данных - это самая лучшая установка для исходящих звонков
модемом, проконсультируйтесь с руководством по вашему модему для этих установок.
<P>
<P>
<H2><A NAME="ss5.4">5.4 Аппаратное управление потоком данных</A>
</H2>

<P> 
Если ваш модем поддерживает аппаратное управление потоком данных (RTS/CTS), я 
строго рекомендую вам его использовать. Это особенно важно для модемов, которые 
поддерживают сжатие данных. Сначала, вы должны разрешить RTS/CTS управление 
потоком данных на последовательном порту непосредственно. Это лучше всего 
выполнять при запуске, например, в /etc/rc.d/rc.local или /etc/rc.d/rc.serial. 
Удостоверьтесь, что эти файлы выполняются из главного файла rc.sysinit! Вы 
должны сделать следующее для каждого последовательного порта, на котором вы 
хотите разрешить аппаратное управление потоком данных: 
<BLOCKQUOTE><CODE>
<PRE>
 
      stty crtscts &lt; /dev/ttyS3
</PRE>
</CODE></BLOCKQUOTE>
 
Если не разрешено по умолчанию, то также разрешите RTS/CTS на вашем модеме. 
В этом вам может помочь ваша программа связи. Проконсультируйтесь с 
руководством по вашему модему, если необходимо, и затем сохраните настройку 
вашего модем, если ваш модем поддерживает сохранение профилей.
<P>
<P>
<HR>
<A HREF="Serial-HOWTO-6.html">Next</A>
<A HREF="Serial-HOWTO-4.html">Previous</A>
<A HREF="Serial-HOWTO.html#toc5">Contents</A>
</BODY>
</HTML>
