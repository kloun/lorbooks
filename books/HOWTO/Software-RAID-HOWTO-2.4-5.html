<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>The Software-RAID HOWTO: Тестирование</TITLE>
 <LINK HREF="Software-RAID-HOWTO-2.4-6.html" REL=next>
 <LINK HREF="Software-RAID-HOWTO-2.4-4.html" REL=previous>
 <LINK HREF="Software-RAID-HOWTO-2.4.html#toc5" REL=contents>
</HEAD>
<BODY>
<A HREF="Software-RAID-HOWTO-2.4-6.html">Next</A>
<A HREF="Software-RAID-HOWTO-2.4-4.html">Previous</A>
<A HREF="Software-RAID-HOWTO-2.4.html#toc5">Contents</A>
<HR>
<H2><A NAME="s5">5. Тестирование</A></H2>

<P>Если Вы планируете использовать RAID для получения отказоустойчивости, Вы также 
должны проверить Вашу конфигурацию, чтобы увидеть, что она действительно рабочая. Итак, как кожно имитировать отказ диска ?
<P>Коротко - Вы не можете, исключая, возможно, ``горячее'' выдергивание шнура из 
жесткого диска, отказ которого Вы хотите имитировать.  Вы никогда знаете,
что может случиться при отказе диска. Возможна электрическая блокировка шины
к которой он подсоединен, что приведет к недоступности всех устройств на 
шине. Хотя я никогда о таком не слышал. Диск может также просто выдавать
ошибки чтения/записи на уровне SCSI/IDE, что в свою очередь даст уровню RAID 
корректно обработать эту ситуацию. Это, к счастью, происходит чаще всего.
<P>
<H2><A NAME="ss5.1">5.1 Имитация отказа диска</A>
</H2>

<P>Если Вы хотите имитировать отказ диска - отсоедините устройство. Вы должны
делать это при <B>выключенном питании</B>.  Если Вы заинтересованы
в тестировании выживут ли Ваши данные без одного диска, по сравнению с обычным
количеством, нет иного выхода, как отключение. Завершите систему, отсоедините 
диск и загрузитесь снова.
<P>Посмотрите в syslog, и загляните в <CODE>/proc/mdstat</CODE>, чтобы посмотреть как действует 
RAID. Сработало?
<P>Запомните, что Вы <B>должны</B> запускать массив RAID-{1,4,5} для возможности
пережить отказ диска.  Линейный или RAID-0 откажут полностью при отсутствии 
диска.
<P>Когда Вы подключили диск снова (при выключенном питании, конечно), Вы 
можете опять добавить ``новое'' устройство в RAID, командой 
<CODE>raidhotadd</CODE>.
<P>
<H2><A NAME="ss5.2">5.2 Имитация повреждения данных</A>
</H2>

<P>RAID (будь то программный или аппаратный), предполагает, что если запись на
диск не вернула ошибку, то запись была успешной. Следовательно, если Ваш диск 
повреждает данные без возврата ошибки, Ваши данные <EM>будут</EM> повреждены. 
Это конечно очень не желательно, но возможно, и это приведет к повреждению
файловой системы.
<P>RAID не может и не должен защищать от повреждения данных на носителе. 
Следовательно, нет никакого смысла намеренно повреждать данные (используя 
<CODE>dd</CODE> например) на диске, чтобы посмотреть как RAID система это 
обработает. Наиболее вероятно (если Вы не повредите суперблок RAID), что RAID 
уровень никогда не догадается о повреждении, 
но файловая система на Вашем RAID устройстве будет повреждена.
<P>Это путь вещей предполагаемых для работы.  RAID не гарантирует целостности
данных, он просто позволяет Вам сохранить данные при отказе диска (это, конечно,
справедливо для RAID уровня 1 или выше).
<P>
<P>
<HR>
<A HREF="Software-RAID-HOWTO-2.4-6.html">Next</A>
<A HREF="Software-RAID-HOWTO-2.4-4.html">Previous</A>
<A HREF="Software-RAID-HOWTO-2.4.html#toc5">Contents</A>
</BODY>
</HTML>
