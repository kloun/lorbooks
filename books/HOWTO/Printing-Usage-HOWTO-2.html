<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Использование печати в Linux, HOWTO: Печать под Linux</TITLE>
 <LINK HREF="Printing-Usage-HOWTO-3.html" REL=next>
 <LINK HREF="Printing-Usage-HOWTO-1.html" REL=previous>
 <LINK HREF="Printing-Usage-HOWTO.html#toc2" REL=contents>
</HEAD>
<BODY>
<A HREF="Printing-Usage-HOWTO-3.html">Следующий</A>
<A HREF="Printing-Usage-HOWTO-1.html">Предыдущий</A>
<A HREF="Printing-Usage-HOWTO.html#toc2">Содержание</A>
<HR>
<H2><A NAME="s2">2. Печать под Linux</A></H2>

<P>В этом разделе обсуждается как печатать файлы, проверять очередь
печати, удалять задания из очереди, форматировать файлы до их печати и 
производить настройку среды печати.
<P>
<H2><A NAME="ss2.1">2.1 История Linux Printing</A>
</H2>

<P>
<!--
printing!history of
-->

Система печати Linux&nbsp;-- <EM>lp</EM> система&nbsp;-- это
порт исходного кода написанного в Университете Калифорнии для BSD
версии операционной системы UNIX. 
<P>
<H2><A NAME="ss2.2">2.2 Печать файлов используя <EM>lpr</EM></A>
</H2>

<P>
<!--
печать!используя команду lpr
-->

<!--
команда lpr!примеры использования
-->

Наиболее простой путь для печати в операционной системе Linux это посыл файла
для печати прямо на устройство печати. Для того чтобы сделать это используется команда
<EM>cat</EM>.  Как пользователь <CODE>root</CODE>, наберите что-то подобное этому
<P>
<BLOCKQUOTE><CODE>
<PRE>
# cat thesis.txt > /dev/lp
</PRE>
</CODE></BLOCKQUOTE>
<P>В этом случае, <CODE>/dev/lp</CODE> это символическая ссылка на устройство
печати&nbsp;-- 
это может быть матричный или лазерный принтер, typesetter, или плоттер.  (См.
<EM>ln</EM>(1) для более полной информации о символических ссылках)
<P>В целях безопасности, только пользователь <CODE>root</CODE> и пользователи в той же
группе что и демон принтера могут писать прямо на принтер.
Поэтому такие команды как <EM>lpr</EM>, <EM>lprm</EM>, and <EM>lpq</EM>
должны использоваться для доступа к принтеру.
<P>
<P>Поэтому пользователи должны использовать <EM>lpr</EM> для печати
файлов.
Команда <EM>lpr</EM> берет на себя заботы о всей начальной работе
необходимой для печати файла, и затем передает контроль другой программе, <EM>lpd</EM>,
демону линейной печати.  Затем демон линейной печати говорит принтеру
как печатать файл.
<P>Когда выполняется команда <EM>lpr</EM>, она первым делом копирует
заданный файл в определенную директорию
(spool directory), где файл остается пока <EM>lpd</EM> печатает его.
Когда <EM>lpd</EM>  сообщают, что есть файл для печати, он запускает
копию своего процесса (что программисты называют forking). 
Эта копия процесса  будет печатать наш файл в то время как
оригинальный процесс будет ждать других запросов. Это позволяет
обслуживать много заданий печати в одно время.
<P>
<P>Синтаксис <EM>lpr</EM>(1) очень прост,
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ lpr [ опции ] [ имя_файла ... ]
</PRE>
</CODE></BLOCKQUOTE>
<P>Если <CODE>имя_файла</CODE> не задано, <EM>lpr</EM> ожидает ввод данных со
стандартного вводаexpects (обычно клавиатура, или вывод другой
программы). Это позволяет пользователям перенаправлять вывод комманд в очередь
печати. Вот так,
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ cat thesis.txt | lpr
</PRE>
</CODE></BLOCKQUOTE>
<P>или,
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ pr -l60 thesis.txt | lpr
</PRE>
</CODE></BLOCKQUOTE>
<P>Команда <EM>lpr</EM> принимает несколько аргументов командной строки
что позволяет пользователям контролировать его работу. Вот некоторые
из часто используемых аргументов:
-<B>P</B>printer определяет какой принтер использовать, -<B>h</B> suppresses printing of
the burst page, -<B>s</B> создает символическую ссылку вместо
копирования файла в директорию спула (полезно для больших файлов), и -<B>#</B>num
определяет количество копий печати.  Пример взаимодействия с
<EM>lpr</EM> может выглядеть подобно этому
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ lpr -#2 -sP dj thesis.txt
</PRE>
</CODE></BLOCKQUOTE>
<P>Эта команда создает символическую ссылку на файл <CODE>thesis.txt</CODE> в 
директории спула для принтера названного <EM>dj</EM>, где он будет
обработан демоном печати <EM>lpd</EM>.  Затем будет напечатана вторая
копия файла <CODE>thesis.txt</CODE>.
<P>Для просмотра всех опций, которые может принимать <EM>lpr</EM>,
смотрите мануал по <EM>lpr</EM>(1).
<P>
<H2><A NAME="ss2.3">2.3 Просмотр очереди печати с помощью <EM>lpq</EM></A>
</H2>

<P>
<!--
печать!использование команды lpq
-->

<!--
команда lpq!примеры использования
-->

Для просмотра содержимого очереди печати используется команда <EM>lpq</EM>. 
Команда запущенная без аргументов, она возвращает содержимое очереди
печати принтера по умолчанию.
<P>Вывод возвращаемый <EM>lpq</EM> может быть полезен для многих целей.
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ lpq
lp is ready and printing
Rank   Owner      Job  Files                            Total Size
active mwf        31   thesis.txt                       682048 bytes
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss2.4">2.4 Отмена задания печати с использованием команды <EM>lprm</EM></A>
</H2>

<P>
<!--
печать!использование команды lprm
-->

<!--
команда lprm!примеры использования
-->

Другое полезное свойство любой системы печати это возможность отмены
задания, которое было перед этим помещено в очередь.
Чтобы сделать это используйте команду <EM>lprm</EM>.
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ lprm -
</PRE>
</CODE></BLOCKQUOTE>
<P>Показанная выше команда отменяет все задания печати владельцем котрых
является пользователь выполнивший эту команду. Для того чтобы отменить 
одиночное задание печати, надо сначала получить номер задания с
помощью команды <EM>lpq</EM> и затем сообщить полученный номер команде 
<EM>lprm</EM>. Например,
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ lprm 31
</PRE>
</CODE></BLOCKQUOTE>
<P>отменит задание номер 31 (<CODE>thesis.txt</CODE>) на принтере по умолчанию.
<P>
<H2><A NAME="ss2.5">2.5 Контроль демона lpd с помощью <EM>lpc</EM></A>
</H2>

<P>
<!--
печать!использование команды lpc
-->

<!--
команда lpc!примеры использования
-->

Программа <EM>lpc</EM>(8) используется для контроля принтеров, которые
обслуживает демон lpd.  Вы можете разрешать или запрещать использование
принтера или 
их очередей, перераспределять задания внутри очереди, и получать
информацию о состоянии принтеров и их очередей. Lpc наиболее часто
используется в системах, где несколько принтеров установлено на одну машину.
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ lpc
</PRE>
</CODE></BLOCKQUOTE>
<P>Команда показанная выше запускает программу lpc. По умолчанию, она
входит в интерактивный режим и вы можете начинать вводить
команды. Другие опции используются для запуска команды lpc в командной 
строке.
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ lpc status all
</PRE>
</CODE></BLOCKQUOTE>
<P>Список всех возможных команд перечислен на странице руководства
команды <EM>lpd</EM>, но здесь перечислено несколько главных команд,
которые вы должны знать. Любые команды обозначенные как <EM>option</EM>
могут быть либо именем принтера (lp, print, etc) или ключевым словом
<CODE>all</CODE>, которое обозначает все принтера.
<P>
<UL>
<LI> disable <EM>option</EM> -  запрещает добавление любых новых заданий 
печати</LI>
<LI> down <EM>option</EM> - запрещает все задания на принтере</LI>
<LI> enable <EM>option</EM> - разрешает ввод новых заданий в
очередь печати</LI>
<LI> quit (or exit) - покинуть lpc</LI>
<LI> restart <EM>option</EM> - перезагрузить lpd для данного принтера</LI>
<LI> status <EM>option</EM> - статус печати принтера</LI>
<LI> up <EM>option</EM> - разрешить все и стартовать новый демон lpd</LI>
</UL>
<P>
<H2><A NAME="ss2.6">2.6 Использование printtool в RedHat</A>
</H2>

<P>
<!--
печать!использование printtool в Red Hat
-->

<!--
Red Hat Linux!printool
-->

<!--
утилита printool
-->

Небольшое замечание  here on RedHat's amazing printtool program.  
<P>Она умеет делать все, что должен делать magicfilter.  RedHat уже
установил много программ для использования фильтров. Здесь показано
как установить принтер  HP LJ 4L, подключенный к параллельному порту,
в RedHat 4.0 (эта процедура должна быть одинаковой для всех версий RH).
<UL>
<LI>Войдите как root и запустите printtool (если вы используете
команду su, вы должны установить  SETENV DISPLAY :0.0 и xhost +).</LI>
<LI>Щелкните кнопку "Add" ("Добавить"),  и нажмите "OK" для
локального принтера.</LI>
<LI>Заполните поле именем устройства печати (например /dev/lp1)</LI>
<LI>Заполните поле входного фильтра - Выберите тип принтера,
разрешение и размер бумаги (ljet4, 300x300 и letter для нашего примера)</LI>
<LI>Нажмите "OK", и перезапустите lpd.</LI>
</UL>

Подобным образом исправляя файл /etc/printcap вручную, вы можете
иметь множество определений принтера для каждого физического
принтера. Каждое для различных размеров бумаги, разрешений и т.п.
<P>
<HR>
<A HREF="Printing-Usage-HOWTO-3.html">Следующий</A>
<A HREF="Printing-Usage-HOWTO-1.html">Предыдущий</A>
<A HREF="Printing-Usage-HOWTO.html#toc2">Содержание</A>
</BODY>
</HTML>
