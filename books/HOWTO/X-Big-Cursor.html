<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Мини-HOWTO: Большой курсор в X11</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.57"></HEAD
><BODY
CLASS="ARTICLE"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="AEN2"
>Мини-HOWTO: Большой курсор в X11</A
></H1
><H2
CLASS="SUBTITLE"
>Как увеличить курсор мыши в X windows</H2
><DIV
CLASS="AUTHORGROUP"
><A
NAME="AEN5"
></A
><H3
CLASS="AUTHOR"
><A
NAME="AEN6"
>Jorg Schneider</A
></H3
><DIV
CLASS="AFFILIATION"
><DIV
CLASS="ADDRESS"
><P
CLASS="ADDRESS"
>joerg.schneider@ira.uka.de</P
></DIV
></DIV
><H3
CLASS="CORPAUTHOR"
>Перевод: <A
HREF="mailto:pax@asp-linux.com"
TARGET="_top"
>Павел Гашев</A
>,
<A
HREF="http://www.asplinux.com"
TARGET="_top"
>SWSoft Pte Ltd.</A
></H3
></DIV
><P
CLASS="PUBDATE"
>версия 2, 11 августа 1997<BR></P
><DIV
><DIV
CLASS="ABSTRACT"
><A
NAME="AEN16"
></A
><P
></P
><P
>В этом документе описывается процесс, позволяющий увеличить курсор мыши в X-windows.</P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Содержание</B
></DT
><DT
>1. <A
HREF="X-Big-Cursor.html#TOP"
>Введение</A
></DT
><DT
>2. <A
HREF="X-Big-Cursor.html#AEN34"
>Об этом документе</A
></DT
><DT
>3. <A
HREF="X-Big-Cursor.html#HOWTO"
>Как это сделать</A
></DT
><DT
>4. <A
HREF="X-Big-Cursor.html#NOTES"
>Замечания и ограничения</A
></DT
><DT
>5. <A
HREF="X-Big-Cursor.html#TECH"
>Технические рассуждения</A
></DT
><DT
>6. <A
HREF="X-Big-Cursor.html#IDEAS"
>Другие идеи, позволяющие сделать курсор более заметным</A
></DT
><DT
>7. <A
HREF="X-Big-Cursor.html#INFO"
>Дополнительная информация</A
></DT
><DD
><DL
><DT
>7.1. <A
HREF="X-Big-Cursor.html#FONTSERVER"
>Сервер шрифтов</A
></DT
><DD
><DL
><DT
>7.1.1. <A
HREF="X-Big-Cursor.html#FSCONFIG"
>Установка сервера шрифтов</A
></DT
></DL
></DD
><DT
>7.2. <A
HREF="X-Big-Cursor.html#GETBDF"
>Как достать bdf-файлы для некоторых шрифтов</A
></DT
></DL
></DD
><DT
>8. <A
HREF="X-Big-Cursor.html#AEN158"
>Авторские права</A
></DT
></DL
></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="TOP"
>1. Введение</A
></H1
><P
>Существует несколько причин, по которым стандартный курсор X11 может быть маловат:

<P
></P
><UL
><LI
><P
> когда X запущен на портативном компьютере с жидкокристаллическим дисплеем (LCD) с низким контрастом;</P
></LI
><LI
><P
> на нормальных дисплеях с большим разрешением (например 1600x1280);</P
></LI
><LI
><P
> для человека с плохим зрением даже на нормальном оборудовании.</P
></LI
></UL
>&#13;</P
><P
>В любом случае, увеличение курсора может решить проблему. Идеально, если эту задачу выполняет одна X-программа, автоматически увеличивающая каждый раз все виды курсоров.</P
><P
>Насколько я знаю, не существует простого пути для создания такой утилиты, так как X-протокол не имеет представления о том, как узнать вид курсора. Для более подробной информации см. раздел "<A
HREF="X-Big-Cursor.html#TECH"
><I
>Технические рассуждения</I
></A
>".</P
><P
>Впрочем, кое-что можно сделать:</P
><P
>Существует набор стандартных курсоров мыши, которые находятся в шрифте "cursor" (вы можете посмотреть их командой "<TT
CLASS="LITERAL"
>xfd -fn cursor</TT
>"). Большинство программ используют именно эти курсоры, и ключевой идеей является замена стандартного шрифта "cursor" на увеличенную версию.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="AEN34"
>2. Об этом документе</A
></H1
><P
>Причиной написания этого мини-HOWTO послужила просьба моего однокурсника с плохим зрением, который спросил меня о том, как увеличить курсор мыши под X. После того, как я нашел способ это сделать, я написал первую версию данного документа. Информация об этом методе не является общей, но тем не менее я решился поместить его в Linux мини-HOWTO, даже несмотря на тот факт, что
<I
CLASS="EMPHASIS"
>он совсем не специфичен для Linux</I
>. Как и другие мини-HOWTO, он находится в <A
HREF="http://sunsite.unc.edu/LDP/HOWTO/"
TARGET="_top"
>http://sunsite.unc.edu/LDP/HOWTO/</A
>.</P
><P
><A
HREF="http://i11www.ira.uka.de/~schneid/X11-big-cursor/master/"
TARGET="_top"
>Основная версия</A
> этого документа поддерживается в формате SGML/linuxdoc. Это позволяет автоматически получать версии в других форматах (которые можно найти там же): html, text, LaTeX, DVI, PostScript, GNU info.</P
><P
><A
HREF="mailto:shinobu@emichan.rim.or.jp"
TARGET="_top"
>Shinobu Miyata</A
> перевел этот текст на Японский <A
HREF="http://i11www.ira.uka.de/~schneid/jp/X11-big-cursor/"
TARGET="_top"
>http://i11www.ira.uka.de/~schneid/jp/X11-big-cursor/</A
>.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="HOWTO"
>3. Как это сделать</A
></H1
><P
>Следуйте шагам, описанным ниже. Если вы не хотите загружать и компилировать пакет bdfresize, вы можете пропустить первые три шага и найти увеличенный шрифт, вместо того, чтобы создавать его.

<P
></P
><OL
TYPE="1"
><LI
><P
>берем файл cursor.bdf (исходный текст шрифта "cursor") из какого-нибудь дистрибутива X, например <A
HREF="ftp://ftp.x.org/pub/R6.3/xc/fonts/bdf/misc/cursor.bdf"
TARGET="_top"
>ftp://ftp.x.org/pub/R6.3/xc/fonts/bdf/misc/cursor.bdf</A
> (если вы его там не найдете, попробуйте поискать его в сети или возьмите <A
HREF="http://i11www.ira.uka.de/~schneid/X11-big-cursor/cursor.bdf"
TARGET="_top"
>мою копию</A
>).  </P
></LI
><LI
><P
> берем, компилируем и инсталлируем пакет bdfresize
<A
HREF="ftp://ftp.cs.titech.ac.jp/X11/contrib/Local/bdfresize-1.4.tar.Z"
TARGET="_top"
>ftp://ftp.cs.titech.ac.jp/X11/contrib/Local/bdfresize-1.4.tar.Z</A
>
 (или <A
HREF="http://i11www.ira.uka.de/~schneid/X11-big-cursor/bdfresize-1.4.tar.gz"
TARGET="_top"
>моя копия</A
>):
     zcat bdfresize-1.4.tar.Z  | tar xf -
     cd bdfresize-1.4
     xmkmf
     make
     
На Linux вы, наверно, должны сделать:
     make CCOPTIONS='-include /usr/include/bsd/bsd.h' clean all
     </P
></LI
><LI
><P
> создаем каталог и записываем в него увеличенный шрифт (например в два раза):

     mkdir $HOME/fonts
     bdfresize -f 2 cursor.bdf | bdftopcf &#62;$HOME/fonts/cursor2.pcf
     mkfontdir $HOME/fonts
     
     
Я подготовил несколько <A
HREF="http://i11www.ira.uka.de/~schneid/X11-big-cursor/fonts/"
TARGET="_top"
>шрифтов</A
>
с увеличением в 1.5, 2, 2.5, 3, 4, 5, 6, 7, 8 и 16 раз. Если вы не хотите пользоваться bdfresize, можете найти их и поместить в каталог
<TT
CLASS="LITERAL"
>$HOME/fonts</TT
>.&#13;</P
></LI
><LI
><P
>изменяем файлы <TT
CLASS="LITERAL"
>.xinitrc</TT
> или <TT
CLASS="LITERAL"
>.xsession</TT
>: перед тем как запустится X-клиент (который использует курсор), должны запускаться следующие команды:

     xset +fp $HOME/fonts
     xsetroot -cursor_name X_cursor
     &#13;</P
></LI
><LI
><P
> перезапустите X-сервер.</P
></LI
></OL
>&#13;</P
><P
>Это все. Теперь все курсоры мыши должны быть в два раза больше.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="NOTES"
>4. Замечания и ограничения</A
></H1
><P
>&#13;<P
></P
><UL
><LI
><P
>X-сервер может ограничивать максимальный размер курсора, особенно если курсор реализуется аппаратно. Другие X-сервера не имеют таких ограничению. Например, XF86_S3 3.3 работает с курсором 512x512 (правда очень медленно).</P
></LI
><LI
><P
>Увеличенный шрифт должен иметь то же название, что и оригинал. (<I
CLASS="EMPHASIS"
>имя шрифта</I
> должно быть <TT
CLASS="LITERAL"
>cursor</TT
>, <I
CLASS="EMPHASIS"
>имя файла</I
> не имеет значение); это не проблема, так как <TT
CLASS="LITERAL"
>bdfresize</TT
> не меняет имя шрифта.</P
></LI
><LI
><P
>В списке каталогов шрифтов каталог с новым шрифтом должен быть помешен выше каталога со стандартным шрифтом; это выполняет команда <TT
CLASS="LITERAL"
>xset +fp</TT
> (в отличие от
<TT
CLASS="LITERAL"
>xset fp+</TT
>).</P
></LI
><LI
><P
>Любые изменения в каталоге <TT
CLASS="LITERAL"
>$HOME/fonts/</TT
> вступают в силу после команд <TT
CLASS="LITERAL"
>mkfontdir $HOME/fonts; xset fp rehash</TT
> 
и перезапуска X-клиентов (а точнее, для вновь созданных курсоров).</P
></LI
><LI
><P
> <TT
CLASS="LITERAL"
>xset +fp path</TT
> может не работать на X-терминале, если он использует сервер шрифтов (см. раздел <A
HREF="X-Big-Cursor.html#FONTSERVER"
><I
>Сервер шрифтов</I
></A
>) 
или другой способ управления шрифтами (это может исправить только ваш системный администратор).</P
></LI
><LI
><P
>Этот же способ можно использовать для <TT
CLASS="LITERAL"
>olcursor</TT
> и
<TT
CLASS="LITERAL"
>decw$cursor</TT
>, и других шрифтов с курсорами мыши, которые вам могут встретиться.</P
></LI
><LI
><P
>Курсорные шрифты, созданные bdfresize, выглядят не очень гладкими, особенно при большом увеличении. Было бы не плохо, если бы кто-нибудь нарисовал свои крупные курсоры.</P
></LI
></UL
>&#13;</P
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="TECH"
>5. Технические рассуждения</A
></H1
><P
>Возможно ли написать программу, автоматически увеличивающую указатели?</P
><P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>Решение 1 (частичное)</DT
><DD
><P
>Использовать XTestCompareCursor из XTEST. Для всех окон, над которыми движется указатель мыши курсор окна сравнивается с набором "известных" курсоров (например, из шрифта cursor). Если найден похожий курсор, то он заменяется на увеличенную версию. В противном случае, он остается без изменения или подставляется стандартный курсор. Это работает в том случае, если у вас есть XTest.</P
></DD
><DT
>Решение 2</DT
><DD
><P
>Написать X-прокси-сервер, передающий все запросы на X-сервер, за исключением запросов соответствующих функции <TT
CLASS="LITERAL"
>XCreate*Cursor</TT
> из библиотеки Xlib. Курсоры, определенные в запросах <TT
CLASS="LITERAL"
>XCreate*Cursor</TT
> должны изменяться на соответствующие увеличенные. </P
><P
>Прокси-сервер имитирует новый дисплей, например <TT
CLASS="LITERAL"
>:1</TT
>. Все клиенты, использующие этот дисплей (например <TT
CLASS="LITERAL"
>xterm -display
:1</TT
>) показываются на обычном X-сервере <TT
CLASS="LITERAL"
>:0</TT
>), но их курсоры автоматически увеличиваются. Курсоры клиентов, использующих <TT
CLASS="LITERAL"
>:0</TT
> <I
CLASS="EMPHASIS"
>не изменяются</I
>.</P
></DD
></DL
></DIV
></P
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="IDEAS"
>6. Другие идеи, позволяющие сделать курсор более заметным</A
></H1
><P
>Вот некоторые идеи, позволяющие сделать курсор более заметным, при помощи простых программ.</P
><P
>&#13;<P
></P
><UL
><LI
><P
>Когда нажимается какая-нибудь клавиша, вывести на пол-секунды что-нибудь (большой курсор или маленькое окно) на месте курсора.</P
></LI
><LI
><P
>Использовать XRecolorCursor для смены цвета курсора каждую 0.1 секунды.</P
></LI
></UL
>&#13;</P
><P
>Более ожидаемое решение - это <I
CLASS="EMPHASIS"
>мышиный хвост</I
> а-ля windows, т.е. при движении мыши, курсор рисуется на новом месте, а на старом месте стирается только через некоторую задержку. Мышиный хвост лучше всего реализовать в X-сервере, но проще все его сделать как X-клиент, а еще лучше как прокси-сервер (см. "<A
HREF="X-Big-Cursor.html#TECH"
><I
>Технические рассуждения</I
></A
>").</P
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="INFO"
>7. Дополнительная информация</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="FONTSERVER"
>7.1. Сервер шрифтов</A
></H2
><P
>Сервер шрифтов - это сетевой сервис с простым протоколом, предоставляющий X11 набор шрифтов. Он предоставляет как список шрифтов, так и изображение.</P
><P
>Вы можете использовать сервер шрифтов для модифицированных шрифтов вместо того, чтобы хранить их у себя на компьютере.</P
><P
>Этот способ особенно удобен, если несколько машин не используют общую файловую системы или если вы пользуетесь X-терминалами. </P
><P
>Сам сервер шрифтов и утилиты, связанные с ним, идут с дистрибутивом X11R5+ (AFAIK).</P
><DIV
CLASS="SECT3"
><HR><H3
CLASS="SECT3"
><A
NAME="FSCONFIG"
>7.1.1. Установка сервера шрифтов</A
></H3
><P
>Прочитайте руководства <I
CLASS="EMPHASIS"
>fs(1)</I
>, <I
CLASS="EMPHASIS"
>fslsfonts(1)</I
> (или
<I
CLASS="EMPHASIS"
>xfs(1)</I
>, <I
CLASS="EMPHASIS"
>xfslsfonts(1)</I
> и попробуйте - это не сложно. Скажем, если вы запустили сервер шрифтов на машине <TT
CLASS="LITERAL"
>some.host.edu</TT
>
на порту 7100. Вы можете проверить, как он работает командой</P
><P
><TT
CLASS="LITERAL"
>fslsfonts -server some.host.edu:7100</TT
></P
><P
>И настроить X-сервер командой</P
><P
><TT
CLASS="LITERAL"
>xset +fp tcp/some.host.edu:7100</TT
>,</P
><P
>которая должна выполниться без ошибок.</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="GETBDF"
>7.2. Как достать bdf-файлы для некоторых шрифтов</A
></H2
><P
>Если у вас установлен сервер шрифтов, то используйте команду <TT
CLASS="LITERAL"
>fstobdf</TT
>, идущую вместе с сервером.</P
><P
>Кроме того, вы можете попробовать команду <TT
CLASS="LITERAL"
>getbdf</TT
>, которая записывает любой установленный в X11 шрифт в bdf файл.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="AEN158"
>8. Авторские права</A
></H1
><P
>Авторские права на русский перевод этого текста принадлежат &copy; 2000 SWSoft Pte Ltd.
Все права зарезервированы.</P
><P
>Этот документ является частью проекта Linux HOWTO.</P
><P
>Авторские права на документы Linux HOWTO принадлежат их авторам, если явно
не указано иное. Документы Linux HOWTO, а также их переводы, могут
быть воспроизведены и распространены полностью или частично на любом
носителе, физическом или электронном, при условии сохранения этой заметки об
авторских правах на всех копиях. Коммерческое распространение разрешается и
поощряется; но, так или иначе, автор текста и автор перевода желали бы знать о
таких дистрибутивах.</P
><P
>Все переводы и производные работы, выполненные по документам Linux HOWTO,
должны сопровождаться этой заметкой об авторских правах. Это делается в
целях предотвращения случаев наложения дополнительных ограничений на
распространение документов HOWTO. Исключения могут составить случаи
получения специального разрешения у координатора Linux HOWTO, с которым
можно связаться по адресу приведенному ниже.</P
><P
>Мы бы хотели распространить эту информацию по всем возможным каналам. Но
при этом сохранить авторские права и быть уведомленными о всех планах
распространения HOWTO. Если у вас возникли вопросы, пожалуйста, обратитесь
к координатору проекта Linux HOWTO по электронной почте:
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:linux-howto@metalab.unc.edu"
>linux-howto@metalab.unc.edu</A
>&#62;</TT
> или к координатору русского
перевода Linux HOWTO компании SWSoft Pte Ltd. по адресу
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:linux-howto@asplinux.ru"
>linux-howto@asplinux.ru</A
>&#62;</TT
></P
></DIV
></DIV
></BODY
></HTML
>