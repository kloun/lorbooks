<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE> Large-Disk-HOWTO : Геометрия диска , разделы и `overlap'</TITLE>
 <LINK HREF="Large-Disk-HOWTO-8.html" REL=next>
 <LINK HREF="Large-Disk-HOWTO-6.html" REL=previous>
 <LINK HREF="Large-Disk-HOWTO.html#toc7" REL=contents>
</HEAD>
<BODY>
<A HREF="Large-Disk-HOWTO-8.html">Next</A>
<A HREF="Large-Disk-HOWTO-6.html">Previous</A>
<A HREF="Large-Disk-HOWTO.html#toc7">Contents</A>
<HR>
<H2><A NAME="overlap"></A> <A NAME="s7">7. Геометрия диска , разделы и `overlap'</A></H2>

<P>
<!--
диск!геометрия
-->

<!--
диск!разделы
-->

Если на вашем диске установлено несколько операционных систем, 
то каждая из них использует один или более разделов. 
Рассогласования между ними по поводу границ разделов могут привести
к катастрофическим последствиям.
<P>
<A NAME="таблица разделов"></A> 
MBR содержит  <I>таблицу разделов</I> описывающую расположение
основных разделов. Данная таблица включает 4 описания , для
4х основных  разделов , каждое выглядит таким образом
<BLOCKQUOTE><CODE>
<PRE>
struct partition {
        char active;    /* 0x80: загрузочный, 0: не загрузочный */
        char begin[3];  /* CHS для первого сектора */
        char type;
        char end[3];    /* CHS для последнего сектора */
        int start;      /* 32 битный номер сектора (считая с 0) */
        int length;     /* 32 битное число , количество секторов */
};
</PRE>
</CODE></BLOCKQUOTE>

(Где CHS означает Cylinder/Head/Sector).
<P>Данная информация несколько избыточна : положение раздела на диске
определяется как 24-битными полями  <CODE>begin</CODE> и <CODE>end</CODE> ,
и 32 битными полями <CODE>start</CODE> и <CODE>length</CODE> .
<P>Линукс использует только поля <CODE>start</CODE> и <CODE>length</CODE> , и поддерживает
партиции содержащие не более 2^32 секторов , т.е. размер раздела
ограничен 2 ТиБ. Это в 100 раз больше чем любой доступный сегодня диск
, и вероятно это лимита хватит на следующие 5-8 лет.
(Хотя разделы и могут быть очень больших размеров, но в тоже время
нужно помнить что максимальный размер файла в ext2 системе 2 ГиБ) 
<P>DOS использует поля <CODE>begin</CODE> и <CODE>end</CODE> 
и использует сервисы BIOS (Int 13h) для доступа к диску , и поэтому
не может использовать диски более 8.4 ГБ , даже с новым (преобразующим
BIOS). (Разделы не могут быть более 2.1 ГБ , из за ограничений
файловой системы FAT16).  
<P>Windows 95 поддерживает расширенный INT13 интерфейс ,и использует специальные
типа разделов (c,e,f вместо b,6,5) чтобы обозначить что к партиции
нужно обращаться таким образом.При использовании этих типов разделов
, <CODE>begin</CODE> и <CODE>end</CODE> поля содержат "пустую" информацию ,
(1023/255/63).
Windows 95 OSR2  поддерживает систему FAT32  (типы разделов
b и c),которая позволяет использовать разделы почти 2 ТиБ размером.
<P>Сообщения о перекрывании ('ovelapping') выдаваемые <CODE>fdisk</CODE> 
обычно обусловлены тем , что он воспринимает как не корректные поля
<CODE>begin</CODE> и <CODE>end</CODE> для партиций большего размера.
Проблема не поддается корректировке , т.к. разделы всегда будут 
восприниматься как перекрывающиеся , на дисках с более чем 1024
цилиндрами. 
Просто игнорируйте подобные сообщения , т.к. поля  <CODE>start</CODE> и <CODE>length</CODE>
все равно содержат корректную информацию. Следует быть осторожным при
использовании fdisk , когда диск используется совместно с DOS, и 
использовать следующий формат вызова команд   <CODE>cfdisk -Ps /dev/hdx</CODE> и <CODE>cfdisk -Pt /dev/hdx</CODE>
для просмотра таблицы разделов диска  <CODE>/dev/hdx</CODE>.
<HR>
<A HREF="Large-Disk-HOWTO-8.html">Next</A>
<A HREF="Large-Disk-HOWTO-6.html">Previous</A>
<A HREF="Large-Disk-HOWTO.html#toc7">Contents</A>
</BODY>
</HTML>
