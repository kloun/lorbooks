<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>IPX в Linux HOWTO: Настройка вашей Linux-машины как маршрутизатора IPX</TITLE>
 <LINK HREF="IPX-HOWTO-9.html" REL=next>
 <LINK HREF="IPX-HOWTO-7.html" REL=previous>
 <LINK HREF="IPX-HOWTO.html#toc8" REL=contents>
</HEAD>
<BODY>
<A HREF="IPX-HOWTO-9.html">Следующий</A>
<A HREF="IPX-HOWTO-7.html">Предыдущий</A>
<A HREF="IPX-HOWTO.html#toc8">Содержание</A>
<HR>
<H2><A NAME="s8">8. Настройка вашей Linux-машины как маршрутизатора IPX</A>      </H2>

<P>Если вы имеете несколько сегментов IPX, и вы желаете создать
взаимодействие между ними, то вам необходимы услуги маршрутизатора. В
среде Novell существуют 2 вида информации, которые необходимо
распространять по сети. Это информация о сетевых маршрутах,
распространяемая используя Novell RIP, и информация о сервисах,
распространяемая используя Novell SAP. Любой маршрутизатор должен
поддерживать оба этих протокола чтобы быть полезным в большинстве
случаев.
<P>
<P>Linux имеет поддержку обоих протоколов и может быть довольно легко
настроее, чтобы выполнять функции полномасштабного маршрутизатора
Novell.
<P>
<P>Поддержка IPX в ядре Linux в действительности управляет пакетами
IPX пересылаемые через сетевые интерфейсы, но она делает это согласно
правилам, закодированным в таблице маршрутизации IPX. Linux
необходимы программы реализующие Novell RIP и SAP, чтобы обеспечивать
правильность построения таблицы маршрутизации IPX и их периодическое
обновление для отражения изменений в сетевом статусе.
<P>
<P>Volker Lendecke <CODE>&lt;lendecke@namu01.gwdg.de></CODE> разработал демон
маршрутизации <EM>ipxripd</EM>, который будет делать это. Описанный ниже
пакет <EM>mars_nwe</EM> включает альтернативный демон маршрутизации.
<P>
<P>Вы можете найти <EM>ipxripd</EM> на: 
<A HREF="ftp://sunsite.unc.edu/pub/Linux/system/filesystems/ncpfs/ipxripd-0.7.tgz">sunsite.unc.edu</A><P>
<P>или на сервере Volkers по адресу: 
<A HREF="ftp://ftp.gwdg.de/pub/linux/misc/ncpfs/ipxripd-0.7.tgz">ftp.gwdg.de</A><P>
<P>Настройка возможности, чтобы ваша Linux-машина работала как маршрутизатор
очень проста. Необходимо сделать следующие шаги:
<P>
<P>
<OL>
<LI>Скомпилировать ваше ядро с поддержкой IPX, Ethernet и
<CODE>/proc</CODE>.</LI>
<LI>Получить, скомпилировать и установить программу демона
<EM>ipxd</EM>. </LI>
<LI>Загрузить новое ядро и убедиться, что каждая из карт
Ethernet была правильно обнаружена и нет конфликтов
оборудования. </LI>
<LI>Включить протокол IPX на каждом интерфейсе, используя
команду <EM>ipx_interface</EM> описанную выше.</LI>
<LI>Запустить программу демона <EM>ipxd</EM>.</LI>
</OL>
<P>
<P>Рассмотрим следующую простую сеть:
<P>
<PRE>
 IPX Addr: 0x01000000  802.2
|--------------------------|
              |
              \_________________________
                                        \     Linux Маршрутизатор
 IPX Addr: 0x02000000  802.2             \
|--------------------------|              \   eth0/-----------\
              |                            \--====|           |
              \_________________________          | Таблица   |
                                        \     eth1| Маршрути- |
 IPX Addr: 0x03000000  etherII           \----====| зации IPX |
|--------------------------|                      |    ^      |
              |                               eth2|    |      |
              \______________________________/====|  IPXd     |
                                                  |  SAPd     |
 IPX Addr: 0x04000000  etherII                eth3|           |
|--------------------------|                 /====|           |
              |                              |    \___________/
              \______________________________/
</PRE>
<P>
<P>Настройка для вышеуказанной сети должна выглядеть подобно этому:
<P>
<BLOCKQUOTE><CODE>
<PRE>
# ipx_interface add eth0 802.2 0x0100000000
# ipx_interface add eth1 802.2 0x0200000000
# ipx_interface add eth2 etherii 0x0300000000
# ipx_interface add eth3 etherii 0x0400000000
# ipxd
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>Затем вам необходимо немного подождать и проверить ваш файл
<CODE>/proc/net/ipx_route</CODE> и вы должны увидеть его заполненным
маршрутами IPX относящихся к вашей конфигурации и другими полученными
от других маршрутизаторов в сети.
<P>
<H2><A NAME="ss8.1">8.1 Необходимо ли мне настраивать внутреннюю сеть?</A>
        </H2>

<P>Novell имеет свойство, называемое внутренняя сеть, которое
используется для упрощения маршрутизации когда машина имеет больше
одного сетевого устройства. Это полезно для файловых серверов,
которые подключены к нескольким сетям, так как это означает, что
только один маршрут необходим чтобы информационные сообщения о
сервисах достигли сервера вне зависимости от того с какой сети идет
попытка.
<P>
<P>В случае конфигурации, когда вы не запустили файловый сервер и
ваша машина выступает только в роли маршрутизатора IPX этот вопрос
не является легким. Как было отмечено, что конфигурация для IPX/PPP
работает `лучше' если вы также настроите внутреннюю сеть.
<P>
<P>В любом случае это легко сделать, но может потребовать
перекомпиляции вашего ядра. Когда вы настраиваете его через
<CODE>make config</CODE> вы должны ответить <CODE>y</CODE> когда вас спросят
<CODE>Full internal IPX network</CODE> как показано: 
<P>
<BLOCKQUOTE><CODE>
<PRE>
  ...
  ...
 Full internal IPX network (CONFIG_IPX_INTERN) [N/y/?] y
  ...
  ...
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>Для настройки интерфейса внутренней сети, используйте команду
<EM>ipx_internal_net</EM>, описанную ранее в разделе утилит
IPX. Главная предосторожность в том что надо убедиться, что сетевой
адрес IPX который вы назначили является уникальным в вашей сети и
что никакая другая машина или сеть не используют его.
<P>
<HR>
<A HREF="IPX-HOWTO-9.html">Следующий</A>
<A HREF="IPX-HOWTO-7.html">Предыдущий</A>
<A HREF="IPX-HOWTO.html#toc8">Содержание</A>
</BODY>
</HTML>
