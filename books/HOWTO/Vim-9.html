<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Vim Color Editor HOW-TO (Vi Улучшенный с цветной подсветкой синтаксиса) : Руководство по Vi </TITLE>
 <LINK HREF="Vim-10.html" REL=next>
 <LINK HREF="Vim-8.html" REL=previous>
 <LINK HREF="Vim.html#toc9" REL=contents>
</HEAD>
<BODY>
<A HREF="Vim-10.html">Next</A>
<A HREF="Vim-8.html">Previous</A>
<A HREF="Vim.html#toc9">Contents</A>
<HR>
<H2><A NAME="vimtut"></A> <A NAME="s9">9. Руководство по Vi </A></H2>

<P>В этом пособии,описываются некоторые "продвинутые" команды и концепции <B>vi</B>,
так, чтобы вы могли оценить всю мощь <B>vi</B> и продумать какие команды вам необходимо
изучить в первую очередь. Почти все руководства по <B>vi</B> перечисляют доступные команды,
но не показывают их взаимосвязи;это и есть основное предназначение данного руководства.
<H2><A NAME="ss9.1">9.1 Команды перемещения курсора </A>
</H2>

<P>Команды <B>vi</B> для перемещения курсора,позволяют позиционировать курсор в файле
и/или на экране эффективно,с минимальным количеством нажатий клавиш.
Существует огромное количество команд перемещения курсора - не пытайтесь запомнить их
все сразу ! Позже вы увидите,что мощь <B>vi</B> заключается в комбинации команд
передвижения курсора с командами для удаления,изменения,копирования и фильтрования текста.
<P>Пожалуйста выберите какой нибудь большой текст,чтобы вы смогли проэкспериментировать
с каждой  из описанных команд. Также помните,что эти команды будут работать только
в командном режиме,не в режиме вставки;если вы начали вводить эти команды прямо в текст
- нажмите ESC чтобы вернуться в командный режим. 
<P>
<UL>
<LI> <B>Клавиши-стрелки</B> : Клавиши со стрелками перемещают курсор на одну позицию
влево,вправо,вверх или вниз. Перемещение выше начала файла,ниже его последней линии или
перемещение влево или вправо (автоматический перенос) за край строки не разрешены.

<P>
</LI>
<LI> <B>hjkl</B> : Когда <B>vi</B> был написан (примерно в 1978), многие терминалы на UNIX
системах не имели клавиш-стрелок! <B>h, j, k,</B> и <B>l</B> были выбраны как команды 
для перемещения влево,вниз,вверх и вправо соотвественно.
Попробуйте их! Большинство <B>vi</B> профессионалов предпочитают их, курсорным клавишам
потому-что
<UL>
<LI><B>(а)</B> они располагаются одинаково на всех типах клавиатуры, и</LI>
<LI><B>(б)</B> они приятней для пальцев, чем 
большинство курсорных клавиш, которые расположены ввиде "T" или другой 
нелинейной форме.</LI>
</UL>


Почему h, j, k, и l? Хорошо, в наборе символов ASCII , CTRL-H это backspace 
(перемещение влево), CTRL-J это linefeed (перемещение вниз), и, конечно, k и l расположены за
h и j,поэтому их легко запомнить.

<P>
</LI>
<LI> <B>0</B> : ("ноль", не "о") Перемещает курсор к началу текущей линии. (Чтобы
попробывать эту и несколько последующих команд,используйте <B>h j k l</B> или 
клавиши со стрелками,чтобы перейти к строке с отступом,которая содержит несколько "е".
Если вы не найдете такой строки - создайте её сами, вставив несколько пробелов 
в начало строки.

<P>
</LI>
<LI> <B> ^ </B> : Передвигает курсор на первый символ,не являющийся пробелом,в текущей строке.(Для строки с отступом, команды 0 и ^ действуют по разному).

<P>
</LI>
<LI> <B> $ </B> : Перемещает курсор на последний символ текущей строки.

<P>
</LI>
<LI> <B> tC </B> : Передвигает к (не "на") следующий символ "c" в текущей строке. (Нажмите 0,
а затем te. Это переместит вас к первой  "e" в текущей строке.)

<P>
</LI>
<LI> <B> fC </B> : Находит (перемещает "на") первый символ "c" в текущей строке. (Нажмите
fe, и курсор найдет (переместиться на позицию) следующего символа "e" в текущей строке.)


<P>
</LI>
<LI> <B> TC </B> : Передвигает к (но не "на") преведущий символ "c" в текущей строке. 
(Нажмите $, затем Te.)

<P>
</LI>
<LI> <B> FC </B> : Находит (передвигает "на") преведущий "c" в текущей строке.
(Нажмите Fe.)

<P>
</LI>
<LI> <B> n| </B> : Передвигает к колонке  к колонке n в текущей строке. (Попробуйте 20 |. Цифры 2 и 0
не будут отображаться во время ввода, но когда вы нажмете | курсор переместиться к
колонке 20.)

Попробуйте поэксперементировать с t f T F |. Когда вы сделаете что нибудь неправильное,<B>vi</B> сообщит вам о этом звуковым сигналом.

<P>
</LI>
<LI> <B> w </B> : Перемещает курсор вперед к началу следующего "маленького" слово ("маленькое" слово - состоит из символов алфавита и цифр не "разорванных" пробелом или знаков пунктуации,
но не их смеси). Попробуйте нажать w несколько раз,чтобы понять как работает эта команда.

<P>
</LI>
<LI> <B> W </B> : Перемещает курсор вперед к началу следующего "большого слова"(смесь
алфавитно-цифровых символов и пунктуации). Попробуйте применить эту команду несколько раз.


<P>
</LI>
<LI> <B> b </B> : Назад к началу "маленького" слова.

<P>
</LI>
<LI> <B> B </B> : Назад к началу "большого" слова.

<P>
</LI>
<LI> <B> e </B> : Вперед к концу "маленького" слова.
<P>
</LI>
<LI> <B> E </B> : Вперед к концу "большого" слова.

<P>
</LI>
<LI> <B> + Enter </B> : Передвигает курсор к первому символу (не пробелу) на следующий строке. (+ и Enter имеют одинаковый эффект)

<P>
</LI>
<LI> <B> - </B> : Передвигает курсор к первому символу (не пробелу) на преведущей строке. 

<P>
</LI>
<LI> <B> ) </B> : Перемещает курсор к концу предложения. (Предложение кончается либо на пустой строке либо точкой или вопросительным/восклицательным знаком после которых идут два пробела,или на конце строки. 
Точка или восклицательный знак с пробелом после них,не заканчивают предложение;это корректное
поведение,основанное на классических правилах составления печатных документов,хотя оно часто 
кажеться неправильным людям, которые не когда не изучали правила набора.)

<P>
</LI>
<LI> <B> ( </B> : Перемещает курсор к началу предложения.

<P>
</LI>
<LI> <B> } </B> : Перемещает курсор к концу параграфа. (Параграфы разделяются пустыми строками
по определению,используемому <B>vi</B>)

<P>
</LI>
<LI> <B> { </B> : Перемещает курсор к началу параграфа.

<P>
</LI>
<LI> <B> H </B> : Отправляет курсор на первую строку видимую на экране. 

<P>
</LI>
<LI> <B> M </B> : Отправляет курсор на среднюю строку видимую на экране.

<P>
</LI>
<LI> <B> L </B> : Передвигает курсор к последней строке видимой на экране.

<P>
</LI>
<LI> <B> nG </B> : Перемещает курсор на строку n. Если n не задано, передвигает 
на последнюю строку файла.
(Например: попробуйте 15G чтобы перейти к 15й линии. Комбинация CTRL-G отображает
имя файла, некоторую информацию о нем, и номер текущей строки. Чтобы перейти к началу файла
нажмите: 1G)

<P>
</LI>
<LI> <B> CTRL-d </B> : Скроллирует вниз половину экрана (смотрите примечание).</LI>
<LI> <B> CTRL-u </B> : Скроллирует вверх половину экрана (смотрите примечание).</LI>
<LI> <B> CTRL-f </B> : Перемещает курсор вперед на один экран (смотрите примечание).</LI>
<LI> <B> CTRL-b </B> : Перемещает курсор на один экран назад (смотрите примечание).</LI>
<LI> <B> Примечание </B> : Эти четыре команды для скроллинга не могут быть использованы
совместно с командами удаления,изменения,копирования или фильтрования.

<P>
</LI>
<LI> <B> /регулярное_выражение </B> : Перемещает курсор к следующему регулярному выражению.
Когда вы нажимаете /,курсор перемещается на командную строку и <B>vi</B> ждет ввода выражения
Нажмите Enter чтобы завершить ввод;<B>vi</B> начнет поиск регулярного выражения вперед по тексту. Например введите /ро и нажмите Enter. Это передвинет курсор к первому "ро" встреченному при
поиске вперед по тексту. Если вы просто введете / и нажмете Enter - <B>vi</B> начнет
поиск выражение которые вы искали в последний раз.  

<P>
</LI>
<LI> <B> n </B> : Имеет тот же эффект что и нажатие / и Enter; т.е.,
ищет то выражение которое было аргументом для команды поиска  в последний раз.

<P>
</LI>
<LI> <B> ?регулярное_выражение </B> : Ищет в обратном направлении.
Если регулярное выражение не указано то производиться поиск аргумента последней операции поиска.
Обе операции поддерживают автоматический перенос,т.е. поиск за "границами" файла разрешен.  

<P>
</LI>
<LI> <B> N </B> :Тоже самое что ? и Enter.</LI>
</UL>
<H2><A NAME="ss9.2">9.2 Коэффициент повторения </A>
</H2>

<P>Многие из приведенных выше команд перемещения курсора могут быть предварены 
коэффициентом повторения;в таком случае команда просто повторяется несколько раз.
<P>
<UL>
<LI> <B> 3w </B> : Передвигает курсор вперед на три слова</LI>
<LI> <B> 5k </B> : Переходит вверх на пять символов</LI>
<LI> <B> 3fa </B> : Находит третье "а" в текущей строке</LI>
<LI> <B> 6+ </B> : Переходит вниз на шесть линий</LI>
</UL>

Для некоторых комманд коэффициент повторения имеет особое значение.
<UL>
<LI> <B> 4H </B> : Переходит на четвертую строку видимую на экране</LI>
<LI> <B> 8L </B> : Переходит к восьмой строке от края(низа) экрана     </LI>
<LI> <B> 3$ </B> : Переходит к концу третьей строки (вниз)</LI>
</UL>

Для некоторых комманд (например, ^) коэффициент повторения игнорируется; для других (например.,
/ и ? ) он применяться не может.
<H2><A NAME="ss9.3">9.3 Удаление текста </A>
</H2>

<P>Мы уже видели,что <B>dd</B> удаляет текущую строку. Эту команду можно использовать
совместно с коэффициентом повторения: 3dd удаляет три строки, текущую и две следующих.
<P>Команда d может быть использована совместно с практически любой командой перемещения по тексту,
что позволяет удалять произвольные фрагменты текста.
При использование совместно с d команды перемещения называются спецификаторами цели.
(во время экспериментов со следующими примерами, не забывайте нажимать u чтобы восстанавливать то-что вы удалили).
<P>
<UL>
<LI> <B> dw </B> : Удаляет следующее "маленькое" слово</LI>
<LI> <B> d3w </B> : Удаляет три следующих "маленьких" слова</LI>
<LI> <B> 3dw </B> : Три раза удаляет следующее "маленькое" слово</LI>
<LI> <B> 3d3w </B> : Три раза удаляет три следующих "маленьких" слова (т.е.
удаляет девять "маленьких" слов)</LI>
<LI> <B> d+ </B> : Удаляет текущую строку и следующую за ней</LI>
<LI> <B> d/the </B>: Удаляет текст начиная с текущего положения курсора вплоть до первого 
встреченного "the", не включая его .</LI>
<LI> <B> d$ </B> : Удаляет до конца строки</LI>
<LI> <B> d0 </B> : Удаляет до начала строки</LI>
<LI> <B> d30G </B> : Удаляет от текущей строки до 30 строки (включая её)</LI>
<LI> <B> dG </B> : Удаляет от текущей строки до последней (включая её)</LI>
<LI> <B> d1G </B> : Удаляет от текущей строки до строки номер 1 (включая её)</LI>
</UL>

Для удаления одного символа используйте x. x можно использовать совместно с коэффициентом
повторения.
<UL>
<LI> <B> 15x </B> : Удаляет текущий и 14 последующих символов</LI>
</UL>

x на самом деле - макрос для d1; удаление одного символа.
<H2><A NAME="ss9.4">9.4 Изменение текста </A>
</H2>

<P>Команда c в основном идентична d, исключая то,что она переключает <B>vi</B>
в режим вставки,позволяя изменить изначальный текст на что то другое.
<P>Например : разместите курсор на начале какого-либо слова (нажмите w чтобы перейти к началу
следующего слова). Затем нажмите cw , чтобы изменить это слово.На экране последний символ
заменяемого слова будет изменен на <B>$</B>, индицирующий границы производимых изменений;
попробуйте ввести новое слово и нажмите ESC когда закончите.Новый фрагмент текста может
быть длинее/короче чем тот который был удален.
<P>Поместите курсор на начале строки содержащей как минимум три слова, и попробуйте
c3w для изменения этих слов. Попробуйте $ чтобы изменить текст до конца текущей строки.
Во всех случаях когда изменение касается только текущей строки конец изменяемого текста
помечается символом $.
<P>Когда изменение касается не только текущей строки,<B>vi</B> удаляет оригинальный
текст и переходит в режим вставки. Например попробуйте c3+ для изменения текущей и трех
последующих строк;<B>vi</B> удалит четыре оригинальных строки на экране и перейдет в режим
вставки на новой пустой строке.
Как и обычно нажмите ESC чтобы вернуться в командный режим.
<P>Некоторые примеры команд изменения:
<UL>
<LI> <B> cc </B> : Изменяет текущую строку</LI>
<LI> <B> 5cc </B> : Изменяет пять строк (текущую и четыре следующие)</LI>
<LI> <B> c/the </B> : Изменяет текст с текущего символа вплоть до (но не включая)
следующего встреченного в тексте the</LI>
<LI> <B> c$ </B> : Изменяет до конца строки</LI>
<LI> <B> c30G </B> : Изменяет от текущей до строки номер 30, включая её</LI>
<LI> <B> cG </B> : Изменяет от текущей до последней строки, включая её</LI>
<LI> <B> c1G </B> : Изменяет от текущей строки до строки номер 1, включая её</LI>
</UL>
<H2><A NAME="ss9.5">9.5 Копирование текста </A>
</H2>

<P>Команда y копирует фрагмент текста в буфер;из буфера скопированный текст может быть
вставлен в любую часть файла используя команду p или P.
<P>Самая простая форма копирования - скопировать текущую строку;введя yy, попробуйте p, чтобы
вставить копию скопированной строки после курсора.
Вы можете вставить эту строку в файл столько раз, сколько это необходимо, перемещаясь по файлу
и нажимая p.
<P>Чтобы скопировать множество строк, попробуйте, например, 5yyy (копирует текущую строку и следующие четыре строки). p вставляет скопированные линии после курсора; команда 5yyp
"работает" но вероятно не делает того, что вам необходимо.
Команда P делает тоже что и  p, но помещает копию скопированного текста перед курсором;
попробуйте эту последовательность - 5yyP.
<P>Другие команды для вставки:
<UL>
<LI> <B> y3w </B> : Копирует три слова</LI>
<LI> <B> y$ </B> :  Копирует до конца текущей строки</LI>
<LI> <B> y1G </B> : Копирует от текущей и до строки номер 1 (включая её)</LI>
</UL>
<H2><A NAME="ss9.6">9.6 Фильтрование текста</A>
</H2>

<P>Команда фильтрования <B>vi</B>, запрашивает у пользователя имя команды UNIX (которая должна быть фильтром), затем пропускает выбранные строки сквозь фильтр,заменяя эти строки на
строки обработанные фильтром. Возможность <B>vi</B> по фильтрованию произвольных
фрагментов текста, через любой UNIX фильтр, добавляет гибкость и значительно расширяет
ваши возможности по редактированию текста, без "дополнительной платы" в виде размера или
производительности самого <B>vi</B>.
<P>Несколько примеров помогут это проиллюстрировать.
Создайте строку в вашем файле, содержащую слово who и ничего более.
Поместите курсор на эту строку и нажмите <B>!!</B>. Эта команда похожа на dd,cc или yy
но вместо удаления,изменения или копирования текущей строки,она фильтрует её.
Когда вы нажимаете ! второй раз,курсор переходит на командную строку и в ней высвечивается
подсказка !,приглашающая вас ввести название фильтра. В качестве имя фильтра введите sh и нажмите
Enter.  <B>sh</B> (Bourne shell) это фильтр! Он считывает команды со стандартного ввода, 
исполняет их и выдает результат исполнения на стандартный вывод. Команда who будет выполнена
и в качестве результата выдаст список пользователей подключенных в данный момент к системе.
В итоге вы получите этот список прямо в вашем файле, вместо слова who.
<P>Попробуйте проделать то же самое с <B>date</B>. Создайте строку содержащую только слово
<B>date</B>, затем поместите курсор на этой строке, введите <B>!!sh</B> и нажмите Enter.
Строка будет заменена на вывод команды <B>date</B>   
<P>Поместите ваш курсор на какую-нибудь строку. Отсчитайте несколько строк, скажем 6.
Введите <B>6!!sort</B> и нажмите Enter. Оригинальные 6 строк будут заменены на 
вывод команды <B>sort</B>. 
<P>Команду фильтрования можно применять только на всей строке сразу, но не на отдельных словах
или символах.
<P>Некоторые другие команды фильтрования (здесь, &lt; CR &gt; означает - нажмите Enter):
<UL>
<LI> <B>!/the &lt; CR &gt; sort &lt; CR &gt;</B> : Сортирует текст от текущей строки до следующей
строки содержащей the.</LI>
<LI><B> !1Ggrep the &lt; CR &gt;</B> :Уничтожает все строки от текущей до 1й (включая её),
если они не содержат the.</LI>
<LI><B> !Gawk '{print $1}' &lt; CR &gt; </B>: Оставляет от всех строк (начиная с текущей и до конца файла) только первое слово. </LI>
</UL>
<H2><A NAME="ss9.7">9.7 Установка пометок </A>
</H2>

<P>Вы можете выделить фрагмент текста, чтобы переместить,удалить,изменить,скопировать или
отфильтровать его используя команду mc.
<P>Например разместите курсор в центре какого-либо слова и нажмите ma. 
Это пометит символ под курсором меткой a.
<P>Теперь переместите курсор с помеченного символа в другое место (используйте
клавиши со стрелками или CTRL-u). Чтобы вернуться к помеченной строке нажмите 'a
(одинарная скобка и a). Это переместит курсор на первый символ (не пробел) на помеченной строке.
<P>
<P>Вновь уберите курсор с этой строки. Чтобы вернуться к помеченному символу нажмите `a (обратная одинарная скобка и a). Это поместит курсор поверх символа помеченного как a.
<P>Установка меток обычно используется для его удаления,изменения,копирования или 
фильтрования. Например : переместите курсор на строку без метки и нажмите d'a (d,одинарная скобка,a). 
Эта команда удалит все начиная от текущей строки и заканчивая строкой с меткой.
<P>Поместите курсор в центре какого-либо слова и нажмите mb чтобы установить метку b.
Отодвиньте курсор на несколько строк и нажмите d`b (d,обратная одинарная скобка,b). Эта команда 
удалит  все начиная от текущего положения курсора и заканчивая помеченным символом (включая его).
<P>Другой пример : для сортировки вывода команды who, поставьте метку на первой строке вывода (ma),
затем передвиньте курсор на последнюю строку и введите !'asort и нажмите Enter. 
<P>
<P>Если после того как вы перешли к метке вы захотите вернуться назад,нажмите
'' чтобы вернуться к строке или '' чтобы вернуться к символу.
<H2><A NAME="ss9.8">9.8 Назначение имени буферам</A>
</H2>

<P>Когда вы удаляете,изменяете или копируете текст, оригинальный текст сохраняется (до следующей
операции удаления, изменения или копирования) в безымянном буфере, из которого его можно извлечь
с помощью p или P. Таким образом, в восстановить из безымянного буфера можно лишь
недавно помещенный туда текст.
<P>Если вы хотите удалить,изменить или скопировать несколько секций текста и при этом
сохранить их все (вплоть до максимально возможных 26), вы можете задать имя буфера перед
командой удаления или копирования.Имя буфера имеет следующий синтаксис "c (двойные кавычки и c).
<P>Например введите "ayy чтобы скопировать текущую строку в буфер с именем a,затем
перейдите на другую строку и нажмите "byy чтобы скопировать её в буфер b.
Теперь перейдите в другое место в файле и нажмите "ap и "bp чтобы вставить содержимое буферов
a и b.
<P>Несколько других команд использующих буфер:
<UL>
<LI> <B> "a6yy </B> : Копирует шесть строк (текущую и пять следующих) в буфер a</LI>
<LI> <B> "bd1G </B> : Удаляет все строки от текущей до первой (включая её),и размещает
их в буфере b. </LI>
<LI> <B> "cy'c </B> : Копирует текст начиная с текущей строки вплоть до строки отмеченной c
и помещает скопиррованый фрагмент в буфер c. (отметки  и  буферы не связаны друг с другом и могут иметь одинаковые имена).</LI>
</UL>
<H2><A NAME="ss9.9">9.9 Замещение текста</A>
</H2>

<P>Чтобы заместить один фрагмент текста другим используйте команду :s.
Несколько примеров:
<UL>
<LI> <B> :1,$s/the/THE/g </B> Начиная с первой строки до последней (строки $), заместить
все встреченные the на THE (g - означает глобальную замену) </LI>
<LI> <B> :'a,.s/.*/ha ha/ </B> От строки помеченной как a до текущей (строки .),
заменить любой текст на строку "ha ha".</LI>
</UL>
<H2><A NAME="ss9.10">9.10 Команды начинающиеся с двоеточия</A>
</H2>

<P>Когда вы вводите двоеточие в командном режиме,курсор автоматически перемещается на командную
строку и ждет ввода команды.
<P>Некоторые примеры таких команд:
<UL>
<LI><B>:w </B> Записывает содержимое буфера в файл без выхода из <B>vi</B></LI>
<LI><B>:w abc </B> Записывает содержимое буфера в файл abc (если его нет он будет создан,иначе - перезаписан.)
не выходя из <B>vi</B></LI>
<LI><B>:1,10w  abc  </B>Записывает строки с 1 по 10 в файл abc</LI>
<LI><B>:'a,$w abc  </B>Записывает строки от строки, помеченной как "a", до последней строки abc</LI>
<LI><B>:e abc </B> Загружает для редактирования файл abc, вместо текущего файла.
Выдает ошибку если изменения в текущем файле не были сохранены.</LI>
<LI><B>:e! abc </B>Загружает для редактирования файл abc, не обращая внимание на несохраненные
изменения в текущем файле.</LI>
<LI><B>:e #  </B> Загружает для редактирования предшествующий файл (команда :e# следующий)</LI>
<LI><B>:f abc  </B>Изменяет имя текущего буфера <B>vi</B> на abc</LI>
<LI><B>:q </B>Выходит из редактора, если нет несохраненных изменений</LI>
<LI><B>:q! </B>Выходит и уничтожает при этом все несохраненные изменения</LI>
<LI><B>:r abc </B>Считывает файл abc в текущий буфер <B>vi</B>, и размещает его за курсором.</LI>
<LI><B>:!cmd </B>Выполняет команду (who, sort, ls, etc.)</LI>
</UL>
<H2><A NAME="ss9.11">9.11 Установка опций</A>
</H2>

<P>Существует множество опций которые влияют на работу <B>vi</B>. Вы можете отобразить
все доступные опции с помощью команды :set all. Вы также можете использовать команду set
для установки различных опций.
<P>Например если вы хотите чтобы для строк в файле отображались их порядковые номера,
используйте команду ":set number". Чтобы отключить отображение номеров строк введите
":set nonumber". Для указания большинства опций можно использовать аббревиатуры,
например ":set nu" - включит нумерацию строк, а ":set nonu" отключит её.
<P>
<P>Если вы установите ":set nomagic", то символы регулярных выражений имеющие специальное значение
(период,астерик,квадратные скобки и т.д.) будут восприниматься как обычные.
Используйте ":set magic" чтобы вернуть все назад.
<P>Некоторые опции могут иметь параметры. Например ":set tabstop=4" заставит
символ табуляции отображаться как четыре пробела, вместо обычных восьми.
<P>Если вы хотите чтобы ваши опции сохранились и при следующем сеансе работы,вы можете поместить их
в файл ".exrc",или установить переменную окружения EXINIT соответствующим образом.
<P>Например если в качестве shell вы используете Bourne shell,вы можете разместить в вашем
.profile такую строчку.
<HR>
<PRE>
        EXINIT='set nomagic nu tabstop=4'; export EXINIT
</PRE>
<HR>

Если вы используете C shell, необходимо разместить следующую строку в вашем .login файле.
<HR>
<PRE>
        setenv EXINIT 'set nomagic nu tabstop=4'
</PRE>
<HR>
<H2><A NAME="ss9.12">9.12 Настройка клавиатурных комбинаций </A>
</H2>

<P>
<P>Если вам приходиться выполнять серию простых команд опять и опять,
то вы можете назначить этим командам определенную клавиатурую комбинацию (из неиспользуемых)
с помощью команды :map.
<P>Например следующая команда настраивает CTRL-А для передвижения курсора на 55 строк вперед,
затем назад на самую последнюю пустую строку,на изменение этой командной строки на
formfeed (CTRL-L) и три пустых строки. Т.е. CTRL-A отформатирует следующую страницу,
без разделения параграфов между страницами.
<P>Примечание:
В этой строке каждый символ, который нужно нажимать совместно с CTRL показан как ^С, где С
это большая буква. Например, СTRL-M показано как ^M.
Также во время ввода вы не увидете ^V, т.к. СTRL-v нужно для того, чтобы подавить
управляющее значение следующей за ним комбинации клавиш.
Т.е. при вводе ^V^M вы увидете на экране лишь ^M(соотвествует Enter). ^[ соотвествует ESC. 
<HR>
<PRE>
        :map ^A  55+?^$^V^Mcc^V^L^V^M^V^M^V^M^V^[
</PRE>
<HR>
<H2><A NAME="ss9.13">9.13 Редактирование нескольких файлов</A>
</H2>

<P>Вы можете редактировать несколько файлов, задав их имена как аргументы при
запуске <B>vi</B>.
<HR>
<PRE>
        vi croc fatherw  wknight
</PRE>
<HR>

Для перемещения между файлами используются две команды:
<UL>
<LI><B> :n  </B>Перейти к следующему файлу в списке аргументов (вы должны
сохранить изменения при помощи :w или <B>vi</B> выдаст сообщение о ошибке)</LI>
<LI><B> :rew </B>Перейти к редактированию первого файла в списке аргументов.</LI>
</UL>

Команды :n и :rew, в каком то смысле неповоротливы, но они предоставляют несколько
весьма полезных возможностей: содержимое поименованных буферов ("a,"b и т.д.)
запоминается глобально, и вы сможете использовать :n и :rew команды совместно с p или P,
чтобы копировать текст из одного файла в другой. Более того, запрос поиска, также запоминается
глобально, и вы сможете искать одну строку в нескольких файлах.
<P>Попробуйте провести следующий эксперимент:
Выйдете из  <B>vi</B>, запустите <B>vi</B> с croc и wknight в качестве аргументов:
<HR>
<PRE>
        $ vi croc wknight
</PRE>
<HR>

В файле croc, найдите
<P><B>  /the &lt; CR &gt; </B>
<P>Скопируйте это в буфер a:
<P><B>  "ayy </B>
<P>Перейдите к следующему файлу (мы не сделали никаких изменений в croc,поэтому это сработает):
<P><B>  :n &lt; CR &gt; </B>
<P>Проведем поиск еще раз, использовав в качестве аргумента поиска преведущий образец.
<P><B>  n </B>
<P>Поместите копию буфера a после текущей строки в wknight:
<P><B>  "ap </B>
<P>Перейдите на две строки вниз, и скопируйте текущую строку в буфер b:
<P><B>  jj"byy </B>
<P>Сохраним изменения в wknight
<P><B>  :w &lt; CR &gt; </B>
<P>Теперь вернемся к croc
<P><B>  :rew &lt; CR &gt; </B>
<P>Произведем поиск еще раз и разместит копию буфера b после найденной линии:
<P><B>  n"bp </B>
<P>Сохраним изменения и выйдем из <B>vi</B>
<P><B>  ZZ </B>
<H2><A NAME="ss9.14">9.14 Финальные замечания</A>
</H2>

<P>Это пособии представляет некоторые возможности <B>vi</B> которые вы могли пропустить
или не понять читая пособие по <B>vi</B> установленное в вашей системе.(на различных
системах встречаются разные пособия).  
<P>Вы не станете экспертом по <B>vi</B> после чтения этого пособия,но вы ,по крайней мере,
сможете оценить его возможности. Только время и тренировка могут сделать вас  экспертом.
Но универсальность и эффективность <B>vi</B> стоят этих усилий. 
<P>Вы можете решить что вы ненавидите <B>vi</B>. Но не забывайте что это единственный
редактор доступный практически на любой UNIX системе, поэтому необходимо знать хотя бы
самый минимум его команд. 
<HR>
<A HREF="Vim-10.html">Next</A>
<A HREF="Vim-8.html">Previous</A>
<A HREF="Vim.html#toc9">Contents</A>
</BODY>
</HTML>
