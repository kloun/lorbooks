<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>Emacs для начинающих HOWTO (Emacs Beginner's HOWTO): Настройка Emacs </TITLE>
 <LINK HREF="Emacs-Beginner-HOWTO-5.html" REL=next>
 <LINK HREF="Emacs-Beginner-HOWTO-3.html" REL=previous>
 <LINK HREF="Emacs-Beginner-HOWTO.html#toc4" REL=contents>
</HEAD>
<BODY>
<A HREF="Emacs-Beginner-HOWTO-5.html">Следующий</A>
<A HREF="Emacs-Beginner-HOWTO-3.html">Предыдущий</A>
<A HREF="Emacs-Beginner-HOWTO.html#toc4">Содержание</A>
<HR>
<H2><A NAME="customizing_emacs"></A> <A NAME="s4">4. Настройка Emacs </A>      </H2>

<P>Вся настройка Emacs выполняется через код на Lisp. Вы можете
изменять переменные, которые влияют на то, каким образом работает
Emacs или вы можете добавить новую функцию к Emacs (или
переопределить существующие функции--заменяя их на свои собственные.
<P>
<H2><A NAME="ss4.1">4.1 Временная настройка</A>
        </H2>

<P>Во время экспериментов с настройкой Emacs вы вероятно захотите
сделать ее на некоторое время. Если что-то пойдет неправильно, то
вы сможете просто нажать на <CODE>C-x C-c</CODE> для выхода из emacs и
запустить его и запустить его снова. После того как вы определите,
какие изменения вы хотите сделать постоянными, вы можете добавить
их в ваш файл <CODE>.emacs</CODE>, так что они будут действовать каждый 
раз при старте Emacs. Это обсуждается в следующем разделе.
<P>
<H3>Присвоение переменных          </H3>

<P>Самым легким способом настройки является изменение значений
переменных в Emacs. Для того, чтобы сделать это используется
примерно такой код:
<P>
<PRE>
(setq variable-name new-value)
</PRE>
<P>
<P>Где <CODE>variable-name</CODE> это имя переменной, а
<CODE>new-value</CODE> это значение, которое вы хотите задать для
этой переменной. (В Lisp, вы связываете переменную и
значение). Функция <CODE>setq</CODE> в lisp аналогична 
оператору присваивания (обычно <CODE>=</CODE>) в других языках
программирования. 
<P>
<P><B>Замечание:</B> Я рассказываю без многих деталей ради
упрощения. Вы также можете указать мне или другим на
использования функций  Lisp <CODE>set</CODE> и даже
<CODE>setq-default</CODE>. Если вы действительно любознательны, то вы 
можете посмотреть их описание в руководстве по  Emacs Lisp.
<P>
<P>Давайте глянем на строку из моего файла <CODE>.emacs</CODE>
<P>
<PRE>
(setq-default transient-mark-mode t)
</PRE>
<P>
<P>Переменная <CODE>transient-mark-mode</CODE> контролирует должна ли 
подсвечиваться область при ее выделении. Во многих приложениях с
графическим интерфейсом пользователя, если вы щелкнете кнопкой
мыши и сделаете протягивание для выделения текста, то он будет
выделен цветом или инверсией. Emacs будет работать так же, если
переменная <CODE>transient-mark-mode</CODE> будет установлена (в
не-nil значение).
<P>
<P><EM>Что такое</EM> значение?
<P>
<P>Ok. Немного отвлечемся. Большинство языков программирования
имеют некоторое понятие о значениях true/false (истина/ложь). В
C/C++ значение считается истинным, если оно имеет ненулевое
значение. В Perl, не-null или ненулевое значение считается
истинным. В Lisp, применяются те же идеи, но имена и символы
отличаются. 
<P>
<P>Истина обычно записывается как <CODE>t</CODE>, а ложь (или null)
записывается как <CODE>nil</CODE>. Подобно другим языкам, не-nill
значения считаются истиной.
<P>
<P>Для получения полного описания того, что делает
<CODE>transient-mark-mode</CODE>, вы можете использовать оперативную
справку. Наберите <CODE>C-h v</CODE> или <CODE>M-x
describe-variable</CODE>, затем <CODE>transient-mark-mode</CODE>. Если
вы ленивы, как и я, то вы можете воспользоваться дополнением
имени переменной с помощью кнопки <CODE>Tab</CODE>. Просто наберите
часть имени переменной и нажмите клавишу <CODE>Tab</CODE>. Если вы
набрали недостаточно для уникальной идентификации имени, то вы
можете увидеть все возможные варианты дополнений.
<P>
<P>Другой часто используемой переменной является
<CODE>fill-column</CODE>. Она сообщает Emacs насколько широким должен 
быть экран для переноса слов (и <CODE>auto-fill-mode</CODE>
использует это значение). Для установки этой переменной в
какое-нибудь значение вы можете набрать:
<P>
<PRE>
(setq fill-column 20)
</PRE>
<P>
<P>Но оно в действительности ничего не делает. Вам необходимо
сказать Emacs чтобы он <B>вычислил (evaluate)</B> выражение,
которое вы набрали. Чтобы сделать это поместите точку (курсор) в
конец выражения и наберите сочетание <CODE>C-x C-e</CODE>, что
вызовет функцию <CODE>eval-last-sexp</CODE>. Когда вы сделаете это
заметьте, что число <CODE>20</CODE> (или что вы набрали) отобразится
в мини-буфере внизу экрана. Это просто возвращенное при
вычислении значение.
<P>
<P>Просто для проверки его работы наберите пару предложений. Если 
у вас включен <CODE>auto-fill-mode</CODE> (он может быть и не
включен), то вы заметите, что слова переносятся на отметке 20
колонки. Иначе, после того как вы набрали некоторый текст,
нажмите <CODE>M-q</CODE>, что вызовет функцию
<CODE>fill-paragraph</CODE>. Она выполнит перенос слов.
<P>
<H3>Связывание с файлами          </H3>

<P>Вы можете настроить Emacs на автоматическое выполнение
чего-нибудь при открытии файлов с определенным типом (подобно как
многие графические среды автоматически запускают приложения если
вы щелкаете на значке определенного файла). Например, я хочу
чтобы Emacs автоматически переключался в <CODE>text-mode</CODE> при
открытии файлов с расширением <CODE>.txt</CODE>. Хорошо, это уже
происходит. <CODE>:-)</CODE> Теперь я хочу заставить Emacs всегда
переходить в <CODE>text-mode</CODE> при открытии файлов с именем
``README''.
<P>
<PRE>
(setq auto-mode-alist (cons '("README" . text-mode) auto-mode-alist))
</PRE>
<P>
<P>Без погружения в дебри программирования на Lisp, которое знать 
не обязательно (но будет не вредно его выучить), просто
указываем, что переменная <CODE>auto-mode-alist</CODE> содержит
список пар. Каждая пара содержит регулярное выражение и название
режима Emacs. Если открываемый файл соответствует указанному
выражению (в нашем случае это строка <CODE>README</CODE>), то Emacs
переходит в указанный режим.
<P>
<P>Странный синтаксис в приведенном примере используется потому,
что мы хотим добавить пару в список режимов. Вы не захотите
просто присвоить данные переменной <CODE>auto-mode-alist</CODE> с
потерей уже содержавшихся в ней данных.
<P>
<P>И если я хочу, чтобы Emacs автоматически переключался в
<CODE>html-helper-mode</CODE> каждый раз, когда я открываю файл,
оканчивающийся на <CODE>.html</CODE> или <CODE>.htm</CODE>, то я должен
добавить следующие строки в мой файл .emacs:
<P>
<PRE>
(setq auto-mode-alist (cons '("\\.html$" . html-helper-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("\\.htm$" . html-helper-mode) auto-mode-alist))
</PRE>
<P>
<P>Существует бесконечное количество возможных значений.
<P>
<H2><A NAME="ss4.2">4.2 Использование файла <CODE>.emacs</CODE></A>
        </H2>

<P>После того, как вы провели некоторое время в работе с Emacs и
имеете идеи о том, что надо настроить, вы вероятно захотите
настроить некоторые вещи навсегда (или по крайней мере до тех пор,
пока вы не измените свою точку зрения). Если вы будете использовать
Emacs в каждодневной работе, то вы также заметите, что ваш файл
<CODE>.emacs</CODE> увеличивается со временем. Это <EM>Хорошо</EM>,
потому-что вы определили как заставить Emacs работать так, как
<B>вы</B> хотите.  Для многих программ является позором, что они
позволяют сделать это.
<P>
<P>В случае, если вы еще не догадались, Каждый раз при запуске
Emacs, он ищет файл с именем <CODE>.emacs</CODE> в вашем домашнем
каталоге. Ваш файл <CODE>.emacs</CODE>---это место, куда вы должны
помещать код на Lisp, если хотите, чтобы он автоматически
выполнялся при запуске, а также файл включает в себя те настройки,
которые вы хотите использовать.
<P>
<P>Вот другой пример из моего файла <CODE>.emacs</CODE>:
<P>
<PRE>
(setq inhibit-startup-message t)
</PRE>
<P>
<P>Переменная <CODE>inhibit-startup-message</CODE> задает будет ли
показывать Emacs приветственное сообщение на старте, или нет. После
того как я насмотрелся на него (потому-что я уже знал как найти
помощь) я нашел способ отключить его.
<P>
<P>Как упражнение попробуйте создать собственный файл
<CODE>.emacs</CODE> и добавить эту строку в него. Затем выйдите из
Emacs и запустите его снова. Вы не должны увидеть стартового сообщения.
<P>
<P>Часто когда вы читаете о режиме Emacs  (или о пакете), то
документация будет вам предлагать добавить некоторый код в ваш файл 
<CODE>.emacs</CODE> для того, чтобы режим или пакет работали как надо.
<P>
<P>GNU Emacs FAQ (<CODE>C-h F</CODE>) содержит некоторые пункты,
относящиеся к файлам <CODE>.emacs</CODE>, которые вы можете найти
полезными. 
<P>
<H2><A NAME="ss4.3">4.3 Пакет Customize</A>
        </H2>

<P>После того как Emacs начал приобретать популярность и продолжал
развиваться, некоторые люди сказали ``должен быть лучший способ,
позволяющий начинающим пользователям настроить Emacs''. И родился
пакет <CODE>customize</CODE>. 
<P>
<P>Customize обеспечивает более интуитивный метод настройки частей
Emacs. Чтобы попробовать работать с ним, либо выберите подменю
<CODE>Customize</CODE> в вашем меню <CODE>Help</CODE>, или наберите <CODE>M-x
customize</CODE>.
<P>
<P>Customize группирует настройки в логические группы 
``Editing'', ``Programming'', ``Files'' и т.п. Некоторые группы
содержат подгруппы.
<P>
<P>Если вы сделаете изменения, используя интерфейс настройки, то
Emacs сохранит изменения в ваш файл <CODE>.emacs</CODE>. Это намного
легче, потому-что вы можете легко изучать изменения, которые вы он
сделал для вас.
<P>
<P><EM>Я не использую пакет Customize так, что я не могу сказать о
нем больше.</EM>.
<P>
<H2><A NAME="ss4.4">4.4 Дисплей X Windows</A>
        </H2>

<P>Подобно всем нормальным X-приложениям, Emacs работает с вашими
X-ресурсами. Это означает, что вы можете контролировать начальные
цвета, геометрию и другие специфические для  X вещи, также как и в
<CODE>xterm</CODE>, <CODE>nxterm</CODE> или чем-то другом.
<P>
<P>Вот соответствующий кусок моего файла <CODE>~/.Xdefaults</CODE>:
<P>
<PRE>
emacs*Background: DarkSlateGray
emacs*Foreground: Wheat
emacs*pointerColor: Orchid
emacs*cursorColor: Orchid
emacs*bitmapIcon: on
emacs*font: fixed
emacs.geometry: 80x25
</PRE>
<P>
<P>Посмотрите справочную страницу <CODE>X</CODE> для более детального
описания  X-ресурсов.
<P>
<P>Chris Gray (
<A HREF="mailto:cgray4@po-box.mcgill.ca">cgray4@po-box.mcgill.ca</A>) также заметил: 
<P>
<BLOCKQUOTE>
В Debian, файл <CODE>~/.Xdefaults</CODE> кажется не используется. Однако
работающие в Debian могут поместить то, что вы хотите в
<CODE>/etc/X11/Xresources/emacs</CODE> и могут получить то, что они делали в
RedHat.
</BLOCKQUOTE>
<P>
<HR>
<A HREF="Emacs-Beginner-HOWTO-5.html">Следующий</A>
<A HREF="Emacs-Beginner-HOWTO-3.html">Предыдущий</A>
<A HREF="Emacs-Beginner-HOWTO.html#toc4">Содержание</A>
</BODY>
</HTML>
