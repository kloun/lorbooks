<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE> The Linux Serial HOWTO : Как заставить мой модем принимать входные и совершать исходящие звонки</TITLE>
 <LINK HREF="Serial-HOWTO-7.html" REL=next>
 <LINK HREF="Serial-HOWTO-5.html" REL=previous>
 <LINK HREF="Serial-HOWTO.html#toc6" REL=contents>
</HEAD>
<BODY>
<A HREF="Serial-HOWTO-7.html">Next</A>
<A HREF="Serial-HOWTO-5.html">Previous</A>
<A HREF="Serial-HOWTO.html#toc6">Contents</A>
<HR>
<H2><A NAME="s6">6. Как заставить мой модем принимать входные и совершать исходящие звонки</A></H2>

<P> 
Настройте ваш модем правильно на исходящие звонки. Если вы не читали раздел 
``Как сделать исходящий звонок через мой модем?", то прочитайте его сейчас!
Он содержит очень важную информацию об установке. Вы не должны читать этот 
раздел, если вы хотите только звонить наружу вашим модемом.
<P>
<P>
<H2><A NAME="ss6.1">6.1 Настройка модема на входящие и исходящие звонки</A>
</H2>

<P> 
Для использования входящих и исходящих звонков, вы должны установить ваш модем 
некоторым образом (снова, используя AT команды на вашем модеме):
<BLOCKQUOTE><CODE>
<PRE>
 
 E1       включение эхоотображения
 Q0       сообщать коды результата
 V1       verbose ON
 S0=0     не поднимать трубку (uugetty обрабатывает эту функцию опцией WAITFOR)
</PRE>
</CODE></BLOCKQUOTE>
 
Если вы не установили эти параметры правильно, ваша INIT строка в вашем файле 
настроек может не сработать, нарушая всю работу. Но более подробная информация
о файлах конфигурации расположена ниже ...
<BLOCKQUOTE><CODE>
<PRE>
 
 &amp;C1     включать DCD только после соединения
 &amp;S0     DSR всегда включен
 DTR on/off сброс модема (зависит от производителя - RTFM)
</PRE>
</CODE></BLOCKQUOTE>
 
Они воздействуют на то, что ваш модем делает, когда он начинает и заканчивает
звонить.
<P> 
Если ваш модем не поддерживает сохранение профилей, то вы можете установить их 
через INIT строку в вашем файле конфигурации. См. ниже. Некоторые модемы 
приходят с DIP переключателями, которые воздействуют на установки регистров. 
Убедитесь, что они тоже установлены правильно.
<P> 
Я начал коллекционировать установки модемов для различных типов модемов. Пока, 
я только имею несколько из них, если вы хотите послать мне вашу рабочую 
конфигурацию, пожалуйста, сделайте это! Вы можете получить их на 
<A HREF="ftp://ftp.cc.gatech.edu/pub/people/gregh/modem-configs">ftp://ftp.cc.gatech.edu/pub/people/gregh/modem-configs</A><P> 
Обратите внимание: чтобы заставить мой модем USR Courier V.34 сброситься
правильно, когда падает DTR, я должен был установить &amp;D2  и S13=1 (установка 
бита 0 регистра S13).
<P> 
На модеме USR Sportster V.34 это также работает.
<P> 
Обратите внимание: некоторые модемы Supra обрабатывают DCD иначе, чем другие 
модемы. Если вы используете Supra, попробуйте установить &amp;C0, а не &amp;C1. Вы 
должны также установить &amp;D2, чтобы корректно обрабатывать DTR.
<P>
<P>
<H2><A NAME="ss6.2">6.2 Установка getty_ps</A>
</H2>

<P> 
Получить последнюю версию можно на 
<A HREF="http://www.linux.org.ru/books/HOWTO/sunsite.unc.edu:/pub/Linux/system/serial">sunsite.unc.edu:/pub/Linux/system/serial</A>.
<P> 
В частности, если вы хотите использовать высокие скорости (57600 и 115200 
бит\сек), вы должны взять версию 2.0.7j или выше. Вы должны также иметь 
libc 5.x или выше.
<P> 
По умолчанию, getty_ps будет сконфигурирован в соответствии с Linux FSSTND 
(Стандарт Файловой системы), что означает, что бинарники будут в /sbin, а 
файлы конфигурации будут называться /etc/conf.{uu}getty.ttySN.
<P> 
Это не указано в документации! Также ожидается, что файлы блокировки будут в 
/var/lock. Удостоверьтесь, что у вас есть каталог /var/lock.
<P>Если вы не хотите совместимости с FSSTND, бинарники расположаться в / и т.д, 
файлы конфигурации расположаться в /etc/default/{uu}getty.ttySN, и файлы
блокировки в /usr/spool/uucp. Я рекомендую этот способ, если вы используете 
UUCP, потому что с UUCP возникнут проблемы, если вы переместите файлы 
блокировки туда, где он не ищет их.
<P> 
getty_ps может также использовать syslogd, чтобы регистрировать сообщения. См. 
man для syslogd(1) и syslog.conf(5) для настройки syslogd, если он еще у вас
не запущен. Сообщения регистрируются с приоритетом LOG_AUTH, ошибки используют 
LOG_ERR и отлажидка использует LOG_DEBUG. Если вы не хотите использовать 
syslogd, вы можете подредактировать tune.h в исходных файлах getty_ps, чтобы 
использовать регистрационный файл для сообщений вместо файла регистрации по 
умолчанию, именуемого /var/adm/getty.
<P> 
Решите, что вы хотите - FSSTND совместимость или возможности syslog. Вы можете 
также выбирать комбинацию из двух. Отредактируйте Makefile, tune.h и config.h, 
чтобы отразить ваше решение. Затем скомпилируйте и установите согласно 
инструкциям, включенных в пакет.
<P> 
> От этой отметки, все относящееся к getty будет относиться к getty_ps.
<P>Ссылки на uugetty относятся к uugetty, который приходит с пакетом getty_ps. Эти
инструкции не будут работать с mgetty или agetty.
<P>
<P>
<HR>
<A HREF="Serial-HOWTO-7.html">Next</A>
<A HREF="Serial-HOWTO-5.html">Previous</A>
<A HREF="Serial-HOWTO.html#toc6">Contents</A>
</BODY>
</HTML>
