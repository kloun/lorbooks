<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Мини-HOWTO: "MacTerminal"</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.57"></HEAD
><BODY
CLASS="ARTICLE"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="ARTICLE"
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="TITLE"
><A
NAME="AEN2"
>Мини-HOWTO: "MacTerminal"</A
></H1
><DIV
CLASS="AUTHORGROUP"
><A
NAME="AEN4"
></A
><H3
CLASS="AUTHOR"
><A
NAME="AEN5"
>Robert Kiesling</A
></H3
><H3
CLASS="CORPAUTHOR"
>Перевод: <A
HREF="mailto:kmic@asp-linux.com"
TARGET="_top"
>Михаил Корепанов</A
>,
<A
HREF="http://www.asplinux.com"
TARGET="_top"
>SWSoft Pte Ltd.</A
></H3
></DIV
><P
CLASS="PUBDATE"
>Версия 1.4, 9 Ноября 1997<BR></P
><DIV
><DIV
CLASS="ABSTRACT"
><A
NAME="AEN12"
></A
><P
></P
><P
>Это мини HOWTO описывает 1,002-ое применение для мертвого Macintosh
(шутка). А если серьезно, как настроить Mac, чтобы использовать его в
качестве терминала Linux. Настройки с применением getty, а также kermit
описаны так же, как и использование прямой сети kermit между Linux и
Macintosh. Этот документ может быть воспроизведен свободно, полностью или
частями, при условии, что любое применение согласуется со стандартной
заметкой об авторских правах для документов HOWTO, входящих в Linux
Documentation Project. Смотрите подробно файл COPYRIGHT. Присылайте все
жалобы, предложения, опечатки и любые другие вопросы, чтобы этот документ
стал как можно полнее и современнее.</P
><P
></P
></DIV
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Содержание</B
></DT
><DT
>1. <A
HREF="Mac-Terminal.html#AEN14"
>Введение</A
></DT
><DT
>2. <A
HREF="Mac-Terminal.html#AEN20"
>Установка последовательного соединения</A
></DT
><DT
>3. <A
HREF="Mac-Terminal.html#AEN45"
>Соединение Клиента и Сервера, при помощи <TT
CLASS="LITERAL"
>kermit</TT
>.</A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="Mac-Terminal.html#AEN70"
>Источники Macintosh</A
></DT
></DL
></DD
><DT
>4. <A
HREF="Mac-Terminal.html#AEN87"
>Загрузка через <TT
CLASS="LITERAL"
>kermit</TT
>.</A
></DT
><DD
><DL
><DT
>4.1. <A
HREF="Mac-Terminal.html#AEN129"
>Другие программы для терминала Mac</A
></DT
></DL
></DD
><DT
>5. <A
HREF="Mac-Terminal.html#AEN135"
>Заключение</A
></DT
><DT
>6. <A
HREF="Mac-Terminal.html#AEN139"
>Авторские права</A
></DT
></DL
></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="AEN14"
>1. Введение</A
></H1
><P
>Этот документ должен представить вам великие идеи на тему, как заставить работать ваш Macintosh с Linux. К сожалению, я был очень занят и не мог включить в этот документ даже половину того, что хотел включить, как, например, применение MacTCP и Open Transport, чтобы соединиться с вашим Linux через PPP. Возможно, это появится в следующих версиях этого руководства.</P
><P
>В этом документе не описывается работа в сети с LocalTalk и AppleTalk. Я изучу эти вопросы, если возникнет достаточный интерес, скажем, к печати на принтере LaserWriter под Linux. Другими словами, мне кажется, что такие приложения, будучи более хлопотными, чем нужными, выходят за рамками темы этого документа.</P
><P
>Также я не собираюсь рассказывать в этом документе о MkLinux . По нему существует подробная документация.  </P
><P
>Итак, если у вас есть идеи относительно этого документа, напишите мне письмо.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="AEN20"
>2. Установка последовательного соединения</A
></H1
><P
>Чтобы установить последовательную связь между машиной, работающей на операционной системе Linux, и системой Mac, вам понадобится:</P
><P
>Для Linux кабель последовательного порта DB9 Female-to-DB25 Male или DB25 Female-to-DB25 Male, это зависит от вашего последовательного порта.</P
><P
>Для Macintosh: кабель высокоскоростного модема DIN9-to-DB25 Male.</P
><P
>Убедитесь, что на кабеле обозначено "высокоскоростной" кабель, так как некоторые более старые кабели Macintosh предназначены для своих устаревших линий, которые делают их бесполезными для высокоскоростных последовательных соединений.</P
><P
>Вам также нужен адаптер к нуль-модему, выпускающийся американской фирмой  Radio Shack, и соответствующие выходы, а также переходник DB25 Female-to-DB25 Female, чтобы  соединить кабели для последовательного порта.</P
><P
>Я слышал, что кабели для принтера Mac в действительности являются кабелями нуль-модема, но этого я не утверждаю. Некоторые из них все-таки- DIN9-to-DIN9, и использование их в последовательном  соединении может доставить слишком много хлопот.</P
><P
>Если вам что-то непонятно, прочитайте Serial-HOWTO, чтобы ознакомиться в деталях с настройками кабеля  RS-232 и протоколами передачи данных.</P
><P
>Прежде, чем соединить систему Mac и машину, работающую под операционной системой Linux, вы должны определить, что у вас есть рабочие последовательные порты на обеих машинах. Это можно проверить, "дозвонившись" с одной машины на другую, используя программы: <TT
CLASS="LITERAL"
>minicom</TT
>
(Linux), ZTerm (Mac), <TT
CLASS="LITERAL"
>kermit</TT
> (оба), или с помощью коммуникационной программы по вашему выбору.</P
><P
>Самую последнюю версию minicom вы можете взять на <A
HREF="ftp://sunsite.unc.edu/pub/Linux/apps/serialcomm/dialout"
TARGET="_top"
>sunsite.unc.edu/pub/Linux/apps/serialcomm/dialout</A
> и зеркальных сайтах. </P
><P
>ZTerm является целостной и легкой в использовании программой. К сожалению, она условно бесплатная. Текущую версию можно взять на <A
HREF="ftp://mac.archive.umich.edu"
TARGET="_top"
>mac.archive.umich.edu</A
> и подобных этому источниках.</P
><P
>Версии программы <TT
CLASS="LITERAL"
>kermit</TT
> есть для каждой машины и любой операционной системы. Архивы размещены на <A
HREF="ftp://ftp.columbia.edu/kermit"
TARGET="_top"
>ftp.columbia.edu/kermit</A
>.</P
><P
>Вы должны серьезно обдумать возможность использования <TT
CLASS="LITERAL"
>kermit</TT
> на обеих машинах на этой стадии, по крайней мере, так как 1) она бесплатна (хотя не охвачена открытой лицензией (General Public License) фонда бесплатных программных обеспечений, и 2) гораздо удобнее иметь на обеих машинах <TT
CLASS="LITERAL"
>kermit</TT
>, вместо двух совершенно разных коммуникационных программ.</P
><P
>Если у вас другой способ определения состояния портов на двух машинах, то можете воспользоваться и им. Главное- убедиться в том, что у обеих систем есть работающие последовательные порты.</P
><P
>Фактическое осуществление последовательного соединения должно произойти легко. Если это вам не удалось, то, для справки, соединение выглядит так:

<PRE
CLASS="SCREEN"
> Linux PC    DB9- or DB25-  Null     Gender   DIN9-to-       MacBox
 ---------   to-DB25 male   Modem    Changer  DB25 Mac      --------
 |       |   serial cable. |     |  |     |   Serial Cable  |      |
 |       |-----------------|     |--|     |-----------------|      |
 |       |                 |     |  |     |                 |      |
 ---------                  Adapter                         --------</PRE
></P
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="AEN45"
>3. Соединение Клиента и Сервера, при помощи <TT
CLASS="LITERAL"
>kermit</TT
>.</A
></H1
><P
>Это самая быстро выполняемая из всех настроек, здесь описанных. Она требует наименьшее количество настроек системы, хотя они довольно сложные.</P
><P
>Итак, вы запустили <TT
CLASS="LITERAL"
>kermit</TT
> и на  Linux, и на Mac, и одна из них работает в режиме сервера. Не важно, какая система-клиент, а какая- сервер, потому что это прямое соединение. Однако у <TT
CLASS="LITERAL"
>kermit</TT
> Linux есть преимущество в возможности написания скриптов, так что будет логичным (для меня, по крайней мере) создать <TT
CLASS="LITERAL"
>kermit</TT
> на Linux  как сервер, потому что это более автоматизировано.</P
><P
>Убедитесь, что правильно установили <TT
CLASS="LITERAL"
>kermit</TT
> и на ПК, работающем в Mac, и на ПК с Linux. Следуйте инструкциям в соответствующих дистрибутивах  kermit. На машине, работающей в Linux, наберите <TT
CLASS="LITERAL"
>kermit</TT
> в командной строке, чтобы запустить ее. Вам нужны права пользователя root, чтобы установить порт и скорость передачи.</P
><P
><TT
CLASS="LITERAL"
>kermit</TT
> - последняя версия  POSIX для Unices, поддерживает скорость передачи до 115 Кб\с. Более поздняя версия Macintosh поддерживает скорость последовательных портов до 57.6 Кб\с. Это более, чем достаточно, для приложений использующих простой  tty, но если вам нужно высокоскоростное соединение, то это может обеспечить <TT
CLASS="LITERAL"
>kermit</TT
>. Потому как <TT
CLASS="LITERAL"
>kermit</TT
> может предоставить вам средства для связи при помощи протокола TCP/IP (я не имел возможности это протестировать).  При этом не забывайте (особенно того, что касается Mac) использовать отличный от TCP/IP соединений порт для последовательных соединений
<TT
CLASS="LITERAL"
>kermit</TT
>, потому что <TT
CLASS="LITERAL"
>kermit</TT
> на Mac будет сильно забивать лишними данными последовательный порт.</P
><P
>С учетом этого ваш файл <TT
CLASS="LITERAL"
>.kermrc</TT
> будет содержать примерно следующее:
<PRE
CLASS="SCREEN"
>echo Executing site initialization file /usr/local/bin/ckermit.local.ini....
set prompt Chanel3 &#62;
set line /dev/ttyS0
set baud 38400
set send packet-length 2000
set receive packet-length 2000
set block 3
set file type binary</PRE
>
Затем на вашем файле <TT
CLASS="LITERAL"
>~/.kermrc</TT
> появится строка:
<PRE
CLASS="SCREEN"
>take /usr/local/bin/ckermit.local.ini</PRE
>
На Macintosh установите такие же коммуникационные параметры для б\с, стоп-битов, четности и длины слова. Некоторые старые версии Mac Kermit не поддерживают пакетов объемом 2Кб, так что вам надо установить меньший размер пакета. Однако <TT
CLASS="LITERAL"
>kermit</TT
> устанавливает длину пакета, основанную на длине полученных пакетов, так что понадобится установить меньший размер пакета и на машине под Linux.</P
><P
>Чтобы в действительности получить связь, надо установить режим сервера на Mac или на Linux. Не имеет значения где. Просмотрите подробно документы для 
<TT
CLASS="LITERAL"
>kermit</TT
>.</P
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN70"
>3.1. Источники Macintosh</A
></H2
><P
>Это одно из очень немногих приложений к <TT
CLASS="LITERAL"
>kermit</TT
>, где для передач полезна установка типа файла <TT
CLASS="LITERAL"
>text</TT
>. Это происходит потому, что файлы Macintosh имеют две части: <I
CLASS="EMPHASIS"
>data fork</I
> (область данных) и 
<I
CLASS="EMPHASIS"
>resource fork</I
> (область ресурсов). Область данных соответствует тому, что мы думаем о мире Linux, как о некоем файле: это фактические данные. Область ресурсов содержит растровые изображения для иконок, раскладки клавиатуры, настройки шрифта и тому подобное. Если вы передадите файл с Linux на Mac,  последний не узнает этот файл как текстовый, если вы используете двоичный режим.</P
><P
>При передаче двоичных файлов от одной системы к другой, следует использовать формат Macintosh <TT
CLASS="LITERAL"
>.hqx</TT
> BinHex, который является 7-битовым кодированием 8-битового файла данных. Утилиты Mac, такие как BinHexer или StuffIt, преобразуют файл в его двоичную форму.</P
><P
>Если у вас будет текстовый файл, который вдруг закончится, как файл данных  в системе Mac, скорее всего он даже не появится в диалоговом окне "Открыть". Вам придется открыть файл при помощи ResEdit, который можно взять с <TT
CLASS="LITERAL"
>mac.archive.umich.edu</TT
>. ResEdit скажет, что файл, который вы открываете, не имеет область источников и затем спросит, желаете ли добавить эту область. Вы должны ответить на этот вопрос положительно ("Yes"). Затем отредактируйте тип и программу, создавшую файл, выбрав специальную опцию "Открыть" в меню "Файл". Все текстовые файлы Macintosh являются типом <TT
CLASS="LITERAL"
>TEXT</TT
>, так что замените знаки вопроса в окне на TEXT. Код программы, создавшей файл (Creator code), зависит от вашего текстового редактора. Каждый из них уникален и зависит от того,  как  Mac идентифицирует различные приложения. Код для GNU Emacs на Mac будет, например, <TT
CLASS="LITERAL"
>EMAC</TT
>. Если вы сомневаетесь, каким будет код программы, создавшей файл для вашего текстового редактора, используйте <TT
CLASS="LITERAL"
>ttxt</TT
>, который является кодом для TeachText (эквивалент
<TT
CLASS="LITERAL"
>EDLIN.EXE</TT
>.). Затем настоящий текстовый редактор сможет перевести файл с TeachText на его родной код.</P
><P
>Существует много других подобных вещей, которые под силу TeachText, так что имеет смысл постоянно держать его на своем Mac. Книга <I
CLASS="EMPHASIS"
>Voodoo
Mac,</I
> написанная Kay Yarborough Nelson,- это источник уже испытанных способов работы Macintosh, которые используют ResEdit, TeachText, the Finder, а также другие программы.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="AEN87"
>4. Загрузка через <TT
CLASS="LITERAL"
>kermit</TT
>.</A
></H1
><P
>Настройка Linux для использования  Mac как терминала <TT
CLASS="LITERAL"
>login:</TT
> легче. <TT
CLASS="LITERAL"
>kermit</TT
> идеален для этих целей, потому что это одна из нескольких бесплатных коммуникационных программ, которая обеспечит нужную степень эмуляции VT100/120/220.</P
><P
>Запустите <TT
CLASS="LITERAL"
>kermit</TT
> на Macintosh, как в предыдущем разделе, но не отдавайте команды серверу, а войдите в режим <TT
CLASS="LITERAL"
>connect</TT
>. Это режим  эмуляции терминала, который используется в большинстве случаев.</P
><P
>На Linux, для настройки последовательного порта, надо использовать  программу
<TT
CLASS="LITERAL"
>getty</TT
>, чтобы получить приглашение на вход в систему. Для этого вам надо чтобы программа <TT
CLASS="LITERAL"
>init</TT
> распознала терминал на последовательном порте. В файле <TT
CLASS="LITERAL"
>/etc/inittab</TT
> необходимо иметь строку:
<PRE
CLASS="SCREEN"
>T1:23:respawn:/sbin/getty -L ttyS0 9600 vt100 </PRE
>
Убедитесь, что вы заменили подходящее последовательное устройство для
<TT
CLASS="LITERAL"
>/dev/ttyS0</TT
> и поставили правильную скорость.</P
><P
>Эта команда для <TT
CLASS="LITERAL"
>getty</TT
> запускает <TT
CLASS="LITERAL"
>login</TT
> (переключатель 
<TT
CLASS="LITERAL"
>-L</TT
>) на дисплее терминала, и когда время ввода истечет, перезапустите (<TT
CLASS="LITERAL"
>respawn</TT
>) программу ввода, пока кто-нибудь не войдет. Если ни одно устройство не соединится с последовательным портом или если соединение неправильное, вы увидите на консоли сообщение типа: <TT
CLASS="LITERAL"
>/dev/ttyS0 respawning too fast: disabling for 5
minutes - слишком быстрая перезагрузка /dev/ttyS0: подождите 5 минут.</TT
>. Если это случилось, вернуться к началу процесса (с правами пользователя  root), терминируя процесс <TT
CLASS="LITERAL"
>getty</TT
> или используя команду
<TT
CLASS="LITERAL"
>init q</TT
>. У них обеих тот же эффект, что и у перезапуска процесса(ов) <TT
CLASS="LITERAL"
>getty</TT
>. Если все в порядке, вам надо заглянуть в вывеску Linux и незамедлительно зайти в окно Mac <TT
CLASS="LITERAL"
>kermit</TT
>. Вроде все.</P
><P
>Также, если вы используете что-нибудь похожее, но не <TT
CLASS="LITERAL"
>getty</TT
>, например,
<TT
CLASS="LITERAL"
>getty_ps</TT
>, вышеприведенная команда будет иной. Очень важно запомнить, что все, что находится справа от
<TT
CLASS="LITERAL"
>/sbin/getty</TT
>, - это аргумент для самого <TT
CLASS="LITERAL"
>getty</TT
>, но не
<TT
CLASS="LITERAL"
>init</TT
>. Просмотрите страницы руководства к
<TT
CLASS="LITERAL"
>getty</TT
>, <TT
CLASS="LITERAL"
>init</TT
> и <TT
CLASS="LITERAL"
>inittab</TT
>, если у вас возникли вопросы.</P
><P
>В  Serial HOWTO вы найдете подробное описание настройки
<TT
CLASS="LITERAL"
>/etc/inittab</TT
> в <TT
CLASS="LITERAL"
>getty_ps</TT
>, если ваша система использует эту программу.  </P
><P
>Чтобы передавать файлы туда и обратно между Macintosh и  Linux, можно (через Mac Kermit ) дать команду <TT
CLASS="LITERAL"
>kermit -x</TT
>, 
чтобы запустить <TT
CLASS="LITERAL"
>kermit</TT
> на Linux в режиме сервера. Вы можете затем использовать команды для передачи файлов, чтобы посылать файлы через последовательное соединение. Стоит установить приглашение  в своем файле
<TT
CLASS="LITERAL"
>~/.kermrc</TT
> строкой:
<PRE
CLASS="SCREEN"
>set prompt Linux-kermit &#62;</PRE
>
Иначе вы спутаете, в какой системе находитесь.</P
><DIV
CLASS="SECT2"
><HR><H2
CLASS="SECT2"
><A
NAME="AEN129"
>4.1. Другие программы для терминала Mac</A
></H2
><P
>Этот метод также хорош для любой другой программы терминалов  Mac. Если у вас есть  ZTerm, то можно использовать <TT
CLASS="LITERAL"
>rz</TT
> и <TT
CLASS="LITERAL"
>sz</TT
>
на Linux для передачи файлов по протоколу ZModem. Если вы приобрели факс-модем вместе с программой Microphone Lite, то это тоже неплохое решение, они будут работать не хуже <TT
CLASS="LITERAL"
>kermit</TT
>.</P
></DIV
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="AEN135"
>5. Заключение</A
></H1
><P
>Если у вас возникают вопросы или предложения относительно этого документа, пожалуйста, напишите мне по адресу <TT
CLASS="LITERAL"
>kiesling@terracom.net</TT
>.</P
></DIV
><DIV
CLASS="SECT1"
><HR><H1
CLASS="SECT1"
><A
NAME="AEN139"
>6. Авторские права</A
></H1
><P
>Авторские права на русский перевод этого текста принадлежат &copy; 2000 SWSoft Pte Ltd.
Все права зарезервированы.</P
><P
>Этот документ является частью проекта Linux HOWTO.</P
><P
>Авторские права на документы Linux HOWTO принадлежат их авторам, если явно
не указано иное. Документы Linux HOWTO, а также их переводы, могут
быть воспроизведены и распространены полностью или частично на любом
носителе, физическом или электронном, при условии сохранения этой заметки об
авторских правах на всех копиях. Коммерческое распространение разрешается и
поощряется; но, так или иначе, автор текста и автор перевода желали бы знать о
таких дистрибутивах.</P
><P
>Все переводы и производные работы, выполненные по документам Linux HOWTO
должны сопровождаться этой заметкой об авторских правах. Это делается в
целях предотвращения случаев наложения дополнительных ограничений на
распространение документов HOWTO. Исключения могут составить случаи
получения специального разрешения у координатора Linux HOWTO, с которым
можно связаться по адресу приведенному ниже.</P
><P
>Мы бы хотели распространить эту информацию по всем возможным каналам. Но
при этом сохранить авторские права и быть уведомленными о всех планах
распространения HOWTO. Если у вас возникли вопросы, пожалуйста, обратитесь
к координатору проекта Linux HOWTO по электронной почте:
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:linux-howto@metalab.unc.edu"
>linux-howto@metalab.unc.edu</A
>&#62;</TT
> или к координатору русского
перевода Linux HOWTO компании SWSoft Pte Ltd. по адресу
<TT
CLASS="EMAIL"
>&#60;<A
HREF="mailto:linux-howto@asplinux.ru"
>linux-howto@asplinux.ru</A
>&#62;</TT
></P
></DIV
></DIV
></BODY
></HTML
>