<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE> HowTo по настройке видеосистемы в Xfree86.: Расчет размер кадра</TITLE>
 <LINK HREF="XFree86-Video-Timings-HOWTO-10.html" REL=next>
 <LINK HREF="XFree86-Video-Timings-HOWTO-8.html" REL=previous>
 <LINK HREF="XFree86-Video-Timings-HOWTO.html#toc9" REL=contents>
</HEAD>
<BODY>
<A HREF="XFree86-Video-Timings-HOWTO-10.html">Next</A>
<A HREF="XFree86-Video-Timings-HOWTO-8.html">Previous</A>
<A HREF="XFree86-Video-Timings-HOWTO.html#toc9">Contents</A>
<HR>
<H2><A NAME="s9">9. Расчет размер кадра</A> </H2>

<P>Внимание: этот метод работает для мультисканирующих мониторов. Возможно, он 
будет работать  для  мониторов с фиксированными частотами, но без гарантий!
<P>Начните с того, что  разделите DCF на максимально доступную HSF, чтобы получить
горизонтальную длину кадра. 
<P>Например, предположим, что у вас Sigma Legend SVGA с частотой 65 МГц и монитор
у вас с вертикальной частотой синхронизации 55КГц . Тогда, результат (DCF / HSF)
будет равен 1181 (65МГц = 65000КГц; 65000/55 = 1181).
<P>А теперь немножко черной магии. Вам нужно округлить это число до ближайшего, 
делимого на 8. Это связано с контролером VGA, используемом SVGA и S3 картами;
они используют  8-ми битные регистры со сдвигом на три бита влево, что реально
составляет 11-ти битное значение. Другие типы видеокарт такие как
ATI 8514/A  могут в этом не нуждаться, но наверняка мы этого не знаем и
коррекция не помешает. Поэтому, округлите округлите горизонтальную длину кадра
до 1176.
<P>Это число (DCF / HSF округленное до делимого на 8) минимальная HFL, которую вы 
можете использовать. Вы можете получить большие значения HFL (и, таким образом,
большее количество точек по горизотали), уменьшая HSF. Но, за это вы заплатите
меньшей частотой обновления и, следовательно,  большим мерцанием.
<P>Как правило, 80% процентов горизонтальной длины кадра можно использовать  для
горизотального разрешения - видимой части горизонтальной части растра (
остальная часть составляет  границы и обратное время сканирования - т.е. время
необходимое лучу переместиться  от правого края экрана до левого  края следующей
линии растра).  В нашем примере, это состовялет 944 тиков.
<P>Теперь, чтобы получить нормальное соотношение сторон дисплея т.е. 4:3,
установите вертикальное разрешение на 3/4 от вертикального разрешения, которое
вы только что вычислили. Для нашего примера, это 708 тиков. Чтобы получить
реальную VFL умножьте это число на 1,05 и получите 743 тика.
<P>С техничекой точки зрения, в соотношении 4:3 нет ничего волшебного; ничто не 
мешает вам использовать не Золотое отношение, а какое-нибудь другое, если
вам так удобнее. Получить  высоту и ширину кадра  можно исходя из длины
диагонали, просто умножьте длину  диагонали на 0,8 для ширины, и на 0,6
для высоты.
<P>Итак, HFL=1176 и VFL=743. Разделив 65МГц на  произведение этих двух значений 
мы получим замечательную 74,4 Гц частоту обновления экрана. Здророво! И лучше
чем стандарт  VESA. И при этом вы получили 944x708, больше, чем ожидаемое
800x600. Совсем не плохо!  
<P>Вы можете даже улучшить частоту рефреша до почти 76 Гц, имея в виду тот
факт, что  мониторы способны часто обеспечивать примерно  на 2 КГц большую 
частоту по сранению с расчетной и  уменьшая VFL (т.е. взяв 75% от 944).
Но прежде чем экспериментировать с предельными значениями убедитесь, что 
монитор способен обеспечивать вертикальную синхронизацию до 76%. (популярный
монитор NEC 4D, например, не может. Он способен только на 75Гц VSF). (Более 
подробно это обсуждается  "Предельные настройки вашего монитора").
<P>До сих пор, большинство наших рассужедний и расчетов относилось к растровым 
дисплеям. И они мало напоминают черную магию!
<P>
<P>
<HR>
<A HREF="XFree86-Video-Timings-HOWTO-10.html">Next</A>
<A HREF="XFree86-Video-Timings-HOWTO-8.html">Previous</A>
<A HREF="XFree86-Video-Timings-HOWTO.html#toc9">Contents</A>
</BODY>
</HTML>
