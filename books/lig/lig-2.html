<title>Приобретение и инсталляция Linux</title>
<?php include("/home/maxcom/linux_html/books/head.php3") ?>
<h1>2 <a name="s2"> Приобретение и инсталляция Linux </h1>
<p> <a href="lig.html#toc2"> Содержимое этого раздела</a></p>

<p>В  этой  главе  мы  опишем,  как приобрести Linux в виде
подготовленных дистрибутивов и как их инсталлировать.</p>
<p></p>
<p>Мы   уже   говорили,   что   не   существует  "официального"
дистрибутива  Linux.  Существует  много  дистрибутивов, каждый из
которых  хорош  для  определенных  целей.  Эти дистрибутивы можно
взять с ftp-серверов Internet, с BBS, на дискетах и CD-ROM.</p>
<p></p>
<p>Здесь  мы  дадим  общую картину процесса инсталляции. Каждый
дистрибутив  имеет  свои конкретные инструкции по инсталляции, но
вооруженные  представленной  здесь  общей  концепцией, вы сможете
хорошо  ориентироваться  в  существе этого процесса. Приложение А
дает  список  источников  информации, к которым можно обратиться,
если вы окончательно запутаетесь.</p>
<p></p>
<p>Эта книга имеет дополнительные разделы, связанные с деталями
Slackware-дистрибуции Linux.</p>
<p></p>
<h2>2.1 <A Name="ss2.1"> Дистрибуции Linux </h2>

<p>Поскольку   Linux   относится  к  свободно  распространяемым
программам, не существует организации или личности, отвечающей за
его   сопровождение.   Поэтому   каждый   волен   формировать   и
распространять дистрибутивы Linux, находясь в рамках GPL (General
Public  License). В результате, множество вариантов дистрибутивов
Linux можно взять на FTP-серверах или по электронной почте.</p>
<p></p>
<p>Поэтому  вы  сталкиваетесь  с  проблемой,  какой дистрибутив
Linux вам нужен. Дистрибутивы бывают разные. Есть "всеоб'емлющие"
дистрибутивы, содержащие все, что может использоваться в системе.
Другие   дистрибутивы   Linux   "маленькие",   предназначены  для
пользователей,  не  обладающих  неисчерпаемыми запасами дискового
пространства.   Многие   дистрибутивы   содержат  только  базовые
программы  Linux  и  предполагают  в  дальнейшем  самостоятельную
инсталляцию больших пакетов, вроде X Window System. (В Главе 4 мы
опишем, как это делается).</p>
<p></p>
<p>В   Приложении  А  содержится  список  дистрибутивов  Linux,
доступных по Internet и электронной почте.</p>
<p></p>
<p>Как  выбрать  из  возможных  дистрибутивов?  Если у вас есть
доступ   к   новостям  USENET  или  другой  системе  компьютерных
телеконференций,  вы можете спросить мнение тех людей в сети, кто
уже  имеет опыт инсталляции Linux. Еще лучше - попросить помощи у
знающего  Linux,  кого, в свою очередь, знаете вы. Надо учитывать
много факторов при выборе дистрибутива, но мнения различных людей
на  этот  счет  различны. Но на самом деле большинство популярных
дистрибутивов  Linux  содержат  примерно  один  и  тот  же  набор
программ, так  что можно выбирать, не очень мучаясь. В этой книге
обсуждаются  инсталляции популярных дистрибутивов Linux Slackware
и Slackware Pro.</p>
<p></p>
<h2>2.1.1 <A Name="ss2.1.1"> Получение Linux из Internet </h2>

<p>Если  у  вас  есть  доступ  к  Internet,  простейший  способ
получить  Linux - это по FTP.
<sl>Если вы не имеете прямого доступа к Internet, вы можете получить
Linux через сервис <code>ftpmail</code> по электронной почте.
См. приложение C.</sl>

В приложении C дан список некоторых
FTP-серверов  с  архивами,  содержащими  Linux.  Один  из  них  -
<code>sunsite.unc.edu</code>, где различные дистрибутивы могут быть найдены в
каталоге</p>
<p>
<blockquote><code>
<pre>
    /pub/Linux/distributions
</pre>
</code></blockquote>
</p>
<p></p>
<p>Многие  дистрибутивы хранятся в виде образов дискет. То есть
дистрибутив  состоит  из  множества  файлов,  каждый  из  которых
содержит  двоичный  образ  дискеты.  Для  того, чтобы скопировать
содержимое   на   дискету,   вы   должны  использовать  программу
<code>RAWRITE.EXE</code>   под   MS-DOS.   Эта   программа  копирует  поблочно
содержимое   файла   на  дискету,  не  анализируя  формат  диска.
<sl>Если  у  вас  есть  доступ  к  UNIX-станции с дисководом, вы
можете  также  использовать  команду  <code>dd</code>  для копирования образа
файла  прямо  на дискету. Команда, вроде
<code>dd of=/dev/rfd0 if=foo bs=18k''</code>
осуществит прямое копирование содержимого файла <code>foo</code> на
дискету  на  Sun-станции. Проконсультируйтесь у местных спецов по
UNIX относительно использования команды <code>dd</code>.</sl>

</p>
<p></p>
<p>Программу   <code>RAWRITE.EXE</code>   можно   взять   на   многих  Linux
FTP-серверах, включая <code>sunsite.unc.edu</code>, в каталоге</p>
<p>
<blockquote><code>
<pre>
    /pub/Linux/system/Install/rawrite
</pre>
</code></blockquote>
</p>
<p></p>
<p>Во  многих  случаях  вы  просто считываете множество образов
дискет  и  используете  <code>RAWRITE.EXE</code>  для  каждого  образа,  чтобы
создать  дискету. Вы загружаетесь с так называемой "boot"-дискеты
и   можете   далее   скидывать  систему.  Как  правило, программы
инсталлируются   прямо  с  дискет,  хотя  некоторые  дистрибутивы
позволяют  инсталлировать из разделов MS-DOS винчестера. Некоторые
дистрибутивы   позволяют   инсталлировать  по  сети,  посредством
TCP/IP.  Документация  на  каждый  дистрибутив  должна  описывать
допустимые методы инсталляции.</p>
<p></p>
<p>Другие  дистрибутивы Linux инсталлируются с дискет в формате
MS-DOS.  Например, дистрибутив Linux Slackware требует создания с
помощью  <code>RAWRITE.EXE</code>  только  дискет  boot  и root. Остальные
дискеты копируются на дискеты в формате MS-DOS командой
MS-DOS  COPY.  Система  инсталлируется прямо с дискет MS-DOS. Это
избавляет вас от необходимости долго пользоваться <code>RAWRITE.EXE</code>, но
предполагает доступность MS-DOS для создания дискет.</p>
<p></p>
<p>Каждый  дистрибутив,  доступный по FTP, должен содержать файл
<code>README</code>,  описывающий,  как скидывать на дискеты и как их готовить
для    инсталляции.    Обязательно   прочитайте   всю   доступную
документацию относительно вашей версии.</p>
<p></p>
<p>При  перекачке Linux необходимо использовать режим перекачки
двоичных   файлов  (для  большинства  FTP-клиентов  это  команда
"<code>binary</code>").</p>
<p></p>
<p>В Разделе 2.1.4 описывается получение дистрибутива Slackware
по Internet.</p>
<p></p>

<h2>2.1.2 <A Name="ss2.1.2"> Получение Linux из других он-лайн источников </h2>

<p>Если  вы  имеете доступ к другим сетям, вроде CompuServe или
Prodigy, то в них могут быть свои средства перекачки файлов. Кроме
того,  существует  множество  BBS,  на которых есть Linux. Список
Linux  BBS дан в Приложении D. Не все дистрибутивы Linux доступны
через  эти  сети,  многие дистрибутивы на CD-ROM распространяются
только почтой.</p>
<p></p>

<h2>2.1.3 <A Name="ss2.1.3"> Получение Linux по почте </h2>

<p>Если  у  вас  нет  доступа  к  Internet  или  BBS,  множество
дистрибутивов  Linux можно получить по почте на дискетах, лентах,
лазерных  дисках.  В Приложении B дан список таких дистрибуторов.
Многие из них принимают оплату по кредитным карточкам и платежным
поручениям,  так  что если вы живете даже не в США или Канаде, вы
все равно сможете таким образом приобрести дистрибутив Linux.</p>
<p></p>
<p>Linux относится к свободно распространяемым программам, хотя
его  распространение  и  происходит  под  лицензией  GPL. Поэтому
пересылка  Linux  по  почте  может  стоить  вам US$30 - US$150, в
зависимости  от  варианта  дистрибутива.  Однако,  если вы знаете
кого-либо,  кто  уже приобрел и скинул себе Linux, вы можете взять
взаймы   или   скопировать  его.  Дистрибуторам  Linux  запрещено
накладывать  ограничения  на  его  распространение в любой форме.
Даже если вы намереваетесь инсталлировать Linux на все компьютеры
вашей   лаборатории,   вам   достаточно   купить  один  экземпляр
дистрибутива у любого из дистрибуторов.</p>
<p></p>

<h2>2.1.4 <A Name="ss2.1.4"> Получение Slackware </h2>

<p>Slackware  -  популярная  дистрибуция  Linux, сопровождаемая
Patrick  Volkerding.
<sl>С  Patrick Volkerding можно связаться по
Internet: volkerdi@mhd1.moorhead.msus.edu.</sl>

</p>
<p></p>
<p>Эта  версия  легко  инсталлируется  и  достаточно полна. Она
может  быть  получена   по Internet, а также на CD-ROM от ряда
поставщиков (см. Приложение B).</p>
<p></p>
<p>Дистрибуция  Slackware  состоит  из "наборов дисков" (``disk
sets''),  каждый  из  которых  содержит  конкретный  тип программ
(например,  набор  "d"  содержит средства разработки <F>development
tools</F>,  такие  как  gcc-компилятор,  и  набор  "x", содержащий X
Window  System). Вы можете выбирать, какие наборы инсталлировать;
другие наборы вы можете инсталлировать позже.</p>
<p></p>
<p>Версия  Slackware, описанная здесь - это версия 2.0.0, от 25
июня  1994. Инсталляция более поздних версий должна быть во многом
аналогична.</p>
<p></p>
<h2>2.1.4.1 <A Name="ss2.1.4.1"> Наборы дисков Slackware </h2>

<p>К сожалению, Slackware не имеет полного списка потребностей
памяти  для  каждого набора. Вам потребуется не менее 7 Мбайт для
инсталляции  лишь  серии  "A";  очень  грубая оценка необходимого
дискового пространства - от 2 до 2.5 Мбайт на дискету.</p>
<p></p>
<p>Имеются следующие наборы дисков:</p>
<p>
<dl>
<dt><b>A</b><dd><p>Базовая  система.  Достаточная для начала работы и делает
доступными команды <code>elvis</code> и <code>comm</code> (<code>elvis</code>
- текстовый редактор,
comm  -  сравнение файлов). Базируется на ядре 1.0.9 и новом
стандарте файловой системы (FSSTND). Известно, что эти диски
хорошо  размещать  на  дискетах  1.2M (что не характерно для
остальных  частей  Slackware).  Если  у  вас  в распоряжении
только  дисковод на 1.2M, вы все равно можете инсталлировать
базовую  систему, сбросив другие диски и инсталлировать их с
жесткого диска.</p>
<p></p>
<dt><b>AP</b><dd><p>Различные  приложения  и  дополнения, вроде руководства,
<code>groff</code>,  <code>ispell</code>  (GNU and international versions), <code>term</code>,
<code>joe</code>, <code>jove</code>, <code>ghostscript</code>, <code>sc</code>, <code>bc</code>, и quota patches.</p>
<p></p>
<dt><b>D</b><dd><p>Разработка программ. GCC/G++/Objective C 2.5.8, <code>make</code> (GNU
и  BSD),  <code>byacc</code> и  GNU <code>bison</code>, <code>flex</code>, the 4.5.26 C libraries,
<code>gdb</code>,  kernel source for 1.0.9, <code>SVGAlib</code>, <code>ncurses</code>,
<code>clisp</code>, <code>f2c</code>, <code>p2c</code>, <code>m4</code>, <code>perl</code>, <code>rcs</code>.</p>
<p></p>
<dt><b>E</b><dd><p>GNU Emacs 19.25.</p>
<p></p>
<dt><b>F</b><dd><p>Набор Часто Задаваемых Вопросов (<code>FAQ</code>s) и другая документация.</p>
<p></p>
<dt><b>I</b><dd><p>Info-страницы для GNU-программ. Документация для различных
программ, читаемая с помощью info или Emacs.</p>
<p></p>
<dt><b>N</b><dd><p>Сетевые программы.  TCP/IP,  UUCP, <code>mailx</code>,  <code>dip</code>,
<code>deliver</code>, <code>elm</code>,
<code>pine</code>, <code>smail</code>, <code>cnews</code>, <code>nn</code>, <code>tin</code>, <code>trn</code>.</p>
<p></p>
<dt><b>OOP</b><dd><p>Об'ектно-Ориентированное Программирование.
GNU  Smalltalk 1.1.1 и Smalltalk Interface to X (STIX).</p>
<p></p>
<dt><b>Q</b><dd><p>Исходники Alpha-ядра (во время написания книги - Linux 1.1.18).</p>
<p></p>
<dt><b>TCL</b><dd><p>Tcl, Tk, TclX, blt, itcl.</p>
<p></p>
<dt><b>Y</b><dd><p>Игры. Набор игр BSD и Tetris для терминалов.</p>
<p></p>
<dt><b>X</b><dd><p>Базовая система XFree86 2.1.1 с  libXpm, fvwm 1.20 и xlock.</p>
<p></p>
<dt><b>XAP</b><dd><p>X-приложения: X11 <code>ghostscript</code>, <code>libgr13</code>,
<code>seyon</code>, <code>workman</code>, <code>xfilemanager</code>, xv  3.01,
GNU  <code>chess</code>  и  <code>xboard</code>,  <code>xfm</code>  1.2,
<code>ghostview</code>, и различные X-игры.</p>
<p></p>
<dt><b>XD</b><dd><p>Программы  работы  в X11. X11 библиотеки, сервер linkkit,
поддержка PEX.</p>
<p></p>
<dt><b>XV</b><dd><p>Xview  3.2  release  5.  XView библиотеки, виртуальный и
невиртуальный Open Look window-менеджеры.</p>
<p></p>
<dt><b>IV</b><dd><p>Interviews библиотеки, include-файлы, doc и <code>idraw</code> приложения.</p>
<p></p>
<dt><b>OI</b><dd><p>ParcPlace's Object Builder 2.0 и Object Interface Library
4.0.   Обратите   внимание,   что   она  работает  только  с
libc-4.4.4,   но  будет  новая  версия,  как  только  станет
доступным gcc 2.5.9.</p>
<p></p>
<dt><b>T</b><dd><p>Системы форматирования TeX и LaTeX.</p>
</dl>
</p>
<p></p>
<p>Вы обязательно должны взять набор "A", остальные по желанию.
Мы  советуем  инсталлировать наборы A, AP и D, а также X, если вы
планируете использовать X Window System.</p>
<p></p>

<h2>2.1.4.2 <A Name="ss2.1.4.2"> Получение Slackware из Internet </h2>

<p>Версии  Slackware  Linux  на  многих  FTP-серверах  мира.  В
Приложении C дан список некоторых из них. Мы предлагаем вам найти
ближайший  к  вам FTP-сервер, чтобы минимизировать трафик. Тем не
менее  есть  два  главных  Linux  FTP-архива:
<code>sunsite.unc.edu</code>  и
<code>tsx-11.mit.edu</code>.</p>
<p></p>
<p>Версию  Slackware  можно  найти по крайней мере на следующих
серверах:</p>
<p>
<ul>
<li>sunsite.unc.edu:/pub/Linux/distributions/slackware
</li>
<li>tsx-11.mit.edu:/pub/linux/packages/slackware
</li>
<li>ftp.cdrom.com:/pub/linux/slackware</li>
</ul>
</p>
<p></p>
<p><code>ftp.cdrom.com</code> - это родной сервер Slackware.</p>
<p></p>
<h2>2.1.4.2.1 <A Name="ss2.1.4.2.1"> Перекачка файлов </h2>

<p>При  перекачке  файлов  вам  следует  перекачать,
используя  FTP,  следующие  файлы. Не забывайте использовать режим
перекачки  двоичных  файлов.  Приложение  С  содержит  достаточно
материалов для того, чтобы научиться использовать FTP.</p>
<p>
<ul>
<li>Различные файлы <code>README</code>, а также <code>SLACKWARE_FAQ</code>. Прочитайте
обязательно эти файлы до инсталляции.
</li>
<li>Образ  bootdisk. Это файл, который вы запишите на дискету
для   создания   загрузочного   диска   Slackware.   Если  у
вас   дисковод   на   1.44М  (3.5"),  найдите  в  каталоге
<code>bootdsks.144</code>.  Если  у  вас дисковод 1.2М (5.25"), найдите в
каталоге <code>bootdsks.12</code>.

<p>Вам необходим один из следующих файлов bootdisk.</p>
<p>
<ul>
<li>bare.gz.  Это загрузчик с дискет, имеющий только драйвер
жесткого   диска   IDE.   (Нет   SCSI,  CD-ROM  или  сетевой
поддержки).  Используйте,  если у вас только есть контроллер
IDE  жесткого  диска,  а инсталляция  по  сети  или  с CD-ROM
невозможна.
</li>
<li>cdu31a.gz. Содержит драйверы IDE, SCSI и Sony CDU31A/33A.
</li>
<li>mitsumi.gz. Содержит драйверы IDE, SCSI и Mitsumi CD-ROM
</li>
<li>modern.gz.  Экспериментальный загрузочный  диск  с  новым
ядром и всеми CD-ROM драйверами, кроме сетевых и Sony 535.
</li>
<li>net.gz.  Содержит CD-ROM драйвер IDE и сетевые.
</li>
<li>sbpcd.gz.   Содержит   CD-ROM   драйверы  IDE,  SCSI  и
SoundBlaster Pro/Panasonic.
</li>
<li>scsi.gz. Содержит CD-ROM драйверы IDE, SCSI и SCSI
</li>
<li>scsinet.gz. Содержит CD-ROM и сетевые драйверы IDE, SCSI,
SCSI.
</li>
<li>sony535.gz.  Содержит  CD-ROM  драйверы IDE, SCSI и Sony
535/531
</li>
<li>xt.gz. Содержит CD-ROM драйверы IDE и жесткого диска XT.</li>
</ul>
</p>
<p></p>
<p>Вам  нужен  <em>только  один</em>  образ диска из вышеперечисленных в
зависимости от вашей аппаратуры.</p>
<p></p>
<p>Некоторые  драйверы конфликтуют друг с другом самым странным
образом.   И   вместо  того,  чтобы  выискивать  ошибки  в  своей
аппаратуре,  проще использовать загрузочную дискету с конкретными
драйверами.  Большинству пользователей следует начинать попытки с
<code>scsi.gz</code> или <code>bare.gz</code>.</p>
<p></p>
</li>
<li>Образ  root-диска. Это файл, который вы запишите на дискету
для  создания  инсталляционного  диска  Slackware. В связи с
этим  образом  посмотрите  <code>rootdsks.144</code>  или  <code>rootdsks.12</code>  в
зависимости   от  типа  дисковода,  с  которого  производите
загрузку.

<p>Вам необходим один из следующих файлов:</p>
<p></p>
<p>
<ul>
<li>color144.gz.  Инсталляционный  диск  для дисковода 1.44,
использующий   меню.   Большинству   пользователей   следует
использовать именно его.
</li>
<li>umsds144.gz.  Версия  диска  <code>color144</code>  для инсталляции с
помощью   файловой   системы   UMSDOS,   которая   позволяет
инсталлировать  Linux  поверх  каталога  файловой  системы
MS-DOS.  Этот  метод инсталляции обсуждается здесь детально,
но  он  не  позволяет  переразбивать диск на новые разделы.
Позже мы к этому вернемся.
</li>
<li>tty144.gz.  Инсталляционный  диск,  ориентированный  на
терминал,  для  дисковода  1.44M.  Если color144.gz у вас не
идет, попробуйте вместо него <code>tty144.gz</code>.
</li>
<li>colrlite.gz.  Инсталляционный  диск,  ориентированный на
терминал, для дисковода 1.2M.
</li>
<li>umsds12.gz.  Версия  диска  <code>colrlite</code>  для  инсталляции с
помощью  файловой  системы  UMSDOS. Смотрите вышеприведенное
описание <code>umsds144.gz</code>.
</li>
<li>tty12.gz   Инсталляционный   диск,  ориентированный  на
терминал,  для  дисковода  1.2M.  Используйте этот диск,
если  у  вас  есть  дисковод  на 1.2M и <code>colrlite.gz</code> у вас не
идет.</li>
</ul>
</p>
<p></p>
<p>И снова вам необходим <em>лишь один</em> образ диска root, зависящий от
типа драйвера загрузочного дисковода.</p>
<p></p>
</li>
<li>GZIP.EXE.  Это  MS-DOS  программа, выполняющая компрессию
<code>gzip</code>,   используемая  для  сжатия  файлов  boot  и  root
(расширение  имен  файлов  ".gz" говорит об этом). Она может
быть найдена в каталоге <code>install</code>.
</li>
<li>RAWRITE.EXE.  Это  MS-DOS  программа,  которая записывает
содержимое файла (например, образов boot и root) прямо на
дискету,   не  проверяя  формат.  Вам  следует  использовать
<code>RAWRITE.EXE</code> для создания дискет boot и root. Это можно также
найти в инсталляционном каталоге.

<p>Если  вы  планируете  создать дискеты boot и root из MS-DOS,
вам  понадобятся  только  <code>RAWRITE.EXE</code>  и  <code>GZIP.EXE</code>.  Если  же вам
доступна  UNIX-станция  с дисководом, вы можете создать дискеты в
ней, используя команду <code>dd</code>. Посмотрите руководство по команде <code>dd</code>
или посоветуйтесь со специалистами по UNIX.</p>
<p></p>
</li>
<li>Файлы   из   каталогов   <code>slakware</code>a1/,<code>slakware</code>a2/  и
<code>slakware</code>a3/. Эти файлы создают набор диска ``A'' дистрибутива
Slackware.  Они необходимы. Позже вы скопируете эти файлы на
дискеты   в   MS-DOS   для   инсталляции   (или   вы   можете
инсталлировать с жесткого диска). Поэтому, когда вы скачаете
эти   файлы,   сохраните   их   в  отдельном  каталоге;  не
перепутайте файлы <code>a1</code> с файлами <code>a2</code> и т.п.

<p>Убедитесь также, что вы получили файлы без точек в именах. В
FTP используйте команду ``<code>mget *</code>'' вместо ``<code>mget *.*</code>''.</p>
<p></p>
</li>
<li> Файлы  в  каталогах <code>ap1</code>, <code>ap2</code>  и  т.д.  зависят  от
инсталлируемых наборов. Например, если вы инсталлируете диск
с  набором  ``<code>X</code>'',  берите файлы из каталогов от x1 до x5.
Как  и для наборов диска ``<code>A</code>'', убедитесь, что файлы при
переписывании размещаются в разных каталогах.</li>
</ul>
</p>
<p></p>


<h2>2.1.4.3 <A Name="ss2.1.4.3"> Slackware на CD-ROM </h2>

<p>Slackware можно также получить на CD-ROM. Большинство CD-ROM
со  Slackware просто содержат копии файлов, которые появляются в
архивах   FTP-серверов.  Поэтому,  если  у  вас  есть  CD-ROM  со
Slackware,  значит  у  вас  есть все необходимые файлы. Вы должны
будете  создать  boot  и root дискеты из файлов, взятых с CD-ROM.
Смотрите Раздел 2.1.4.2.1.</p>
<p></p>
<p>Прежде всего следует решить, какие образы дисков boot и root
будут  использованы.  Они  должны быть на CD-ROM. Ниже мы опишем,
как создавать эти дискеты.</p>
<p></p>

<h2>2.1.4.4 <A Name="ss2.1.4.4"> Методы инсталляции </h2>

<p>Slackware   поддерживает  несколько  вариантов  инсталляции.
Наиболее  популярный  -  инсталляция  из  раздела  MS-DOS  вашего
жесткого  диска;  другой способ инсталлировать с дискет в формате
MS-DOS, созданных с дискового набора, который вы переписали.</p>
<p></p>
<p>Если   у   вас   есть   Slackware   на   CD-ROM,  вы  можете
инсталлировать  файлы  прямо с него. Дистрибутив Slackware Pro от
Morse  Telecommunications позволяет инсталлировать Slackware так,
что  многие  файлы  доступны прямо с CD-ROM. Это может сэкономить
много  пространства  на  диске,  но  некоторые  приложения  будут
работать медленнее.</p>
<p></p>
<h2>2.1.4.4.1 <A Name="ss2.1.4.4.1"> Создание boot и root дискет </h2>

<p>Создавая  дискеты  boot  и  root,  вы  должны  их
создавать  с образов boot-диска и root-диска, которые вы скачали (или
имеете  на CD-ROM), вне зависимости от вида инсталляции. В MS-DOS
вы   должны   раскомпрессировать   образы  boot-диска  и  root-диска,
используя  GZIP.EXE.  Например,  если  вы используете образ диска
boot - <code>bare.gz</code>, наберите команду MS-DOS:</p>
<p>
<blockquote><code>
<pre>
    C:\&gt; GZIP -D BARE.GZ
</pre>
</code></blockquote>
</p>
<p></p>
<p>которая  раскомпрессирует  <code>bare.gz</code>  и создаст вам файл <code>bare</code>.
Если вы инсталлируете с CD-ROM, вы можете скопировать образ диска
bootdisk (например, <code>bare.gz</code>) на жесткий диск и выполнить <code>GZIP.EXE</code>
с CD-ROM для раскомпрессирования.</p>
<p></p>
<p>Вы  должны  также  раскомпрессировать  образ диска root.
Например,  если  вы  используете  root-диск <code>color144.gz</code>, наберите
команду:</p>
<p>
<blockquote><code>
<pre>
    C:\&gt; GZIP -D COLOR144.GZ
</pre>
</code></blockquote>
</p>
<p>которая раскомпрессирует этот файл и создаст файл <code>color144</code>.</p>
<p></p>
<p>Далее,    вы    должны   иметь   две   high-density дискеты,
отформатированные  в  MS-DOS.  (Они должны быть одного типа; если
ваша  boot-дискета  3.5",  обе  дискеты  должны быть high-density
3.5").  Для  записи  образов  дисков boot и root на дискеты надо
использовать <code>RAWRITE.EXE</code> .</p>
<p></p>
<p>Наберите команду:
<blockquote><code>
<pre>
    C:\&gt; RAWRITE
</pre>
</code></blockquote>
</p>
<p></p>
<p>Ответьте на вопросы о имени переписываемого файла (например,
<code>bare</code>  или  <code>color144</code>) и дисковода (например A:).
<code>RAWRITE</code> скопирует
файл  блок  за блоком прямо на дискету. Используйте <code>RAWRITE</code> также
для  образа  root-диска.  Когда  вы  это  сделаете, у вас будут две
дискеты:  одна содержит boot-диск, другая root-диск. Имейте в виду,
что  эти две дискеты уже нечитаемы в MS-DOS (они уже, в известном
смысле, в ``Linux-формате'').</p>
<p></p>
<p>Убедитесь,  что вы используете хорошие несбойные дискеты. На
дискетах не должно быть bad-блоков.</p>
<p></p>
<p>Обратите внимание на то, что вам не обязательно использовать
MS-DOS   для   инсталляции  Slackware.  Но  использование  MS-DOS
облегчает  создание  boot  и  root  дискет, облегчает инсталляцию
программ  (поскольку  вы  можете  инсталлировать  прямо из MS-DOS
раздела  вашей системы). Если у вас на компьютере нет MS-DOS, вы
можете  использовать  чужой  компьютер для создания дискет, и уже
инсталлировать с них.</p>
<p></p>
<p>Нет  также необходимости использовать <code>GZIP.EXE</code> и <code>RAWRITE.EXE</code>
под   MS-DOS   для   создания  дискет  boot  и  root.  Вы  можете
использовать  команды  gzip  и  dd  в  UNIX для выполнения той же
работы.   (Для   этого,  разумеется,  вам  нужна  UNIX-станция  с
дисководом).  Например,  на станции Sun с дисководом
<code>/dev/rfd0</code> вы
можете использовать команды:</p>
<p>
<blockquote><code>
<pre>
    $ gunzip bare.gz
    $ dd if=bare of=/dev/rfd0 obs=18k
</pre>
</code></blockquote>
</p>
<p>Вы  должны  указать соответствующий размер блока (obs), иначе</p>
<p>на  некоторых  станциях  (на  тех  же  Sun)  эта команда не будет
выполнена. Если у вас возникнут проблемы - читайте руководство по
команде <code>dd</code>.</p>
<p></p>

<h2>2.1.4.4.2 <A Name="ss2.1.4.4.2"> Подготовка к инсталляции с жесткого диска. </h2>

<p>Если вы
планируете  инсталляцию Slackware прямо с жесткого диска (которая
обычно  и  быстрее,  и  надежнее,  чем  с дискет), вам потребуется
раздел MS-DOS.</p>
<p></p>
<p><b>Обратите  внимание:</b> Если вы планируете инсталляцию Slackware
из раздела MS-DOS, этот раздел НЕ должен быть скомпрессирован с
помощью  DoubleSpace, Stacker или какой-то другой утилиты MS-DOS.
В  настоящее  время  Linux  не может прямо читать MS-DOS-раздел
DoubleSpace/Stacker.  (Вы  можете  обратиться  к ней через MS-DOS
Emulator, но это не подходит при инсталляции Linux).</p>
<p></p>
<p>При  подготовке инсталляции с жесткого диска создайте просто
на  жестком  диске  каталог  для  размещения файлов Slackware.
Например,</p>
<p>
<blockquote><code>
<pre>
    C:\&gt; MKDIR SLACKWAR
</pre>
</code></blockquote>
</p>
<p></p>
<p>создаст   каталог <code>C:\SLACKWAR</code> для   хранения   файлов
Slackware.  Под  этим  каталогом,  используя  команду <code>MKDIR</code>, вы
можете создать подкаталоги <code>A1</code>,  <code>A2</code>  и  т.д.  для  каждого
переписанного  дискового  набора. Все файлы с диска <code>А1</code> должны быть
помещены в каталог <code>SLACKWAR\A1</code> и т.д.</p>
<p></p>

<h2>2.1.4.4.3 <A Name="ss2.1.4.4.3"> Подготовка к инсталляции с дискет. </h2>

<p>Если вы хотите
инсталлировать  Slackware  с  дискет,  вместо жесткого диска, вам
нужно  по  одной  чистой дискете, отформатированной в MS-DOS, для
каждого  диска  Slackware, который вы желаете переписать. Дискеты
должны быть формата high-density.</p>
<p></p>
<p>Набор диска <code>A</code> (диски <code>A1</code> - <code>A3</code>)
могут быть дискетами как 3.5",
так  и  5.25". Но остальные наборы дисков должны быть на дискетах
3.5".</p>
<p></p>
<p>Поэтому,  если  у вас есть только дисковод 5.25", необходимо
взять  у кого-нибудь на прокат дисковод 3.5", чтобы инсталлировать
прочие  (кроме  A)  диски.  Или  вы  можете  инсталлировать  их с
жесткого диска, как это описывалось выше.</p>
<p></p>
<p>Для  того,  чтобы  создать диски, просто скопируйте файлы из
каждого   Slackware  каталога  на  отформатированные  в  MS-DOS
дискеты, используя команду MS-DOS - COPY:</p>
<p>
<blockquote><code>
<pre>
    C:\&gt; COPY A1\*.* A:
</pre>
</code></blockquote>
</p>
<p></p>
<p>Которая скопирует содержимое диска <code>A1</code> на дискету в дисководе
<code>A:</code>. Это следует повторить для всех считываемых дисков.</p>
<p></p>
<p><em>Нет   необходимости</em>  каким-либо  образом  модифицировать  или
раскомпрессировать  файлы  диска; вы просто должны скопировать их
на   дискеты  в  MS-DOS.  Процедура  инсталляции  Slackware  сама
заботится о раскомпрессировании файлов.</p>
<p></p>

<h2>2.1.4.4.4 <A Name="ss2.1.4.4.4"> Подготовка  к  инсталляции  с  CD-ROM. </h2>

<p>Если у вас
Slackware на CD-ROM, вы можете инсталлировать систему, как только
вы  создали  дискеты  boot и root. Программы будут инсталлироваться
прямо с CD.</p>
<p></p>
<p></p>




<h2>2.2 <A Name="ss2.2"> Подготовка к инсталляции  Linux </h2>

<p>После  того,  как  вы  получили дистрибутив Linux, вы можете
готовить  свою  систему  к  инсталляции.  Требуется  спланировать
работу,  особенно  если  вы  уже работали на других операционнных
системах.  В  последующих  разделах мы расскажем, как планировать
инсталляцию Linux.</p>
<p></p>
<h2>2.2.1 <A Name="ss2.2.1"> Общие принципы инсталляции </h2>

<p>Хотя  версии  Linux  отличаются,  общие  методы  инсталляции
состоят в следующем:</p>
<p>
<ol>
<li><b>(Пере)разбейте  на  разделы жесткий диск(и).</b> Если у вас
уже инсталлирована другая операционная система, вы должны сделать
<em>переразбиение</em>,  чтобы выделить место под Linux. Это обсуждается в
Разделе 2.2.4.
</li>
<li> <b>Загрузите средства инсталляции Linux.</b> Каждый дистрибутив
имеет в каком-либо виде средства инсталляции - обычно загрузочную
(boot)  дискету,  которая  используется для инсталляции программ.
Загрузка   этих  средств  либо  представит  вам  некую  пошаговую
программу инсталляции, либо позволит инсталлировать вручную.

</li>
<li> <b> Создайте  разделы  для  Linux.</b>  После  переразбиения  и
выделения  места  под  Linux,  вы создаете на этом месте раздел
Linux.  Это  выполняется  программой  Linux  <code>fdisk</code>. (см. Раздел
2.3.3).
</li>
<li> <b>Создайте  файловые  системы  и  область  своппинга.</b>  Вы
создадите  одну или несколько файловых систем для хранения файлов
на  вновь созданном разделе. Кроме того, если вы желаете получить
область  своппинга, то также создадите и его на одном из разделов
Linux. (См. Разделы 2.3.4 и 2.3.5).
</li>
<li> <b>Инсталлируйте программы Linux в новую(вые) файловую(вые)
систему(мы).</b>  Далее  вас ждет спокойное плавание, если все прошло
нормально.  (См. Раздел 2.3.6). Позже, в Разделе  2.5, мы опишем,
что делать, когда что-то не получается.</li>
</ol>
</p>
<p></p>
<p>Многие   дистрибутивы   Linux   снабжаются   инсталляционной
программой,  которая будет руководить вами в процессе инсталляции
и автоматизирует некоторые из описанных шагов. Имейте в виду, что
в    различных    дистрибутивах   некоторые   шаги   могут   быть
автоматизированы.</p>
<p></p>
<p>Дистрибутивы  Slackware для Linux, описываемые в этой книге,
потребуют   от   вас   лишь   разбиения   диска   на  разделы  с
использованием  fdisk, а также использования setup для выполнения
других шагов.</p>
<p></p>
<p><b>Важное  замечание.</b> При подготовке к инсталляции Linux, лучший
совет,  который  мы  можем  дать  -  это  делать  записи  в  ходе
инсталляции.  Записывайте все, что вы вводите с клавиатуры и все,
что  видите  неординарное. Смысл здесь простой: если (или когда!)
вы  попадете  в  тупик,  вам  будет  важно  проследить в обратном
порядке  ваши  шаги,  чтобы  обнаружить ошибку. Инсталляция Linux
несложна,  но  надо  помнить  множество деталей. Вам хорошо бы
зафиксировать    все    эти    детали,    чтобы    вы    могли
экспериментировать  с  другими  методами,  если  что-то  не будет
получаться.  Эти записи будут также полезны, если вы обратитесь к
другим  людям  за помощью. Например, напишите в Linux-конференцию
USENET.  Эти заметки вам однажды захочется показать своим внукам.
<sl>Автор  со  смущением  признает, что он хранит тетрадку с записью
всех  своих кувырканий с Linux в первые месяцы работы с системой.
Сейчас эта тетрадка притягивает пыль на книжной полке.</sl>

</p>
<p></p>

<h2>2.2.2 <A Name="ss2.2.2"> Концепция разбиения на разделы </h2>

<p>В  общем  случае  жесткие диски разбиваются на разделы, где
отдельные  разделы  выделяются  отдельным операционным системам.
Например,  вы  можете  сделать  на  диске  несколько  независимых
разделов:  один,  скажем, для MS-DOS, другой для OS/2 и третий для
Linux.</p>
<p></p>
<p>Если  у  вас  уже есть инсталлированные программы, вам может
потребоваться  переразбиение  диска,  чтобы  выделить  место  для
Linux.  Затем  вы  создадите  на  освободившемся  месте  один или
несколько разделов для Linux и области своппинга.</p>
<p></p>
<p>Многие  системы MS-DOS используют один раздел, заполняя все
дисковое  пространство.  В  MS-DOS этот раздел известен, как C:.
Если  у  вас  более одного раздела, MS-DOS дает им имена D:, E: и
т.д. Каждый раздел выступает как независимый диск.</p>
<p></p>
<p>На  первом  секторе  диска  находится <b>master boot record</b> с
таблицей    разделов. <b>boot   record</b>  (загрузочная   запись)
используется  для  загрузки  системы.  Таблица  разделов содержит
информацию о местоположении и размере разделов.</p>
<p></p>
<p>Существует  три  типа  разделов:  первичные,  расширенные  и
логические   (<b>primary</b>, <b>extended</b> и <b>logical</b>).  Наиболее  часто
используются  первичные  разделы.  Однако,  из-за ограничений на
размер таблицы разделов, можно иметь не более четырех разделов на
любом диске.</p>
<p></p>
<p>Чтобы  обойти  ограничение четырех разделов, используются
расширенный раздел.  Расширенные  разделы  сами  по  себе не
содержат данных. Они выступают как хранилища логических разделов.
Поэтому  вы можете создать один расширенный раздел, покрывающий
весь диск, и внутри создать много логических разделов.</p>
<p></p>

<h2>2.2.3 <A Name="ss2.2.3"> Требования Linux к разделам </h2>

<p>Прежде,  чем  мы  расскажем,  как переразбивать ваш диск, вы
должны  представлять,  сколько места надо выделить под Linux. Как
создавать эти разделы, мы обсудим позже в Разделе 2.3.3.</p>
<p></p>
<p>В  системах  UNIX файлы хранятся в <b>файловой системе</b>, которая
прежде  всего  расположена  на  диске  (или на другом устройстве,
вроде CD-ROM или дискеты), отформатированном для хранения файлов.
Каждая  файловая система ассоциируется с конкретной частью дерева
каталогов;  например,  во  многих  случаях  существует файловая
система  для  всех файлов каталога <code>/usr</code>, другая для <code>/tmp</code>
и т.д. Корневая  файловая  система - первичная файловая система, которой
соответствует самый верхний каталог <code>/</code>.</p>
<p></p>
<p>Под  Linux  каждая  файловая  система  "живет"  в  отдельном
разделе  диска.  Например,  если у вас есть файловая система для
<code>/</code> и другая для <code>/usr</code>, вам потребуется два раздела.</p>
<p></p>
<p>Прежде, чем инсталлировать Linux, вам необходимо подготовить
файловые  системы  для размещения программ Linux. Вы должны иметь
по   крайней   мере  одну  файловую  систему  (корневую  файловую
систему),  а  поэтому  один  раздел,  назначенный для Linux. Многие
пользователи  Linux умудряются поместить все свои файлы в корневую
файловую  систему,  с  которой  (одной)  управляться легче, чем с
множеством файловых систем.</p>
<p></p>
<p>Но  вы  можете создать много файловых систем для Linux, если
пожелаете.  Например,  если вы  хотите использовать раздельные
файловые  системы  для  <code>/usr</code>  и <code>/home</code>.
Читатели, имеющие опыт
работы  в  качестве  администраторов  UNIX,  знают, как извлекать
пользу  из раздельных файловых систем. В Главе 4 мы обсуждим,
как разумно использовать множество файловых систем и разделов.</p>
<p></p>
<p>Зачем   использовать  больше,  чем  одну  файловую  систему?
Наиболее  очевидная  причина  -  безопасность.  Если  по какой-то
причине одна из ваших файловых систем будет повреждена, то другие,
как  правило,  не  пострадают. С другой стороны, если вы поместите
все свои файлы в корневую файловую систему, и по какой-то причине
она  будет  испорчена - все разом пропадет. Но это редкие случаи.
Если вы регулярно делаете системный backup, то можете чувствовать
себя достаточно безопасно.
<sl>Автор  использует  одну  (200М)  файловую  систему для всех
своих файлов и не имеет проблем (пока).</sl>

</p>
<p></p>
<p>Другая  причина использования множества файловых систем - это
использование  памяти нескольких дисков. Если у вас есть, скажем,
40M  свободного места на одном диске и  50M на другом, вы можете
создать  корневую  файловую  систему  на  одном диске и <code>/usr</code> на
50-ти  мегабайтном.  В  настоящее время невозможно одной файловой
системе   располагаться   сразу  на  нескольких  дисках,  поэтому
необходимо создавать несколько файловых систем.</p>
<p></p>
<p>Таким  образом,  можно  сказать,  что  Linux требует не менее
однoго  раздела  для  корневой  файловой системы. Если вы желаете
создать  несколько  файловых  систем,  вы  должны для каждой выделить
свой раздел. Некоторые   дистрибутивы  автоматически  создают  вам
разделы  и файловые системы, так что вы можете вообще об этом не
беспокоиться.</p>
<p></p>
<p>Следует  также  иметь  в  виду  проблемы  своппинга. Если вы
хотите   использовать  область  своппинга  в  Linux,  у  вас  две
возможности.  Во-первых,  использовать <em>файл  своппинга</em>,  который
существует   в  одной  из  файловых  систем.  Вы  создадите  файл
своппинга   для   использования   как   виртуальной   RAM   после
инсталляции. Во-вторых, создать <em>раздел своппинга</em>, который будет
использоваться  только  для  этого. Большинство использует второй
способ.</p>
<p></p>
<p>Отдельный  файл  своппинга  или раздел могут быть не более
16M.  Если  вы  желаете  использовать для своппинга более 16M, вы
можете  создать  несколько  разделов  или  файлов  своппинга  (до
восьми).  Например,  если  вам  нужна область своппинга в 32M, вы
можете создать два раздела по 16M.</p>
<p></p>
<p>Создание  раздела  своппинга обсуждается в Разделе 2.3.4, а
создание файла своппинга - в Главе 4.</p>
<p></p>
<p>В общем случае вы создадите для Linux два раздела: один для
корневой   файловой  системы  и  другой  для  области  своппинга.
Разумеется,   возможно   много  вариаций  на  эту  тему,  но  это
минимальная  конфигурация.  Вы не обязаны иметь область своппинга
для Linux, но если у вас менее 16M RAM, то это очень настоятельно
рекомендуется.</p>
<p></p>
<p>Разумеется, вы должны представлять, сколько места потребуется
выделить  под  этот  раздел.  Размер  вашей  файловой  системы в
большой  степени  зависит от используемого дистрибутива и об'емов
инсталляции.    Надеемся,    что    сопутствующая    дистрибутиву
документация   даст  вам  приблизительные  оценки  потребности  в
памяти. Маленькие Linux-системы могут занимать 20M и даже меньше.
Большие системы - от 80M до 100M, и даже больше. Но не забывайте,
что  необходимо  место  также  под каталоги пользователей и под
будущие расширения.</p>
<p></p>
<p>Размер вашей области своппинга (если вам доведется выбирать)
зависит  от того, какая вам требуется виртуальная память. Хорошее
прикидочное  правило:  область своппинга равняется удвоенной RAM.
Например,  у вас 4M RAM (физической памяти), для нее хорошо иметь
раздел в 8M для области своппинга. Но это несколько абстрактные
рассуждения,  поскольку  область своппинга зависит в значительной
степени  от эксплуатируемых программ. Если у вас много физической
памяти  (скажем,  16M  и  даже  более),  может быть вам вообще не
захочется использовать область своппинга.</p>
<p></p>
<p><b>Важное  замечание.</b>  Из-за  ограничений BIOS часто невозможно
загрузиться из разделов, использующих номера цилиндров выше 1023.
Поэтому, выделяя место для Linux, имейте в виду, что вы можете не
захотеть  использовать  разделы с номерами цилиндров больше 1023
для  корневой  файловой  системы.  Но  Linux  <em>может</em> эти разделы
использовать  (но  не  для  <em>загрузки</em>).  Может  быть  этот совет и
преждевременный, но это важно для планирования диска.</p>
<p></p>
<p>Если вы вынуждены использовать разделы с номерами цилиндров
больше  1023  для  корневой  файловой  системы,  вы всегда можете
загружать  Linux  с дискеты. Это не так плохо, действительно, это
дольше  всего  на  несколько  секунд  по  сравнению с загрузкой с
жесткого диска. В любом случае это всегда запасной вариант.</p>
<p></p>

<h2>2.2.4 <A Name="ss2.2.4"> Разбиение вашего жесткого диска </h2>

<p>В  этом разделе   мы  опишем, как изменить размеры ваших уже
существующих  разделов,  чтобы  выделить место для Linux. Если вы
инсталлируете  Linux  на "чистый" диск, вы можете пропустить этот
раздел и продолжить чтение с Раздела 2.3.</p>
<p></p>
<p>Обычный  способ изменить размеры существующего раздела - это
удалить  его (уничтожив все данные, которые он содержал) и вновь
его  создать. Перед переразбиением диска <em>сделайте backup системы</em>.
А  затем  восстановите  информацию. В MS-DOS существует несколько
программ,   которые   могут   переразбить  диск  без  уничтожения
информации.  Одна  из  них известна как <code>FIPS</code>, ее можно найти на
FTP-серверах Linux.</p>
<p></p>
<p>Имейте  также  в  виду,  что,  поскольку вы будете уменьшать
существовавшие  разделы,  у  вас  может  потом не хватить места,
чтобы  все  восстановить.  В этом случае вы предварительно должны
стереть  все  маловажное, чтобы после уменьшения разделов хватило
места.</p>
<p></p>
<p>Программа,  используемая для разбиения на разделы известна,
как  <code>fdisk</code>.  Каждая операционная система имеет собственный аналог
этой  программы;  например,  под  MS-DOS  она вызывается командой
<code>FDISK</code>.  Вам  следует посмотреть документацию на вашу операционную
систему   относительно   перераспределения  разделов.  Здесь  мы
обсудим,  как переразбивать на разделы в MS-DOS с использованием
<code>FDISK</code>,  но  эта  информация  может  быть  легко распространена на
другие операционные системы.</p>
<p></p>
<p><em>Посмотрите</em> документацию на свою операционную систему, прежде
чем   переразбивать  свой  диск.  Этот раздел  затрагивает  лишь
основные черты переразбиения; существует много тонкостей, которые
здесь  не рассматриваются. Вы можете потерять все программы, если
неправильно переразобьете свой диск.</p>
<p></p>
<p><b>Предупреждение.</b>   Не  модифицируйте  и  не  создавайте  вновь
раздел  для  любой другой операционной системы (включая Linux),
используя  <code>FDISK</code>  под  MS-DOS.  Вы можете производить модификацию
только  для  конкретной операционной системы; например, вы должны
создавать  разделы  для Linux, используя версию <code>fdisk</code> для Linux.
Позже,  в Разделе  2.3.3  мы  опишем, как создавать разделы для
Linux. Но сейчас мы обсуждаем изменение размера существующих.</p>
<p></p>
<p>Предположим, что вы имеете один диск, полностью отданный под
MS-DOS. Таким образом, ваш диск состоит целиком из одного раздела,
обычно  известного  как ``<code>C:</code>''. Поскольку этот метод портит данные
этого  раздела, вам необходимо создать загрузочную таблицу MS-DOS
``system  disk'',  которая  хранит все необходимое для выполнения
<code>FDISK</code> и последующего backup.</p>
<p></p>
<p>Во  многих  случаях  вы  можете  использовать  для этой цели
инсталляционные  диски  под  MS-DOS.  Если вы хотите создать свой
системный диск, отформатируйте дискету командой</p>
<p>
<blockquote><code>
<pre>
    FORMAT /s A:
</pre>
</code></blockquote>
</p>
<p></p>
<p>Скопируйте  на  эту  дискету  все необходимые утилиты MS-DOS
(обычно  большинство  программ каталога \DOS на вашем диске), а
также   программы   <code>FORMAT.COM</code>  и  <code>FDISK.EXE</code>.  Теперь  вы  можете
загрузиться с этой дискеты и выполнить команду</p>
<p>
<blockquote><code>
<pre>
    FDISK C:
</pre>
</code></blockquote>
</p>
<p></p>
<p>Работа  <code>FDISK</code>  должна сопровождаться об'яснениями, но детали
следует  посмотреть  в документации на MS-DOS. Когда вы запустите
<code>FDISK</code>, используйте опцию menu для отображения таблицы разделов и
спишите  приведенную  там  информацию.  Важно  сохранить запись о
ваших  первоначальных установках setup в случае, если вы захотите
отказаться от инсталляции Linux.</p>
<p></p>
<p>Для  удаления  существующего  раздела  выберите в меню FDISK
опцию  ``<code>Delete  an  MS-DOS  Partition  or  Logical  DOS Drive</code>''.
Опишите  тип  раздела,  который  вы  желаете удалить (первичный,
расширенный   или   логический)  и  число  разделов.  Внимательно
отнеситесь ко всем предупреждениям. Ух!</p>
<p></p>
<p>Для  создания  нового (меньшего) раздела для MS-DOS, выберите
опцию  FDISK ``<code>Create an MS-DOS Partition or Logical DOS Drive</code>''.
Опишите  тип  раздела  (первичный, расширенный или логический) и
размер   создаваемого  раздела  (в  мегабайтах).  <code>FDISK</code>  создаст
раздел.</p>
<p></p>
<p>После  того,  как вы закончите работу с <code>FDISK</code>, следует выйти
из  программы  и переформатировать новый раздел. Например, если
вы  изменяете  размер  первого DOS раздела на диске (<code>C:</code>), следует
выполнить команду</p>
<p>
<blockquote><code>
<pre>
    FORMAT /s C:
</pre>
</code></blockquote>
</p>
<p></p>
<p>Теперь Вы можете ПЕРЕУСТАНОВИТЬ первоначальную систему
с backup.</p>
<p></p>
<p></p>


<h2>2.3 <A Name="ss2.3"> Инсталляция  Linux </h2>

<p>После  того,  как  вы переразбили диск, чтобы выделить место
под  Linux,  вы  можете  начать  инсталляцию.  Здесь дано краткое
описание процедур:</p>
<p>
<ul>
<li>Загрузите средства инсталляции Linux;
</li>
<li>Выполните fdisk под Linux для создания разделов;
</li>
<li>Выполните  mke2fs  и mkswap для создания файловой системы
Linux и области своппинга;
</li>
<li>Инсталлируйте программы Linux;
</li>
<li> Наконец,  инсталлируйте либо загрузчик boot-файла LILO на
диске,  или  создайте загрузочную дискету для загрузки новой
Linux-системы.</li>
</ul>
</p>
<p></p>
<p>Как    мы   уже   сказали,   некоторые   шаги   могут   быть
автоматизированы,  в  зависимости  от  используемого дистрибутива
Linux.   Пожалуйста,  посмотрите  более  подробные  инструкции  в
документации.</p>
<p></p>
<h2>2.3.1 <A Name="ss2.3.1"> Загрузка Linux </h2>

<p>Первый   шаг  -  загрузить  средства  инсталляции  Linux.  В
большинстве  случаев  это  <b>загрузочная дискета</b>, которая содержит
маленькую   Linux-систему.  При  загрузке  с  дискеты  вам  будет
пред'явлено  в каком-то виде меню, которое поможет вам в процессе
инсталляции. В других дистрибутивах при загрузке дискеты выдается
подсказка  login.  В  этом  случае  вы  обычно  входите как root и
начинаете процесс инсталляции.</p>
<p></p>
<p>В  документации,  сопровождающей дистрибутив говорится, что
необходимо делать для загрузки Linux.</p>
<p></p>
<p>Если  вы  инсталлируете  дистрибутив  Slackware, то все, что
требуется, это загрузить загрузочную дискету, которую вы создали,
следуя предыдущему разделу.</p>
<p></p>
<p>Большинство   дистрибутивов   Linux  используют  загрузочную
дискету,   которая  позволяет  ввести  параметры  компьютера  при
загрузке,  для определения особенностей устройств. Например, если
ваш  SCSI-контроллер  не  распознается  при  загрузке дискеты, вы
должны  перезагрузиться и описать параметры аппаратуры (например,
I/O-адрес и IRQ).</p>
<p></p>
<p>Похоже,  что  компьютеры  IBM PS/1, ThinkPad и ValuePoint не
сохраняют  геометрию  диска  в  CMOS  и вы должны ее описывать во
время загрузки.</p>
<p></p>
<p>Подсказка    boot   часто   выдается   автоматически,   когда
загружается  загрузочная  дискета.  Так, например, происходит при
загрузке   в   дистрибутиве   Slackware.   Некоторые  дистрибутивы
потребуют  от  вас удерживать во время загрузки с дискеты <F>shift</F>
или <F>ctrl</F>. В случае успеха вы должны увидеть подсказку:</p>
<p>
<blockquote><code>
<pre>
    boot:
</pre>
</code></blockquote>
</p>
<p></p>
<p>и, возможно, другие сообщения.</p>
<p></p>
<p>Можно  попробовать  загрузиться  без  каких-либо специальных
параметров, просто нажать <F>enter</F> в ответ на подсказку boot.</p>
<p></p>
<p>Следите  за  сообщениями  во время загрузки. Если у вас SCSI
контроллер,  вы  увидите список распознаваемых устройств (hosts).
Если вы увидите сообщение
<blockquote><code>
<pre>
    SCSI: 0 hosts
</pre>
</code></blockquote>
</p>
<p></p>
<p>это  значит,  что  ваш SCSI контроллер не был опознан, и вам
следует использовать другую процедуру.</p>
<p></p>
<p>Система  также  представит  информацию  о  разделах диска и
распознанных  устройствах. Если какая-либо информация неверна или
отсутствует, вы должны инициировать распознавание оборудования.</p>
<p></p>
<p>С другой стороны, если все идет хорошо и оборудование, вроде
бы,  распознается,  вы  можете  перейти  к  следующему разделу, к
Разделу 2.3.2.</p>
<p></p>
<p>Для  инициации  распознавания  оборудования вы должны ввести
соответсвующие   параметры  после подсказки  загрузчика,  используя
следующий синтаксис:</p>
<p>
<blockquote><code>
<pre>
    ramdisk &lt;parameters...&gt;
</pre>
</code></blockquote>
</p>
<p></p>
<p>Существует  ряд доступных параметров: вот некоторые наиболее
характерные.</p>
<p>
<dl>
<dt><b>hd=&lt;cylinders&gt;,&lt;heads&gt;,&lt;sectors&gt;</b><dd><p>Описывает   геометрию   для  таких  систем,  как  IBM  PS/1,
ValuePoint  и  ThinkPad.  Например,  если у вашего диска 683
цилиндров,  16  головок  и  32  сектора на трек, введите per
track, enter</p>
<p>ramdisk hd=683,16,32</p>
<p></p>
<dt><b>tmc8xx=&lt;memaddr&gt;,&lt;irq&gt;</b><dd><p>Описывает адрес и IRQ для без-BIOS-ных Future Domain TMC-8xx
SCSI контроллеров. Например,</p>
<p>
<blockquote><code>
<pre>
                 ramdisk tmc8xx=0xca000,5
</pre>
</code></blockquote>
</p>
<p></p>
<p>Обратите  внимание,  что  префикс "0x" должен использоваться
для  всех значений,  данных в шестнадцатиричной системе. Это
справедливо для всех последующих опций.</p>
<p></p>
<dt><b>st0x=&lt;memaddr>,&lt;irq&gt;</b><dd><p>Описывает   адрес   и  IRQ  для  без-BIOS-ных  Seagate  ST02
контроллеров.</p>
<p></p>
<dt><b>t128=&lt;memaddr&gt;,&lt;irq&gt;</b><dd><p>Описывает   адрес  и  IRQ  для  без-BIOS-ных  Trantor  T128B
контроллеров.</p>
<p></p>
<p>ncr5380=&lt;port&gt;,&lt;irq&gt;,&lt;dma&gt;  Описывает порт,   IRQ и  DMA
канал для generic NCR5380 контроллера.</p>
<p></p>
<dt><b>aha152x=&lt;port&gt;,&lt;irq&gt;,&lt;scsi_id&gt;,1</b><dd><p>Описывает  порт,  IRQ  и  SCSI  ID для без-BIOS-ных AIC-6260
контроллеров.     Включает     Adaptec    1510,    152x    и
Soundblaster-SCSI контроллеры.</p>
</dl>
</p>
<p></p>
<p>Для  каждого  из них вы должны ввести ramdisk с параметрами,
которые вы хотите установить.</p>
<p></p>
<p>Если у вас есть вопросы относительно опций периода загрузки,
посмотрите  Linux  <em>SCSI HOWTO</em>, который можно найти на любом Linux
FTP-сервере  (или там, где вы раздобыли эту книгу), а также Linux
<em>CD-ROM  HOWTO</em>.  Эти  документы  описывают  возможности аппаратуры
более детально.</p>
<p></p>

<h2>2.3.2 <A Name="ss2.3.2"> Дисководы и разделы под Linux </h2>

<p>Многие  дистрибутивы  предполагают  ручное создание разделов
Linux    с   использованием   программы <code>fdisk</code>. Другие   могут
автоматически  создавать разделы. В любом случае вы должны знать
о  существовании разделов и имен дисководов. Дисководы и разделы
под   Linux   имеют   другие   имена,   по  сравнению  с  другими
операционными системами. Под MS-DOS дисководы гибких дисков именуются <code>A:</code>
и <code>B:</code>, в то время, как разделы жесткого диска именуются
<code>C:</code>, <code>D:</code>, и
т.д. В Linux соглашение о именах совсем другое.</p>
<p></p>
<p><b>Драйверы устройств</b>,находящиеся в каталоге <code>/dev</code>,
используются  для  общения  с  устройствами  системы (такими, как
жесткий диск, мышь и т.п.)</p>
<p></p>
<p>Например, если у вас есть мышь, вы имеете к ней доступ через
драйвер <code>/dev/mouse</code>.   Дисководы гибких дисков,  жестких  дисков  и
отдельные  разделы имеют индивидуальные драйверы. Пока можете не
беспокоиться  относительно  интерфейса; пока важно только понять,
как именуются различные устройства при их использовании.</p>
<p></p>
<p>Таблица 2.1 содержит имена различных драйверов.</p>
<p></p>
<p>Несколько   замечаний   по  поводу  этой  таблицы.  Обратите
внимание,  что <code>/dev/fd0</code> соответствует  первому дисководу
(<code>A:</code> для MS-DOS) и <code>/dev/fd1</code> соответствует
второму дисководу (<code>B:</code>).</p>
<p></p>
<p>SCSI-драйверы  жестких  дисков  названы  иначе,  чем  другие
драйверы.  Драйверы  IDE,  MFM  и  RLL  доступны через устройства
<code>/dev/hda</code>,  <code>/dev/hdb</code>  и  т.д. Индивидуальные разделы на дисководе
<code>/dev/hda</code>  будут  <code>/dev/hda1</code>,
<code>/dev/hda2</code>  и  т.д.  А  SCSI-драйверы
именуются <code>/dev/sda</code>, <code>/dev/sdb</code>,
и т.д., с разделами, именуемыми
<code>/dev/sda1</code> и <code>/dev/sda2</code>.</p>
<p></p>
<p>Вот  например.  Предположим,  что  у вас один IDE-дисковод с
тремя  первичными  разделами.  Два первых выделены под MS-DOS, а
третий раздел - расширенный, содержащий два логических раздела
под Linux. Устройства, соответствующие этим разделам, будут:
<blockquote><code>
<pre>
     Первый раздел MS-DOS (C:)     /dev/hda1
     Второй раздел MS-DOS (D:)     /dev/hda2
     Расширенный раздел            /dev/hda3
     Первый логический раздел Linux  /dev/hda5
     Второй логический раздел Linux  /dev/hda6
</pre>
</code></blockquote>
</p>
<p></p>
<p>Обратите  внимание,  что пропущен <code>/dev/hda4</code>, он соответствует
четвертому   первичному  разделу,  которого  нет  в  этом  примере.
Логические разделы именуются, начиная с <code>/dev/hda5</code>.</p>
<p>
<blockquote><code>
<pre>
     Устройство                                       Имя

     Первый дисковод (A:)                            /dev/fd0
     Второй дисковод (B:)                            /dev/fd1
     Первый жесткий диск (весь)                      /dev/hda
     Первый жесткий диск, первичный раздел 1       /dev/hda1
     Первый жесткий диск, первичный раздел 2       /dev/hda2
     Первый жесткий диск, первичный раздел 3       /dev/hda3
     Первый жесткий диск, первичный раздел 4       /dev/hda4
     Первый жесткий диск, логический раздел 1      /dev/hda5
     Первый жесткий диск, логический раздел 2      /dev/hda6
     ..

     Второй жесткий диск (весь)                      /dev/hdb
     Второй жесткий диск, первичный раздел 1       /dev/hdb1
     ..
     Первый SCSI драйвер диска (весь)                /dev/sda
     Первый SCSI драйвер диска, первичный раздел 1 /dev/sda1
     ..
     Второй SCSI драйвер диска (весь)                /dev/sdb
     Второй SCSI драйвер диска, первичный раздел 1 /dev/sdb1
     ..

             Табл. 2.1:  Имена разделов Linux
</pre>
</code></blockquote>
</p>
<p></p>
<p></p>

<h2>2.3.3 <A Name="ss2.3.3"> Создание разделов Linux </h2>

<p>Теперь  вы  готовы  создать разделы Linux с помощью команды
<code>fdisk</code>.  Как  описывалось  в  Разделе  2.2.3,  в  общем случае вам
необходимо  создать  как минимум один раздел для самого Linux и
другой для области своппинга.</p>
<p></p>
<p>После  загрузки средств инсталляции выполните команду <code>fdisk</code>,
напечатав</p>
<p>
<blockquote><code>
<pre>
    fdisk &lt;drive&gt;
</pre>
</code></blockquote>
</p>
<p></p>
<p>где  &lt;drive&gt;  имя  устройства  в  Linux, которому вы хотите
выделить  раздел  (см.  Табл.  2.1).  Например,  если вы хотите
выполнить fdisk для первого SCSI-диска, используйте команду
<code>fdisk /dev/sda</code>.</p>
<p></p>
<p><code>/dev/hda</code>  (первый IDE-диск) берется по умолчанию, если вы не
описали другого.</p>
<p></p>
<p>Если  вы  создаете  разделы  для  Linux более,  чем на одном
диске, выполните fdisk отдельно для каждого диска.</p>
<p>
<blockquote><code>
<pre>
    # fdisk /dev/hda

    Command (m for help):
</pre>
</code></blockquote>
</p>
<p></p>
<p>В  этот  момент  fdisk  ждет  команды; вы можете ввести "m",
чтобы получить перечень опций.</p>
<p>
<blockquote><code>
<pre>
    Command (m for help):  m
    Command action
    a toggle a bootable flag
    d delete a partition
    l list known partition types
    m print this menu
    n add a new partition
    p print the partition table
    q quit without saving changes
    t change a partition's system id
    u change display/entry units
    v verify the partition table
    w write table to disk and exit
    x extra functionality (experts only)

    Command (m for help):
</pre>
</code></blockquote>
</p>
<p></p>
<p>Для  создания  нового  раздела  используется  команда <code>n</code>. О
большинстве  других  опций  вы  можете  не  вспоминать.  Выйти из
программы  <code>fdisk</code>,  без  сохранения произведенных изменений, можно
командой  <code>q</code>.  Выйти  из  программы <code>fdisk</code> с записью изменений в
таблице разделов можно командой <code>w</code>.</p>
<p></p>
<p>Первое,  что  вы  должны  сделать,  это  получить и записать
текущее состояние таблицы разделов. Используйте команду <code>p</code>.</p>
<p>
<blockquote><code>
<pre>
    Command (m for help):  p
    Disk /dev/hda:  16 heads, 38 sectors, 683 cylinders
    Units = cylinders of 608 * 512 bytes

       Device Boot Begin Start End Blocks Id  System
    /dev/hda1   *   1      1   203  61693  6  DOS  16-bit &gt;=32M

    Command (m for help):
</pre>
</code></blockquote>
</p>
<p></p>
<p>Это  пример,  когда у нас один MS-DOS-раздел на <code>/dev/hda1</code>,
который   имеет  61693  блоков  (около  60M  -  блок  в  Linux  -
1024bytes).   Этот   раздел   начинается   на  цилиндре  N  1  и
заканчивается  на  цилиндре  N  203.  Всего  у  нас  на диске 683
цилиндров.  Так  что остается 480 цилиндров для создания раздела
Linux.</p>
<p></p>
<p>Для  создания нового раздела используйте команду "n". В этом
примере  мы  создадим два новых первичных раздела (<code>/dev/hda2</code> and
<code>/dev/hda3</code>) для Linux.</p>
<p>
<blockquote><code>
<pre>
    Command (m for help):  n
    Command action
    e extended
    p primary partition (1-4)
    p
</pre>
</code></blockquote>
</p>
<p></p>
<p>Здесь  <code>fdisk</code>  спрашивает  тип создаваемого раздела: extended
(расширенный) или primary (первичный). В нашем примере мы создаем
только первичный раздел, так что выбираем <code>p</code>.</p>
<p>
<blockquote><code>
<pre>
    Partition number (1-4):
</pre>
</code></blockquote>
</p>
<p></p>
<p>Затем  <code>fdisk</code>  спросит  число создаваемых разделов; поскольку
раздел  1 уже использован, наш первый раздел Linux получит
номер 2.</p>
<p>
<blockquote><code>
<pre>
    Partition number (1-4):  2
    First cylinder (204-683):
</pre>
</code></blockquote>
</p>
<p></p>
<p>Теперь  введите  номер  первого цилиндра раздела. Поскольку
цилиндры  с  204  по  683  не  используются, мы используем первый
свободный  (номер  204).  Нет смысла оставлять пустые места между
разделами.</p>
<p>
<blockquote><code>
<pre>
    First cylinder (204-683):  204
    Last cylinder or +size or +sizeM or +sizeK (204-683):
</pre>
</code></blockquote>
</p>
<p></p>
<p>Программа  <code>fdisk</code> запрашивает размер создаваемого раздела. Мы
можем  указать  последний  номер свободных цилиндров или размер в
байтах, килобайтах или мегабайтах. Поскольку мы хотим, чтобы наш
раздел  был  размером  в  80M,  мы  укажем  +80M. При указании
размера  раздела  таким  способом  <code>fdisk</code> округлит действительный
размер раздела до ближайшего числа цилиндров.</p>
<p>
<blockquote><code>
<pre>
    Last cylinder or +size or +sizeM or +sizeK (204-683):  +80M

    Warning:  Linux  cannot currently  use 33090  sectors of this
    partition
</pre>
</code></blockquote>
</p>
<p></p>
<p>Если  вы  увидите  предупреждение,  вроде  этого,  его можно
проигнорировать.  Программа <code>fdisk</code> выдает сообщение, поскольку это
старая  программа,  написанная еще до того, когда в Linux были
разрешены  разделы  более,  чем  64M.  Теперь  мы готовы создать
второй  раздел  для  Linux. С целью демонстрации мы создадим его
размером в 10M.</p>
<p>
<blockquote><code>
<pre>
    Command (m for help):  n
    Command action
    e extended
    p primary partition (1-4)
    p
    Partition number (1-4):  3
    First cylinder (474-683):  474
    Last cylinder or +size or +sizeM or +sizeK (474-683):  +10M
</pre>
</code></blockquote>
</p>
<p></p>
<p>Наконец,  мы  выдадим  таблицу  разделов.  Вновь запишите всю
информацию,  особенно  размеры в блоках  ваших новых разделов. Вам
потребуется  знать  размер  разделов  позже при создании файловой
системы. Попутно проверьте, что разделы не накладываются друг на
друга.</p>
<p>
<blockquote><code>
<pre>
    Command (m for help):  p

    Disk /dev/hda:  16 heads, 38 sectors, 683 cylinders
    Units = cylinders of 608 * 512 bytes


     Device Boot Begin Start  End  Blocks  Id  System
  /dev/hda1   *   1      1    203  61693    6  DOS  16-bit &gt;=32M
  /dev/hda2      204   204    473  82080   81  Linux/MINIX
  /dev/hda3      474   474    507  10336   81  Linux/MINIX
</pre>
</code></blockquote>
</p>
<p></p>
<p>Как  вы  видите, теперь есть <code>/dev/hda2</code> - раздел размером в
82080  блоков (что соответствует приблизительно 80M), и <code>/dev/hda3</code>
- 10336 блоков (около 10M).
<F>прим.  переводчика: видимо, у автора здесь слова "сектор" и
"блок" - синонимы</F></p>
<p></p>
<p>Имейте  в  виду,  что  много  дистрибутивов  (вроде  того же
Slackware)  требуют  использования  команды <code>t</code> в программе <code>fdisk</code>
для  изменения  области  своппинга ``Linux swap'', которая обычно
имеет номер 82. Вы можете воспользоваться командой <code>L</code> для печати
кодов  типов  известных разделов, а затем использовать <code>t</code>, чтобы
установить тип области своппинга, соответствующий ``Linux swap''.</p>
<p></p>
<p>При  этом  программы  инсталляции смогут автоматически найти
ваши разделы своппинга, основываясь на типе. Если ваши программы
инсталляции  не  распознают  области  своппинга,  вы можете снова
запустить  программу  <code>fdisk</code>  и  использвать  команду "t" в режиме
вопросов.</p>
<p></p>
<p>В  вышеприведенном примере оставшиеся цилиндры диска (номера
с  508  по 683) не использованы. Вы можете позже  создать
дополнительные разделы.</p>
<p></p>
<p>Наконец, мы используем команду <code>w</code>, чтобы записать изменения
и выйти из <code>fdisk</code></p>
<p>
<blockquote><code>
<pre>
    Command (m for help):  w

    #
</pre>
</code></blockquote>
</p>
<p></p>
<p>Имейте  в  виду,  что ни одно из сделанных изменений не даст
эффекта  то  тех  пор,  пока вы не дадите команду <code>w</code>. Так что вы
можете  играть  с различными конфигурациями и сохранить их, когда
закончите.  Кроме  того,  если вы захотите выйти из <code>fdisk</code> в любое
время без сохранения изменений, используйте команду <code>q</code>. Помните,
что  программой  <code>fdisk</code>  для Linux вы можете выделять разделы для
Linux и <b>только</b> для Linux.</p>
<p></p>
<p>Не  забывайте  также,  что  вы  не сможете загружать Linux с
разделов,   использующих   номера  цилиндров,  превышающие  1023.
Поэтому,  вы должны попытаться создать корневой раздел Linux на
цилиндрах  до  1023-го.  Но  если это невозможно - загружайтесь с
дискеты.</p>
<p></p>
<p>Некоторые  дистрибутивы  Linux  требуют перезагрузки системы
после  окончания работы <code>fdisk</code>. Это позволяет изменениям в таблице
разделов  оказать  свое влияние на последующую инсталляцию. Новые
версии  <code>fdisk</code>  автоматически изменяют сответствующую информацию в
ядре,  так что перезагрузка не требуется. Чтобы обезопасить себя,
после  выполнения  <code>fdisk</code>  вам  следует  снова  загрузить средства
инсталляции как и раньше - перед продолжением инсталляции.</p>
<p></p>

<h2>2.3.4 <A Name="ss2.3.4"> Создание области своппинга </h2>

<p>Если  вы  планируете  использовать  раздел  своппинга  для
виртуальной  памяти,  вы  должны  быть готовы к его использованию.
<sl>(Некоторые    дистрибутивы   подготавливают   область   своппинга
автоматически или через соответствующую опцию меню инсталляции).</sl>

В  Главе 4 мы обсудим подготовку файла своппинга в случае, если
вы не захотите использовать отдельный раздел.</p>
<p></p>
<p>Многие дистрибутивы потребуют от вас создать и активизировать
область  своппинга  до инсталляции программ. Если у вас небольшой
об'ем  физической  RAM,  процесс инсталляции может не завершиться
успешно, пока вы не выделите какой-то об'ем под область своппинга.</p>
<p></p>
<p>Дистрибутив  Slackware требует создания области своппинга до
инсталляции,  если  вы  имеете  4M RAM или меньше. Если у вас нет
таких  ограничений,  инсталляционная  процедура Slackware выделит
область  своппинга  автоматически. Если у вас возникают сомнения,
то  следуйте  процедуре,  описанной  здесь;  она  не  сможет  вам
навредить.</p>
<p></p>
<p>Команда  создания раздела для своппинга называется <code>mkswap</code>
и имеет вид</p>
<p>
<blockquote><code>
<pre>
    mkswap -c &lt;partition&gt; &lt;size&gt;
</pre>
</code></blockquote>
</p>
<p></p>
<p>где  &lt;partition&gt; - имя раздела своппинга, а &lt;size&gt; - размер
этого  раздела  в  блоках.  size  of  the  partition,  in blocks.
<sl>Еще раз напомним, что в некоторых дистрибутивах область своппинга
создается автоматически и блок в Linux занимает 1024 байта.</sl>

</p>
<p>Например, если ваш раздел своппинга <code>/dev/hda3</code> и имеет размер в
10336 блоков, используйте команду</p>
<p>
<blockquote><code>
<pre>
    # mkswap -c /dev/hda3 10336
</pre>
</code></blockquote>
</p>
<p></p>
<p>Опция <code>-c</code> команды <code>mkswap</code> обеспечивает проверку плохих блоков в
разделе при создании области своппинга.</p>
<p></p>
<p>Если  вы  используете  несколько разделов для своппинга, вам
необходимо  выполнить  соответствующие команды <code>mkswap</code> для каждого
раздела.</p>
<p></p>
<p>После форматирования области своппинга необходимо сделать ее
пригодной    для    использования    системой.   Обычно   система
автоматически  готовит  место во время загрузки. Но, поскольку вы
еще не инсталлировали Linux, вы должны подготовить его вручную.</p>
<p></p>
<p>Команда подготовки области своппинга - <code>swapon</code> имеет вид</p>
<p>
<blockquote><code>
<pre>
    swapon &lt;partition&gt;
</pre>
</code></blockquote>
</p>
<p></p>
<p></p>
<p>Для  вышеприведенного  примера,  чтобы  подготовить  область
своппинга на <code>/dev/hda3</code>, необходимо выполнить команду</p>
<p>
<blockquote><code>
<pre>
    # swapon /dev/hda3
</pre>
</code></blockquote>
</p>
<p></p>
<p></p>

<h2>2.3.5 <A Name="ss2.3.5"> Создание файловых систем </h2>

<p>Перед  тем,  как  вы сможете использовать разделы Linux для
хранения  файлов,  вы  должны  создать  на  них <b>файловые системы</b>.
Создание  файловой системы аналогично форматированию раздела под
MS-DOS. Мы кратко обсуждали файловые системы в Разделе  2.2.3.</p>
<p></p>
<p>В Linux возможно несколько типов файловых систем. Каждый тип
файловой  системы  имеет  свой формат и характеристики (такие как
имя  файла, длина, максимальный размер файла и т.д.). Linux также
поддерживает  "третьи"  типы  файловых  систем, например файловую
систему MS-DOS.</p>
<p></p>
<p>Наиболее  популярный тип  файловой  системы - это
<b>Second Extended  Filesystem</b>  или  <em>ext2fs</em>.
<em>ext2fs</em>  -  одна  из наиболее
эффективных и гибких файловых систем. Она допускает использование
имен  файлов  до  256  символов  и  размер  файловой системы до 4
терабайтов (прим. переводчика: знать-то очень много). В Главе 4 мы
обсудим  различные  типы  файловых  систем,  возможных в Linux. А
первоначально   мы  предполагаем,  что  вы  используете  файловую
систему <em>ext2fs</em>.</p>
<p></p>
<p>При  инсталляции  дистрибутива  Slackware  файловые  системы
создаются  автоматически инсталляционной процедурой,
описываемой в следующем разделе. Если вы хотите
создать  файловую  систему вручную, следуйте процедуре, описанной
здесь.</p>
<p></p>
<p>Для создания файловой системы используйте команду</p>
<p>
<blockquote><code>
<pre>
    mke2fs -c &lt;partition&gt; &lt;size&gt;
</pre>
</code></blockquote>
</p>
<p></p>
<p>где  &lt;partition&gt;  -  имя  раздела,  а  &lt;size&gt; - его размер в
блоках.  Например,  для создания файловой системы из 82080 блоков
на <code>/dev/hda2</code>, используйте команду</p>
<p>
<blockquote><code>
<pre>
    # mke2fs -c /dev/hda2 82080
</pre>
</code></blockquote>
</p>
<p></p>
<p>Если  вы  используете  различные файловые системы для Linux,
вам  надо  использовать  соответствующую команду mke2fs для каждой
файловой системы.</p>
<p></p>
<p>Если вы столкнулись с проблемами, смотрите Раздел 2.5.</p>
<p></p>

<h2>2.3.6 <A Name="ss2.3.6"> Инсталляция программ </h2>

<p>Наконец   вы   готовы   инсталлировать   программы.   Каждая
дистрибуция  имеет  для  этого свой механизм. Многие дистрибутивы
имеют    самодокументированные    программы,    которые   помогают
пользователю пройти весь путь инсталляции. В других дистрибутивах
вы   должны <b>примонтировать</b> файловую   систему  к  конкретному
каталогу (например, <code>/mnt</code>) и вручную скопировать туда программы.
В   дистрибутивах   на   CD-ROM   вам   может   быть  дана  опция
инсталлирования  части программ на жестком диске, оставив большую
часть на CD-ROM.</p>
<p></p>
<p>Некоторые  дистрибутивы предлагают несколько различных путей
инсталляции.  Например,  вам может быть предоставлена возможность
инсталлировать  прямо  из  раздела MS-DOS вашего жесткого диска
вместо  дискет. Или вы будете иметь возможность инсталлировать по
TCP/IP  через  FTP или NFS. Детали смотрите в документации на ваш
дистрибутив.</p>
<p></p>
<p>Например,   дистрибутив  Slackware  требует  от  вас  только
создания  разделов  с  помощью  <code>fdisk</code>, возможно, создания области
своппинга с помощью <code>mkswap</code> и <code>swapon</code> (если у вас RAM 4M и меньше),
а  затем  запуска  программы  <code>setup</code>.  <code>setup</code> представит вам меню с
об'яснениями. Использование setup в деталях описано ниже.</p>
<p></p>
<p>Конкретный метод инсталляции может существенно отличаться
в  различных  дистрибутивах.  Мы  надеемся, что инсталляция Linux
будет происходить с достаточными комментариями системы (что имеет
место в большинстве дистрибутивов).</p>
<p></p>
<h2>2.3.6.1 <A Name="ss2.3.6.1"> Инсталляция Slackware с <code>setup</code> </h2>

<p>Если  вы  инсталлируете  Slackware,  после создания разделов
(возможно, и области своппинга) используйте команду</p>
<p>
<blockquote><code>
<pre>
    # setup
</pre>
</code></blockquote>
</p>
<p></p>
<p>Она   предоставит   вам   меню,  с  помощью  которого  будет
направлять вас в процессе инсталляции.</p>
<p></p>
<p>Процедура,  описанная  здесь,  соответствует находящейся на
корневых  дисках <code>color144</code> и <code>colrlite</code>; другие корневые диски могут
иметь несколько отличающиеся процедуры.</p>
<p></p>
<p>Меню <code>setup</code> состоит из следующих пунктов. Используйте стрелки
для перемещения по пунктам и нажимайте <F>enter</F> или <F>spacebar</F> при
выборе пункта.</p>
<p>
<dl>
<dt><b>Help</b><dd><p>Выводит help-файл программы <code>setup</code>.</p>
<p></p>
<dt><b>Keymap</b><dd><p>Эта опция позволяет описывать отображение клавиатуры
в  вашей  системе,  если у вас не US-клавиатура. Список
keymaps  (образов  клавиатур)  будет  представлен;  выберите
соответствующий пункт из списка.</p>
<p></p>
<dt><b>Quick</b><dd><p>Позволяет выбирать между режимами ``quick'' (быстро) и
``verbose''(с подробными комментариями). ``Verbose'' - режим,
устанавливаемый  по умолчанию, рекомендуется, если только вы
не занимались уже этим десятки раз.</p>
<p></p>
<dt><b>Make tags</b><dd><p>Позволяет  экспертам  по  инсталляции  Slackware
создавать настроенные tag-файлы. Это необходимо только
для  настройки  инсталляционной  процедуры; но это все не
ваша забота.</p>
<p></p>
<dt><b>Addswap</b><dd><p>Это будет первый пункт, который выберет большинство
пользователей  при  инсталляции  Slackware. Будет пред'явлен
список  доступных разделов для своппинга (эти разделы будут
типа ``Linux swap'' как наборы в <code>fdisk</code>). Вы сможете описать,
какие разделы вы хотите использовать для области своппинга.
Затем  вам будет задан вопрос, хотите ли использовать mkswap
для этих разделов.</p>
<p></p>
<p>Если вы уже выполнили <code>mkswap</code> и <code>swapon</code> (как описано в Разделе
2.3.4)  над  своими  разделами своппинга, то нельзя в <code>setup</code>
выполнять над этими разделами mkswap.</p>
<p></p>
<p>Даже  если  вы  уже  выполнили  <code>mkswap</code> и <code>swapon</code>, необходимо
использовать   пункт   Addswap  меню:  это  гарантирует,  что
разделы своппинга будут доступны по завершении инсталляции.</p>
<p></p>
<p>     ! <b>Предупреждение!</b>  Создание  области  своппинга в разделе
разрушает данные, находившиеся на этом месте. Убедитесь, что
вы не уничтожаете данные, которые следует сохранить. Если вы
выбрали  этот пункт меню, вам автоматически будут выдаваться
подсказки. В общем случае это целесообразно.</p>
<p></p>
<dt><b>Target</b><dd><p>Этот  пункт позволяет описывать разделы, на которые
будет  инсталлироваться  Linux. Список доступных разделов (с
типом  ``Linux  native''  ("исходный  Linux"  -  описывается
командой  <code>fdisk</code>)  будет  отображен и вас попросят ввести имя
корневого   раздела  Linux,  например  <code>/dev/hda2</code>.  Далее  вы
получите  подсказку  относительно  типа создаваемой файловой
системы.  Мы  предлагаем  использовать файловую систему типа
<code>ext2fs</code>,  как  описано  в Разделе 2.3.5. Это создаст файловую
систему    в    названном   разделе,   нечто   аналогичное
форматированию   раздела   под  MS-DOS.  Вы  также  получите
подсказки  относительно  любых  других  разделов, которые вы
можете  захотеть  использовать  в  Linux.  Например, если вы
создали  раздел  для  /usr  (смотрите Раздел 2.2.3), вы сможете
описать имя и куда примонтировать раздел (скажем, на /usr
или <code>/usr/bin</code>).</p>
<p></p>
<p>!  <b>Предупреждение!</b>  Создание  файловой  системы  в разделе
разрушает данные, находившиеся на этом месте. Убедитесь, что
вы  не  уничтожаете  данные, которые следует сохранить. Даже
если  вы уже создали файловую систему, используя <code>mke2fs</code> (смотрите
Раздел  2.3.5),  вы  должны использовать пункт меню <code>Target</code>
(цель)  для описания разделов, в которые будет инсталлирован
Linux.</p>
<p></p>
<dt><b>Source</b><dd><p>Этот  пункт  меню  позволяет  описать,  с чего будет
инсталлироваться  Slackware:  с  дискеты, жесткого диска или
CD-ROM.  Если  вы  инсталлируете с жесткого диска, вам будет
задан  вопрос,  какой раздел выделяется файлам Slackware и
какого  он  типа.  Например,  Если у вас Slackware-файлы в
разделе  MS-DOS, введите имя раздела (скажем, <code>/dev/hda1</code>) и
выберите  MS-DOS  FAT в качестве типа. Далее вам будет задан
вопрос,  в  каком каталоге данного раздела можно найти эти
файлы.   Например,  у  вас  Slackware-файлы,  размещенные  в
каталоге <code>C:\SLACK</code> в вашем разделе MS-DOS, введите</p>
<p>
<blockquote><code>
<pre>
             /slack
</pre>
</code></blockquote>
</p>
<p></p>
<p>как  местоположение.  Обратите  внимание,  что здесь обычный
слэш  "/".  Если  вы инсталлируете с CD-ROM, вас спросят тип
используемого  устройства  CD-ROM,  а  также,  где на CD-ROM
находятся  файлы.  Многие CD-ROM содержат файлы в каталоге
<code>/slakware</code>,  но  это зависит от версии. Если вы инсталлируете
Slackware  Professional  (Slackware  Professional  -  версия
Slackware,   поставляемая   Morse   Telecommunications),  то
используются  два каталога CD-ROM. <code>slakware</code> используется
для стандартной системы, которая инсталлирует файлы прямо на
ваш жесткий диск. <code>slackpro</code> используется на базирующейся на
CD-ROM  системе,  где  многие файлы доступны прямо с CD-ROM.
Это позволяет сэкономить дисковое пространство, но доступ ко
многим файлам заметно медленнее. Некоторые другие поставщики
Slackware  предоставляют  возможности работы прямо с CD-ROM.
Но,  если  у  вас  есть  свободное  место  на  диске,  мы не
рекомендуем  работать  со  Slackware  прямо  с  CD-ROM.  Это
медленно.</p>
<p></p>
<p>При  инсталляции  может  быть  сообщение Slackware об ошибке
монтирования.   Это  часто  говорит  о  проблеме  доступа  к
жесткому  диску  или CD-ROM. Если вы увидите такие сообщения
об  ошибках,  посмотрите дополнительную информацию в Разделе
2.5.3.</p>
<p></p>
<dt><b>Disk sets</b><dd><p>Эта опция меню позволяет выбрать дисковые наборы,
которые  вы  будете  инсталлировать.  Как минимум, вы должны
инсталлировать  дисковый  набор  <code>A</code>.  Для  выбора  дисковых
наборов   просто  используйте  стрелки  и  клавишу  пробела.
Обратим  внимание, что выбор конкретного дискового набора не
означает,  что  все пакеты диска будут инсталлированы; перед
инсталляцией   пакетов   вам   будут  выдаваться  комментарии
``optional'' или ``recommended.''</p>
<p></p>
<dt><b>Install</b><dd><p>Наконец, этот  пункт  меню  непосредственно
инсталлирует  программы  в  вашу  систему.  Можно  при  этом
следовать  подсказкам.  Большинство  пользователей  выбирает
режим  ``normal.''  Для  каждого выбранного дискового набора
выбираются    "нужные"    пакеты    для   инсталляции,   что
сопровождается подсказками. Если вы инсталлируете с дискеты,
то будут выдаваться также сообщения о необходимости вставить
следующую дискету.</p>
<p></p>
<p>После инсталляции каждого пакета выдается краткое сообщение.
Но  если у вас нет предварительного опыта работы с Linux или
UNIX,    многие    из   этих   сообщений   будут   для   вас
маловразумительными.   Важно,   что   соответствующий   пакет
инсталлирован, так что можете не ломать голову над всем,
что при этом система решила вам сообщить.</p>
<p></p>
<p>Наиболее  типичная ошибка, с которой здесь можно столкнуться -
на  дискете  не  обнаруживается  нужный файл или ошибка
возникает  при  чтении  с дискеты. Последнее сообщение может
свидетельствовать  о том, что файлы на дискете попорчены или
неполны.  Любые  дискеты,  порождающие эти сообщения, должны
быть  заменены, и вам следует заново инсталлировать дисковые
наборы, содержащиеся на этих дискетах. Смотрите также Раздел
2.5.3.</p>
<p></p>
<p>Вы  можете  также  столкнуться с сообщениями об ошибках, при
попытке  обращения  к  CD-ROM; убедитесь, что CD-ROM чистый,
нет следов от пальцев и т.п.</p>
<p></p>
<dt><b>Configure</b><dd><p>Этот  пункт  меню  выполняет пост-инсталляционное
конфигурирование   системы.   Это  описывается  в  следующем
разделе.</p>
</dl>
</p>
<p></p>


<h2>2.3.7 <A Name="ss2.3.7"> Создание загрузочной дискеты или инсталляция LILO </h2>

<p>Каждый   дистрибутив   представляет  какие-то  средства  для
загрузки  вашего нового Linux после инсталляции. Во многих случаях
инсталляционная процедура создаст загрузочную дискету, содержащую
ядро  Linux,  конфигурированное для использования вновь созданной
файловой  системы.  Для  того,  чтобы  загрузить Linux, вы должны
загрузиться  с  этой  дискеты,  и  управление  после  этого  будет
передано  жесткому  диску. В других дистрибутивах эта загрузочная
дискета одновременно является и инсталляционной дискетой.</p>
<p></p>
<p>Многие  дистрибутивы дают возможность инсталлировать <b>LILO</b> на
ваш  жесткий диск. LILO - это программа, которая размещается в
главной  загрузочной записи (master boot record) диска. Она может
загружать  ряд  операционных  систем,  включая  MS-DOS и Linux, и
позволяет в момент загрузки выбирать, что именно загружать.</p>
<p></p>
<p>В  дистрибутиве  Slackware  пункт  меню  <code>Configure</code> в <code>setup</code>
позволяет  создавать  загрузочную  дискету,  как и инсталлировать
LILO.  Эти  опции должны комментировать свои действия. Пункт меню
<code>Configure</code> позволяет   также  описывать  ваши  модем,  мышь  и
информацию о временной зоне.</p>
<p></p>
<p>Чтобы LILO успешно инсталлировалась, необходимо многое знать
о   конфигурации   системы,   например,   какой   раздел  какую
операционную  систему  содержит, как загружать каждую из систем и
т.д.  Многие дистрибутивы при инсталляции LILO пытаются "угадать"
соответствующие   параметры   конфигурации  вашей  системы.  Но  в
некоторых  дистрибутивах  автоматическая  инсталляция  LILO может
потерпеть  неудачу  и  оставить вашу главную загрузочную запись в
"подвешенном"  состоянии  (хотя  маловероятно, что при этом будет
причинен  ущерб  данным  на  диске). Особенно, если вы применяете
Boot Manager операционной системы OS/2, вы <em>не должны</em> пользоваться
автоматической    процедурой    инсталляции    LILO.   Существуют
специальные  инструкции  по  использованию  LILO совместно с Boot
Manager, которые будут рассмотрены позже.</p>
<p></p>
<p>Во  многих  случаях лучше использовать загрузочную дискету,
пока  у вас не появится возможность самому конфигурировать LILO
вручную.  Если  вы  обладаете  повышенной доверчивостью, вы можете
пользоваться  автоматической  инсталляцией  LILO, если она есть в
вашем дистрибутиве.</p>
<p></p>
<p>В  Главе  4  мы  обсудим  в  деталях,  как конфигурировать и
инсталлировать LILO конкретно для вашего setup.</p>
<p></p>
<p>Если  все идет хорошо, примите наши поздравления! Вы аккуратно
инсталлировали  Linux  на вашей системе. Выпейте диетической Коки
или чего-нибудь другого - вы заслужили.</p>
<p></p>
<p>В  случае,  если  вы  напоролись  на неприятности, следующий
раздел опишет наиболее характерные глюки при инсталляции Linux, и
как с ними бороться.</p>
<p></p>

<h2>2.3.8 <A Name="ss2.3.8"> Дополнительные процедуры инсталляции </h2>

<p>Некоторые  дистрибутивы  Linux снабжены рядом дополнительных
инсталляционных  процедур,  позволяющих конфигурировать различные
пакеты,  такие как TCP/IP, X Window System и т.д. Если у вас есть
эти  конфигурационные  опции  периода инсталляции, вам может быть
будет   интересно   предварительно  прочитать  в  этой  книге  об
особенностях   конфигурации  этих  программ.  Иначе  вам  следует
отложить  эти процедуры до тех пор, когда вы не придете к полному
пониманию, как конфигурировать программы.</p>
<p></p>
<p>Как хотите, если все идет наперекосяк - плывите по течению и
смотрите,  что  из всего этого получится. Весьма сомнительно, что
все,  что  вы  натворите  сейчас,  нельзя  будет  переделать потом
(впрочем, постучите по дереву).</p>
<p></p>


<h2>2.4 <A Name="ss2.4"> Постинсталляционные процедуры </h2>

<p>После  того,  как  вы  закончите инсталляцию Linux, мало что
остается  сделать  перед  тем, как начать использовать систему. В
большинстве  случаев  вы  можете перезагрузить систему, войти под
root  и начать эксплуатировать систему. (Все дистрибутивы имеют
слегка различающиеся приемы, реализующие то же самое).</p>
<p></p>
<p>Сейчас    самое    подходящее    время    рассказать,    как
перезагружаться и выключать систему в процессе эксплуатации. Ни в
коем  случае  не  перезагружайте  и  не  выключайте систему путем
нажатия  "reset"  или доброго старого способа "заткнуть вулкан" -
нажать  сразу  <F>ctrl-alt-del</F>.
<sl>Правда на большинстве Linux систем комбинация
<F>ctrl-alt-del</F> приведет к нормальному выключению через
команду shutdown.</sl>

Не  следует  также "бесхитростно"
вырубать питание.  Как и в большинстве систем UNIX, Linux
хранит записываемую информацию в кэше оперативной памяти.
Поэтому,  если вы внезапно перезагрузитесь без "чистого"
закрытия  системы,  вы  можете  попортить  данные  на  диске, что
может привести к невосполнимым потерям.</p>
<p></p>
<p>Самый   простой  способ  выключить  систему  -  использовать
команду  <code>shutdown</code>.  Например,  для  немедленного  выключения  и
перезагрузки используйте следующую команду (в <code>root</code>):</p>
<p>
<blockquote><code>
<pre>
    # shutdown -r now
</pre>
</code></blockquote>
</p>
<p></p>
<p>Эта  команда чисто перезагрузит вашу систему. Руководство на
команду <code>shutdown</code> описывает и другие возможные аргументы командной
строки.
<sl>Можно  посмотреть  возможности  команды,  обратившись к
машинному  руководству <code>man shutdown</code>.</sl>

</p>
<p></p>
<p>Обратите   внимание,   что   многие  дистрибутивы  Linux  не
предлагают   команду   shutdown  на  средствах  инсталляции.  Это
означает,  что  при  первой загрузке после инсталляции, вам может
потребоваться  для  останова  <F>ctrl-alt-del</F>.  А  после  этого вы
всегда  должны использовать команду <code>shutdown</code>.
<sl>прим. переводчика:
До  настоящего  момента я закрывал Linux-систему командой <code>halt</code>,
но <code>shutdown</code> тоже работает :-).</sl>

</p>
<p></p>
<p>После   того,   как  вы  получили  возможность  использовать
систему,    осталось    еще    несколько    акций   связанных   с
конфигурированием,  которые следовало бы предпринять. Первое, это
создать  себе  пользовательский  account (и, возможно, для других
пользователей,  которые  будут  иметь  доступ к (в) этой системе)
<F>прим. переводчика: завести account - значит зарегистрироваться в
системе</F>.  Создание  пользовательских  accounts описано в Разделе
4.4. Обычно все, что вы должны сделать, это войти под именем root
и выполнить команду <code>adduser</code> (иногда <code>useradd</code>). При регистрации
будет  несколько  подсказок, которые помогут вам зарегистрировать
новых пользователей.</p>
<p></p>
<p>Если  вы создали более одной файловой системы для Linux или,
если  вы  используете  область  своппинга, вам может понадобиться
отредактировать файл <code>/etc/fstab</code>, чтобы ваши файловые системы были
автоматически   доступны   после  загрузки.  (Например,  если  вы
используете  отдельную  файловую  систему  для <code>/usr</code>  и не можете
обнаружить  ни  одного  из  файлов  этой  файловой системы, может
оказаться,  что  вам  просто  надо эту систему примонтировать). В
Разделе 4.8. описывается эта процедура. Заметим, что дистрибутивы
Slackware Linux автоматически конфигурируют ваши файловые системы
и   области  своппинга,  так  что  в  описаном  выше  обычно  нет
необходимости.</p>
<p></p>

<h2>2.5 <A Name="ss2.5"> Борьба с глюками </h2>

<p>Практический  каждый  влипнет  в  какую-нибудь  историю  при
первой  попытке инсталлировать Linux. В большей части случаев это
связано с простым неправильным пониманием. <F>прим. переводчика: То
есть связано с привычкой быстро, но неправильно схватывать мысли</F>.
Но   иногда   может   быть   кое-что  и  посерьезнее,  как  зевок
проектировщиков или просто ошибка.</p>
<p></p>
<p>Этот  раздел  описывает  некоторые наиболее часто встречающиеся
проблемы  инсталляции  и  как  их решать. Если инсталляция прошла
успешно,  но  вы  получили  неожиданные сообщения об ошибках, они
здесь также описываются.</p>
<p></p>
<h2>2.5.1 <A Name="ss2.5.1"> Проблемы загрузки средств инсталляции </h2>

<p>Пытаясь первый раз загрузить средства инсталляции, вы можете
столкнуться  с множеством проблем. Они перечислены ниже. Заметим,
что  следующие  проблемы  не  относятся  к  загрузке вашего вновь
инсталлированного  Linux.  Относительно  таких проблем см. Раздел
2.5.4.</p>
<p>
<ul>
<li> <b>Ошибка дискеты или средства инсталляции.</b>

<p>Наиболее часто встречающийся случай при такого рода проблемах
-   это   запорченная   загрузочная  дискета.  Либо  дискета
физически  повреждена  -  тогда вы должны восстановить диск,
используя  исправную  дискету,  либо испорчены данные на
дискете,   в  этом  случае  следует  проверить  правильность
перенесения  данных  на дискету. Во многих случаях вам может
помочь простая перезапись дискеты.</p>
<p>Если  вы  получили  загрузочную  дискету  по  почте  или  от
какого-то   другого   дистрибутора,  вместо  самостоятельных
попыток   восстановить   испорченную   дискету  свяжитесь  с
дистрибутором  и  попросите  новую  загрузочную дискету - но
только   окончательно   убедившись,  что  именно  в  дискете
причина.</p>
<p></p>
</li>
<li>  <b>Система "зависает" во время или сразу после загрузки.</b>

<p>После   инсталляции   средств   загрузки  вы  увидите  номер
сообщения   ядра,   указывающий,   какие   устройства   были
распознаны  и  конфигурированы.  После этого обычно выдается
"login",   позволяющий   продолжать  инсталляцию  (некоторые
дистрибутивы  вместо  этого  помещают  вас в некоторого рода
инсталляционную программу). Система может зависнуть во время
этих  шагов. Во многих случаях система не зависает, а просто
требует  много  времени  на  выполнение. Так что, прежде чем
решить,  что система зависла, убедитесь, что по крайней мере
несколько минут дисковод и процессор бездействуют.</p>
<p>
<ol>
<li> После  загрузки с помощью LILO, система должна загрузить
образ  ядра  с  дискеты.  Это может занять несколько секунд;
если  горит  при этом лампочка обращения к дисководу, то это
значит, что все идет нормально.
</li>
<li> При загрузке ядра SCSI устройства должны быть проверены.
Если  у  вас  еще  не было инсталлировано какого-нибудь SCSI
устройства, система "зависнет" секунд на 15, пока происходит
проверка SCSI устройства; обычно это происходит после строки

<blockquote><code>
<pre>
          lp_init:  lp1 exists (0), using polling driver
</pre>
</code></blockquote>


появившейся на вашем экране.
</li>
<li>  После  окончания  загрузки  ядра  управление  передается
системе,  загружающей файлы с дискеты. Затем вам будет выдана
подсказка   login  или  система  выйдет  в  инсталляционную
программу. Если вы дошли до подсказки, например, имеющей вид

<blockquote><code>
<pre>
          Linux login:
</pre>
</code></blockquote>


далее  вы  должны войти (обычно как root или install - в
разных  версиях  дистрибутивов  по-разному).  После  введения
имени пользователя система может задуматься секунд на 20 или
более,  пока  программа  инсталляции или shell загружается с
дискеты.  Опять же лампочка дисковода должна гореть. Так что
не думайте, что система опять зависла.</li>
</ol>
</p>
<p></p>
<p>Любой  из  перечисленных  выше пунктов может быть источником
проблем. Разумеется, система может и взаправду зависнуть при
загрузке,  чему может быть несколько причин. Прежде всего, у
вас  может  быть  недостаточно  памяти  (RAM)  для  загрузки
средств инсталляции.</p>
<p></p>
<p>Причина    многих    системных    зависаний   -   аппаратная
несовместимость.  Раздел  1.8  последней  главы  представляет
обзор  поддерживаемого ОС Linux оборудования. Даже если ваша
аппаратура   поддерживается,   у  вас  могут  быть  проблемы,
связанные   с  несовместимостью  конфигурации  оборудования,
которые  тоже могут быть причиной зависания. Смотрите Раздел
2.5.2, где обсуждаются вопросы аппаратной несовместимости.</p>
<p></p>
</li>
<li><b>Системные сообщения об ошибках памяти в процессе инсталляции.</b>

<p>Этот  пункт относится к количеству памяти, которая имеется
в  вашем  распоряжении.  На системе с 4M RAM или менее у вас
могут  быть  проблемы с самой загрузкой средств инсталляции.
Это  потому, что многие дистрибутивы используют ``ramdisk'',
которая является файловой системой, загружаемой прямо в RAM
во  время операций, использующих средства инсталляции. Полный
образ инсталляционной дискеты, например, может быть загружен
на ramdisk, что может потребовать более мегабайта памяти.</p>
<p></p>
<p>Решение  этой  проблемы  -  подготовить  опцию  ramdisk  при
загрузке  средств инсталляции. Каждая версия имеет процедуры
реализации  этого;  в  версии  SLS,  например,  вы печатаете
``<code>floppy</code>'',  когда  появится подсказка LILO при загрузке диска
"a1". Детали посмотрите в документации на дистрибутив.</p>
<p></p>
<p>Вы можете не увидеть сообщение ``out of memory'' при попытке
загрузиться   или   инсталлировать  программы;  вместо  этого
система  может  неожиданно  зависнуть  или сорвать загрузку.
Если  система  зависла  и  никакие  предыдущие об'яснения не
помогают, попытайтесь отключить (disable) ramdisk.</p>
<p></p>
<p>Имейте  в  виду,  что Linux сам по себе требует не менее 2 M
RAM   для  минимального  функционирования;  некоторые  версии
требуют наличия 4M и даже более.</p>
<p></p>
</li>
<li> <b>Система  сообщает  об  ошибках,  таких  как  ``permission
denied''  (обращение  запрещено) или ``file not found''(файл
не найден) в процессе загрузки.</b>

<p>Это говорит о том, что средства инсталляции неисправны. Если
вы  попытаетесь  загрузиться  со  средств  инсталляции (и вы
уверены,  что  все  делаете  правильно),  то у вас не должно
появляться  сообщений,  вроде  вышеупомянутых.  Свяжитесь  с
дистрибутором  вашего Linux и обсудите с ним проблему. Может
быть  нужна новая копия. Если вы переписали загрузочный диск
сами,  попробуйте  пересоздать  этот загрузочный диск, может
это решит проблему.</p>
<p></p>
</li>
<li>  <b>Система  при  загрузке  выдает сообщение
``VFS: Unable to mount root''.</b>

<p>Это  сообщение  об  ошибке  означает,  что корневая файловая
система  (сама  находящаяся  на  средстве загрузки) не может
быть  найдена. То ли ваши средства загрузки каким-то образом
испорчены, то ли вы неправильно пытаетесь загружать систему.</p>
<p></p>
<p>Например,  многие  дистрибутивы  на CD-ROM требуют, чтобы
при  загрузке лазерный диск находился в дисководе. Убедитесь
также, что дисковод CD-ROM включен и что-то делает. Подробнее
смотрите в Разделе 2.5.2.</p>
<p></p>
<p>Если  вы  уверены,  что  вы правильно загружаете систему, то
возможно неправильно работают ваши средства загрузки. Но это
нетипичная  ситуация, попробуйте другие варианты, прежде чем
пытаться использовать другую загрузочную дискету или ленту.</p>
</li>
</ul>
</p>
<p></p>

<h2>2.5.2 <A Name="ss2.5.2"> Аппаратные проблемы </h2>

<p>Наиболее  общий  случай, когда инсталляция или использование
Linux  приходят  в противоречие с аппаратурой. Даже если вся ваша
аппаратура  поддерживается  Linux,  неправильное конфигурирование
или конфликты между отдельными устройствами могут иногда приводить
к  странным  результатам:  устройства  могут  не распознаваться на
этапе загрузки или система может зависать.</p>
<p></p>
<p>Важно   локализовать  эти   аппаратные   проблемы,  если  вы
подозреваете,   что   именно   они   являются   источником  ваших
неприятностей.  В  последующих разделах мы опишем некоторые общие
проблемы, связанные с аппаратурой, и как решать их.</p>
<p></p>
<h2>2.5.2.1 <A Name="ss2.5.2.1"> Локализация аппаратных проблем </h2>

<p>Если  вы  столкнулись  с проблемой, которая по вашему мнению
носит  аппаратный  характер,  первое,  что вы должны сделать, это
попытаться  локализовать проблему. Это означает, что исключая все
возможные  составляющие  и (обычно) саму операционную систему, вы
постепенно шаг за шагом выделяете неисправную часть аппаратуры.</p>
<p></p>
<p>Это  не так тяжело, как иногда может казаться. Первоначально
вы должны отключить от системы все несущественное оборудование, а
затем  определить,  какое  устройство в действительности является
источником  неприятностей, подключая шаг за шагом устройства. Это
означает,   что   вы   должны   отключить  все  устройства  кроме
контроллеров   гибкого   диска  и  видео,  а  также,  разумеется,
клавиатуры.  Даже такие невинные на первый взгляд устройства, как
мышь, могут внести большую сумятицу в ваши мозги.</p>
<p></p>
<p>Например, предположим, что система зависла во время загрузки
при  распознавании  платы  Ethernet.  Вы  можете предположить, что
имеет  место  конфликт  или  это  проблема данной платы Ethernet.
Простой   и  быстрый  способ  определиться - это  вытащить  плату
Ethernet   и   попытаться  вновь  загрузиться.  Если  все  пойдет
нормально, то (a) плата Ethernet не поддерживается Linux (смотри
Раздел  1.8  относительно  совместимых  плат), или (b) существует
адрес или IRQ, конфликтующие с платой.</p>
<p></p>
<p>``Конфликт  адреса или IRQ ?'' А это-то, скажите на милость,
что  еще  может значить? Все устройства в вашей машине используют
IRQ  <F>прим.  переводчика:  IRQ  -  Interrupt  ReQuest</F>  или линию
запросов  прерывания,  чтобы сообщить системе, что система должна
для  них  что-то  сделать.  Вы  можете  представить  себе IRQ как
веревочку,  за  которую устройство дергает, когда ему надо, чтобы
система позаботилась о выполнении какого-то поступившего запроса.
Если более, чем одно устройство дергает за эту веревочку, ядро не
способно  определить,  какое устройство нуждается в обслуживании.
Вот вам и глюк.</p>
<p></p>
<p>Поэтому убедитесь, что все инсталлированные вами устройства
используют   уникальные   линии  IRQ.  В  общем  случае  IRQ  для
устройства может быть установлен с помощью переключения джамперов
(jumpers)  на плате; детали смотрите в документации на конкретное
устройство.  Некоторые  устройства  вообще  не используют IRQ, но
предполагается, что вы конфигурировали их, так, что они смогут им
воспользоваться. (Хорошие примеры тому контроллеры Seagate ST01 и
ST02 SCSI).</p>
<p></p>
<p>В  некоторых  случаях  ядро,  находящееся на ваших средствах
инсталляции, конфигурируется для использования конкретного IRQ для
конкретного устройства. Например, в некоторых дистрибутивах Linux
ядро  предварительно сконфигурировано так, чтобы использовать IRQ
5  для  контроллера  TMC-950  SCSI,  контроллера CD-ROM Mitsumi и
драйвер  мыши busmouse. Если вы хотите использовать два или более из
этих устройств, вам необходимо будет вначале инсталлировать Linux
только  с одним из этих устройств, подключенным к системе, а затем
перекомпилировать ядро, чтобы сменить IRQ, выделенное для другого
из  них  по  умолчанию.  (Смотри Главу 4 по поводу перекомпиляции
ядра).</p>
<p></p>
<p>Другая  область, где могут возникнуть конфликты аппаратуры -
это  каналы  DMA (Direct Memory Access) (каналы прямого доступа к
памяти),  адреса  ввода-вывода  (I/O) и адреса разделяемой памяти
(shared  memory addresses). Все вышеперечисленное есть механизмы,
через  которые  система взаимодействует с различными устройствами.
Некоторые платы Ethernet, например, используют разделяемую память
также  как  и  IRQ  в  качестве интерфейса с системой. И если они
конфликтуют   с   другими   драйверами   -   система  ведет  себя
непредсказуемо.  Вы  должны  быть  готовы к изменению канала DMA,
адресов   ввода-вывода   или  разделяемой  памяти  для  различных
устройств   с  помощью  переустановки  джамперов.  (К  сожалению,
некоторые устройства не позволяют сделать такие переустановки).</p>
<p></p>
<p>Документация  на  различные устройства должна указывать IRQ,
канал  DMA,  адрес  ввода-вывода  или  адрес  разделяемой памяти,
которые используют устройства, и как их конфигурировать. И опять,
простейший   способ  справиться  с  этой  проблемой,  это  просто
временно  отключить  конфликтующие  устройства  до  того,  как вы
определите причину конфликта.</p>
<p></p>
<p>Таблица   2.2  представляет  перечень  IRQ  и  каналов  DMA,
используемых  различными "стандартными" устройствами, стоящими во
многих  системах.  Практически  все системы имеют эти устройства,
так  что вам следует избегать установок IRQ и DMA других устройств
на эти значения.</p>
<p>
<blockquote><code>
<pre>
     Device                    I/O-адрес      IRQ   DMA

     ttyS0 (COM1)                 3f8          4    n/a
     ttyS1 (COM2)                 2f8          3    n/a
     ttyS2 (COM3)                 3e8          4    n/a
     ttyS3 (COM4)                 2e8          3    n/a
     lp0 (LPT1)                   378 - 37f    7    n/a
     lp1 (LPT2)                   278 - 27f    5    n/a
     fd0, fd1 (floppies 1 and 2)  3f0 - 3f7    6    2
     fd2, fd3 (floppies 3 and 4)  370 - 377    10   3

          Таблица 2.2:  Обычные установки для устройств
</pre>
</code></blockquote>
</p>
<p></p>
<p></p>
<p></p>

<h2>2.5.2.2 <A Name="ss2.5.2.2"> Проблемы распознавания жесткого диска или контроллера </h2>

<p>При  загрузке Linux вы увидите серии посланий, выдаваемых на
экран, вроде:</p>
<p>
<blockquote><code>
<pre>
    Console:  colour EGA+ 80x25, 8 virtual consoles
    Serial driver version 3.96 with no serial options enabled
    tty00 at 0x03f8 (irq = 4) is a 16450
    tty03 at 0x02e8 (irq = 3) is a 16550A
    lp_init:  lp1 exists (0), using polling driver
    ...
</pre>
</code></blockquote>
</p>
<p></p>
<p>Здесь  ядро  распознает  различные  устройства,  имеющиеся в
системе. В некоторый момент вы увидите строчку</p>
<p>
<blockquote><code>
<pre>
    Partition check:
</pre>
</code></blockquote>
</p>
<p>(Проверка раздела),  за которой следует список распознанных
разделов, например:</p>
<p>
<blockquote><code>
<pre>
    Partition check:
    hda:  hda1 hda2
    hdb:  hdb1 hdb2 hdb3
</pre>
</code></blockquote>
</p>
<p></p>
<p>Если   по  какой-то  причине  ваши  дисководы  или  разделы
нераспознаны, вы никаким образом не сможете к ним добраться.</p>
<p>Это может произойти по нескольким причинам:</p>
<p>
<ul>
<li><b>Жесткий  диск  или  контроллер не поддерживается.</b> Если вы
используете  контроллер  жесткого  диска  (IDE,  SCSI и тому
подобные),  из  тех, которые не поддерживаются в Linux, ядро
не распознает ваш раздел на этапе загрузки.
</li>
<li><b>Жесткий  диск или контроллер неправильно конфигурированы.</b>
Даже  если  ваш  контроллер поддерживается в Linux, он может
быть  неправильно  конфигурирован.  (Особенно  эта  проблема
характерна   для  контроллеров  SCSI;  большинство   не-SCSI
контроллеров   будет   хорошо  работать  без  дополнительной
конфигурации).

<p>Для решения такого рода проблем обращайтесь к соответствующей
документации   на   жесткие   диски   и/или  контроллеры.  В
частности,  многие  жесткие  диски  потребуют  переустановки
джамперов,   если   они   будут   использоваться   в  режиме
"подчиненного"  (``slave'')  драйвера  (например, в качестве
второго  жесткого  диска).  Самый  железный способ проверить
наличие  такой  ситуации  -  это  загрузить  MS-DOS  или еще
какую-нибудь  другую  операционную систему, которая заведомо
должна  работать  с этим жестким диском и контроллером. Если
вы   получите   доступ  к  диску  и  контроллеру  из  другой
операционной   системы,   то   значит  ваши  проблемы  не  в
конфигурировании аппаратуры.</p>
<p></p>
<p>Смотрите   Раздел   2.5.2.1  (ранее)  по  поводу  разрешения
возможных  конфликтов  устройств и Раздел 2.5.2.3 (далее) по
поводу конфигурирования SCSI-устройств.</p>
<p></p>
</li>
<li><b>Контроллер  конфигурирован правильно, но не распознается.</b>
Некоторые    без-BIOS-ные    SCSI-контроллеры   требуют   от
пользователя  описания  контроллера  на  этапе  загрузки.  В
Разделе   2.5.2.3   (далее)   описывается,  как  осуществить
определение этих контроллеров.
</li>
<li><b>Не  распознается  геометрия  жесткого  диска.</b>  Некоторые
системы,   такие,   как   IBM   PS/ValuePoint,  не  помещают
информацию  о  геометрии  жесткого  диска в память CMOS, где
Linux  ожидает  ее найти. Также, некоторым SCSI-контроллерам
надо  сообщать,  где  найти геометрию диска, чтобы Linux мог
распознать формат вашего диска.

<p>Многие  дистрибутивы  имеют  загрузочную  опцию для описания
геометрии  диска.  В  общем  случае,  при  загрузке  средств
инсталляции, вы можете описать геометрию драйвера в ответ на
подсказку загрузчика LILO с помощью команды, например:</p>
<p>
<blockquote><code>
<pre>
      boot:  linux hd=&lt;cylinders&gt;,&lt;heads&gt;,&lt;sectors&gt;
</pre>
</code></blockquote>
</p>
<p>где  &lt;cylinders&gt;,  &lt;heads&gt;  и  &lt;sectors&gt;  соответсвуют числу
цилиндров, головок и секторов на трек у вашего диска.</p>
</li>
</ul>
</p>
<p></p>
<p>После   инсталляции   Linux   вы  будете  иметь  возможность
инсталлировать  LILO, который позволит вам загружаться с жесткого
диска.   В   это   время   вы   можете   описать   геометрию  для
инсталляционной процедуры LILO, что позволит не вводить геометрию
при каждой загрузке. Более подробно о LILO смотрите в Главе 4.</p>
<p></p>
<p></p>

<h2>2.5.2.3 <A Name="ss2.5.2.3"> Проблемы со SCSI-контроллерами и устройствами </h2>

<p>Здесь  описываются  некоторые  из наиболее типичных проблем,
возникающих   со   SCSI-контроллерами   и  устройствами,  такими,
например,  как CD-ROM, жесткие диски и ленты. Если у вас проблемы
заставить Linux распознавать диск или контроллер, читайте дальше.</p>
<p></p>
<p>Linux  <em>SCSI HOWTO</em> (см. Приложение A) содержит много полезной
информации о таких SCSI-устройствах, в дополнение к перечисленным
здесь.   Иногда требуется  почти  акробатическая  ловкость  при
конфигурировании SCSI.</p>
<p>
<ul>
<li><b>SCSI-скази   устройство  распознается  всеми  возможными
идентификаторами  (ID).</b>  Это связано с привязкой устройств к
одному и тому же адресу с контроллером. Вам следует изменить
установку  переключателей  так,  чтобы драйвер и контроллер
использовали различные адреса.

</li>
<li><b>Linux  сообщает об обнаруживаемых ошибках, хотя известно,
что  устройство  работает  безошибочно.</b> Это может происходить
из-за   плохого   кабеля  или  плохого  раз'ема.  Если  ваша
SCSI-шина не имеет надежных контактов с обеих сторон - может
возникать  ошибка  доступа  к  SCSI-устройствам.  Если у вас
возникают сомнения, всегда проверяйте кабель.
</li>
<li><b>SCSI-устройства сообщают об ошибках истечения времени.</b> Это
обычно  происходит  из-за  конфликтов  IRQ,  адресов DMA или
устройств.  Следует  проверить  также,  что прерывания вашим
контроллером обрабатываются корректно.
</li>
<li><b>SCSI-контроллеры,  использующие BIOS не идентифицируются.</b>
Распознавание  контроллеров, использующих BIOS, потерпит
неудачу, если BIOS отключен или "подпись" вашего контроллера
не распознается ядром.
Дополнительную информацию можно найти в Linux <em>SCSI HOWTO</em>.
</li>
<li><b>Контроллеры,   использующие   отображаемый   в   память
ввод-вывод,   не   работают.</b>  Это  происходит,  когда  порты
отображаемого    в    памяти   ввода-вывода   буферизируются
некорректно.  Или  определите  в  установках  XCMOS адресное
пространство контроллера,  как  некэшируемое,  или отключите
также и кэш.
</li>
<li><b>При  разбиении  на  разделы  будет выдано сообщение, что
``cylinders > 1024''  или  что вы не сможете загрузиться из
раздела,   имеющего   номера   цилиндров  более  1023.</b>  BIOS
ограничивает  число  цилиндров числом 1024 и любой раздел,
использующий  большие  номера  цилиндров, будет неприемлем с
точки  зрения  BIOS.  Применительно  к  Linux  это касается
только  загрузки;  после  того,  как  система  загружена, вы
сможете обращаться к разделу. Вы можете выбирать, загружать
ли  Linux  с дискеты или из раздела, использующего цилиндры с
номерами  меньше  1024.  Относительно  создания  загрузочной
дискеты или инсталляции LILO смотрите Раздел 2.3.7.
</li>
<li><b>CD-ROM или другие устройства, которые могут дополнительно
вставляться  (удаляться)  в  компьютер,  не  распознаются на
этапе  загрузки.</b>  Постарайтесь  загрузиться  с  подключенным
CD-ROM (или диском). Для некоторых устройств это необходимо.</li>
</ul>
</p>
<p></p>
<p>Если  ваш  SCSI-контроллер нераспознан, возможно вам следует
инициировать  (force) распознавание аппаратуры на этапе загрузки.
Это    особенно   важно   для   без-BIOS-ных   SCSI-контроллеров.
Большинство  дистрибутивов позволяет описывать IRQ контроллеров и
адресов разделяемой памяти во время загрузки средств инсталляции.
Например,  если  вы  используете  контроллер  TMC-8xx,  вы можете
ввести</p>
<p>
<blockquote><code>
<pre>
    boot:  linux tmx8xx=&lt;interrupt&gt;,&lt;memory-address&gt;
</pre>
</code></blockquote>
</p>
<p></p>
<p>в  ответ  на  подсказку загрузчика LILO, где &lt;interrupt&gt; - IRQ
контроллера   и  &lt;memory-address&gt;  -  адрес  разделяемой  памяти.
Сможете   ли   вы  это  сделать, зависит  от  используемого  вами
дистрибутива  Linux,  так  что  относительно  деталей  посмотрите
документацию.</p>
<p></p>


<h2>2.5.3 <A Name="ss2.5.3"> Проблемы инсталляции программ </h2>

<p>Предполагается,   что   инсталляция  программ  Linux  должна
проходить без   особых   хлопот,   если   вы  счастливый  человек.
Единственные  проблемы,  с  которыми  вы  можете столкнуться, это
испорченные  средства  инсталляции  или  отсутствие  достаточного
места   на   файловой   системе   Linux.  Вот  перечень  наиболее
характерных проблем:</p>
<p>
<ul>
<li><b>Системные сообщения ``Read error''(ошибка чтения), ``file
not  found''(не  найден  файл)  или  другие  ошибки во время
попытки  инсталлировать программы.</b> Это говорит о проблемах с
вашими  средствами  инсталляции.  Если  вы  инсталлируете  с
дискеты,  имейте  в виду, что дискеты очень склонны к такого
рода   недостаткам.  Убедитесь,  что  вы  используете  новые
исправные  и свежеотформатированные дискеты. Если у вас есть
на диске разделы MS-DOS, многие дистрибутивы Linux позволят
вам  инсталлировать с жесткого диска. Это может быть быстрее
и более надежно, чем использование дискет.

<p>Если  вы  используете  CD-ROM, убедитесь в отсутствии на нем
царапин, пыли или других гадостей, которые могут приводить к
ошибкам.  Причиной  может  быть  и  то,  что  соответствующее
средство  инсталляции  имеет  неподходящий формат. Например,
при  использовании дискет многие дистрибутивы Linux требуют,
чтобы  дискета  была  отформатирована в формате high-density
MS-DOS.  (Загрузочная  дискета  -  исключение; в большинстве
случаев  она  вообще  не  в формате MS-DOS). Если все прочее
потерпело  неудачу,  либо  достаньте  новый  набор  дискет с
дистрибутивом или перепишите его на новые дискеты, если
вы скачали дистрибутив откуда-то.</p>
<p></p>
</li>
<li><b>Системные сообщения вроде ``tar: read error'' (tar: ошибка
чтения)  или ``gzip: not in gzip format''(gzip: не в формате
gzip).</b> Часто это связано с испорченными файлами на средствах
инсталляции.   Другими  словами,  ваши  дискеты  могут  быть
нормальными,   но   вот   данные  на  них  каким-то  образом
испорчены.  Например,  вы каким-то образом скачали программы
Linux,  используя текстовый (а не бинарный) режим, тогда ваши
файлы уж точно будут негодными для инсталляции.
</li>
<li><b>Системные сообщения об ошибках, такие как ``device full''
(устройство  заполнено)  в  процессе  инсталляции.</b> Это верный
признак   того,   что   вы   вышли  за  пределы  отведенного
пространства при инсталляции. Не все дистрибутивы способны с
этим  разобраться;  вы  не  сможете  прервать  инсталляцию и
вынуждены дождаться, когда система сама остановится.

<p>Обычное  решение  в  этой  ситуации  - пересоздание файловой
системы (с помощью команды <code>mke2fs</code>), которая удаляет частично
инсталлированные   программы.  Вы  далее  можете  попытаться
переинсталлировать  программы,  выбирая  на этот раз меньшее
количество   программ,   подлежащих  инсталляции.  В  других
случаях  вам  может понадобиться начать с полного удаления и
перераспределения разделов и размеров файловой системы.</p>
<p></p>
</li>
<li><b>Системные  сообщения  об  ошибках, такие как ``read_intr:
0x10''  при обращении к жесткому диску.</b> Это обычно говорит о
наличии плохих блоков на диске. Однако, если вы получили это
сообщение  во  время  выполнения mkswap или mke2fs, причиной
этого могло быть то, что система имела проблемы с доступом к
вашему  диску.  Это  может быть как проблема аппаратуры (см.
Раздел   2.5.2),  так  и  результат  неправильного  описания
геометрии. Если вы применяли

<blockquote><code>
<pre>
      hd=&lt;cylinders&gt;,&lt;heads&gt;,&lt;sectors&gt;
</pre>
</code></blockquote>


опцию   периода  загрузки,  чтобы  инициировать  определение
геометрии   своего   жесткого   диска  и  описали  геометрию
некорректно,  то  вы  должны  будете  познакомиться  с  этой
проблемой.  Это также может случиться, если геометрия вашего
драйвера описана некорректно в CMOS.
</li>
<li><b>Системные сообщения об ошибках , вроде ``file not found''
или  ``permission denied''.</b> Это может случиться, если не все
необходимые  файлы  представлены  на  средствах инсталляции
(смотрите   следующий   раздел)  или  существует  проблема
разрешения  доступа.  Например,  про  некоторые дистрибутивы
Linux  известно,  что  они сами по себе содержат ошибки. Это
обычно обнаруживается очень быстро, да и случается не часто.
Если  вы  подозреваете,  что программы дистрибутива содержат
ошибки  и  уверены,  что  вы  ничего не сделали неправильно,
свяжитесь   с  сопровождающими  дистрибутив  и  сообщите  об
ошибке.</li>
</ul>
</p>
<p></p>
<p>Если  у  вас  появляются  другие  странные  ошибки  во время
инсталляции  Linux  (особенно если вы сами переписали где-то
эти  программы), убедитесь, что вы действительно списали все
необходимое. Например, некоторые  используют команду FTP</p>
<p>
<blockquote><code>
<pre>
     mget *.*
</pre>
</code></blockquote>
</p>
<p>для  скачивания программ Linux через FTP. Она скачает только
те  файлы, которые содержат ``.'' в именах файлов; если есть
файлы  без  ``.'', вы их не получите. В этом случае уместной
была бы команда</p>
<p>
<blockquote><code>
<pre>
     mget *
</pre>
</code></blockquote>
</p>
<p></p>
<p>Самый  лучший совет - заново пересмотреть все шаги, которые вы
совершили,  если  у  вас  застопорилось  дело.  Вы  можете наивно
думать,  что  вы  все  делали  правильно,  когда на самом деле вы
забыли  сделать какой-то маленький, но важный шаг, где-то посреди
нелегкого  пути  инсталляции. Во многих случаях даже сама попытка
заново   переписать   или   заново   инсталлировать  Linux  может
натолкнуть  на  решение  действительной  проблемы. Не надо биться
головой об стену дольше, чем надо!</p>
<p></p>
<p>Кроме  прочего,  если  Linux  завис при инсталляции, причины
могут быть в аппаратуре. Смотрите по этому поводу Раздел 2.5.2.</p>
<p></p>

<h2>2.5.4 <A Name="ss2.5.4"> Проблемы после инсталляции Linux </h2>

<p>Вы  потратили целых полдня, инсталлируя Linux. Чтобы выделить
под  него  место, вы стерли свои разделы с MS-DOS и OS/2 и не без
утирания  слез  стерли свои копии "SimCity" и "Wing Commander"...
Вы  перезагрузили  систему, а ничего не произошло. Или еще хуже
того, <em>что-то</em> произошло, но не то, что должно было произойти. Ну и
что делать?</p>
<p></p>
<p>В  Разделе 2.5.1 мы обсуждали некоторые из наиболее типичных
проблем,  возникающих  при загрузке Linux со средств инсталляции.
Многие  из этих проблем могут быть и здесь. В довершение ко всему
вы можете стать жертвой одной из следующих напастей.</p>
<p></p>
<h2>2.5.4.1 <A Name="ss2.5.4.1"> Проблемы загрузки Linux с дискеты </h2>

<p>Если  вы  используете  дискеты для загрузки Linux, вам может
потребоваться описать местоположение вашего корневого раздела linux во
время  загрузки.  Это  обычно  случается, когда вы используете
исходную   инсталляционную   дискету,   а   не  специальную
загрузочную дискету, созданную в процессе инсталляции.</p>
<p></p>
<p>При  загрузке  дискеты, надо держать <F>shift</F> или <F>ctrl</F>. Это
приведет  вас  к загрузочному меню; нажмите <F>tab</F>, чтобы получить
спиок  доступных  опций.  Например, многие дистрибутивы позволяют
ввести</p>
<p>
<blockquote><code>
<pre>
    boot:  linux hd=&lt;partition&gt;
</pre>
</code></blockquote>
</p>
<p></p>
<p>где  &lt;partition&gt;  -  имя  корневого  раздела Linux, например,
/dev/hda2.  Более  детально  с  вопросом  можно  познакомиться по
документации на дистрибутив.</p>
<p></p>

<h2>2.5.4.2 <A Name="ss2.5.4.2"> Проблемы загрузки Linux с жесткого диска </h2>

<p>Если   вам  удалось  инсталлировать  LILO,  вместо  создания
загрузочной дискеты вам следует загружать Linux с жесткого диска.
Однако,    автоматизированная    процедура    инсталляции   LILO,
используемая во многих дистрибутивах, не всегда безупречна.</p>
<p></p>
<p>Она  может  сделать  неправильные предположения относительно
формата   вашего раздела,   в  этом  случае  вы  должны  будете
переинсталлировать  LILO, чтобы все стало хорошо. Инсталляция LILO
обсуждается в Главе 4.</p>
<p>
<ul>
<li><b>Системные  сообщения ``Drive not bootable---Please insert
system   disk.''</b>   ("Устройство   незагружаемо---Пожалуйста,
вставьте  системный  диск").  Вы получите такое сообщение об
ошибке,  если  главная  загрузочная  запись  жесткого  диска
каким-то  образом попорчена. Во многих случаях это безопасно
и  все  остальное  у вас на диске по-прежнему в порядке. Тут
дальше есть несколько путей.

<ol>
<li>При разбиении диска на разделы с использованием <b>fdisk</b> вы
могли   удалить   раздел,   который   был   отмечен  как
``active''.  MS-DOS  и  другие операционные системы пытаются
загрузить   такой  раздел  на  этапе  загрузки  (Linux  не
обращает  внимания  на  то, является раздел ``active'' или
нет). Вы можете загрузить MS-DOS с дискеты и запустить <b>FDISK</b>
для  установки  флага  ``active''  для раздела MS-DOS и все
будет хорошо.

<p>Другая  команда,  которую  можно попробовать (с MS-DOS 5.0 и
выше) это</p>
<p>
<blockquote><code>
<pre>
          FDISK /MBR
</pre>
</code></blockquote>
</p>
<p></p>
<p>Эта  команда  будет  пытаться  заново  сформировать  главную
загрузочную  запись  диска  для загрузки MS-DOS, переписывая
LILO.  Если  у  вас  больше нет на жестком диске MS-DOS, вам
потребуется  загрузить  Linux  с  дискеты  и  в  последующем
попытаться инсталлировать LILO.</p>
<p></p>
</li>
<li>Если вы создали раздел MS-DOS, используя версию команды
<b>fdisk</b> из Linux или наоборот, это может быть причиной ошибки.
Вам  следует создавать разделы для MS-DOS, используя только
версии <b>FDISK</b>   для   MS-DOS.   (Это   относится  и  к  другим
операционным  системам, которые существуют наряду с MS-DOS).
Здесь лучшее решение - либо начать с того, что все стереть и
переразбить  диск  правильно,  либо  удалить  и  пересоздать
плохие разделы, используя исправные версии <b>fdisk</b>.
</li>
<li>Инсталляционная процедура LILO может потерпеть неудачу. В
этом  случае  вам  следует  либо  загрузиться  с загрузочной
дискеты  для  Linux  (если  она  у вас есть) или с исходного
средства   инсталляции.  В  любом  случае  вы  будете  иметь
возможность   для  описании  корневого  раздела  Linux,
который  будет использован при загрузке. Нажмите
<F>shift</F> или <F>ctrl</F> во время загрузки и нажмите <F>tab</F> из меню
загрузки, чтобы получить список опций.</li>
</ol>

</li>
<li><b>При  загрузке системы с жесткого диска MS-DOS (или другая
из  существующих операционных систем) стартует вместо Linux.</b>
Прежде  всего убедитесь, что вы действительно инсталлировали
LILO  при  инсталляции программ Linux. Если это оказалось не
так, система будет загружать MS-DOS (или какую-нибудь другую
операционную  систему из собранных вами), когда вы пытаетесь
загрузиться  с  жесткого  диска.  Для  того, чтобы загрузить
Linux с жесткого диска, вам необходимо инсталлировать на жеский
диск LILO (см. Главу 4).

<p>С  другой  стороны, если вы <em>все-таки инсталлировали</em> LILO, но
другая  операционная  система  загружается  вместо Linux, то
необходимо  конфигурировать  LILO  так,  чтобы она загружала
другие  операционные системы по умолчанию. Во время загрузки
системы  держите нажатой клавишу <F>shift</F> или <F>ctrl</F>, а затем
нажмите <F>tab</F> в ответ на подсказку загрузчика. В результате вы
получите  список операционных  систем,  которые  можно  загрузить.
Выберите  соответствующую  опцию  (часто  просто  ``<code>linux</code>''),
чтобы загрузить Linux.</p>
<p></p>
<p>Если  вы  хотите  сделать  Linux  системой,  загружаемой  по
умолчанию,  вам  необходимо  реинсталлировать LILO. Смотрите
Главу 4.</p>
<p></p>
<p>Возможно  также,  что  вы  пытались  инсталлировать LILO, но
инсталляция потерпела неудачу. Смотрите предыдущий пункт.</p>
</li>
</ul>
</p>
<p></p>

<h2>2.5.4.3 <A Name="ss2.5.4.3"> Проблемы входа в систему </h2>

<p>После  загрузки  Linux  вам  (на  экран)  должна  быть выдана
подсказка вроде этой:</p>
<p>
<blockquote><code>
<pre>
    linux login:
</pre>
</code></blockquote>
</p>
<p></p>
<p>В  этот  момент  либо документация на дистрибутив, либо сама
система   скажут   вам,   что   делать   дальше.   В  большинстве
дистрибутивов  вы  просто  войдете  в  систему  под именем <code>root</code>
(суперпользователь,  администратор)  без пароля. Другие возможные
имена для входа <code>guest</code> или <code>test</code>.</p>
<p></p>
<p>Большинство  новоиспеченных  систем  Linux не требуют пароля
для  первоначального  входа.  Но  если  система  потребует  с вас
пароль,   могут  возникнуть  проблемы.  Прежде  всего  попробуйте
пароль,  совпадающий  с именем входа; например, если вы вошли как
<code>root</code>, попробуйте ``<code>root</code>'' в качестве пароля.</p>
<p></p>
<p>Если  вы  все-таки  не  можете  войти,  то это уже проблема.
Прежде  всего проконсультируйтесь с документацией на дистрибутив.
Может быть там где-то закопано правильное имя входа и пароль. Имя
входа  и  пароль  могут  быть  вам  сообщены  системой  во  время
инсталляции или выведены на экран в виде подсказки.</p>
<p></p>
<p>Причиной  этих  неприятностей  также  могут  быть проблемы с
самой  инсталляцией  файлов,  отвечающих за вход и инициализацию.
Если  в  этом  причина, вам может потребоваться переинсталлизация
(как  минимум  части)  программ Linux или нужно загрузить ваши средства
инсталляции  и  попытаться  решить  проблемы  "вручную". Смотрите
соображения на этот счет в Главе 4.</p>
<p></p>

<h2>2.5.4.4 <A Name="ss2.5.4.4"> Проблемы использования системы </h2>

<p>Если вход в систему прошел успешно, на экран будет выдана подсказка
"shell" - командной оболочки
(например ``<code>#</code>'' или ``<code>$</code>'') и вы можете немножко поплясать вокруг системы.
Но существует ряд проблем,
которые могут возникнуть в начале использования системы.</p>
<p></p>
<p>Одна  из  наиболее  типичных  начальных проблем, связанных с
конфигурированием  -  установка  неверных  прав  доступа (защиты)
файлов и каталогов. Это может выразиться в сообщении</p>
<p>
<blockquote><code>
<pre>
    Shell-init:  permission denied
</pre>
</code></blockquote>
</p>
<p></p>
<p>которое  будет  напечатано  после  входа в систему (на самом
деле,  всегда,  когда  вы  столкнетесь  с сообщением ``<code>permission
denied</code>''("обращение   запрещено")   вы   можете  быть  с  высокой
вероятностью уверены, что это проблема защиты файлов).</p>
<p></p>
<p>Во  многих  случаях  это  простое  дело для команды "chmod",
которая  может  менять  права  доступа  к соответствующим файлам и
каталогам.  Например, некоторые дистрибутивы Linux использовали
(ошибочный)  код  защиты файлов " 0644 " для корневого каталога
(/). А следует использовать команду</p>
<p>
<blockquote><code>
<pre>
    # chmod 755 /
</pre>
</code></blockquote>
</p>
<p></p>
<p>Но,  чтобы  ввести  эту  команду,  вы  должны загрузиться со
средства  инсталляции  и  примонтировать  вашу  корневую файловую
систему  Linux  вручную  -  заковыристая  задача  для большинства
новичков.</p>
<p></p>
<p>Во  время  эксплуатации  системы вы можете попадать в места,
где неверно установлена защита файлов и каталогов или программы
работают  не  так,  как  конфигурировались. Добро пожаловть в мир
Linux!  Хотя  многие  дистрибутивы и не доставляют особых хлопот,
лишь  немногие из них безупречны. Мы не хотим обсуждать здесь все
возможные  проблемы.  Вместо этого по ходу всей книги мы помогаем
вам   решать   многие   проблемы   конфигурирования,  обучая  вас
обнаруживать  и  решать  проблемы  самостоятельно.  В  Главе 1 мы
детально  обсуждали  эту  философию.  В  Главе  4  мы даем советы
относительно решения многих из типовых проблем конфигурирования.</p>



<p><a href="lig-3.html"> След. </a> Глава, <a href="lig-1.html"> Пред. </a> Глава</p><p>Содержимое <a href="lig.html#toc2">этой главы</a>,
 Главное <a href="lig.html#toc">оглавление</a></p>
<p><a href="lig.html"> Начало </a> документа,
 <a href="lig-2.html#0"> Начало этой главы</a></p>