<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>Часто задаваемые вопросы по KDE: Инструкции по установке</TITLE>
<META HTTP-EQUIV="content-type" CONTENT="text/html; charset=koi8-r">
<META NAME="keywords" CONTENT="KDE FAQ Russian translation Dmitry Mozzherin Часто задаваемые вопросы перевод русский Дмитрий Мозжерин">
<META NAME="description" CONTENT="KDE FAQ , Russian translation made by Dmitry Mozzherin">
</HEAD>
<BODY BGCOLOR="#ffffff" LINK="#aa0000" TEXT="#000000" > 
<?php include("/home/maxcom/linux_html/books/head.php3") ?>
<FONT FACE="Helvetica">
<A HREF="http://www.kde.org/"><IMG SRC="http://books.gnu.technology/books/kde/general/faq/logotp3.gif" BORDER="0" ALT="The K Desktop Environment"></A>
<HR WIDTH="100%" SIZE=2 ALIGN="CENTER" NOSHADE>

 
<P ALIGN="RIGHT">

<A HREF="index-5.html"> Вперед </A>
<A HREF="index-3.html"> Назад </A>
<A HREF="index.html#toc4"> Содержание </A>
</P>
<H3><A NAME="s4">4. Инструкции по установке</A></H3>

<P>Здесь приведены инструкции по установке рабочей среды KDE версии 1.0 Пожалуйста,
прочитайте их внимательно и попытайтесь разобраться сами с возникающими
проблемами. Если, тем не менее, вы нуждаетесь в посторонней помощи --
подпишитесь на 
<A HREF="http://www.kde.org/contact.html">списки рассылки</A> KDE (смотрите инструкции на web-странице по
подписке на списки рассылки KDE)
<P>
<P>
<H3><A NAME="ss4.1">4.1 Для тех, кому хочется попробовать KDE</A>
</H3>

<P>Итак, до вас дошли слухи. Или вы увидели скриншоты. И теперь вам очень
хочется самим попробовать, что такое KDE. Но вы абсолютно не
представляете себе, что делается в этих альтернативных операционных
системах. Не волнуйтесь, вам просто придется немного (м-да, на самом деле --
много) почитать, вот и все!
<P>KDE не запускается под Windows 95/98/NT или OS/2 (пока). Для того, чтобы
запустить KDE, вам нужна система Unix. Пожалуйста, для получения дальнейшей
информации посмотрите  
<A HREF="index-2.html#platform">"На каких платформах может работать KDE?"</A>.
<P>К примеру, вы решили поставить Linux. Вы можете либо взять его из Интернета,
либо купить CD, которой содержит выбранный вами дистрибутив. Вам могут 
пригодиться следующие ссылки:
<P>
<UL>
<LI> 
<A HREF="http://www.control-escape.com/">Control-Escape:  Альтернативное программное обеспечение. Справка по Linux</A> </LI>
<LI> 
<A HREF="http://www.linux.org/index.html">Домашняя страница Linux на Linux Online</A></LI>
<LI> 
<A HREF="http://searchlinux.com/">Поиск в Linux</A></LI>
<LI> 
<A HREF="http://www.cheek.com/linux/kb/">База Знания по Linux</A></LI>
<LI> Группы в новостях, как, например, comp.os.linux.*</LI>
</UL>
<P>Для того, чтобы установить KDE на Linux-систему вам сначала нужно настроить
X Window. X является фактическим стандартом на графический интерфейс с
пользователем под Unix. Вам могут пригодиться  следующие
страницы: 
<P>
<UL>
<LI> 
<A HREF="http://www.x.org/">Система X Window</A></LI>
<LI> 
<A HREF="http://www.xfree86.org/">XFree86(TM): Домашняя страница</A></LI>
<LI> Группы в новостях, такие как comp.os.linux.x and comp.windows.x.*.</LI>
</UL>
    
<P>И вот, наконец вы готовы начать установку KDE. Пожалуйста, начните читать 
следующий раздел. Для того, чтобы получить информацию где взять KDE,
смотрите 
<A HREF="index-3.html#where-to-get-KDE">"Где мне взять KDE?"</A>. Наконец,
если у вас возникли проблемы любого рода при установке KDE -- не стесняйтесь
задавать вопросы в 
<A HREF="index-16.html#KDE-mailing-lists">списках рассылки</A> и 
<A HREF="index-16.html#KDE-newsgroups">группах новостей</A> KDE. Но имейте в виду: нет слишком глупого вопроса, чтоб его не
задать, но есть слишком глупые вопросы, чтоб на них отвечать, особенно, если
они уже рассмотрены в этих ЧЗВ.
<P>Удачи вам и удовольствия в работе с KDE!
<P>
<P>
<H3><A NAME="ss4.2">4.2 Имеющиеся форматы пакетов</A>
</H3>

<P>Команда KDE предоставляет 6 различных вариантов пакетов: исходные коды и
бинарные файлы в RPM, .tgz и Debian-пакетах. Сначала появляются .tgz файлы с
исходными текстами, затем, через некоторое время возникают все остальные. С
недавнего времени также появились бинарные и текстовые файлы в формате tar.bz2.
Для получения дальнейшей информации, пожалуйста, прочитайте 
<A HREF="index-4.html#bzip2">"Как мне распаковать tar-архивы с расширением 'bz2'?"</A>. Кроме того,
появились пакеты для Solaris 2.6 и 7.
<P>Процесс установки зависит от того, какой формат пакетов вы выбрали. После
установки вам придется выполнить кое-какие дополнительные процедуры, которые
одинаковы для всех вариантов пакетов. Заметьте, что если вы новичок в Unix и
используете систему, основанную на RPM-пакетах, вам, возможно, лучше всего
воспользоваться бинарными RPM-пакетами, имеющимися в вашем
дистрибутиве. По крайней мере Caldera, Delix и SuSE будут иметь
бинарные файлы KDE на их FTP-серверах. Если вы нуждаетесь в особых
параметрах настройки (например, если вы имеете теневые пароли и вы хотите
использовать хранители экрана), вам лучше всего использовать пакеты с
исходным текстом и компилировать KDE самим.&nbsp; Для дистрибутивов, которые
не предлагают официальные RPM-пакеты KDE, эти файлы можно будет взять
по адресу 
<A HREF="ftp://ftp.kde.org/pub/kde/stable/1.0/contrib/distribution">contrib</A>
на сервере ftp.kde.org, как только они будут готовы.
<A HREF="mailto:bill.mote@bigfoot.com">Bill Mote</A> сделал страницу
"KDE 1.1 -- установка с помощью RPM".  Посмотрите ее на 
<A HREF="http://home.fuse.net/bmote/kde.htm">http://home.fuse.net/bmote/kde.htm</A>.
<P>
<P>
<H3><A NAME="Prerequisites"></A> <A NAME="ss4.3">4.3 Что нужно </A>
</H3>

<P>Для KDE 1.0 вам будет нужна библиотека Qt версии 1.33 или выше, а для KDE
1.1 потребуется версия 1.42 или выше. Тем не менее, пока не берите Qt 2.0
или выше. Вам также понадобятся header-файлы, если вы 
собираетесь компилировать KDE сами. Они доступны бесплатно по адресу
<A HREF="http://www.troll.no/dl">http://www.troll.no/dl</A>.
Вам также будет нужна libgr, которая включена в большинство
дистрибутивов. Пожалуйста, убедитесь, что ваше локальное 
loopback-устройство настроено правильно.
<P>
<H3><A NAME="ss4.4">4.4 Описание пакетов</A>
</H3>

<P>
<P>Базовый дистрибутив сейчас состоит из одиннадцати пакетов. Некоторые их них необходимы,
другие необязательны. Каждый пакет доступен в любом из перечисленных
ранее форматов. 
<P>
<UL>
<LI>kdesupport  <I>(РЕКОМЕНДУЕМ)</I><P>
<P>Этот пакет содержит библиотеки поддержки, которые не были написаны как часть
проекта KDE, но, тем не менее, необходимы. Если вы уже имеете эти библиотеки
(libgif, libjpeg, libmime, libuu, libgdbm), причем требуемых версий, вы
можете не устанавливать этот пакет. Если вы не уверены -- лучше его
установить. Заметьте, что для Debian-пакетов, этот пакет -- обязателен. 
<P>
</LI>
<LI>kdelibs     <I>(ОБЯЗАТЕЛЕН)</I><P>
<P>
<P>
<P>Этот пакет содержит общие библиотеки, которые необходимы для всех приложений
KDE.
<P>
</LI>
<LI>kdebase     <I>(ОБЯЗАТЕЛЕН)</I><P>
<P>Этот пакет содержит базовые приложения, которые формируют сердцевину KDE.
Сюда входят менеджер окон, эмулятор терминала, центр управления,
файл-менеджер и панель.
<P>
</LI>
<LI>kdegames    <I>(НЕОБЯЗАТЕЛЕН)</I><P>
<P>Различные игры, такие как махджонг, змея, астероиды и тетрис. 
<P>
</LI>
<LI>kdegraphics <I>(НЕОБЯЗАТЕЛЕН)</I><P>
<P>Различные программы, относящиеся к графике, такие как просмотрщик
postcript-файлов, просмотрщик dvi-файлов, приложение для рисования.
<P>
</LI>
<LI>kdeutils    <I>(НЕОБЯЗАТЕЛЕН)</I><P>
<P>Различные утилиты для рабочего стола, такие как калькулятор, редактор и
другие полезные приложения.
<P>
</LI>
<LI>kdemultimedia       <I>(НЕОБЯЗАТЕЛЕН)</I><P>
<P>Мультимедийные приложения, такие как CD-проигрыватель и миксер.
<P>
</LI>
<LI>kdenetwork  <I>(НЕОБЯЗАТЕЛЕН)</I><P>
<P>Приложения для Интернета. На данный момент пакет содержит программу электронной
почты, приложение для чтения новостей и некоторые другие приложения для
сети. 
<P>
</LI>
<LI>kdeadmin    <I>(НЕОБЯЗАТЕЛЕН)</I><P>
<P>Приложения для системного администрирования. На данный момент пакет содержит
менеджер пользователей и редактор уровней выполнения (runlevel editor) 
системы V.
<P>
</LI>
<LI> kdetoys <I>&lt;НЕОБЯЗАТЕЛЕН)</I><P>Маленькие приятные приложения 
<P>
</LI>
<LI>korganizer <I>(НЕОБЯЗАТЕЛЕН)</I><P>
<P>Без организатора чего-то в рабочей среде не хватает. Правда?
<P>
</LI>
</UL>
<P>kdesupport (если нужен) должен быть установлен до остальных пакетов.
Следующим должен идти kdelibs. Другие пакеты могут быть установлены в
произвольном порядке.
<P>
<H3><A NAME="ss4.5">4.5 Инструкции по установке для пакетов различных форматов</A>
</H3>

<P>Пожалуйста, не забудьте прочитать файлы README и INSTALL, если они
присутствуют.
<H4>Установка Debian-пакетов</H4>

<P>
<P>Debian-пакеты устанавливаются  в соответствии с грядущим FHS
(стандартом иерархии файлов).
<P><I>Для установки Debian-пакетов:</I>
<P>
<UL>
<LI>перейдите в режим супер-пользователя</LI>
<LI>запустите: dpkg -i &lt;packagename&gt;.deb</LI>
</UL>
<P>для всех и каждого из пакетов, которые вы ходите установить.
<P>
<H4>Установка пакетов RPM</H4>

<P>RPM-пакеты копируют файлы в /opt/kde.
<P><I>Для установки бинарных RPM:</I>
<UL>
<LI>перейдите в режим супер-пользователя</LI>
<LI>выполните: rpm -i &lt;packagename&gt;.rpm</LI>
</UL>
<P><I>Для создания бинарного RPM из rpm с исходным текстом и для установки
первого сделайте следующее:</I>
<P>
<UL>
<LI> перейдите в режим супер-пользователя</LI>
<LI> выполните: rpm -i &lt;packagename&gt;.src.rpm</LI>
<LI> cd /usr/src/redhat/SPECS</LI>
<LI> rpm -bb &lt;packagename&gt;.spec</LI>
<LI> cd ../RPMS/i386 (или другое, в зависимости от используемой вами
архитектуры)</LI>
<LI> rpm -i &lt;packagename&gt;.i386.rpm</LI>
</UL>
<P>
<H4>Установка с использованием исходного кода в tar.gz-архивах</H4>

<P>
<P>Пакет .tgz с исходными текстами устанавливается в /usr/local/kde по
умолчанию. Вы можете изменить эту настройку, используя параметр
<CODE>--prefix</CODE> в скрипте настройки.
<P>
<UL>
<LI> Распакуйте пакеты набрав: <CODE>tar xvzf &lt;packagename&gt;.tar.gz</CODE></LI>
<LI> Перейдите в каталог, созданный пакетом: <CODE>cd &lt;packagename&gt;</CODE></LI>
<LI> Запустите: <CODE>./configure</CODE>

<P>Некоторые пакеты (стоит особенно отметить kdebase) имеют специальные
параметры настройки, которые могут пригодиться вам при установке. Для того,
чтобы посмотреть эти параметры, запустите: <CODE>./configure --help</CODE>.
<P>
</LI>
<LI>Скомпилируйте пакет: <CODE>make</CODE>
</LI>
<LI>Установите пакет: <CODE>su -c "make install"</CODE> (если вы уже не в режиме
супер-пользователя). Если вы уже супер-пользователь -- просто наберите
<CODE>"make install"</CODE> (без кавычек). </LI>
</UL>
<P>
<H4>Установка бинарных .tar.gz-файлов</H4>

<P>Бинарные пакеты .tar.gz устанавливаются в /opt/kde.
<P>
<UL>
<LI> перейдите в режим супер-пользователя</LI>
<LI> <CODE>cd /</CODE> </LI>
<LI> <CODE>tar xvzf &lt;packagename&gt;.tar.gz</CODE> </LI>
</UL>
<P>
<H3><A NAME="ss4.6">4.6 Процедуры после установки</A>
</H3>

<P>
<P>Прежде всего, убедитесь, что вы добавили каталог с установленным KDE 
(например, /opt/kde/bin) в ваш <CODE>PATH</CODE>, а каталог, с установленными
библиотеками KDE, в ваш <CODE>LD_LIBRARY_PATH</CODE> (необходимо только для систем,
которые не поддерживают rpath; на Linux с ELF все должно работать без этого).  
Эта переменная окружения может в разных системах называться по-разному, 
например, в IRIX она называется <CODE>SHLIB_PATH</CODE>. Затем установите переменную
окружения <CODE>KDEDIR</CODE> как корень каталога вашего дерева файлов KDE, например,
/opt/kde.
<P>Пожалуйста, учтите, что это опрометчиво, бездумно изменять переменную
<CODE>LD_LIBRARY_PATH</CODE>. В большинстве случаев это может принести больше вреда, чем
пользы. 
<A HREF="mailto:barr@cis.ohio-state.edu">Дэйв Барр</A> объясняет, чем плохо
изменение
<CODE>LD_LIBRARY_PATH</CODE> на web-странице 
<A HREF="http://www.cis.ohio-state.edu/~barr/ldpath.html">http://www.cis.ohio-state.edu/~barr/ldpath.html</A>.
<P>Даже если вы можете использовать большинство приложений KDE просто
запуская их, в полной мере оценить весь потенциал KDE вы сможете только
используя менеджер окон KWM и его подсобные приложения.
<P>Для того, чтобы сделать это проще для вас, мы прикладываем простой 
скрипт,  называемый <CODE>startkde</CODE>, который устанавливается в
<CODE>$KDEDIR/bin</CODE>  и, в результате, в ваш путь.
<P>Отредактируйте файл <CODE>.xinitrc</CODE> в вашем домашнем каталоге (сделайте сначала
резервную копию этого файла!), удалите все, что напоминает вызов менеджера
окон из него и добавьте вместо этого строку <CODE>startkde</CODE>. Перезапустите X.
Если вы используете kdm/xdm, вы должны будете
отредактировать файл <CODE>.xsession</CODE> вместо <CODE>.xinitrc</CODE>. Другое примечание: если ваш
домашний каталог не содержит <CODE>.xsession</CODE> или <CODE>.xinitrc</CODE>, просто создайте его с
всего одной строкой "startkde" (без кавычек!). Примечание: некоторые системы
(например, RedHat Linux) использует вместо этого .Xclients.
<P>
<P>В результате вы должны увидеть ваш новенький рабочий стол KDE. Теперь вы
можете начать исследование удивительного мира KDE. Если вы хотите сначала
почитать документацию, очень рекомендуем  посмотреть руководство
<A HREF="http://www.kde.org/documentation/ru/general/quickstart/index.html">Введение в KDE</A>. Также, каждое приложение содержит интерактивную
справку, которая доступна через меню справки.
<P>
<H3><A NAME="ss4.7">4.7 Микро-КАКСДЕЛАТЬ: Компилирование KDE 1.1 на SGI Irix 6.x</A>
</H3>

<P>
<A HREF="mailto:sterritt@mrj.com">Крис Стерритт</A> написал следующее
(подредактировано для большей наглядности) в comp.windows.x.kde.
<P>
<OL>
<LI> Установите Qt 1.42 или выше.</LI>
<LI> Я устанавливаю KDE для себя (не как root), так что я 
задаю переменную окружения KDEDIR не как /usr/local, или что-либо
другое, что было по умолчанию, а как другой каталог. Я буду
использовать это ниже, но вам,возможно, это не нужно. Кроме того, SGI имеет
библиотеки 'jpeg' и 'png', но они либо устарели, либо что-то в них сломано.
Так что вам придется отыскать исходные тексты libpng и libz (jpeg
поставляется с kdesupport); я их обнаружил в RPM-пакетах с исходными
текстами в одном из зеркал FTP RedHat.</LI>
<LI> Возьмите egcs 1.1.1 или выше и скомпилируйте с включенной поддержкой
'-fsquangle'. Это нужно, так как ассемблер SGI не может справиться с
громадными именами объектов, создаваемыми нормальным g++, и
<CODE>gas</CODE>, похоже, не
работает в SGI. Вам также будет нужно откомпилировать библиотеки gcс,
используя этот бинарный файл. Убедитесь, что ваш PATH не содержит другой версии
gcc (если она была установлена до этого). Затем, если я делаю <CODE>g++ -v</CODE>
на выходе получается: 
<BLOCKQUOTE><CODE>
<PRE>
gcc version egcs-2.91.60 19981201 (egcs-1.1.1 release)
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Сделайте
<BLOCKQUOTE><CODE>
<PRE>
setenv LDFLAGS " "
</PRE>
</CODE></BLOCKQUOTE>

поскольку скрипты 'configure' всегда настаивают на использовании
'g++ -s' при компилировании проверочной программы, что никогда не
срабатывает на SGI-машинах.</LI>
<LI> Распакуйте 'kdesupport' и войдите в его каталог.  Запустите его
<CODE>configure</CODE>
c "--prefix" если это вам нужно (если вы не root):
<BLOCKQUOTE><CODE>
<PRE>
./configure --prefix=$KDEDIR
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Запустите скрипт (который я привожу ниже) следующим образом:
<BLOCKQUOTE><CODE>
<PRE>
find . -name Makefile -exec ../FixMakesSq {} \;
</PRE>
</CODE></BLOCKQUOTE>

Это исправляет все строки при компилировании так, что: 
<UL>
<LI> CXXFLAGS имеет '-fsquangle'.</LI>
<LI> все 'реплицированные' библиотеки (jpeg and png) будут подаваться
с полным путем к ним, так что они не будут связаны с "родными" библиотеками
SGI.</LI>
</UL>

Вот скрипт FixMakesSq:
<BLOCKQUOTE><CODE>
<HR>
<PRE>
#!/bin/perl -ni.bak
if (/cflags\s*=(.*)$/i)
{
        print "CFLAGS =  -fsquangle $1\n";
}
elsif (/cxxflags\s*=(.*)$/i)
{
        print "CXXFLAGS =  -fsquangle $1\n";
}
elsif ((/-lpng/) || (/-ljpeg/))
{
        if (/^(.*)-lpng(.*)$/)
        {
                $b4 = $1;
                $af = $2;
                print "$b4 /path/to/KDE/libs/libpng.a $af\n";
        }
        if (/^(.*)-ljpeg(.*)$/)
        {
                $b4 = $1;
                $af = $2;
                print "$b4 /path/to/KDE/libs/libjpeg.a $af\n";
        }
}
else
{
        print;
}
</PRE>
<HR>
</CODE></BLOCKQUOTE>
</LI>
<LI> Сделайте:
<BLOCKQUOTE><CODE>
<PRE>
make
make install
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Пройдите в каталог с исходным текстом 'libz', сделайте:
<BLOCKQUOTE><CODE>
<PRE>
./configure --prefix=$KDEDIR
make
make install
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Пройдите в каталог с исходным текстом 'libpng', сделайте:
<BLOCKQUOTE><CODE>
<PRE>
./configure --prefix=$KDEDIR
make
make install
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Распакуйте 'kdelibs' и войдете в его каталог. Добавьте аргумент
'--enable-new-stuff' к ./configure: 
<BLOCKQUOTE><CODE>
<PRE>
./configure --prefix=$KDEDIR --enable-new-stuff
find . -name Makefile -exec ../FixMakesSq {} \;
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Найдите 'kprocctrl.cpp', и исправьте Makefile в этом каталоге. 
Добавьте '-D_LANGUAGE_C_PLUS_PLUS' к строке CXXFLAGS.  Это даст
правильное определение для сигнальных функций (имеет аргумент 'int).
<BLOCKQUOTE><CODE>
<PRE>
make
make install
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Распакуйте 'kdebase' и войдите в его каталог.  Сделайте:
<BLOCKQUOTE><CODE>
<PRE>
./configure --prefix=$KDEDIR
find . -name Makefile -exec ../FixMakesSq {} \;
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Исправьте 'memory_sgi.cpp' (сделайте find в каталоге 'kdebase').  
Я просто сделал для всей функции 
#ifdef ... она не компилируется на моей машине и я все-равно никогда не открываю эту
часть KPanel :-) 
<BLOCKQUOTE><CODE>
<PRE>
make
make install
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Распакуйте 'kdeutils'.
<BLOCKQUOTE><CODE>
<PRE>
./configure --prefix=$KDEDIR
find . -name Makefile -exec ../FixMakesSq {} \;
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Найдите 'kcalc_core.cpp' и исправьте его Makefile аналогично тому,
как вы это сделали до этого для
'kprocctrl.cpp'.
<BLOCKQUOTE><CODE>
<PRE>
make
make install
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Распакуйте 'kdegames', 'kdegraphics', и 'kdetoys' и для каждого
войдите в его каталог и сделайте:
<BLOCKQUOTE><CODE>
<PRE>
./configure --prefix=$KDEDIR
find . -name Makefile -exec ../FixMakesSq {} \;
make
make install
</PRE>
</CODE></BLOCKQUOTE>
</LI>
<LI> Следующий шаг необязателен. Найдите, где находится каталог knotes.
Пройдите туда, сделайте 'make clean', затем измените CXXFLAGS в его Makefile.
Строка CXXFLAGS имеет '-O2', замените это на '-g'.  Затем сделайте 'make'
и 'make install'.  Я это сделал потому, что на моей машине knotes рушился
через несколько минут работы в нем. Тем не менее, когда я перекомпилировал 
его c '-g' (то есть с поддержкой отладки) вместо '-O2'
(оптимизация) все хорошо заработало.  Разберитесь в чем дело :-).</LI>
</OL>
<P>Вот и все, теперь вы сможете пользоваться KDE.
<P>
<H3><A NAME="ss4.8">4.8 Установка RPM-файлов с SuSe YaST выводит из строя базу данных rpm</A>
Что я могу сделать?</H3>

<P>Если вы получили на выходе
<P>
<BLOCKQUOTE><CODE>
<PRE>
   error -2 reading header: Unknown error
</PRE>
</CODE></BLOCKQUOTE>
<P>Вы должны обновить rpm:
<P>
<BLOCKQUOTE><CODE>
<PRE>
rpm -U ftp://ftp.suse.com/pub/suse_update/suse51/rpm/rpm.rpm
</PRE>
</CODE></BLOCKQUOTE>
<P>и вы также должны обновить YaST
<P>
<BLOCKQUOTE><CODE>
<PRE>
rpm -U ftp://ftp.suse.com/pub/suse_update/suse51/a1/yast.rpm
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P> 
Пакеты, которые были созданы с использованием
rpm-2.4.12 не могут быть установлены некоторыми старыми версиями rpm.
В основном это случается с пользователями дистрибутива Linux SuSe. 
Их дистрибутив версии 5.0 и выше поставляется с rpm-2.4.1   
<P>Вы можете узнать версию вашего rpm используя:
<P>
<BLOCKQUOTE><CODE>
<PRE>
rpm -qi rpm
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>
<H3><A NAME="ss4.9">4.9 Должен ли я удалить старую версию xyz перед установкой новой?</A>
</H3>

<P>
<P>В принципе это необязательно. RPM и DEB-пакеты должны быть способны сами
разбираться во всех зависимостях.
<P> 
<P>Если вы компилируете исходные тексты сами, вам лучше убедиться, что вы
компилируете пакеты KDE одной и той же версии. И если вы
устанавливаете новую версию, убедитесь, что прежде всего вы компилируете и
устанавливаете kdesupport, потом kdelibs, затем kdebase.  
<P>
<P>Старайтесь избегать установления двух (или более,
естественно) версий KDE параллельно. Так может случиться, если вы задали
для разных версий разные корневые каталоги. Результаты
могут быть непредсказуемы. То же самое справедливо, если вы имеете разные версии
Qt, установленные в одно и тоже время. Это может легко случиться, если вы уже
имели старую версию Qt, установленную с дистрибутивом Linux.
<P>
<H3><A NAME="how-to-start-kde"></A> <A NAME="ss4.10">4.10 Как мне запустить KDE? </A>
</H3>

<P>
<P>Наиболее простой и удобный метод запуска KDE -- это использование скрипта
<CODE>startkde</CODE>.
Вам нужно только добавить строку
<BLOCKQUOTE><CODE>
<PRE>
startkde
</PRE>
</CODE></BLOCKQUOTE>

в конец вашего файла <CODE>.xsession</CODE> (или в ваш файл <CODE>.xinitrc</CODE>,
если вы не используете kdm или xdm). Пожалуйста, удалите также строки,
которые запускали ваш предыдущий менеджер окон. Если в вашем домашнем
каталоге нет файлов <CODE>.xsession</CODE> или <CODE>.xinitrc</CODE>, создайте их и добавьте всего
одну строку -- "startkde" (без кавычек!).
<P>
<H3><A NAME="ss4.11">4.11 Каждый раз, когда я запускаю KDE он ругается по поводу "теневых паролей". Почему?</A>
</H3>

<P>Если ваша система использует теневые пароли, хранитель экрана может
запускаться правильным образом только с установленным битом <CODE>suid</CODE>. Этот бит
дает хранителю экрана привилегии супер-пользователя <CODE>root</CODE>, которые нужны для
доступа к теневым паролям. (Помните: хранители экрана могут быть настроены
на блокирование машины, которое может быть снято только введением пароля.)
<P>Для установки suid-бита для хранителей экрана, вы (или ваш системный
администратор) должны выполнить следующее, зарегистрировавшись как <CODE>root</CODE>:
<P>
<BLOCKQUOTE><CODE>
<PRE>
chown root $KDEDIR/bin/*.kss
chmod u+s $KDEDIR/bin/*.kss
</PRE>
</CODE></BLOCKQUOTE>
<P>Или, при компилировании KDE из исходных текстов, вы можете использовать
<P>
<BLOCKQUOTE><CODE>
<PRE>
./configure --with-shadow
</PRE>
</CODE></BLOCKQUOTE>
<P>при настройке kdebase. В результате, suid-бит установится автоматически
во время <CODE>make install</CODE>.
<P>
<H3><A NAME="ss4.12">4.12 Возможно ли установить KDE в каталог пользователя?</A>
</H3>

<P>Вы можете установить KDE в любой каталог. Что вы должны для этого сделать --
зависит от вида пакета, который вы используете:
<P>
<P><B>Пакеты с исходными текстами</B>
<P>Для настройки используйте команду типа
<P>
<BLOCKQUOTE><CODE>
<PRE>
configure --prefix=/users/myhome/kde; make; make install
</PRE>
</CODE></BLOCKQUOTE>
<P>для установки в каталог<CODE>/users/myhome/kde</CODE>. 
<P>
<P>После того, как вы установили пакеты в каталог пользователя, вы должны
добавить следующее к вашим файлам инициации. Заметьте, что
устанавливать  <CODE>LD_LIBRARY_PATH</CODE> необязательно, лучше оставить его как
есть.
<P>
<P>Для csh или tcsh:
<BLOCKQUOTE><CODE>
<PRE>
setenv KDEDIR /users/myhome/kde

if ( $?LD_LIBRARY_PATH ) then
   setenv LD_LIBRARY_PATH $KDEDIR/lib:$LD_LIBRARY_PATH
else
   setenv LD_LIBRARY_PATH $KDEDIR/lib
endif

if ( ! $?LIBRARY_PATH ) then
   setenv LIBRARY_PATH $LD_LIBRARY_PATH
endif  
</PRE>
</CODE></BLOCKQUOTE>
<P>Для bash, пожалуйста, используйте:
<BLOCKQUOTE><CODE>
<PRE>
KDEDIR=/users/myhome/kde
PATH=$KDEDIR/bin:$PATH
LD_LIBRARY_PATH=$KDEDIR/lib:$LD_LIBRARY_PATH
LIBRARY_PATH=$LD_LIBRARY_PATH
export KDEDIR PATH LD_LIBRARY_PATH LIBRARY_PATH
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P><B>RPM-пакеты</B>
<P><CODE>rpm</CODE> позволяет вам использовать параметр <CODE>-prefix</CODE> для выбора
каталога для установки, например:
<P>
<BLOCKQUOTE><CODE>
<PRE>
rpm -i -prefix=/users/myhome/kde package.rpm
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P><B>Возможные проблемы</B>
<P>KDE будет запускаться из каталога пользователя. Возникнут проблемы с
пакетами, которые требуют SUID root, т.е. программами в пакете kdeadmin, 
но они и так не предназначены для запуска обычными пользователями, так что
здесь не о чем беспокоиться.
<P>Тем не менее, в системах, использующих теневые пароли, хранители экрана
должны запускаться с использованием <CODE>SUID root</CODE>, так как это нужно для доступа к
паролям при разблокировании экрана. Этот параметр не будет работать.
<P>
<H3><A NAME="ss4.13">4.13 <CODE>startkde</CODE> не может загрузить KDE, сообщая "can not connect to X server" ("невозможно соединиться с X-сервером). В чем дело?</A>
</H3>

<P>
<P>Возможно, вы пытались запустить X-сервер со <CODE>startkde</CODE>. X-сервер
запускается командой <CODE>startx</CODE>. <CODE>startkde</CODE> -- это скрипт, который
должен запускаться в ваших файлах
<CODE>.xinitrc</CODE> или <CODE>.xsession</CODE> для активации менеджера окон
и необходимых для KDE демонов сервера. Смотрите также:
<A HREF="index-4.html#how-to-start-kde">Как мне запустить KDE?</A>.
<P>
<H3><A NAME="ss4.14">4.14 При установке пакетов Debian с dpkg появляется "giflib2 is missing" (отсутствует giflib2)</A>
</H3>

<P>Иногда, при установке Debian-пакетов KDE, dpkg сообщает 
"dependency problems: giflib2 is missing". Поскольку вы не используете в
данном случае giflib2, решение очень простое:
<P>
<BLOCKQUOTE><CODE>
<PRE>
dpkg -i --ignore-depends=giflib2 package.deb
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H3><A NAME="ss4.15">4.15 KDE на AIX?</A>
</H3>

<P>Если у вас возникли проблемы при компилировании KDE для AIX -- посмотрите
страницу Стефана Вестерфельда 
<A HREF="http://space.twc.de/~stefan/kde/">KDE на AIX</A>,
которая содержит много полезных советов для этого "особого случая" в Unix.
<P>
<H3><A NAME="ss4.16">4.16 При установке пакетов для RedHat возникает: "libncurses.so.3.0 is needed" (требуется libncurses.so.3.0)</A>
</H3>

<P>Если на вашем RedHat CD нет соответствующего rpm, поищите его на FTP-сайте
RedHat или его зеркалах. Заметьте, что libncurses-3 и -4 могут
сосуществовать, так что вы можете использовать просто rpm -i. 
<P>Или вы можете попробовать следующее:
<BLOCKQUOTE><CODE>
<PRE>
cd /usr/lib
ln -s libncurses.so.4 libncurses.so.3
ldconfig
rpm -i --nodeps kdebase...
</PRE>
</CODE></BLOCKQUOTE>
<P>Поскольку <CODE>libncurses-3</CODE> и <CODE>-4</CODE> -- 100% совместимы как на бинарном уровне, так и 
на уровне исходных текстов, установка двух версий -- это просто трата места
на диске.
<P>
<H3><A NAME="ss4.17">4.17 KDE на портативном компьютере?</A>
</H3>

<P>Если смогли заставить X работать, у вас не должно быть проблем с
установкой KDE. Кроме того, следующие ссылки могут оказаться полезными для
вас: 
<P>
<UL>
<LI>
<A HREF="http://www.cs.utexas.edu/users/kharker/linux-laptop/">http://www.cs.utexas.edu/users/kharker/linux-laptop/</A></LI>
<LI>
<A HREF="http://www.yy.cs.keio.ac.jp/~sanpei/how2800x600.html">http://www.yy.cs.keio.ac.jp/~sanpei/how2800x600.html</A></LI>
</UL>
<P>Для портативных компьютеров с экзотическим разрешением экрана, типа 1024x600, вы можете
попробовать отредактировать файл XF86Config  (в случае RedHat он находится в
каталоге /etc/X11).  Если у вас есть некоторый опыт работы с этим файлом, вы
должны знать где находятся строки с различными 
"Modeline". Вам только нужно будет добавить 
Modeline для вашего разрешения.  К сожалению, формат строк 
Modeline довольно непонятен для непосвященных; т.е. вам придется много
почитать. Один из источников информации может быть
<A HREF="http://sunsite.unc.edu/LDP/HOWTO/XFree86-Video-Timings-HOWTO.html">XFree86 Video Timings HOWTO</A>.
<P>
<H3><A NAME="ss4.18">4.18 Я установил KDE, но теперь мне не нравится что он находится в каталоге заданном по умолчанию. Как я могу его переместить, ничего при этом не повредив?</A>
</H3>

<P>Предположим, что ваш каталог по умолчанию --  /opt/kde и вы хотите
переместить KDE в /usr/local/kde.  Вот как это делается:
<OL>
<LI> зарегистрируйтесь как супер-пользователь, если вы этого все-еще не
сделали</LI>
<LI> <CODE>mv /opt/kde /usr/local/kde</CODE> </LI>
<LI> <CODE>ln -s /usr/local/kde /opt/kde </CODE> </LI>
</OL>
<P>Таким образом, все ваши KDE-файлы будут перемещены физически в каталог 
/usr/local/kde, но, тем не менее, останутся доступны в
/opt/kde.
<P>
<H3><A NAME="ss4.19">4.19 Куда подевался скрипт <CODE>configure</CODE> из снапшота?</A>
</H3>

<P>Может быть, он уже был отработан, но, на случай, если еще нет,
вот решение:
<BLOCKQUOTE><CODE>
<PRE>
make -f admin/Makefile.common cvs
</PRE>
</CODE></BLOCKQUOTE>
 
<P>
<H3><A NAME="bzip2"></A> <A NAME="ss4.20">4.20 Как мне разархивировать tar-архив с расширением "bz2"?</A>
</H3>

<P>Прежде всего, вам нужно найти пакет bzip2.  Найдите его на вашем любимом
FTP-сайте, если у вас его еще нет. Затем, для того чтобы посмотреть
содержание, сделайте следующее:
<BLOCKQUOTE><CODE>
<PRE>
$ bzip2 -cd files.tar.bz2 | tar tvf -
</PRE>
</CODE></BLOCKQUOTE>
 
<P>Для разархивирования сделайте следующее:
<BLOCKQUOTE><CODE>
<PRE>
$ bzip2 -cd files.tar.bz2 | tar xvf -
</PRE>
</CODE></BLOCKQUOTE>
<P>Конечно, вы можете также сделать и что-то вроде:
<BLOCKQUOTE><CODE>
<PRE>
"tar --use-compress-program bzip2 -xvf files.tar.bz2"
</PRE>
</CODE></BLOCKQUOTE>

Для дальнейшей информации, пожалуйста, используйте "man tar" или "man
bzip2". Также вы можете посмотреть <CODE>Bzip2 mini-HOWTO</CODE>.  Наконец, вот -- домашняя
страница Bzip2: 
<A HREF="http://www.muraroa.demon.co.uk/">http://www.muraroa.demon.co.uk/</A>.
<P>
<H3><A NAME="ss4.21">4.21 Какие файлы я могу удалить из моего каталога KDE? Могу я безопасно</A>
переместить все  *.h, *.c и *.o файлы?</H3>

<P>Нет никакой необходимости хранить .c и .o файлы, но .h файлы могут вам
понадобиться, так как они будут использоваться, если вы захотите
сами откомпилировать приложения KDE. Или, если вы захотите добавить заплаты к
исходным текстам программ вместо скачивания полного файла, тогда они тоже 
должны остаться.
<P>
<H3><A NAME="ss4.22">4.22 Потеряю ли я мои настройки при обновлении KDE до более новой версии? </A>
</H3>

<P>Нет, ваши настройки сохранятся, если вы, скажем, удалите ваши старые 
rpm-пакеты (<CODE>rpm -e &lt;Packagename&gt;.i386.rpm</CODE>).  Дело в том, что ваши
настройки KDE хранятся в папке "Desktop" в вашем домашнем каталоге, и в
каталоге .kde, в то время как само KDE в норме устанавливается в каталог,
доступный для всей системы, например, /opt/kde.
<P>Но, конечно, сделать резервные копии никогда не помешает. Кроме ваших
персональных файлов настройки неплохо также сделать резервные копии
$KDEDIR/share/config. 
<P>Если вы располагаете достаточным количеством свободного места, переместите
/opt/kde в /opt/ke10, а устанавливайте файлы в /opt/kde11.  Сделайте тоже
самое с  $HOME/.kde и, также, сделайте резервные копии 
$HOME/Desktop.  Сделайте символьные ссылки /opt/kde и $HOME/.kde, чтобы
получить правильные префиксы установки без изменения переменных окружения,
и, также, для переключения между kde1.0 и 1.1. Сделайте то же самое и с Qt.
<P>
<H3><A NAME="ss4.23">4.23 Компилирование kdebase выдает  "bin/sh: msgfmt: command not found" error! (bin/sh: msgfmt: команда не найдена -- ошибка!) </A>
</H3>

<P>Вам нужен GNU msgfmt, который является частью пакета GNU i18n 
'gettext'.  Вы сможете его найти на любом приличном зеркале GNU.
<P>
<H3><A NAME="ss4.24">4.24 Я пытаюсь скомпилировать KDE, используя gcc на Solaris 2.6, но продолжаю получать сообщения об ошибках.</A>
</H3>

<P>Похоже, что основная проблема -- это ассемблер установленный в Solaris.
Переключение на
egcs-1.1.1 исправит зависания компьютера, а gnu assembler (в 
"binutils-2.9.1") исправит проблемы с ассемблером.
<P>
<P>
<P ALIGN="RIGHT">

<A HREF="index-5.html"> Вперед </A>
<A HREF="index-3.html"> Назад </A>
<A HREF="index.html#toc4"> Содержание </A>
</P>
<CENTER>
<HR WIDTH="100%" SIZE=3 ALIGN=CENTER NOSHADE>
</CENTER>    
</FONT>

 
</BODY>
</HTML>
