<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>Руководство по KFM: Использование</TITLE>
<META HTTP-EQUIV="content-type" CONTENT="text/html; charset=koi8-r">
<META NAME="keywords" CONTENT="kfm KDE Alexander Izyurov translation Russian перевод Александр Изьюров русский">
<META NAME="description" CONTENT="Russian translation of KDE fail manager, kfm, performed by Alexander Izyurov">
</HEAD>
<BODY BGCOLOR="#ffffff" LINK="#aa0000" TEXT="#000000" > 
<?php include("/home/maxcom/linux_html/books/head.php3") ?>
<FONT FACE="Helvetica">
<A HREF="http://www.kde.org/"><IMG SRC="http://books.gnu.technology/books/kde/base/kfm/logotp3.gif" BORDER="0" ALT="The K Desktop Environment"></A>
<HR WIDTH="100%" SIZE=2 ALIGN="CENTER" NOSHADE>

 
<P ALIGN="RIGHT">

<A HREF="index-4.html"> Вперед </A>
<A HREF="index-2.html"> Назад </A>
<A HREF="index.html#toc3"> Содержание </A>
</P>
<H3><A NAME="s3">3. Использование</A></H3>

<P>
<P>
<H3><A NAME="ss3.1">3.1 Быстрые клавиши</A>
</H3>

<P>
<BLOCKQUOTE><CODE>
<PRE>
Назад                                             ALT + стрелка влево
Вперед                                            ALT + стрелка вправо
Вверх по дереву каталогов                         ALT + стрелка вверх
Открыть файл/каталог                              Return
Открыть контекстное меню для данного файла        ESC
От одной пиктограммы к другой                     Стрелки
Выделить/снять выделение                          Пробел
Быстрая прокрутка вверх                           Page Up
Быстрая прокрутка вниз                            Page Down
Прокрутка вправо (на WWW-страницах)               стрелка вправо
Прокрутка влево (на WWW-страницах)                стрелка влево
Прокрутка вверх (на WWW-страницах)                стрелка вверх
Прокрутка вниз (на WWW-страницах)                 стрелка вниз
Копирование выделенного файла в буфер обмена      CTRL + C
Вставка файлов из буфера обмена в текущий каталог CTRL + V
Выбор файлов по образцу                           CTRL + S
Открыть терминальное окно из текущего каталога    CTRL + T
Открыть новый адрес                               CTRL + L
Поиск файлов                                      CTRL + F
Закрыть окно                                      CTRL + W
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>
<H3><A NAME="ss3.2">3.2 Как установить новые типы данных</A>
</H3>

<P>
<P>
<H4>Что такое типы данных</H4>

<P>
<P>Файл содержит только биты и байты. Нужно знать, как интерпретировать их,
чтобы в них появился смысл. Обычный способ достижения этого -- посмотреть на
имя файла.
Если, например, оно оканчивается на <CODE>.gif</CODE> 
вы предполагаете, что это изображение в формате 
GIF. 
Именно это делают большинство графических оболочек пользователя.
KFM тоже так поступает, так как это очень быстро, но не очень удобно.
Если у имени файла нет расширения, неизвестно, какой тип данных содержится в
файле, и, соответственно, KFM не знает, какое приложение может обрабатывать 
эти данные.
Поэтому если KFM не может определить тип данных по расширению, он смотрит на
первые байты файла и извлекает информацию из своего магического файла.
Это называется "автоматическое магическое детектирование MIME-типов" и
работает вполне прилично.
Так что, если для типа данных есть сведения в магическом файле
<CODE>$KDEDIR/share/mimelnk/magic</CODE>, KFM догадается, что файл
<CODE>МояПодружка</CODE> содержит изображение.
<P>
<P>В KFM типы данных должны быть зарегистрированы. 
Ваш скромный помощник должен знать обычные расширения имен для каждого типа
данных, пиктограмму, краткое описание, возможно, приложение, 
запускаемое по умолчанию (подробнее об этом позже), и MIME-тип.
<P>
<H4>Что такое MIME-тип</H4>

<P>
<P>MIME-типы -- интернетовский стандарт. 
Этот стандарт определяет систему названий типов данных.
Название типа данных делится на две части.
Первая содержит род данных (изображение, видеозапись, звук, текст, ...), а
поскольку существуют разные виды текста (программа на C, текст на естественном
языке, ...) и разные форматы хранения изображений и т.п., вторая часть
указывает на конкретный формат.
Хороший пример -- <CODE>image/gif</CODE>. 
Первая часть сообщает, что это изображение, а вторая -- что оно в формате GIF.
<P>
<P>Если у вас есть сомнения по поводу какого-либо MIME-типа, загляните
в магический файл. Многие MIME-типы там уже зарегистрированы.
<P>
<P>Обычно этот раздел интересен только системным администраторам и разработчикам.
В правильно установленной KDE все уже сделано, но некоторые хотят знать,
как это все работает, поэтому продолжаем.
<P>
<P>Каталог <CODE>$KDEDIR/share/mimelnk</CODE> 
содержит много подкаталогов, соответствующих первой части названий
MIME-типов. Например, упомянутому <CODE>image/gif</CODE> соответствует файл 
<CODE>$KDEDIR/share/mimelnk/image/gif.kdelnk</CODE>.
Каждый конфигурационный файл имеет расширение <CODE>.kdelnk</CODE>.
Иногда KFM скрывает это расширение, чтобы не портить внешний вид.
<P>
<P>Рано или поздно вы обнаружите, что структура подкаталогов в общем каталоге
KDE такая же, как в в вашем каталоге <CODE>~/.kde</CODE>.
Как системный администратор собственной машины, вы, вероятно, будете обычно
редактировать общую конфигурацию, а если вы пользователь университетской
UNIX-системы, вам позволено редактировать только личную конфигурацию.
Все, что говорится здесь о каталоге <CODE>$KDEDIR</CODE>,
применимо и к <CODE>~/.kde</CODE>. 
Для того, чтобы редактировать общие конфигурационные файлы в
<CODE>$KDEDIR</CODE>,
вы должны быть суперпользователем, для редактирования личных настроек это,
конечно, не нужно. 
<P>
<P>
<H4>Подробности</H4>

<P>Конфигурационные файлы очень просты и, конечно, доступны для чтения человеком.
Можете взглянуть на пример:
<P>
<BLOCKQUOTE><CODE>
<PRE>
# KDE Config File
[KDE Desktop Entry]
Type=MimeType
MimeType=image/gif
Icon=image.xpm
Patterns=*.gif;*.GIF;
Comment=Gif images
Comment[de]=GIF Dokument
Comment[nl]=Gif afbeelding
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>
<P>Вам не обязательно понимать, что это значит, так как KFM предоставляет вам
графический интерфейс для редактирования настроек, что сильно упрощает жизнь.
Однако хакеры хотят все знать и во все влезать, так что приводим краткое
описание.
<P>
<P>
<P>Первая строка -- стандартный заголовок конфигурационного файла KDE.
Строка <CODE>Type</CODE> содержится в каждом конфигурационном файле KFM,
чтобы указать назначение этого файла.
Затем следуют название MIME-типа, пиктограмма, список шаблонов (разделенных 
<CODE>;</CODE> )
и комментарии на разных языках.
<P>
<P>Теперь хакеры могут быть свободны.
<P>
<H3><A NAME="ss3.3">3.3 Как установить новое приложение</A>
</H3>

<P>
<P>Каждое приложение KDE поставляется вместе с конфигурационными файлами,
так что у пользователя нет надобности их редактировать. 
Тем не менее, вам может потребоваться настроить существующие приложения
для работы в KDE. В этом уроке мы попробуем встроить XV в KDE.
<P>
<P>
<H4>Куда и зачем</H4>

<P>
<P>Каждое приложение должно поместить конфигурационный файл в каталог
<CODE>$KDEDIR/share/applnk</CODE> или его подкаталог.
Кроме того, у вас есть личная система каталогов в <CODE>~/.kde/share/applnk</CODE>,
куда вы можете установить дополнительные приложения. Эти файлы будут видны
только вам, но не остальным пользователям.
KFM и kpanel просматривают эти каталоги при старте. Системное меню kpanel
соответствует структуре этих каталогов. Пиктограммы в этих каталогах
ведут себя как настоящие приложения. Вы можете щелкнуть по ним для запуска
приложения и можете перетаскивать на них файлы. Иногда полезно держать 
такие конфигурационные файлы вне каталога <CODE>applnk</CODE>.
Они работают в любом каталоге, но только те, которые содержатся в
<CODE>applnk</CODE>, 
просматриваются при старте. Поэтому, если вы хотите установить,
например, XV в качестве приложения по умолчанию для изображений,
вы должны поместить конфигурационный файл именно в этот особый каталог.
Возможно, есть приложения, которые вы предпочтете видеть не в KFM
или kpanel,  а на рабочем столе, тогда вы можете создать конфигурационные файлы
на рабочем столе или в другом месте. Для этого используется почти такой же
способ, как и описываемый здесь.
<P>
<P>Если KFM находит файл, первое, что он делает -- пытается определить его
тип данных. После этого он ищет все приложения, которые зарегистрированы для
этого типа данных. Если ни одного не находится, он спрашивает у пользователя.
Если нашлось только одно или имеется установленное по умолчанию, будет
использовано именно оно, иначе KFM  выберет наугад.
Контекстное меню, вызываемое правой кнопкой мыши, предложит вам выбор из всех
приложений, зарегистрированных для этого типа данных.
<P>
<H4>Шаг за шагом</H4>

<P>
<P>Можете сразу перейти к следующей секции, если вы не хакер и не 
разработчик, и пропустить подробности.
<P>
<P>Конфигурационный файл, который мы создадим, будет примерно таким:
<P>
<BLOCKQUOTE><CODE>
<PRE>
# KDE Config File
[KDE Desktop Entry]
BinaryPattern=xv;
MimeType=image/gif;image/jpeg;image/tiff;image/x-xbm;image/x-xpm;
Comment=XV Image App
Comment[de]=XV Graphik Programm
Exec=xv %f
TerminalOptions=
Icon=image.xpm
Path=
Type=Application
Terminal=0
Name=XV
Name[de]=XV
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>Первая строка содержит магические байты, вторая -- список имен,
которые может иметь это приложение (разделитель --  <CODE>;</CODE> ).
Здесь же указана пиктограмма, соответствующая исполняемому файлу. 
Следующая строка содержит список всех MIME-типов, с которыми
может работать приложение, затем идут обычные комментарии на разных языках.
Параметр  <CODE>Exec</CODE> содержит команду оболочки, которая будет
выполнена для запуска приложения. <CODE>%f</CODE> 
будет заменен именами документов; ознакомьтесь с подробностями в следующем
разделе. Параметр <CODE>Type</CODE> обязателен, как и для любого 
конфигурационного файла KFM. Вы можете потребовать от KFM 
запустить приложение в терминальном окне, установив
<CODE>Terminal=1</CODE> и при необходимости настроив установки терминала.
Параметр <CODE>Path</CODE> 
позволяет установить рабочий каталог. 
Последние две строки определяют название приложения. Это название используется,
например, в контекстных меню KFM. Как и для комментариев, необходим
английский вариант, и могут быть переводы на разные языки.
<P>
<P>
<P>
<H4>Маленькие секреты</H4>

<P>
<P>Большинству старых приложений требуется аргумент <CODE>%f</CODE>. 
Это значит, что они могут работать с файлами только на локальном жестком диске.
Если же вы используете URL, KFM загрузит эти файлы на локальный диск и после
этого запустит приложение. Если приложение изменило файлы, KFM спросит
пользователя, не хочет ли он выгрузить их обратно.
<P>
<P>Вы можете использовать <CODE>%u</CODE> вместо <CODE>%f</CODE>.
В этом случае KFM передаст приложению сам URL и не будет копировать файлы с
других машин на локальный диск.
Некоторые приложения KDE поддерживают эту замечательную возможность.
<P>
<P>Имеются дополнительные параметры, которые можно использовать.
Вот краткий список:
<P>
<UL>
<LI><B><CODE>%k</CODE></B> Полное имя (с путем) самого конфигурационного
файла. Это полезно, если запускаемое приложение должно читать или изменять
конфигурационный файл, использованный для запуска. Например, таким способом
вы можете реализовать простое представление принтера. Тот же файл, который
изображает принтер на рабочем столе, хранит установки принтера. Используйте
<CODE>%k</CODE> для передачи имени конфигурационного файла программе для
работы с принтером.</LI>
<LI><B><CODE>%n</CODE></B> Имя документа без пути.</LI>
<LI><B><CODE>%d</CODE></B> Путь к документу без имени файла.
<CODE>%d</CODE> и <CODE>%n</CODE> вместе -- то же, что и<CODE>%f</CODE>.</LI>
<LI><B><CODE>%c</CODE></B> Имя приложения.
Это заголовок окна приложения (возможно, на вашем языке). Этот параметр
позволяет задать заголовок окна приложения.</LI>
</UL>
<P>
<P>
<H3><A NAME="ss3.4">3.4 Закладки</A>
</H3>

<P>
<P>В KFM возросла роль закладок. Закладки могут ссылаться на любой файл,
то есть не только на HTML-страницы и FTP-каталоги, но и на документы,
приложения и файлы <CODE>*.kdelnk</CODE>.
Переход по закладке в KFM вызывает соответствующее действие:
документ открывается, приложение запускается и т.п. 
Чтобы добавить файл к набору закладок, нужно просто щелкнуть
правой кнопкой мыши по файлу и выбрать пункт "Добавить закладку".
<P>
<P>
<P>
<H4>Редактирование закладок</H4>

<P>
<P>Каждая закладка соответствует файлу в $HOME/.kde/share/apps/kfm/bookmarks.
Пункт "Редактировать" в меню "Закладки" позволяет быстро открыть этот каталог,
Переименование файла закладки приводит к немедленному изменению меню
"Закладки". 
Если вы откроете свойства такого файла, вы сможете настроить закладку, то есть
изменить адрес (URL) или пиктограмму. Вы можете перемещать, копировать и
переименовывать файлы в этом каталоге и его подкаталогах по своему усмотрению.
Позаботьтесь о том, чтобы файлы имели расширение <CODE>*.kdelnk</CODE>,
тогда KFM сможет отличить их от "обычных" файлов.
<P>
<H4>Структура каталога закладок</H4>

<P>
<P>Создание нового подкаталога в $HOME/.kde/share/apps/kfm/bookmarks
приведет к одновременному появлению подменю в меню "Закладки". 
Чтобы добавить закладку в новое подменю, раскройте его. Первый пункт подменю
позволяет добавить ссылку на текущий URL.
<P>
<P>
<H4>Использование закладок в других программах</H4>

<P>
<P>Программа krootwm позволяет использовать закладки. 
Щелчок правой кнопкой мыши по рабочему столу позволяет (кроме всего прочего)
вызвать меню "Закладки". Изменения закладок пока не отображаются сразу в krootwm.
Пока что вам придется для этого перезапускать krootwm.
<P>
<P>
<P ALIGN="RIGHT">

<A HREF="index-4.html"> Вперед </A>
<A HREF="index-2.html"> Назад </A>
<A HREF="index.html#toc3"> Содержание </A>
</P>
<CENTER>
<HR WIDTH="100%" SIZE=3 ALIGN=CENTER NOSHADE>
</CENTER>    
</FONT>

 
</BODY>
</HTML>
