<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>Руководство по kppp : Вопросы и ответы</TITLE>
<META HTTP-EQUIV="content-type" CONTENT="text/html; charset=koi8-r">
<META NAME="keywords" CONTENT="kppp russian Russian translation KDE Mozzherin Dmitry перевод русский Мозжерин Дмитрий документация documentation">
<META NAME="description" CONTENT="Russian translation of KDE kppp documentation, translator Dmitry Mozzherin">
</HEAD>
<BODY BGCOLOR="#ffffff" LINK="#aa0000" TEXT="#000000" > 
<?php include("/home/maxcom/linux_html/books/head.php3") ?>
<FONT FACE="Helvetica">
<A HREF="http://www.kde.org/"><IMG SRC="http://books.gnu.technology/books/kde/network/kppp/logotp3.gif" BORDER="0" ALT="The K Desktop Environment"></A>
<HR WIDTH="100%" SIZE=2 ALIGN="CENTER" NOSHADE>

 
<P ALIGN="RIGHT">

<A HREF="index-8.html"> Вперед </A>
<A HREF="index-6.html"> Назад </A>
<A HREF="index.html#toc7"> Содержание </A>
</P>
<H3><A NAME="s7">7. Вопросы и ответы</A></H3>

<H3><A NAME="ss7.1">7.1 Часто задаваемые вопросы</A>
</H3>

<P>
<A NAME="&lt;em/kppp/ FAQ"></A> <H4>Я не могу заставить <EM>kppp</EM> работать. <EM>kppp</EM> говорит мне, что pppd умер, или что время для соединения вышло! </H4>

<P>А вы внимательно прочитали это руководство? Вот, снова, наиболее обычные
проблемы.
<P>
<UL>
<LI> Щелкните на кнопку "Детали". <EM>kppp</EM> распечатает вам выборку из 
из log сообщений PPP (может не работать для не-Linux'овых систем, и, даже, для
некоторых дистрибутивов Linux). Эти записи могут помочь вам выследить ошибку.
</LI>
<LI> Убедитесь, что ваша копия pppd это не сценарий, а бинарный файл.

</LI>
<LI> Убедитесь, что pppd имеет setuid супер-пользователя root. Вы можете 
установить этот параметр командой <I>chmod u+s pppd</I> зарегистрировавшись
как root.
</LI>
<LI> Убедитесь, что ваш файл <CODE>/etc/ppp/options</CODE> существует и, что он не
содержит конфликтующих записей. Если вы не уверены -- просто оставьте этот файл
пустым.
</LI>
<LI> Убедитесь, что вы НЕ используете ключ "lock" как аргумент для
pppd (<EM>kppp</EM> сам позаботится о блокировании)
</LI>
<LI> Удалите настройку "lock" из ваших файлов <CODE>/etc/ppp/options</CODE>
и <CODE>~/.ppprc</CODE>!
</LI>
<LI> Иногда использование символической ссылки <CODE>/dev/modem</CODE> может
вызвать конфликты. Исключите этот источник проблем используя действительное
устройство, то-есть <CODE>/dev/cuaX</CODE>
или <CODE>/dev/ttySX</CODE>.
ПРИМЕЧАНИЕ: COM1 равен ttyS0, COM2 это ttyS1 и так далее. </LI>
<LI> Убедитесь, что вы установили правильные допуск. Если возникают
проблемы, сначала попробуйте все настроить зарегистрировавшись как root, и потом,
когда все заработает, установите менее опасный допуск, если вы не имеете
возможности запускать <EM>kppp</EM> c setuid супер-пользователя root. Правильный путь
для этого, будет, возможно, создание группы "modem".
</LI>
<LI> Возможно, вы запускаете pppd слишком рано, то-есть до того, как удаленный
сервер готов вести переговоры об установлении PPP соединения. Если вы
используете сценарий регистрации, вы должны использовать встроенный терминал,
для проверки процедуры регистрации. Некоторые провайдеры будут требовать от вас
простого "Send" или "Send ppp" для запуска PPP. Некоторые пользователи даже
сообщали, что они должны были добавить "Pause 1" или "Pause 2" в их сценарии,
для того, чтобы разрешить временные конфликты.
</LI>
</UL>
<P>Если ничто не помогает, вы можете получить отладочную информацию из сообщений
вашей системы, используя команду:
<BLOCKQUOTE><CODE>
<PRE>
# tail /var/log/messages
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H4><EM>kppp</EM> говорит ``К сожалению, не получается открыть модем''.</H4>

<P>
<P>Это означает, что <EM>kppp</EM> не имеет допуска к открытию модемного устройства,
или, то, что вы выбрали как модемное устройство в разделе диалога Модем на самом
деле модемом не является. Прежде всего убедитесь, что вы выбрали правильное
устройство модема. Если вы уверены, что оно выбрано правильно, вы должны 
дать <EM>kppp</EM> правильный уровень допуска для работы с модемом и для изменения
файла <CODE>/etc/resolv.conf</CODE>, если вы хотите, чтобы <EM>kppp</EM> настроил для
вас DNS. Если вы можете позволить <EM>kppp</EM> запускаться с setuid root -
это должно разрешить все проблемы с доступом, если нет -- вы должны будете
разобраться в каком уровне доступа вы нуждаетесь для ваших целей. Для того,
чтобы дать для <EM>kppp</EM> допуск setuid root, сделайте следующее:
<P>
<BLOCKQUOTE><CODE>
<PRE>
% su root
# chown root:root ${KDEDIR}/bin/kppp
# chmod +s ${KDEDIR}/bin/kppp
# exit
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>
<H4><EM>kppp</EM> говорит, что он не может создать файл блокировки модема.</H4>

<P>В большинстве случаев это означает, что вы установили <EM>kppp</EM> без 
SETUID бита в положении "on" в то время как вы, персона, запустившая <EM>kppp</EM>, 
не имеете допуска на внесение изменений в каталоге, где размещается файл блокировки,
по умолчанию это <CODE>/var/lock</CODE>. По крайней мере это так для дистрибутивов
RedHat. Проверьте диалог модема для уточнения расположения этого файла. Решить
это проблему -- просто. Вы либо запускаете <EM>kppp</EM> SETUID если у вас есть такая
возможность, либо создаете группу "modem", которая будет иметь доступ к файлу
<CODE>/var/lock</CODE> file.
<P>
<P>
<A NAME="setuid"></A> <H4>Почему <EM>kppp</EM> устанавливается с SETUID битом в положении "on"?</H4>

<P>
<P>На самом деле в SETUID бите нет нужды, если вы немного знаете об
администрировании Unix систем. Просто создайте группу "modem", добавьте туда всех
пользователей, которые, по вашему мнению, должны иметь доступ к модему и
сделайте устройство модема доступным для чтения/записи этой группой. Также, если
вы хотите, чтобы конфигурация DNS работала с <EM>kppp</EM>, группа "modem"
должна иметь допуск  чтение/запись к файлу
<CODE>/etc/resolv.conf</CODE>. То же самое касается  
<CODE>/etc/ppp/pap-secrets</CODE> и <CODE>/etc/ppp/chap-secrets</CODE>, если
вы хотите использовать встроенную поддержку PAP или CHAP, соответственно.
<P>Пожалуйста, не критикуйте меня за установку <EM>kppp</EM> с setuid битом в положении
"on". Я просто не могу больше выносить того количества писем, которое я раньше
получал от отчаявшихся пользователей. Tех, кто не мог заставить 
<EM>kppp</EM> работать, из-за непонимания как устанавливать допуск для устройств и
в самой системе Unix.
<P>Команда <EM>kppp</EM> за последнее время сделала очень много, чтобы обезопасить
setuid для <EM>kppp</EM>. Но это ваше дело решать. что и как устанавливать на вашу
машину
<P>
<H4><EM>kppp</EM> "завис" и ждет: "Ожидание OK"</H4>

<P>
<UL>
<LI> А вы не игрались с настройками CR/LF? Попробуйте CR, LF или CR/LF.
</LI>
<LI> Просто ваш модем требует некоторого времени для реагирования на его
инициализацию.
Откройте диалог "Команды Модема" в разделе "Модем" и измените задержки "перед 
инициализацией" и "после инициализации". Убедитесь, что модем реагирует так, 
как вы ожидаете, когда вы резко увеличиваете время задержек и затем делаете
тонкую подгонку.  
</LI>
</UL>
<P>
<H4><A NAME="autohostname"></A> Подсоединение происходит без проблем, но я не могу запустить ни одно приложение.</H4>

<P>
<P>Возможно, вы активировали настройку 
<A HREF="index-4.html#Auto-configure hostname"> Автоконфигурация DNS имени</A> и 
X-сервер не может подсоединиться к компьютеру с заданным именем. Если вам
действительно нужна эта функция (вполне вероятно что не нужна), вы можете сами
установить требуемые авторизации.
<P>Использование команды <I>xhost +</I> перед установкой соединения должно
помочь, но, <B>имейте в виду</B>, что это рискованно, так как теперь любой имеет
доступ к вашему X-серверу.
<P> 
<P>
<P>
<H4><EM>kppp</EM> выдает сообщение об успешном соединении, но Netscape говорит "The server does not have a DNS entry" (На сервере не задан DNS)</H4>

<P>Попробуйте использовать ping на известном вам IP адресе, т.е. <CODE>ping </CODE>.
Если ping сработал, значит вы должны
<P>
<UL>
<LI> убедиться, что вы задали для <EM>kppp</EM> хотя бы один DNS адрес</LI>
<LI> проверить содержимое <CODE>/etc/host.conf</CODE>. Там должны быть строка
содержащая что-то типа: <CODE>order hosts, bind</CODE>. Ключевое слово <CODE>bind</CODE>
советует библиотеке resolver включать запрос имени сервера при выполнении поиска
адреса.
</LI>
</UL>
<P>
<P>
<P>
<H4>Как заставить <EM>kppp</EM> посылать \n или \r?</H4>

<P>Просто пошлите пустую строку, как, например, в данном сценарии:
<BLOCKQUOTE><CODE>
<PRE>
Send                                   # посылает пустую строку 
Expect      ID:                        
Send        itsme                     
Expect      word:                      
Send        forgot                    
Expect      granted                    
Send        ppp                        
                                       
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H4><EM>kppp</EM> жалуется: "Не получается создать файл блокировки (lock file)"</H4>

<P>
<P>Это значит, что у вас нет доступа на создание файла блокировки.
Если, например, вы задали '/var/lock/LCK..modem" в разделе диалога "Модем", вы
должны иметь доступ к записи в каталоге
/var/lock/. Это, конечно не является проблемой, если вы задали setuid доступ для
<EM>kppp</EM>. Пожалуйста, читайте раздел о 
<A HREF="index-3.html#lock files">файлах блокировки</A>.
<P>
<P>
<P>
<H4>Мой модем делает столько шума при дозвоне!</H4>

<P>Щелкните "Настройка", "Модем". Вы можете здесь задать три уровня громкости 
модема  --  выключена (off), средняя (medium), высокая (high). Для большинства
модемов "средняя" и "высокая" дают одинаковый уровень громкости. Если это не
работает, убедитесь, что в "Настройка"/"Модем"/"Команды модема" установлены
правильные настройки!
<P>
<P>
<H4>Я установил громкость модема на "выключена" ("off") и проверил команды модема, но я все равно слышу этот шум при дозвоне!</H4>

<P>Строка инициализации модема может быть потеряна, если ваш модем не может
справиться с той скоростью, с которой он получает команды от 
<EM>kppp</EM>. Увеличьте значение в "Задержка после инициализации" в
"Настройка"/"Модем"/"Команды модема"!
<P>
<P>Щелкните "Настройка", "Модем". Вы можете здесь задать три уровня громкости 
модема  --  выключена (off), средняя (medium), высокая (high). Для большинства
модемов "средняя" и "высокая" дают одинаковый уровень громкости. Если это не
работает, убедитесь, что в "Настройка"/"Модем"/"Команды модема" установлены
правильные настройки!
<P>
<P>
<H4><EM>kppp</EM> регистрирует необычную скорость модема -- типа 115200, 57600</H4>

<P>Многие модемы по умолчанию показывают скорость последовательного порта, а не
скорость потока информации по телефонным линиям. Вы должны настроить такие
модемы на регистрирование действительной скорости линии (добавьте это к строке
инициализации или дозвона). Для многих модемов эта команда -- "ATW2". Если вы
хотите добавить ее к строке дозвона (обычно, по умолчанию "ATD" (<EM>Примечание
переводчика:</EM> "ATDP" для многих телефонных линий в России)) новая строка дозвона будет "ATW2D"
(<EM>Примечание переводчика:</EM> или "ATW2DP").  
<P>
<P>
<H4><EM>kppp</EM> показывает "Неизвестная скорость"</H4>

<P>Новые модемы часто имеют очень сложные сообщения о соединении, типа
"CONNECT LAP.M/V42.bis/115000:RX/31200:TX", и <EM>kppp</EM> не может обработать
правильно такое сообщение. Включите "Показывать окно протокола" и вы увидите
скорость соединения. Я работаю над решением этой проблемы и обработчик сейчас
много лучше, хотя все-еще не идеален. 
<P>
<P>
<H4>Медленная скорость соединения</H4>

<P>Если вы не удовлетворены скоростью соединения, убедитесь, что вы задали скорость
соединения ("Настройка"/"Устройство"/"Скорость") на 57600 или выше. Убедитесь,
что ваш последовательный порт поддерживает более высокие скорости. Многие
i486 системы работают плохо, если вы устанавливаете скорость на 115200. Если у
вас установлен процессор 8250 UART, это работать не будет. Если у вас 16550 или
16550А -- все должно работать без проблем.
<P>
<P>
<H4>Я должен использовать импульсный набор номера вместо тонового (или наоборот)</H4>

<P>Вам нужно изменить строку дозвона модема. Почти все модемы поддерживают
следующие AT-команды:
<UL>
<LI>ATDT -- устанавливает тоновый набор </LI>
<LI>ATDP -- устанавливает импульсный набор</LI>
</UL>
<P>
<P>
<H4><EM>kppp</EM> ведет себя очень странно</H4>

<P>Не скомпилировали ли вы его, или требуемые библиотеки, с gcc-2.8? С этой 
версией gcc что-то не в порядке. Она работает неправильно.
<P>
<P>
<H4>Как написать файл с правилами обсчета стоимости телефонных звонков?</H4>

<P>Следуйте образцу файлов правил обсчета, который поставляется вместе с <EM>kppp</EM>.
Вы должны найти его в 
<CODE>${KDEDIR}/doc/HTML/kppp</CODE>. 
Используйте ключ командной строки <CODE>-r</CODE> <EM>kppp</EM> для того, чтобы
проверить синтаксис созданного вами файла правил.
<P>
<P>
<H4>Я написал файл правил обсчета стоимости телефонного звонка для своего региона. Куда я могу его отправить, чтобы другие тоже могли его использовать?</H4>

<P>Я буду очень рад получить от вас файл с правилами. Я помещу его на моей
<EM>kppp</EM> 
<A HREF="http://math.cornell.edu/~wuebben/kppp/kppp.html">web-странице</A>.
Прежде чем посылать файл с новыми правилами, убедитесь, что на моей 
<EM>kppp</EM> web-странице такого еще нет. Затем пошлите 
<A HREF="mailto:wuebben@math.cornell.edu">мне</A> ваш файл правил по 
электронной почте. 
<P>
<P>
<H4>Может ли мой файл с телефонными правилами содержать дробные временныеединицы, например, "(0.17,45.5)"?</H4>

<P>Да, может. Но лучше не использовать слишком маленькие временные единицы (короче
чем десятые секунды), так как это увеличивает загрузку центрального процессора
(хотя, я сомневаюсь, что с нынешними процессорами вы это заметите :-)
<P>
<H4>В моей стране справляются праздники с нефиксированной датой другие, чем неправославная пасха.</H4>

<P>В этом случае вам придется написать новый код, который после компиляции позволит
учитывать этот праздник. Пожалуйста, посмотрите в ruleset.cpp и руководствуйтесь
примером праздника "easter" ("пасха"). Затем пошлите 
<A HREF="mailto:wuebben@math.cornell.edu">мне</A> получившиеся заплатки.
<P>
<P>
<P>
<P ALIGN="RIGHT">

<A HREF="index-8.html"> Вперед </A>
<A HREF="index-6.html"> Назад </A>
<A HREF="index.html#toc7"> Содержание </A>
</P>
<CENTER>
<HR WIDTH="100%" SIZE=3 ALIGN=CENTER NOSHADE>
</CENTER>    
</FONT>

 
</BODY>
</HTML>
