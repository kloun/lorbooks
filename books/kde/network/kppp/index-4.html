<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>Руководство по kppp : Настройка аккаунта</TITLE>
<META HTTP-EQUIV="content-type" CONTENT="text/html; charset=koi8-r">
<META NAME="keywords" CONTENT="kppp russian Russian translation KDE Mozzherin Dmitry перевод русский Мозжерин Дмитрий документация documentation">
<META NAME="description" CONTENT="Russian translation of KDE kppp documentation, translator Dmitry Mozzherin">
</HEAD>
<BODY BGCOLOR="#ffffff" LINK="#aa0000" TEXT="#000000" > 
<?php include("/home/maxcom/linux_html/books/head.php3") ?>
<FONT FACE="Helvetica">
<A HREF="http://www.kde.org/"><IMG SRC="http://books.gnu.technology/books/kde/network/kppp/logotp3.gif" BORDER="0" ALT="The K Desktop Environment"></A>
<HR WIDTH="100%" SIZE=2 ALIGN="CENTER" NOSHADE>

 
<P ALIGN="RIGHT">

<A HREF="index-5.html"> Вперед </A>
<A HREF="index-3.html"> Назад </A>
<A HREF="index.html#toc4"> Содержание </A>
</P>
<H3><A NAME="s4">4. Настройка аккаунта</A></H3>

<P>
<H3><A NAME="ss4.1">4.1 Настройка дозвона</A>
</H3>

<P>
<DL>
<DT><B>Имя соединения</B><DD><P>Вы должны дать имя каждому 
сформированному аккаунту.
<P>
<DT><B>Телефонный Номер</B><DD><P>Укажите номер телефона для набора.
Вы можете использовать такие знаки как ``-'', чтобы сделать номера телефонов
более читаемыми. Если вы задаете несколько номеров (разделяя их двоеточием),
то <EM>kppp</EM> будет пытаться набирать эти номера в циклическом порядке, 
каждый раз, когда он получает сигнал "занято".
Пример: "1111111:2222222:3333333"
<P>
<DT><B>Авторизация</B><DD><P>Опознавание. Выберите правильный метод авторизации
аккаунта, который <EM>kppp</EM> должен использовать при установлении контакта с 
сервером. Узнайте у вашего провайдера какой метод он использует -- PAP,  CHAP, 
сценарий или терминальное окно.   
<P>
<DT><B>Сохранить пароль</B><DD><P>Выбирайте эту опцию, если вы хотите,
чтобы <EM>kppp</EM> запоминал ваш пароль для последующих сессий. 
<P>
<DT><B>Выполнить команду при соединении</B><DD><P><EM>kppp</EM> будет пытаться исполнить команду, которую вы укажете в этой строке,
как только ppp соединение будет установлено. 
<P>
<DT><B>Выполнить команду перед разъединением</B><DD><P><EM>kppp</EM> будет исполнять эту команду перед разрывом связи. Это может 
быть полезным для изменения какого-либо маршрута или адреса перед завершением работы в сети.
<P>
<DT><B>Выполнить команду после разъединения</B><DD><P>Аналогична с предыдущим параметром.
<P>
<A NAME="pppd arguments"></A> <DT><B>Редактировать аргументы pppd</B><DD><P>Покажет диалоговое окно для ввода аргументов 
pppd. Вы можете использовать это окно для ввода параметров,  
чтобы <EM>kppp</EM> передал их pppd во время запуска последнего. Смотрите страницу man
pppd для ознакомления со списком возможных аргументов. За исключением только,
если вы точно знаете, что делаете, лучше воздержаться от ввода аргументов 
pppd.
</DL>
<H3><A NAME="ss4.2">4.2 IP</A>
</H3>

<P>
<P>
<DL>
<DT><B>Динамический IP адрес</B><DD><P>Отметьте этот параметр, если
ваш провайдер использует присваивание динамических IP адресов. Это означает, что, 
как правило, ваш IP изменяется каждый раз, когда вы устанавливаете новое 
соединение.
<P>
<DT><B>Статический IP Address</B><DD><P>Отметьте этот параметр, если ваш
провайдер дал вам статический IP адрес. В этом случае, вам придется также ввести этот
адрес и Subnet Mask, если это необходимо. Спросите вашего провайдера если вы не уверены.
<P>
<A NAME="Auto-configure hostname"></A> <DT><B>Автоконфигурация DNS имени по этому IP</B><DD><P>Отметьте эту установку, если вы хотите, чтобы <EM>kppp</EM> установил DNS-имя и 
домен для вашей машины после успешной установки ppp связи.
Это делается через опрашивание заданного сервера DNS (Domain Name Server) о 
присвоенном IP при ppp связи.
Этот параметр также полезен для тех, кто хочет использовать неподсоединенную 
постоянно к сети машину для таких протоколов как, например, talk, которые
требуют, чтобы DNS-имя вашей машины было идентично тому, которое
известно для Интернета. Этот параметр изменяет установку в Секции DNS
об Имени домена. Установки, заданные по умолчанию, восстанавливаются
когда вы прекращаете ppp связь. Будьте осторожны, когда используете
этот параметр: он может оказаться полезен, но также может вызвать большое 
количество нежелательных эффектов. Поиграйтесь с ним...
</DL>
<P>
<P>
<H3><A NAME="ss4.3">4.3 DNS</A>
</H3>

<P>
<DL>
<DT><B>Домен</B><DD><P>Укажите имя домена для вашей
машины. Как и адреса DNS, оно будет восстановлено на изначально
заданное в <CODE>/etc/resolv.conf</CODE> после разъединения
Если это поле оставлено пустым -- никаких изменений
в имени домена, хранящегося в in <CODE>/etc/resolv.conf</CODE> не
произойдет.
<P>
<DT><B>IP-адрес сервера DNS</B><DD><P>Укажите имена серверов DNS, которые
заданы вашим провайдером. Вы должны указать по меньшей мере один адрес DNS
для того, чтобы иметь возможность распознавать ориентированные на 
человеческое восприятие IP адреса, такие, например, как ftp.kde.org. 
Адреса DNS серверов должны указываться в численной форме, например: 
128.231.231.233. Эти адреса будут добавлены во время исполнения
команды в <CODE>/etc/resolv.config</CODE>.
<P>
<DT><B>Запретить существующие сервера DNS на время соединения</B><DD><P>Применяйте этот
параметр, если вы хотите, чтобы <EM>kppp</EM> отменил использование уже
существующих в <CODE>/etc/resolv.conf</CODE> имен серверов во время
соединения. 
</DL>
<P>
<P>
<H3><A NAME="ss4.4">4.4 Шлюз (Gateway)</A>
</H3>

<P>
<DL>
<DT><B>Шлюз по умолчанию</B><DD><P>Отметьте этот пункт, если
вы хотите, чтобы pppd использовал шлюз заданный на вашей машине по умолчанию.
<P>
<DT><B>Статический шлюз</B><DD><P>Отметьте этот пункт, если
вы хотите напрямую указать шлюз, который будет задействован.
</DL>
<P>
<P>
<H3><A NAME="ss4.5">4.5 Сценарий (Login script)</A>
</H3>

<P>
<DL>
<DT><B>Редактировать сценарий</B><DD><P>Используйте это диалоговое окно, если вы должны
написать сценарий для установления соединения с вашим провайдером. Используйте
мини-терминал и информацию, полученную от вашего провайдера для того, чтобы
понять, какая последовательность действий должна быть выполнена.
<P>
<UL>
<LI>Expect: <EM>kppp</EM> будет ждать, пока не получит заданную вами строку.</LI>
<LI>Send: <EM>kppp</EM> пошлет заданную строку.</LI>
<LI>Scan: <EM>kppp</EM> будет сканировать входящий поток знаков на
наличие указанной строки и сохранит во внутреннем буфере любой знак, 
который появится в следующей строке после заданной. Пробелы
расположенные до или после будут сняты.</LI>
<LI>Save: сохранит просканированную до этого строку в специальном регистре. 
На данный момент задействован только регистр пароля -- 'password'.  </LI>
<LI>Pause: пауза в течение заданного времени (в секундах).</LI>
<LI>Hangup: <EM>kppp</EM> пошлет на модем команду разъединения</LI>
<LI>Answer: <EM>kppp</EM> переведет модем в режим ответа</LI>
<LI>Timeout: динамически, во время исполнения сценария, заменит
заданное по умолчанию время ожидания (таймаут) на указанный в секундах 
промежуток времени. Вы можете изменить таймаут
несколько раз в течение выполнения сценария, если необходимо.
</LI>
<LI>Prompt: <EM>kppp</EM> предложит пользователю ввести строку,
показывая заданную строку как подсказку.  Пользователь будет
видеть набираемую строку. Если заданная строка содержит
последовательность знаков ##, эта последовательность будет заменена
текущим содержимым внутреннего буфера сканирования.
</LI>
<LI>PWPrompt: <EM>kppp</EM> предложит пользователю ввести строку,
показывая заданную строку как подсказку.  Звезда (*) будет
отображаться вместо каждого введенного знака.
</LI>
<LI>ID: Идентификация. Если поле идентификации (ID) в главном
диалоге заполнено, то <EM>kppp</EM> пошлет указанное в нем ID.
Если поле ID не заполнено, <EM>kppp</EM> предложит пользователю ввести
идентификацию, показывая заданную строку как подсказку.
Пользователь будет видеть набираемую строку. При вторичном
проходе, таком как в петле при второй итерации, приглашение будет
показано с выводом на экран заданной строки как подсказки.
</LI>
<LI>Password: Если поле пароля в главном диалоговом окне заполнено,
то <EM>kppp</EM> пошлет этот пароль. Если поле пароля не заполнено, то
<EM>kppp</EM> предложит пользователю ввести пароль, показывая заданную
строку как подсказку.  Звезда (*) будет отображаться вместо
каждого введенного знака. При вторичном проходе, таком как в петле при
второй итерации, приглашение будет показано с выводом на экран
заданной строки как подсказки.
</LI>
<LI>LoopStart(НачалоПетли) : <EM>kppp</EM> будет ждать получения
заданной строки.
Он сохранит эту строку для использования командой LoopEnd (КонецПетли). 
</LI>
<LI>LoopEnd(КонецПетли) : <EM>kppp</EM> будет ждать получения указанной
строки для выхода из петли. Если строка, заданная в соответствующей
команде начала петли (LoopStart) будет получена первой, это приведет к
перескакиванию на строку расположенную после LoopStart, позволяя таким
образом повторение спаренных диалогов "имени пользователя"/"пароля" 
(username/password).</LI>
</UL>
<P>
</DL>
<P>
<H4>Примеры сценариев</H4>

<P>
<P>Вот простой сценарий, который я использовал для соединения с моим провайдером:
<P>
<BLOCKQUOTE><CODE>
<PRE>
Expect      ID:                        # ожидать последовательности
                                         знаков  'ID':
Send        myid                       # вы должны заменить myid вашим id
Expect      word:                      # ожидать строки пароля 'password'
Send        4u3fjkl                    # послать мой пароль '4u3fjkl'
Expect      granted                    # мой провайдер посылает строку
                                         'Permission granted' после удачного 
                                         соединения.
Send        ppp                        # эта команда начинает для меня
                                         соединение по протоколу ppp 
                                         со стороны провайдера.
</PRE>
</CODE></BLOCKQUOTE>
<P>Следующий сценарий написан для того же самого провайдера с приглашением ввести ID и пароль: 
этот сценарий будет запрашивать ввод ID и пароля каждый раз, вне зависимости от
того, введены или нет данные в поля пароля и ID в главном диалоговом окне  
<EM>kppp</EM>. Этот сценарий также иллюстрирует использование структуры 
НачалоПетли/КонецПетли. Если что-то не так во время процедуры 
соединения, например, если я неправильно ввел пароль, мой провайдер  выведет
сообщение об ошибке и заново начнет петлю идентификация/пароль, снова посылая
строку "ID:". Если строка "ID" перехвачена до того, как обработано ключевое
слово КонцаПетли (LoopEnd), 
<EM>kppp</EM> начнет исполнение сценария снова, после ключевого 
слова НачалаПетли (LoopStart).
<P>
<BLOCKQUOTE><CODE>
<PRE>
LoopStart   ID:                        # Ожидает строку ID:
Prompt      Enter ID:                  # Просит меня ввести ID и посылает его.
Expect      word:                      # Ожидает строку 'password'
PWPrompt    Enter Password:            # Просит меня ввести пароль и посылает 
                                         его.
LoopEnd     granted                    # Мой провайдер посылает 'Permission 
                                         granted' в случае удачного 
                                         подсоединения.
Send        ppp                        # Запускает ppp протокол для меня
</PRE>
</CODE></BLOCKQUOTE>
<P>Следующий сценарий я действительно использую для подсоединения к моему провайдеру. Этот 
сценарий будет запрашивать ID и пароль только, если я не ввел данные в 
соответствующие поля главного диалогового окна <EM>kppp</EM>.
<P>
<BLOCKQUOTE><CODE>
<PRE>
LoopStart   ID:                        # Ожидает строку ID:
ID          Enter ID:                  # Просит меня ввести ID и посылает его.
Expect      word:                      # Ожидает строку 'password'
Password    Enter Password             # Просит ввести пароль и посылает его.
LoopEnd     granted                    # Мой провайдер посылает 'Permission 
                                         granted' в случае удачного 
                                         подсоединения.
Send        ppp                        # Запускает ppp протокол для меня
                                       # со стороны провайдер
</PRE>
</CODE></BLOCKQUOTE>
<P>Следующий сценарий я использую для подсоединения к провайдеру, который использует 
специальное удостоверение личности через вызов/ответ. Как правило, вы получаете
от такого провайдера специальный token (smart card с дисплеем и калькулятором, похожим 
на номерную часть клавиатуры). Вы должны знать пароль, чтобы использовать 
token. После соединения с вашим провайдером, он показывает ваш вызов. Вы должны 
напечатать вызов в вашем токене и получить динамический пароль как ответ. После этого вы должны ввести пароль.
<P>
<BLOCKQUOTE><CODE>
<PRE>
LoopStart   ID:                        # Ожидает строки ID:
ID          Enter ID:                  # Просит ввести мой ID и, затем, 
                                         посылает его.
Scan        Challenge:                 # Сканирует Вызов ('Challenge') и 
                                         сохраняет все за ним вплоть до 
                                         следующей новой строки.
Expect      PassWord:                  # Ожидает строки 'password'
Prompt      Your token is ## - Enter Password  # Просит меня ввести пароль и 
                                                 посылает его.
LoopEnd     granted                    # Мой провайдер посылает 'Permission 
                                         granted' в случае успешного 
                                         подсоединения.
Send        ppp                        # Запускает ppp соединение для меня
                                         со стороны провайдера 
</PRE>
</CODE></BLOCKQUOTE>
<P>Следующая запись показывает процедуру подсоединения к вымышленному провайдеру, который
предоставляет новый пароль для каждого подсоединения. Новый пароль должен быть подтвержден и записан для следующей сессии.
<P>
<BLOCKQUOTE><CODE>
<PRE>
Ламмерлендовский Университет

Login:мой идентификатор
Password: 
The password for your next session is: YLeLfkZb 
Please record and enter it for verification.
(Ваш пароль для следующей сессии - YLeLfkZb
Пожалуйста, запишите его и введите для опознавания)
Verification:YLeLfkZb

1 = telnet
2 = SLIP
3 = PPP

Your choice:
(Ваш выбор:)
</PRE>
</CODE></BLOCKQUOTE>
<P><EM>kppp</EM> может быть использован для выполнения этой громоздкой задачи за вас 
(исключая также опасность потерять маленький клочок бумаги с написанным на нем 
паролем). Ключевая часть сценария -- комбинация ключевых слов Scan/Save:
<BLOCKQUOTE><CODE>
<PRE>
Expect      Login:                     # ожидает строку 'Login:' 
ID                                     # посылает ID
Expect      Password:                  # ожидает строку 'Password'
Password                               # посылает пароль
Scan        is:                        # ожидает строку '... next session is:' и
                                       # сканирует новый пароль посланный провай                                         деру 
Save        password                   # сохраняет новый пароль для следующего 
                                         подсоединения
Expect      Verification:              # ожидает строку 'Verification:'
Password                               # посылает новый пароль
Expect      choice:                    # ожидает приглашения, которое позволяет
                                         вам выбрать
                                       # между тремя возможностями (telnet, 
                                         SLIP, PPP)
Send        3                          # выбирает возможность 3, i.e. PPP
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H3><A NAME="ss4.6">4.6 Учет</A>
</H3>

<P>
<DL>
<DT><B>Настройка функций учета</B><DD><P>Используйте кнопку
``Разрешить учет'' для включения/отключения ведения статистики стоимости
телефонного соединения. Выберите правила, которые соответствуют вашему 
региону. Если вы не можете найти правила для вашего региона, вы можете ввести
их сами с помощью прилагаемого шаблона <CODE>TEMPLATE</CODE> in <CODE>${KDEDIR}/share/doc/HTML/en/<EM>kppp</EM>/</CODE>. Не бойтесь делать это. Процедура достаточно
проста. На забудьте послать мне созданные вами правила. Вы можете проверить 
верность их синтаксиса используя <EM>kppp</EM> с параметром 
-r rule_file  в командной строке. Вы должны скопировать правила
в <CODE>${KDEDIR}/share/apps/kppp/Rules</CODE> или в 
<CODE>${HOME}/.kde/share/apps/kppp/Rules</CODE> для того, чтобы получить 
возможность выбрать их в диалоговом окне.
</DL>
<P>
<P>
<H3><A NAME="ss4.7">4.7 Учет объема</A>
</H3>

<P>
<A NAME="volaccounting"></A> <H4>Что такое Учет объема?</H4>

<P>В основном, это означает подсчет количества бит переданных в Интернет или 
из интернета. <EM>kppp</EM> может подсчитывать входящие байты, выходящие байты, или 
те и другие вместе. Это зависит от того, что вы хотите (или должны) использовать.
<P>
<H4>Почему я должен использовать Учет объема?</H4>

<P>Потому, что многие провайдеры сбирают плату с их пользователей в зависимости от переданного количества байт. Или, очень часто, провайдеры дают вам определенный лимит передачи,
после которого они начинают брать деньги за каждый мегабайт свыше этого лимита.
<EM>kppp</EM> показывает вам ваш текущий объем переданных байт, что может облегчить 
вам задачу свести оплату за Интернет к минимуму. Конечно, если у вас нет лимита 
по объему, но вам любопытно знать этот показатель -- вы можете его также использовать...
<P>
<H4>Какой тип учета объема я должен использовать?</H4>

<P>Это зависит от вашего провайдера. Многие из них учитывают только количество мегабайт взятое вами из Интернета и не интересуются количеством посланного. В этом 
случае вам лучше выбрать "Bytes in". Если вы должны платить за передачу в оба 
направления, вы должны выбрать "Bytes in and
out". "Bytes out" практического значения, обычно, не имеют и здесь просто для полноты картины.
<P>
<H4>Недостатки</H4>

<P>К сожалению, у Учета объема есть свои недостатки в отслеживании потока байт.
<EM>kppp</EM> будет только учитывать количество переданных байт без учета их 
происхождения. Многие провайдеры устанавливают их лимит только на доступ к Интернету,
а не к их собственной сети. Так что, если вы немного путешествуете в Интернете,
а в основном черпаете информацию из прокси-кэша вашего провайдера, вы, в 
действительности, не будете сильно исчерпывать свой лимит, так как прокси 
находится внутри сети провайдера. Тем не менее, <EM>kppp</EM> не будет знать, что эти 
пакеты пришли от прокси и будет их учитывать. Так что, если вы интенсивно 
используете прокси, или ваш провайдер использует кэширующий сервер новостей (как, 
например, nntpcached), объемы учтенные <EM>kppp</EM> могут быть завышены.
<P>
<P>
<P>
<P>
<P ALIGN="RIGHT">

<A HREF="index-5.html"> Вперед </A>
<A HREF="index-3.html"> Назад </A>
<A HREF="index.html#toc4"> Содержание </A>
</P>
<CENTER>
<HR WIDTH="100%" SIZE=3 ALIGN=CENTER NOSHADE>
</CENTER>    
</FONT>

 
</BODY>
</HTML>
