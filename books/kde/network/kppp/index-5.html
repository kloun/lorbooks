<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>Руководство по kppp : Маленькие хитрости и трюки для модема</TITLE>
<META HTTP-EQUIV="content-type" CONTENT="text/html; charset=koi8-r">
<META NAME="keywords" CONTENT="kppp russian Russian translation KDE Mozzherin Dmitry перевод русский Мозжерин Дмитрий документация documentation">
<META NAME="description" CONTENT="Russian translation of KDE kppp documentation, translator Dmitry Mozzherin">
</HEAD>
<BODY BGCOLOR="#ffffff" LINK="#aa0000" TEXT="#000000" > 
<?php include("/home/maxcom/linux_html/books/head.php3") ?>
<FONT FACE="Helvetica">
<A HREF="http://www.kde.org/"><IMG SRC="http://books.gnu.technology/books/kde/network/kppp/logotp3.gif" BORDER="0" ALT="The K Desktop Environment"></A>
<HR WIDTH="100%" SIZE=2 ALIGN="CENTER" NOSHADE>

 
<P ALIGN="RIGHT">

<A HREF="index-6.html"> Вперед </A>
<A HREF="index-4.html"> Назад </A>
<A HREF="index.html#toc5"> Содержание </A>
</P>
<H3><A NAME="s5">5. Маленькие хитрости и трюки для модема</A></H3>

<P>Этот раздел должен помочь новичку вступить на тропу (не столь уж) заумного
искусства доводки модема. Все используемые здесь команды относятся к стандарту
Hayes AT, но не все модемы были созданы равными, так что в вашем случае 
результаты могут не совсем соответствовать написанному. 
<P>
<H3><A NAME="ss5.1">5.1 Сеансы с модемом</A>
</H3>

<P>
<P>Эти сеансы позволяют вам напрямую взаимодействовать с вашим модемом. Вы 
печатаете команды, а модем реагирует. Для того чтобы начать сеанс с модемом
при отсутствии активного соединения, зайдите в диалоговое окно 
Настройка/Модем/Терминал.  При этом будет открыто окно для интерактивной настройки
вашего модема. Попытайтесь ввести  <B>ATZ</B> (эта команда перезагружает 
модем). Вы должны получить в ответ <B>OK</B>.  Используйте Файл/Закрыть для 
завершения сессии. 
<P>
<H3><A NAME="ss5.2">5.2 Профили модема</A>
</H3>

<P>Одна из причин, почему вы можете захотеть напрямую посылать команды на модем,
это, если вы имеете набор настроек модема, которые вы хотите сохранить, чтобы
не вводить их каждый раз при новом соединении. Это можно удобно сделать 
используя профили модема. Модемы могут иметь несколько сохраняемых профилей,
пронумерованных 0,1,...  <B>AT&amp;V</B> может быть использована для 
просмотра их всех. Профиль, используемый по умолчанию, обычно 0 (он может быть
изменен через <B>AT&amp;Y</B>.) Профиль, который используется в данный
момент, называется "активным" профилем. 
<P>Когда вы изменяете настройки, активный профиль модифицируется. Команда 
<B>ATZ</B> говорит модему загрузить профиль используемый по умолчанию и
стереть все изменения, которые вы внесли. Для того, чтобы сохранить изменения,
загрузите профиль, который вы хотите изменить через команду  
<B>ATZ</B><EM>n</EM> (где <EM>n</EM> соответствует номеру профиля).  
Сделайте необходимые изменения и, затем, сохраните их, набрав
<B>AT&amp;W<EM>n</EM></B>.  Для того, чтобы <EM>kppp</EM> мог использовать тот
профиль, который вы хотите, измените инициализирующую строку 
(Настройка/Модем/Команды модема/Строка инициализации.)  Например,
<B>ATZ1</B> укажет <EM>kppp</EM> перезагрузить модем и использовать при этом
профиль #1.
<P>Если вы хотите восстановить настройку модема, которая существовала до внесения вами 
изменений, используйте команду <B>AT&amp;F&amp;W</B> для того, чтобы вернуть 
профилю значения, соответствующие заводским данным по умолчанию, и сохранить эти 
значения, как профиль по умолчанию.
<P>В следущей секции приведены примеры изменения профилей.
<P>
<H3><A NAME="ss5.3">5.3 Как заставить модем разъединиться (hang up)?</A>
</H3>

<P>Иногда вы можете обнаружить, что <EM>kppp</EM> не может отсоединить модем от 
линии. Причиной этого может быть несоответствие настроек <EM>kppp</EM> и модема.
Стандартный модем имеет два метода для отсоединения:  Командный, и DTR.
Командный метод использует посылку escape-последовательности на модем, которая 
переводит последний в командный режим, за этим следует команда отсоединения (ATH).   
<P>Вне <EM>kppp</EM>, когда вы производите настройку пакета pppd вручную, часто 
полезно использовать командный метод, так как он позволяет выйти из сессии
терминала и, затем начать pppd и не отсоединить при этом модем. В большинстве 
других случаев, метод DTR предпочтительнее, так как он проще.
<P>
<H4>DTR (AT&amp;Dn) метод</H4>

<P>DTR метод будет отсоединять модем всякий раз, когда <EM>kppp</EM> перестает 
использовать модем. 
Если вы находитесь в сессии с модемом и опрашиваете состояние модема  
командой AT&amp;V, и, среди указанных настроек в активном профиле есть
&amp;D0 -- тогда метод DTR отключен. Для того, чтобы задействовать этот метод 
используйте Настройка/Модем/Терминал, чтобы начать сессию с модемом. Затем:
<P>
<BLOCKQUOTE><CODE>
<PRE>
ATZ             # перезагружает профиль, заданный по умолчанию
AT&amp;D2               # устанавливает отключение на событие окончания DTR.
AT&amp;W                # добавляет изменение в заданный по умолчанию профиль
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H4>Как работает DTR метод?</H4>

<P>Всякий раз, когда Data Terminal Ready (DTR) линия в последовательном соединении
между вашим компьютером и модемом получает высокий электрический сигнал, модем 
разрывает соединения с удаленным модемом. Когда <EM>kppp</EM> открывает 
последовательный порт, сигнал в линии DTR понижается. На внешнем модеме вы 
можете видеть, как при этом загорается свет у DTR (or TR).
Если TR светодиод гаснет (оттого, что <EM>kppp</EM> закрыл последовательный порт,
или случилось что похуже) модем отсоединяется.
<P>
<H4>Командный метод</H4>

<P>Другой путь заставить модем отсоединиться (используемый, когда AT&amp;Dn и n не 
равен 2) -- это заставить модем принять команду во время ведения сессии с 
удаленным компьютером. Для того, чтобы отключиться правильным образом, войдите
в сессию с модемом и установите the guard time на короткий интервал, как здесь:
<P>
<BLOCKQUOTE><CODE>
<PRE>
ATZ
ATS12=5
AT&amp;W
</PRE>
</CODE></BLOCKQUOTE>
<P>Затем используйте Settings/More/Modem Commands/Guard Time slider чтобы 
приравнять регистр (S12) значению (5). Теперь модем должен отсоединяться 
правильно.
<P>
<H4>Как работает командный метод?</H4>

<P>Когда ваш модем соединен с удаленным модемом, он находится в "соединенном" 
режиме. При этом он посылает все получаемые им знаки на удаленный модем не
пытаясь их интерпретировать. Для того, чтобы заставить модем принимать знаки 
как команды, нужно перевести модем в командный режим. Это делается посредством
escape-кода.  
<P>Escape код определяется, как три интервала времени, чья длина задана в S12 (в пятидесятых долях секунды.)
<P>
<UL>
<LI>Тишина (должна быть более чем S12/50 секунд)</LI>
<LI>Escape знак (определяемый в регистре S2, по умолчанию это "+") 
повторенный три раза (менее чем S12/50 секунд между каждым из них)</LI>
<LI>Тишина (должна быть более чем S12/50 секунд)
</LI>
</UL>
<P>Как только модем переходит в командный режим, вы посылаете на него команды.
Для того, чтобы отсоединиться, посылается команда ATH.  Escape коды и строка
отсоединения, используемые <EM>kppp</EM>, показаны в диалоговых окнах в
Настройка/Модем/Команды модема.  Они должны соответствовать тем, которые заданы в 
вашем модеме.
<P>
<H3><A NAME="ss5.4">5.4 Ускорение набора по тону</A>
</H3>

<P>
<P>Если вы хотите применять тоновый набор номера, продолжительность времени, 
которые занимает набор может быть изменена, если вы используете регистр S11. Он 
задает протяженность (в сотых секунды) времени в течение которого пересылается
каждый тон во время набора. По умолчанию обычно задается 95 (почти секунда).
Как быстро вы можете набирать в действительности -- зависит от оборудования
вашей телефонной компании. Минимальный промежуток равен 50, что почти в два раза
быстрее, и, такая скорость обычно работает.
<P>
<BLOCKQUOTE><CODE>
<PRE>
ATZ             # перегрузите на установки заданные по умолчанию
ATS11=50        # самый быстрый набор номера из возможных, используйте большее
                  значение, если набор не срабатывает.
AT&amp;W        # Запишите установку в заданные по умолчанию параметры
</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>
<P>
<P ALIGN="RIGHT">

<A HREF="index-6.html"> Вперед </A>
<A HREF="index-4.html"> Назад </A>
<A HREF="index.html#toc5"> Содержание </A>
</P>
<CENTER>
<HR WIDTH="100%" SIZE=3 ALIGN=CENTER NOSHADE>
</CENTER>    
</FONT>

 
</BODY>
</HTML>
