<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.70)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Основные возможности</TITLE>
<META NAME="description" CONTENT="Основные возможности">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<!-- Meta http equivalent was here                               -->
<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="IntroToLinux.css">

<LINK REL="next" HREF="node62.html">
<LINK REL="previous" HREF="node60.html">
<LINK REL="up" HREF="node59.html">
<LINK REL="next" HREF="node62.html">
</HEAD>

<BODY background="backgr.jpg" vlink="#000099" bgcolor="#E6E6FA">

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html943"
  HREF="node62.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html939"
  HREF="node59.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html933"
  HREF="node60.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html941"
  HREF="IntroToLinux.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> След.:</B> <A NAME="tex2html944"
  HREF="node62.html">Конфигурация</A>
<B> Вверх:</B> <A NAME="tex2html940"
  HREF="node59.html">Введение в ViM</A>
<B> Пред.:</B> <A NAME="tex2html934"
  HREF="node60.html">Режимы работы</A>
 &nbsp; <B>  <A NAME="tex2html942"
  HREF="IntroToLinux.html">Содержание</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H3><A NAME="SECTION00054200000000000000">
Основные возможности</A>
</H3>

<P>
Все возможности и команды редактора <SPAN  CLASS="textit">ViM</SPAN>перечислить весьма затруднительно (ибо HTML-документация по нему занимает около пяти мегабайт, а книга содержит 572 страницы), но на группе наиболее (на мой взгляд) полезных остановиться необходимо.
Перечисленные ниже команды вводятся в основном режиме (если нет специального уточнения). 
Все они имеют команднострочные аналоги и могут быть легко переопределены вами...

<P>
<DL>
<DT><STRONG>переходы</STRONG></DT>
<DD>&nbsp;-- 
Для перехода на строку с номером n, воспользуйтесь командой <TT>G</TT>. 
Так, для перехода к началу текста набирайте <TT>1G</TT> (или <TT>gg</TT>), для сотой строки <TT>100G</TT>, а для конца&nbsp;-- <TT>$G</TT> (или просто <TT>G</TT>).
Также можете использовать процентный переход.
Для середины файла, например, <TT>50%</TT>.
Для перемещения по видимому участку экрана&nbsp;-- ``H'', ``M'', ``L''. ``<TT>&lt;Ctrl&gt;+F</TT>'' и ``<TT>&lt;Ctrl&gt;+B</TT>'' перемещают видимую область на экран, ``<TT>&lt;Ctrl&gt;+U</TT>'' и ``<TT>&lt;Ctrl&gt;+D</TT>'' на пол-экрана, ``<TT>&lt;Ctrl&gt;+E</TT>'' и ``<TT>&lt;Ctrl&gt;+Y</TT>'' на одну строку.
Команда ``<TT>zz</TT>'' перемещает видимую область так, чтобы текущая строка оказалась в середине, соответственно используются ``<TT>zt</TT>'' и ``<TT>zb</TT>''.
Для перехода на n символов в нужную вам сторону можете использовать клавиши со стрелками. 
То есть для перехода на 1000 символов вниз наберите 1000 и нажмите стрелку вниз.

<P>
Для перемещения по тексту используйте следующие команды: ``<TT>w</TT>'' для перемещения по словам, ``<TT>(,)</TT>'' для перемещения по предложениям, ``<TT>{,}</TT>'' для параграфов, ``<TT>[[,]]</TT>'' для функций, ``<TT>%</TT>''&nbsp;-- переход к парной скобке, ``<TT>``</TT>''&nbsp;-- к предыдущему положению, а ``<TT>&lt;CTRL&gt;-O, &lt;CTRL&gt;-I</TT>''&nbsp;-- соответственно назад и вперед по истории переходов (всю историю можно просмотреть по <TT>:jumps</TT>)...
Если вы желаете выполнить какую-либо команду <SPAN  CLASS="textit">ViM</SPAN>неоднокретно, используйте ``<TT>числокоманда</TT>''.
Так, для перемещения на 30 слов назад&nbsp;-- <TT>30b</TT>.
Используйте команду ``<TT>fбуква</TT>'' для перемещения к нужному символу.

<P>
</DD>
<DT><STRONG>метки</STRONG></DT>
<DD>&nbsp;-- Используются для отметки позиции (<TT>mметка</TT>, где меткой является любая буква) и быстрого к ней перехода (<TT>`метка</TT>).
Метки нижнего регистра действительны в пределах данного файла, метки же верхнего регистра действуют во всех открытых файлах.
Список всех меток можно получить командой <TT>marks</TT>.

<P>
</DD>
<DT><STRONG>регистры</STRONG></DT>
<DD>&nbsp;-- Конечно же вам доступно множество именованных регистров (хранилищ данных, буферов). 
Регистр отмечается ``<TT>"буква</TT>''. К нему применимы все стандартные действия&nbsp;-- копирование в него
(<TT>"меткаy</TT>), вырезание (<TT>"меткаd</TT>), и вставка из него (<TT>"меткаp</TT>, можете вместо <TT>p</TT> использовать <TT>[p,]p</TT> для вставки соответственно перед, или после курсора).
В режиме редактирования вставка из регистра осуществляется по ``<TT>&lt;Ctrl&gt;+R метка</TT>''.
Для добавления данных в регистр используйте заглавную метку.

<P>
Также вы можете писать в регистр, воспользовавшись командой ``<TT>qметка</TT>'' и завершая запись по ``q''.
Таким образом вы сохраняете макрос, выполнить который можно по ``<TT>@метка</TT>'' (либо ``<TT>@@</TT>'' для последнего выполненного макроса).

<P>
Регистры с метками ``*'' и ``+'' совпадают с X-Window clipboards (первый с ``current selection'', куда попадает выделенный мышью текст, а второй с ``real clipboard'', куда текст попадает в результате операции копирования), ``%''&nbsp;-- соответствует редактируемому файлу.

<P>
В режиме редактирования вставка из регистра осуществляется по ``<TT>&lt;Ctrl&gt;+r регистр</TT>''.

<P>
Для просмотра содержимого всех регистров воспользуйтесь командой <TT>:registers</TT>, либо <TT>:reg метка1метка2...</TT> для просмотра некоторых...

<P>
</DD>
<DT><STRONG>фолды</STRONG></DT>
<DD>&nbsp;-- предназначены для сокрытия не нужных в данный момент данных, дабы те не отвлекали внимания. 
Например, кода подпрограммы с которой вы в данный момент не работаете.
По умолчанию фолды активированы в режиме их ручной расстановки.
Если вы хотите их автоактивации по отношению к табуляции, то добавьте в конфиг строку <TT>set foldmethod=indent</TT>.
Все команды для работы с фолдами начинаются с ``z''.
Открытие фолда производится, например, по <TT>zo</TT> (или стрелке вправо) на нем, закрытие кода в фолд&nbsp;-- по <TT>zc</TT>...

<P>
</DD>
<DT><STRONG>сессии</STRONG></DT>
<DD>&nbsp;-- при ведении группы проектов нередко желательно сохранить текущее состояния и настройки редактора, дабы в дальнейшем продолжить работу с того же места. Для этого и предназначены сессии, что создаются командой <TT>:mksession /path/to/Session.vim</TT>, а читаются простой командой <TT>:so /path/to/Session.vim</TT>.
Гораздо чаще, впрочем, возникает нужда в сохранении не всей сессии, но только контекста текущего окна (в что входит, например, положение курсора в коде, текущая расстановка фолдов и много другое, о чем читайте в документации).
Это действие выполняет команда <TT>:mkview</TT>, чтение&nbsp;-- <TT>:loadview</TT>.
Можно сохранять несколько видов одного окна.
Для этого используйте цифровые параметры к вышейуказанным командам.
Так, например, загрузка третьего представления&nbsp;-- <TT>:loadview 3</TT>.
Кроме того, представления можно сохранять в файлы, аналогично сессиям.

<P>
Очень удобно сделать сохранение и чтение контекста автоматическим при начале и окончании редактирования файла.
У меня это реализовано следующим кодом (применяется для всех файлов, имеющих точку в имени):
<PRE>
  au  BufWinLeave *.* mkview
  au  BufWinEnter *.* silent loadview
</PRE>

<P>
</DD>
<DT><STRONG>восстановление</STRONG></DT>
<DD>&nbsp;-- иногда случается страшное. 
Отключают электричество (а UPS мы, наученные горьким опытом, еще не купили), виснет операционка из-за проблем с железом...
А мы как раз набирали в <SPAN  CLASS="textit">ViM</SPAN>Самый Главный Файл и утратили уже инстинкт автосохранения (вот он главный вред надежности OS Linux  :o)...
Что делать? Не паниковать. 
Если вы сохраняли файл непосредственно перед крахом и данные были сброшены на диск, то средством восстановления данных можно и не пользоваться.
Но вот если файл давно не сохранялся, то дело другое.
<SPAN  CLASS="textit">ViM</SPAN>создавался исходя из реальных потребностей его пользователей (а не рассуждений менеджеров о target-аудитории и её потребностях) и конечно же и на этот случай вам постарается помочь.
При открытии файла после краха (если в это время от был открыт) <SPAN  CLASS="textit">ViM</SPAN>, после соответствующего вам вопроса (``а был ли крах?''), попытается восстановить файл в наиболее актуальном виде.
Это не означает, что будут восстановлены все ваши исправления файла с последнего сохранения.
Это дало бы слишком большую нагрузку на компьютер, если коммитить каждый символ.
Оные изменения <SPAN  CLASS="textit">ViM</SPAN>сбрасывает на диск каждые updatetime миллисекунд (по умолчанию 4000) и каждые updatecount символов (по умолчанию 200).
Соответственно рекомендуется сохранить восстановленный файл под другим именем и пройтись по оригинальному и восстановленному программой <SPAN  CLASS="textit">vimdiff</SPAN>.
Не забудьте после всех этих манипуляций удалить swap-файл <SPAN  CLASS="textit">ViM</SPAN>`а.

<P>
</DD>
<DT><STRONG>шифрование</STRONG></DT>
<DD>&nbsp;-- не всегда мы хотим сделать свои творения всеобщим достоянием, для этого используется криптование файловой системы, каталогов, файлов...
<SPAN  CLASS="textit">ViM</SPAN>и в этом вам может помочь.
При создании нового файла запускайте <SPAN  CLASS="textit">ViM</SPAN>с ключем <TT>-x</TT>, либо используйте команду <TT>:X</TT> для уже существующего файла.
Снять защиту можно просто аннулировав ключ: <TT>:set key=</TT>.

<P>
</DD>
<DT><STRONG>сплиты</STRONG></DT>
<DD>&nbsp;-- иногда бывает полезно работать одновременно с несколькими частами редактируемого файла. 
Для этого воспользуйтесь командой <TT>:split</TT> (либо ``<TT>&lt;Ctrl&gt;+w s</TT>'') для горизонтального разделения, или <TT>:vsplit</TT> (либо ``<TT>&lt;Ctrl&gt;+w v</TT>'') для вертикального.
Переключаться между окнами можно мышью, либо по ``<TT>&lt;Ctrl&gt;+w w</TT>''.
Дополнительные окна можно закрыть командой <TT>:close</TT> (либо ``<TT>&lt;Ctrl&gt;+w c</TT>'').
Создать новое окно&nbsp;-- <TT>:new</TT> и <TT>:vnew</TT> (либо ``<TT>&lt;Ctrl&gt;+w n</TT>'').
Оставить текущее окно в гордом одиночестве&nbsp;-- <TT>:only</TT> (либо ``<TT>&lt;Ctrl&gt;+w o</TT>'').

<P>
</DD>
<DT><STRONG>обработка текста</STRONG></DT>
<DD>&nbsp;--
Поиск осуществляется командами ``/'' для поиска (по регулярному выражению) вперед, а ``?'' в обратном направлении.
Для продолжения поиска используйте ``n'', а для прошлого варианта ``N''. Для поиска слова под курсором используются соответственно ``#'' и ``*''.

<P>
Для поиска с заменой используйте <TT>:%s/что/на что/gic</TT>, где ``%'' означает работу со всем текстом (а не с текущей строкой) ``g''&nbsp;-- глобальная замена (а не первое совпадение), ``i''&nbsp;-- игнорирование регистра, а ``c''&nbsp;-- подтверждение каждого действия.

<P>
Также возможен поиск строк с применением к ним команды.
К примеру, команда ``<TT>:g+//+s/foobar/barfoo/g</TT>'' меняет ``foobar'' на ``barfoo'' во всех комментариях вида ``//''.

<P>
Кроме того любой участок текста (к примеру, выделенный) можно пропустить через внешнюю программу.
Так, например, командой ``<TT>:'&lt;,'&gt;|sort</TT>'' выделенный фрагмент сортируется.

<P>
</DD>
<DT><STRONG>автодополнение</STRONG></DT>
<DD>&nbsp;--
  Производится по содержимому данного файла, а также угазанных в переменной dictionary по нажатию клавиш ``<TT>&lt;Ctrl&gt;+n</TT>'' и  ``<TT>&lt;Ctrl&gt;+p</TT>''.

<P>
</DD>
<DT><STRONG>отмена</STRONG></DT>
<DD>&nbsp;-- ``u'' для отмены и ``<TT>&lt;Ctrl&gt;+R</TT>'' для отмены отмены...

<P>
</DD>
<DT><STRONG>смена регистра</STRONG></DT>
<DD>&nbsp;-- ``~'' для выделенного участка (или буквы под курсором).
``U''&nbsp;-- принудительно установить верхний регистр, а ``u'' соответственно нижний.

<P>
</DD>
<DT><STRONG>перемещение текста</STRONG></DT>
<DD>&nbsp;-- команды ``<TT>&lt;</TT>'' и ``<TT>&gt;</TT>'' смещают выделенный текст на shiftwidth пробелов в соответствующую сторону.

<P>
</DD>
<DT><STRONG>вставка файла</STRONG></DT>
<DD>&nbsp;-- осуществляется по команде ``<TT>:кудаread файл</TT>'', где ``куда'' обозначает номер строки, куда осуществлять вставку, либо опускается при ставке в текущую строку.
Совершенно аналогично осуществляется вставка результата работы команды.
К примеру, команда ``<TT>:read !date</TT> вставляет текущую дату...

<P>
</DD>
<DT><STRONG>повторить</STRONG></DT>
<DD>&nbsp;-- ``.'' последнюю команду правки текста, ``;'' и ``,'' последний поиск (командами ``f'',``F'',``t'',``T'').
</DD>
</DL>

<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html943"
  HREF="node62.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html939"
  HREF="node59.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html933"
  HREF="node60.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html941"
  HREF="IntroToLinux.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> След.:</B> <A NAME="tex2html944"
  HREF="node62.html">Конфигурация</A>
<B> Вверх:</B> <A NAME="tex2html940"
  HREF="node59.html">Введение в ViM</A>
<B> Пред.:</B> <A NAME="tex2html934"
  HREF="node60.html">Режимы работы</A>
 &nbsp; <B>  <A NAME="tex2html942"
  HREF="IntroToLinux.html">Содержание</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
<TABLE border="0" cellpadding="0" cellspacing="0" width="100%"><TR bgcolor="#336699"><TD bgcolor="#8080c0"><P align="center"><FONT color="#FFFFFF" size="1"><A href="http://www.gnu.org/copyleft/fdl.html"><FONT color="#FFFFFF" size="1">Copyleft</FONT></A> © 2002-2003 г. &nbsp; Nikolay A. Panov, <A href="http://www.uic.nnov.ru/~nik/articles/IntroToLinux/"><FONT color="#FFFFFF">"Intro To Linux" (orig)</FONT></A>, &nbsp;<a href="mailto:&#110;&#105;&#107;&#115;&#105;&#116;&#101;&#64;&#109;&#97;&#105;&#108;&#46;&#114;&#117;"><FONT color="#FFFFFF">&#110;&#105;&#107;&#115;&#105;&#116;&#101;&#64;&#109;&#97;&#105;&#108;&#46;&#114;&#117;</FONT></A>, &nbsp;ICQ: 122-40-8888</FONT></P></TD></TR></TABLE>
</ADDRESS>
</BODY>
</HTML>
