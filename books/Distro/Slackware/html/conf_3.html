 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html LANG=ru>
<meta name="GENERATOR" content="TtH 2.89">
<table width="100%"  CELLSPACING="1" CELLPADDING="1" >
<tr>
<td align="left"><a href="conf_2.html">Предыдущий</a></td>
<td align="center"><a href="index.html">Содержание</a></td>
<td align="right"><a href="conf_4.html">Следующий</a></td>
</table>
<hr />
<p>
 <h2><a name="tth_sEc4.3">
4.3</a>&nbsp;&nbsp;Система X Window</h2><a name="x">
</a>

<p>
Система X Window является стандартным GUI (Графическим Интерфейсом Пользователя) для всех UNIX платформ, включая Linux. В отличие от Windows и MacOS, в Linux и Unix, GUI не имеет ничего общего с ядром операционной системы. Это независимые части. Это придаёт системе большую стабильность: если GUI зависает, это не приводит к зависанию всей системы.

<p>
Единственная проблема с X, это то, что её достаточно трудно настроить.  Тем не менее, в Slackware 7 представлена безнастроечная установка X, Которая использует framebuffer драйвер. А это означает, что вам не надо проходить через процедуру настройки описанную в подразделах xf86config и XF86Setup. framebuffer будет работать на всех VESA 2.0&nbsp;- совместимых видео картах. Что в свою очередь означает, что все современные видео-карты будут работать в X. Но всё же, framebuffer работает значительно медленнее, чем правильно настроенный под вашу видео-карту X сервер.

<p>
Если вы всё же решили использовать framebuffer сервер, то вам надо установить пакет <tt>xxfb.tgz</tt> из раздела программ X. Вам так же необходимо будет выбрать одно из разрешений консоли во время процесса настройки в программе установки. Тем не менее, для большинства пользователей мы всё же рекомендуем
пройти через процедуру настройки X.

<p>
Если вы решили настроить X в вашей системе, то вам надо следовать
инструкциям из раздела&nbsp;<a href="conf_3.html#xf86conf">4.3.1</a> или из раздела&nbsp;<a href="conf_3.html#xf86s">4.3.2</a>.
Первый из разделов описывает использование <b>xf86config</b>(1)&nbsp;- программу
в стиле командной строки, для настройки X. Второй из разделов относится
к программе <b>XF86Setup</b>(1)&nbsp;- графической версии программы настройки.

<p>
     <h3><a name="tth_sEc4.3.1">
4.3.1</a>&nbsp;&nbsp;<b>xf86config</b></h3><a name="xf86conf">
</a>

<p>
<b>xf86config</b> это одна из двух программ, для настройки X, доступных в вашей системе. Основная идея довольно проста. Вам следует ответить на серию вопросов с фиксированным числом ответов. Выбирайте ответы, наиболее подходящие вашей системе. После того, как вы пройдётесь через всю программу, она создаст файл <tt>/etc/XF86Config</tt>(5)<a href="footnotes.html#tthFtNtACD" name="tthFrefACD"><sup>23</sup></a>. И вы будете готовы к запуску X. Если вы ошиблись где-то, вам надо прервать выполнение программы при помощи <b>control+c</b> и начать всё с самого начала.

<p>
Полезно собрать как можно больше информации о ваших видео карте и мониторе, до запуска <b>xf86config</b>. Вы можете получить информацию о видео карте при помощи программы <b>SuperProbe</b>:

<p>

<table>
<tr><td><tt># </tt><b>SuperProbe</b>
</td></tr></table>


<p>
Её запуск выдаст вам вначале предупреждение о возможном подвисании системы.
Если это испугало вас, то выйдете при помощи <b>control-c</b> до того, как
пяти секундный отсчёт не закончился. Если вы всё же продолжите,то вы получите
некоторую информацию о вашей видео-карте:

<p>

<table>
<tr><td>First video: Super-VGA</td></tr>
<tr><td>Chipset: ATI 264GT3 (3D Rage Pro) (Port Probed)</td></tr>
<tr><td>Memory: 4096 Kbytes</td></tr>
<tr><td>RAMDAC: ATI Mach64 integrated 15/16/24/32-bit</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DAC w/ clock</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(WITH 8-BIT WIDE Lookup tables)</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(programmable for 6/8-bit wide lookup tables)</td></tr>
<tr><td>Attached graphics coprocessor:</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Chipset: ATI Mach64</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Memory: 4096 Kbytes
</td></tr></table>


<p>
Вот так выглядит информация для ATI Rage Pro видео-карты.
Запишите информацию о вашей видео-карте или переключитесь на другой виртуальный
терминал  (используя комбинацию клавиш <b>alt-Fx</b> (функциональная клавиша),
где x&nbsp;- число от 1 до 6) и запустите там <b>xf86config</b>.  Информация о
видео-карте понадобится вам позже. <b>xf86config</b> должна быть запущена
пользователем root, так как она запишет фалы и создаст символические ссылки в
местах, где только у root пользователя есть права на запись:

<p>

<table>
<tr><td><tt># </tt><b>xf86config</b>
</td></tr></table>


<p>
Сразу после запуска вы увидите полный экран текста, рассказывающего вам,
что программа собирается делать. Помните, что вы не можете возвращаться
к предыдущему экрану, если вы сделаете ошибку, так что отвечайте внимательно.
Иначе вам придётся повториться несколько раз. Нажмите ввод, как программа вам и
предложит.

<p>

<dl compact="compact"><dt><b>Mouse protocol</b></dt>
	<dd> (протокол мыши).

<p>
<br /><table align="left" border="1"><tr><td width="0" align="center">
<a href="../gifs/xf86config.mouse.gif">Figure</a></td></tr></table><!--hbox-->

<p>
Выберите тип вашей мышки из списка. Большинство компьютеров сегодня поставляются с PS/2
или Microsoft Intellimouse. Более старые мышки, вероятно, потребуют один
из более старых протоколов.<dt><b>Emulate3Buttons</b></dt>
	<dd> (эммулировать 3-ю кнопку).

<p>
<br /><table align="left" border="1"><tr><td width="0" align="center">
<a href="../gifs/xf86config.emul3btns.gif">Figure</a></td></tr></table><!--hbox-->

<p>
Если у вашей мыши только две кнопки, то вы можете выбрать режим эмуляции третьей кнопки.
Нажим на обе кнопки одновременно будет интерпретирован, как нажатие третьей кнопки. Так
как много программ используют третью кнопку, рекомендуется подключить её. Если у вас
трёх-кнопочная мышь, то эта строчка то ответ на этот вопрос будет проигнорирован.<dt><b>Mouse device name</b></dt>
	<dd> (имя устройства мышки).

<p>
<br /><table align="left" border="1"><tr><td width="0" align="center">
<a href="../gifs/xf86config.mousedevice.gif">Figure</a></td></tr></table><!--hbox-->

<p>
Обычно вариант по умолчанию&nbsp;- <tt>/dev/mouse</tt> сработает здесь. Но если ваша мышь
подключена к какому-то необычному порту, вам необходимо ввести что-то другое. Для
большинства мышек, подключённых к последовательному или PS/2 портам, подойдёт
вариант по умолчанию.<dt><b>XKEYBOARD extension</b></dt>
	<dd> (расширение XKEYBOARD).

<p>
<br /><table align="left" border="1"><tr><td width="0" align="center">
<a href="../gifs/xf86config.xkb.gif">Figure</a></td></tr></table><!--hbox-->

<p>
 Если вы не выберете эту опцию, то вы получите какое-то странное поведение backspace и
delete кнопок. Выбор расширения клавиатуры приведёт к тому, что кнопки
будут работать так, как они и должны.<dt><b>Bindings for alt keys</b></dt>
	<dd> (назначение дополнительных кнопок).

<p>
Если вы
хотите вводить символы из различных языков, вам следует включить эту опцию.
Если вы будете набирать только текст с английскими буквами, то вам нет
необходимости включать её.<dt><b>Horizontal sync range</b></dt>
	<dd> (диапазон синхронизации по горизонтали).

<p>
<br /><table align="left" border="1"><tr><td width="0" align="center">
<a href="../gifs/xf86config.horizsync.gif">Figure</a></td></tr></table><!--hbox-->

<p>
Это
первый из вопросов о вашем мониторе. Очень важно сделать здесь правильный
выбор. Не выбирайте диапазон, выходящий за пределы спецификации вашего монитора.
Это не так важно на новых мониторах, так как у них есть защита и они не вылезут
за свои пределы. Более старые мониторы могут быть повреждены, при указании диапазона
превосходящего возможности монитора. Так
что если вы сомневаетесь, лучше перестрахуйтесь и выберите консервативный
диапазон. Очень полезно иметь под рукой документацию от вашего монитора. Для
большинства современных мониторов вы можете выбрать 31.5-48.5 или 31.5-57.0.
Те из вас, у кого high-end мониторы, могут выбрать один из более широких
диапазонов. Или вы можете ввести свой собственный диапазон частот, если вы
не можете выбрать подходящий из списка.<dt><b>Vertical sync range</b></dt>
	<dd> (диапазон синхронизации по вертикали).

<p>
<br /><table align="left" border="1"><tr><td width="0" align="center">
<a href="../gifs/xf86config.vertsync.gif">Figure</a></td></tr></table><!--hbox-->

<p>
Опять
таки, вам надо знать спецификацию вашего монитора для ответа на этот вопрос.
Если сомневаетесь, то выбирайте меньший диапазон. Безопасный выбор, наверное,
будет 50-90 или 50-100. Если вы не нашли диапазон, подходящий к вашему монитору,
вы можете ввести свой собственный.<dt><b>Identification strings</b></dt>
	<dd> (строка идентификации).

<p>
Теперь вам будет
предложено три вопроса об идентификации вашего монитора. Эти строчки не очень
важны. Вы можете просто пропустить их, путём нажатия ввода. Так же вы можете
ввести имена, какие вам заблагорассудится. Эти строчки будут использованы только
в конфигурационном файле для идентификации монитора.<dt><b>Video card database</b></dt>
	<dd>(база данных видео-карт).

<p>
<br /><table align="left" border="1"><tr><td width="0" align="center">
<a href="../gifs/xf86config.carddatabase.gif">Figure</a></td></tr></table><!--hbox-->

<p>
 Следующий большой
подраздел при настройке X относится к вашей видео-карте. Документация от
видео-карты и информация, полученная при помощи <b>SuperProbe</b> помогут вам при
её настройке. Скорее всего, вы захотите заглянуть в базу данных видео-карт, чтобы
выбрать вашу из списка, так что отвечайте ''y'' здесь. Если вы просто нажмёте
ввод, то вы пропустите этот экран и перейдёте к следующему. В базе данных есть
около 800 карт. В левом столбце указан номер каждой из видео-карт, и их
названия. В правом столбце содержится информация о чипсете, использованном в
данной видео-карте. Продолжайте нажимать ввод, пока не найдёте вашу
видео-карту. Когда вы найдёте её, введите соответствующий ей номер и нажмите ввод.
Если вы не знаете, какой тип видео-карты у вас установлен, вам предоставляется
несколько возможностей. Первое&nbsp;- вы можете посмотреть ''Chipset'' строку из
вывода <b>SuperProbe</b> и поискать карту с таким чипсетом в базе данных. Так же
вы можете воспользоваться ''generic SVGA'' типом карты. Многие карты, для
которых нет их собственного X сервера, поддерживаются SVGA сервером,
так что скорее всего, это и будет ваш выбор. После выбора карты, вы получите
более детальную информацию. Продолжая использовать ATI Rage Pro для
примера, вы получите такое сообщение:

<p>

<table>
<tr><td>Your selected card definition:</td></tr>
<tr><td>Identifier: ATI Mach64</td></tr>
<tr><td>Chipset:    ATI-Mach64</td></tr>
<tr><td>Server:     XF86_Mach64</td></tr>
<tr><td>Do NOT probe clocks or use any Clocks line.</td></tr></table>


<p>
На этом этапе вам следует проверить, что вы установили пакет сервера.  XF86_Mach64 сервер находится в пакете <tt>xma64.tgz</tt>. Убедитесь, что необходимый пакет установлен, иначе вам не удастся запустить X.<dt><b>Which server to run?</b></dt>
	<dd> (какой из серверов запускать?).

<p>
<br /><table align="left" border="1"><tr><td width="0" align="center">
<a href="../gifs/xf86config.server.gif">Figure</a></td></tr></table><!--hbox-->

<p>
Этот вопрос предлагает вам выбрать один из серверов, пригодных для использования. Если вы выбрали видео-карту правильно, просто нажмите ввод здесь. Это скажет X пользоваться сервером, специфичным для вашей видео-карты. Так же вы можете выбрать Mono сервер, VGA16 сервер, SVGA сервер, или accelerated  сервер. Лучше всего использовать сервер, указанный для вашей видео-карты.<dt><b>Setting the symbolic link</b></dt>
	<dd> (установка символической ссылки).

<p>
<br /><table align="left" border="1"><tr><td width="0" align="center">
<a href="../gifs/xf86config.symlink.gif">Figure</a></td></tr></table><!--hbox-->

<p>
Это
установит ссылку на соответствующий сервер.<dt><b>Video memory</b></dt>
	<dd> (видео память).

<p>
<br /><table align="left" border="1"><tr><td width="0" align="center">
<a href="../gifs/xf86config.videoram.gif">Figure</a></td></tr></table><!--hbox-->

<p>
Выберите размер имеющейся у вас
видео памяти. Вы можете использовать <b>SuperProbe</b> для получения этой
информации. Если в списке нет подходящего варианта, то вы можете выбрать
''Other'' и ввести вручную объём вашей видео памяти. Обратите внимание, что объём
должен быть указан в килобайтах.<dt><b>Identification strings</b></dt>
	<dd> (строчки идентификации).
Вам предложат ввести три идентификационных строчки. Как и с монитором, вы можете просто нажать ввод три раза, или ввести названия, какие пожелаете.<dt><b>RAMDAC</b></dt>
	<dd>
Вам понадобится выбрать RAMDAC только если вы пользуетесь S3, AGX или W32 серверами. <b>SuperProbe</b> скажет вам, какой тип RAMDAC чипа присутствует на вашей видео-карте. Пройдитесь по списку, пока не найдёте нужный вам и введите соответствующий ему номер. Если вы пользуетесь не S3, AGX или W32 сервером, введите ''q'' для продолжения без выбора RAMDAC.<dt><b>Clockchip setting</b></dt>
	<dd> (установки clockchip).

<p>
<br /><table align="left" border="1"><tr><td width="0" align="center">
<a href="../gifs/xf86config.clockchip.gif">Figure</a></td></tr></table><!--hbox-->

<p>
Если на вашей карте
есть программируемый clockchip, то вам надо выбрать один из предложенных в
списке. Учтите, что на большинстве карт нет программируемого clockchip,
так что скорее всего вам нужно просто нажать ввод. <b>SuperProbe</b> выдаст вам
информацию о том, есть ли у вас clockchip, и если есть, то какой именно.<dt><b>Clocks line</b></dt>
	<dd> (clock строчка).

<p>
Следующий экран полон информации о том,
что такое ''clock line''. В соответствии с приведенным объяснением, на
современных видео-картах это вам не понадобится. Затем вам будет предложено
проверить clock. Вам так же будет сообщено, следует ли проверять это для вашей
карты. В случае с ATI картой <b>xf86config</b> выдаст:

<p>

<table>
<tr><td>The card definition says to NOT probe clocks.
</td></tr></table>


<p>
Если вы увидите что-то вроде этого, выберите ''n''. Очень старые графические
карты потребуют выполнения этого процесса. <b>xf86config</b> подскажет вам, что
делать в таком случае.<dt><b>Video modes</b></dt>
	<dd> (видео режимы).

<p>
<br /><table align="left" border="1"><tr><td width="0" align="center">
<a href="../gifs/xf86config.modes.gif">Figure</a></td></tr></table><!--hbox-->

<p>
Ну вот, наступило время выбрать в каких
режимах ваш X сервер будет работать. Вы увидите четыре различных глубины
цвета&nbsp;- 8bpp, 16bpp,24bpp и 32bpp. Возле каждого есть список различных
видео режимов, которые могут быть использованы с этой глубиной цвета. Когда вы
запустите X, он запустится с глубиной цвета по умолчанию и с первым из
перечисленных для этой глубины разрешений. Если вы захотите изменить разрешение
по умолчанию, сейчас самое время сделать это. Если порядок режимов вас
устраивает, выберите ''Ok''. Иначе выберите глубину цвета, для которой хотите
сделать изменения. Например, вам предоставлен следующий выбор:

<p>

<table>
<tr><td>"640x480" "800x600" "1024x768" "1280x1024" for 8bpp</td></tr>
<tr><td>"640x480" "800x600" "1024x768" "1280x1024" for 16bpp</td></tr>
<tr><td>"640x480" "800x600" "1024x768" "1280x1024" for 24bpp</td></tr>
<tr><td>"640x480" "800x600" "1024x768" for 32bpp
</td></tr></table>


<p>
Если вы хотите, чтобы X запускался в другом разрешении по умолчанию, то
вначале выберите глубину цвета, которую хотите изменить. А затем следуйте
указаниям программы. Она попросит вас, ввести цифры, соответствующие разрешениям в
выбранном вами порядке. Если вы просто хотите поменять порядок разрешений, то вы
введёте что-то вроде этого:

<p>

<table>
<tr><td>Which modes? 5432
</td></tr></table>


<p>
   Вы так же можете удалить те разрешения, которые захотите. Если ваша
видео-карта не может работать при 1280x1024, то нет никакого смысла пробовать
этот режим. Вы можете удалить этот режим, ответив:

<p>

<table>
<tr><td>Which modes? 432
</td></tr></table>


<p>
   После выбора режимов для этой цветовой глубины, вас спросят, захотите ли вы
использовать виртуальный экран, который больше чем ваш физический экран.
Виртуальный экран больше вашего монитора. Когда вы двигаете мышью по
виртуальному экрану, она будет ''пролистывать'' экран, при подводе курсора к
краю. Это позволяет разместить больше окон на вашем экране. Но так как вы не
можете видеть весь экран сразу, это может стать раздражительным. Но интересно
попробовать поиграть с этой опцией. Так что если захотите, то вперёд. Затем вы
вернётесь в список видео режимов. После изменения для 24bpp глубины он будет
выглядеть следующим образом:

<p>

<table>
<tr><td>"640x480" "800x600" "1024x768" "1280x1024" for 8bpp</td></tr>
<tr><td>"640x480" "800x600" "1024x768" "1280x1024" for 16bpp</td></tr>
<tr><td>"1280x1024" "1024x768" "800x600" "640x480" for 24bpp</td></tr>
<tr><td>"640x480" "800x600" "1024x768" for 32bpp
</td></tr></table>


<p>
Продолжите изменения для остальных глубин цвета, если пожелаете. Когда завершите, нажмите ''Ok'' для продолжения.<dt><b>Write the config file</b></dt>
	<dd> (запись конфигурационного фала).

<p>
Ну вот, настройка X завершена <b>xf86config</b>, должен ли он записать настройки в файл <tt>/etc/XF86Config</tt>. Если вы захотите пользоваться X, вы вероятно должны ответить ''y'' на этот вопрос, так как именно там X будет искать файл настроек.</dl>

<p>
В случае, если вы правильно ответили на все вопросы, и установили пакет X
сервера, то теперь вы можете запустить X следующим образом:

<p>

<table>
<tr><td><tt>$ </tt><b>startx</b>
</td></tr></table>


<p>
Если вы установили KDE или GNOME, то один из них загрузится.
Иначе вам надо запустить <b>xwmconfig</b> и выбрать, какой из оконных менеджеров
(Window managers)
вы хотите, чтобы запускался по умолчанию. Оконные менеджеры будут
описаны позже в этой части. <b>xwmconfig</b> устанавливает оконный менеджер по
умолчанию только для пользователя, который запускает программу. Если в вашей
системе есть несколько пользователей, каждому из них будет необходимо запустить
программу, чтобы выбрать себе оконный менеджер.

<p>
Существует несколько комбинаций клавиш, которые весьма полезны при использовании
X. Если вам надо выйти из X, и вы не можете сделать это правильно,
воспользуйтесь комбинацией клавиш <b>control-alt-backspace</b>, которая
''убьёт'' X и выбросит вас в текстовый режим. Вы можете переключиться на
терминалы командной строки, из X, нажав <b>control-alt-функциональная
кнопка</b>. X запускается на 7-ом терминале, так что вы можете вернуться в
X, нажав <b>alf-F7</b>. Ну и наконец, вы можете переключать видео режимы,
находясь в X. <b>control-alt-numeric keypad +</b> переключит вас на
следующее более высокое разрешение, в то время как <b>control-alt-numeric
keypad -</b> переключит на следующее более низкое разрешение.

<p>
     <h3><a name="tth_sEc4.3.2">
4.3.2</a>&nbsp;&nbsp;<b>XF86Setup</b></h3><a name="xf86s">
</a>

<p>
Второй способ настройки X&nbsp;- программа <b>XF86Setup</b>, графическая
программа настройки, которая является частью пакета <tt>xset.tgz</tt>. Вам так
же необходимо установить <tt>xvg16.tgz</tt>.

<p>
Чтобы запустить <b>XF86Setup</b>, войдите в систему как root и
выполните:

<p>

<table>
<tr><td><tt># </tt><b>XF86Setup</b>
</td></tr></table>


<p>
Если у вас уже есть <tt>/etc/XF86Config</tt> файл (если вы уже настраивали
X), то вам будет задан вопрос, хотите ли вы использовать существующий файл.
Иначе программа сразу перейдёт в графический режим.

<p>
<br /><table align="left" border="1"><tr><td width="0" align="center">
<a href="../gifs/xf86setup.gif">Figure</a></td></tr></table><!--hbox-->

<p>
<b>XF86Setup</b> по своей сути очень сходна с <b>xf86config</b>. Она задаст вам те же вопросы,
так что обращайтесь к предыдущему разделу за разъяснениями. <b>XF86Setup</b>
содержит много справочной информации сама по себе. Так что у вас не должно
возникнуть существенных затруднений.

<p>
     <h3><a name="tth_sEc4.3.3">
4.3.3</a>&nbsp;&nbsp;Сессионные файлы настроек</h3>

<p>

<h4><tt>xinitrc</tt> и <tt>&#126;/.xinitrc</tt></h4>

<p>
<b>xinit</b>(1)&nbsp;- фактически является программой, запускающей X; она выполняется из <b>startx</b>(1), так что возможно, вы не заметили этого (и скорее всего это вам знать и не надо). Тем не менее, её конфигурационный файл определяет, какие программы (включая и оконный менеджер) запускать при загрузке X. <b>xinit</b> вначале проверяет, есть ли в вашем домашнем каталоге <tt>.xinitrc</tt> файл. Если она находит его, он выполняется, а иначе выполняется <tt>/var/X11R6/lib/xinit/xinitrc</tt> (системный файл по умолчанию). Вот пример
простого <tt>xinitrc</tt> фала:

<p>

<table>
<tr><td># !/bin/sh</td></tr>
<tr><td># $XConsortium: xinitrc.cpp,v 1.4 91/08/22 11:41:34 rws Exp $</td></tr>
<tr><td>userresources=$HOME/.Xresources</td></tr>
<tr><td>usermodmap=$HOME/.Xmodmap</td></tr>
<tr><td>sysresources=/usr/X11R6/lib/X11/xinit/.Xresources</td></tr>
<tr><td>sysmodmap=/usr/X11R6/lib/X11/xinit/.Xmodmap</td></tr>
<tr><td></td></tr>
<tr><td># merge in defaults and keymaps</td></tr>
<tr><td>if [ -f $sysresources ]; then</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;xrdb -merge $sysresources</td></tr>
<tr><td>fi</td></tr>
<tr><td>if [ -f $sysmodmap ]; then</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;xmodmap $sysmodmap</td></tr>
<tr><td>fi</td></tr>
<tr><td>if [ -f $userresources ]; then</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;xrdb -merge $userresources</td></tr>
<tr><td>fi</td></tr>
<tr><td>if [ -f $usermodmap ]; then</td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;xmodmap $usermodmap</td></tr>
<tr><td>fi</td></tr>
<tr><td># start some nice programs</td></tr>
<tr><td>twm &amp;</td></tr>
<tr><td>xclock -geometry 50x50-1+1 &amp;</td></tr>
<tr><td>xterm -geometry 80x50+494+51 &amp;</td></tr>
<tr><td>xterm -geometry 80x20+494-0 &amp;</td></tr>
<tr><td>exec xterm -geometry 80x66+0+0 -name login</td></tr></table>


<p>
Все из этих ''if'' блоков используются для подключения разных конфигурационных фалов. Очень скоро мы вернёмся к <tt>.Xresources</tt>, а вот файл <tt>.Xmodmap</tt> мы оставим в покое. Наиболее интересная часть файла расположена в конце, это та часть, где запускаются различные программы. Эта X сессия  начнётся с <b>twm</b>(1) оконным менеджером, с часами и с тремя терминалами. Обратите внимание на exec в строчке запуска последнего из терминалов. Эта команда говорит, что этот терминал (<b>xterm</b>(1)) заменит текущую оболочку (ту, которая запустила <b>xinit</b> сценарий). Когда пользователь выйдет из этого <b>xterm</b>, X сессия закончится.

<p>
Если вы хотите, определить, какие из программ должны быть запущены в X сессии, скопируйте <tt>/var/X11R6/lib/xinit/xinitrc</tt> в <tt>&#126;/.xinitrc</tt> и отредактируйте его, разместив там строчки, запускающие те программы, которые вы пожелаете. Последние строчки моего выглядят вот так:

<p>

<table>
<tr><td># Start the window manager:</td></tr>
<tr><td>exec startkde
</td></tr></table>


<p>
Обратите внимание, что есть несколько <tt>xinitrc.*</tt> файлов в каталоге
<tt>/var/X11R6/lib/xinit</tt>, которые соответствуют разным оконным менеджерам и
GUI-ам. Вы можете пользоваться тем из них, каким пожелаете.

<p>

<h4><tt>.Xresources</tt> и <tt>.Xdefaults</tt></h4>

<p>
Многие из программ X, для получения различных предпочтений пользователя (цвета, шрифты, и т.д.), используют X Resource Database.  Эта база данных обслуживается при помощи <b>xrdb</b>(1) программы, которую напрямую, скорее всего вы никогда не станете запускать. В Slackware она запускается автоматически из <tt>xinitrc</tt>. Файл из которого <tt>xinitrc</tt> указывает программе <b>xrdb</b> загружать предпочтения&nbsp;- <tt>&nbsp;/.Xresources</tt>.  <b>xrdb</b> так же загрузит <tt>&nbsp;/.Xdefaults</tt>. Минимальный файл  <tt>.Xresources</tt> выглядит следующим образом:

<p>

<table>
<tr><td>xterm*background: black</td></tr>
<tr><td>xterm*foreground: gray</td></tr>
<tr><td>xterm*scrollBar: true</td></tr>
<tr><td>xterm*font: -*-lucidatypewriter-*-r-*-*-15-*-*-*-*-*-*-*
</td></tr></table>


<p>
Эти четыре строчки определяют настройки для <b>xterm</b> программы. <tt>Xresource</tt> имеет следующую структуру:

<p>

<table>
<tr><td>program*option: setting/value
</td></tr></table>


<p>
Таким образом содержание <tt>.Xresources</tt> должно быть само-достаточно для понимания. Не пугайтесь строчки с шрифтами; шрифты для X всегда описываются таким способом.

<p>

<h4>Серверы и оконные менеджеры</h4>

<p>
Изначально X Window система была разработана, для работы сквозь сеть.  Один большой сервер выполняет X программы, а на экран они выводятся на других машинах-клиентах, где угодно в сети. Возможность удалённо выводить на экран программы может иметь много преимуществ. Главные недостатки этой концепции в том, что она менее безопасна, чем локально выполняемые программы, а так же она очень требовательна к сетевым ресурсам. Вы найдёте обсуждение этой концепции ниже в разделе&nbsp;<a href="conf_3.html#exp">4.3.5</a>.

<p>
Даже если вы запускаете X на вашем собственном компьютере, вы имеете дело с клиент-сервер моделью. Сервер это часть, которая определяется видео-картой. Когда вы настроили X и сообщили ему, какая у вас видео-карта, вы определили, каким X сервером пользоваться. Клиентская часть&nbsp;- это все остальные программы, которые вы выполняете в X. Специфический клиент, называемый оконным менеджером, ответственен за внешний вид вашей специфической X сессии. Оконные менеджеры детально обсуждаются ниже.

<p>
Работа оконного менеджера&nbsp;- обрабатывать рисование окон на экране, с программами внутри этих окон, а так же обрабатывать ввод с мыши и клавиатуры.  Первые оконные менеджеры только это и делали.  Сегодняшние оконные менеджеры&nbsp;- гораздо более сложные программы, и в них можно настроить практически всё, что вы пожелаете. В них есть все мыслимые опции, которые позволяют сделать ваш рабочий стол отличным от всех других.

<p>
Большое количество оконных менеджеров действительно отличает Linux от Windows. В Windows, у вас есть одна основная оконная среда. В Linux вы можете пользоваться одним из многих оконных менеджеров, каждый с различным внешним видом и различными настройками. Некоторые люди назовут это недостатком, так как нет одного стандартного внешнего вида. Но большинство пользователей Linux назовут это достоинством, так как вы можете настроить вашу систему так, как пожелаете.

<p>
     <h3><a name="tth_sEc4.3.4">
4.3.4</a>&nbsp;&nbsp;Выбор рабочего стола</h3>

<p>
Многие годы Unix использовался исключительно как операционная система для серверов, за исключением мощных профессиональных рабочих станций. Только люди с техническими наклонностями пользовались Unix, как операционной системой, и интерфейс пользователя соответствовал этому факту. GUI были скелетами, разработанными для запуска нескольких необходимых приложений, вроде CAD программ и image render-ов. Управление файлами и системой производилось исключительно из командной строки. Различные производители (Sun Microsystems, Silicon Graphics, и т.д.) продавали рабочие станции с попытками предоставления ''look and feel'', но большое разнообразие сред разработки для GUI привело к исчезновению единого стандартного рабочего стола. Полоса прокрутки может выглядеть по разному в разных программах. Меню расположены в различных частях окна. В программах встречаются разные кнопки и переключатели. до тех пор, пока пользователями были лишь технические профессионалы, это было не очень важно.

<p>
С появлением свободных Unix подобных ОС, и растущим числом различных графических приложений, X стал использоваться в качестве рабочего стола пользователями. Большинство, конечно очаровано внешним видом предлагаемым Microsoft-овским Windows и Apple-овским MacOS; недостаток такого разделения в направлениях X-ориентированных приложений, стал барьером к более широкому использованию программ. В ответ на это появились два проекта с открытым исходником: The K Desktop Environment или KDE, и GNU Network Object Model Environment, известная как GNOME. Каждая из которых имеет широкий спектр приложений, от панелей задач и менеджеров файлов, до игр и офисных пакетов, написанных с теми же GUI toolkit, и сильно внедрёнными, чтобы предоставить универсальный и завершённый рабочий стол.

<p>
Различия между KDE и GNOME не очень велики. Они выглядят по разному, так как написаны с различными GUI toolkit. KDE основан на Qt библиотеке от Troll Tech AS, в то время, как GNOME основан на GTK, наборе инструментов, изначально разработанном для GNU Image Manipulation Program (или GIMP). Так как проекты независимы, то и разрабатываются они разными дизайнерами и программистами, с разными стилями разработки и с различной философией. Тем не менее, результат в обоих случаях, фундаментально идентичен: полная, тесно интегрированная рабочая среда и набор приложений. По функциональности и внешнему виду, обе среды предоставляют все те же функции, что и другие операционные системы.

<p>
Преимущество в том, что эти десктопы бесплатны. Т.е. вы можете получить одну из них, или даже обе на одном и том же компьютере. Выбор за вами.

<p>
В добавок к GNOME и KDE, в Slackware есть большая коллекция оконных менеджеров. Некоторые разработаны, как эмуляторы других ОС, некоторые для персональной настройки, другие для скорости. Выбор велик. Конечно, вы вольны установить столько, сколько пожелаете, поиграться с ними и выбрать какой же больше всех остальных вам больше нравится.

<p>
Чтобы упростить выбор рабочего стола, Slackware включает в себя программу <b>xwmconfig</b>, которая позволяет вам выбрать, какой из десктопов или оконных менеджеров использовать. Итак:

<p>

<table>
<tr><td><tt>$ </tt><b>xwmconfig</b>
</td></tr></table>


<p>
<br /><table align="left" border="1"><tr><td width="0" align="center">
<a href="../gifs/xwmconfig.gif">Figure</a></td></tr></table><!--hbox-->

<p>
Вы увидите список всех desktop и оконных менеджеров, установленных в вашей системе. Просто выберите один из них, какой захотите. Каждый пользователь в системе должен выполнить эту программу, так как разные пользователи могут использовать разные destop-ы. И возможно, не все захотят пользоваться тем, который установлен по умолчанию, в процессе установки.

<p>
А потом просто запустите X:

<p>

<table>
<tr><td><tt>$ </tt><b>startx</b>
</td></tr></table>


<p>
     <h3><a name="tth_sEc4.3.5">
4.3.5</a>&nbsp;&nbsp;Экспортирование экрана</h3><a name="exp">
</a>

<p>
Как мы отметили выше, возможно запускать X программы на одном компьютере, а выводить их на экран на другом. Это невероятно требовательная к скорости сети процедура, так что вы наверное не захотите делать это через модемное соединение, или через большие расстояния. Так же есть проблема безопасности: экспортирование экрана небезопасно, так как вы позволите всей сети наблюдать за тем, что вы делаете. Всё же это может быть полезно в локальной сети.

<p>
Здесь следует определить использование слов ''клиент'' и ''сервер''.  Когда вы экспортируете экран, можно запутаться в том, кто есть клиент, а кто сервер.  Машина, которая выполняет X программы и посылает изображение, будет называться сервером. Машину, на которой изображение будет выводиться на экран, назовём клиентом. Программу, показывающую вещи назовём ''сервер'', а работающую программу&nbsp;- ''сервер''.

<p>
В этом примере мы будем использовать два компьютера: golf&nbsp;- довольно мощный сервер, расположенный под столом в другом конце забитого людьми и оборудованием кабинета. На нём есть очень много ОЗУ, мощный процессор. В добавок к этому, на нём установлено много X программ, но нет монитора. В другом конце комнаты расположен couch&nbsp;- старый компьютер, с небольшим объёмом ОЗУ и маленьким диском. На нём нет достаточно ресурсов для запуска программы вроде Netscape. couch имеет два существенных преимущества: монитор и он расположен прямо возле шикарного кресла. Вам даже не надо вставать, чтобы пользоваться компьютером. Было бы очень здорово, если бы вы могли запустить Netscape не вставая с кресла. Выход&nbsp;- экспортирование экрана.

<p>
Войдите в систему на couch и запустите X. Запустите вашу любимую терминальную программу (<b>xterm</b>, <b>rxvt</b>, <b>eterm</b>, <b>aterm</b>, или любую другую). Первый шаг при настройке удалённого отображения X программ&nbsp;- настройка клиента так, чтобы другие компьютеры могли показывать вывод программ. Для этого используется программа <b>xhost</b>. Она контролирует доступ. Если вы в безопасной внутренней сети, вам наверное безразлично, если кто-то может наблюдать, что вы делаете. В этом случае вы просто разрешите всем в этой сети выводить эту информацию на экран:

<p>

<table>
<tr><td><tt>couch $ </tt><b>xhost +</b></td></tr>
<tr><td>access control disabled, clients can connect from any host
</td></tr></table>


<p>
С другой стороны, вы можете захотеть сделать это в небезопасной сети (Internet,
сеть колледжа, или что то в этом роде). Вы определённо не хотите, чтобы все
видели, что вы делаете. <b>xhost</b> позволяет вам выбрать тех, кто сможет
смотреть, что вы делаете:

<p>

<table>
<tr><td><tt>couch $ </tt><b>xhost + golf.foc</b></td></tr>
<tr><td>golf.foc being added to access control list
</td></tr></table>


<p>
Теперь только <b>golf.foc</b> (сервер указанный ранее) может выводить информацию на экран компьютера <b>couch</b>. вы можете проверить, у кого есть доступ для вывода на экран информации, запустив <b>xhost</b> без аргументов:

<p>

<table>
<tr><td><tt>couch $ </tt><b>xhost</b></td></tr>
<tr><td>access control enabled, only authorized clients can connect</td></tr>
<tr><td>INET:golf.foc</td></tr>
<tr><td>INET:localhost</td></tr>
<tr><td>INET:couch.foc</td></tr>
<tr><td>LOCAL:</td></tr></table>


<p>
Ну вот, клиент готов. Следующий шаг&nbsp;- настроить сервер, чтобы он знал, куда выводить изображение вместо монитора. Так как на сервере нет монитора (а значит на нём и X не выполняется), он должен знать, куда выводить изображение.

<p>
Настройка сервера так же не сложна. После того, как вы соединились с сервером, вам надо изменить $DISPLAY переменную. По умолчанию, вероятно, она будет пуста.  Вам надо присвоить переменной значение, равное удалённому хосту, плюс число, соответствующее тому, на какую X сессию выводить экран. Скорее всего у вас будет только одна X сессия, так что тут никаких проблем возникнуть не должно.

<p>
Вот как надо установить $DISPLAY переменную в нашем примере (если на сервере используется Bash, в других случаях суть такая же, но синтаксис будет немного отличен):

<p>

<table>
<tr><td><tt>golf $ </tt><b>export DISPLAY=couch.foc:0.0</b>
</td></tr></table>


<p>
Это всё, что необходимо сделать для настройки сервера. Теперь, не отсоединяясь,
просто запустите X программы оттуда. Весь вывод программ будет послан
через сеть на ваш экран.

<p>

<table>
<tr><td><tt>golf $ </tt><b>netscape &amp;</b>
</td></tr></table>


<p>
Эта команда запустит <b>netscape</b> с сервера, но так как переменная DISPLAY указывает на couch, всё будет выводится туда. Вам даже не придётся вставать из-за вашего старого компьютера для того, чтобы запускать программы. Одно важное замечание, которое здесь необходимо сделать: на сервере должны быть установлены все X библиотеки, и другие файлы, необходимые для выполнения программы. В то же время, вам не понадобится <tt>/etc/XF86Config</tt> файл, так как ничего не выводится на экран сервера.

<p>
После этого вы можете захотеть отключить экспортирование экрана, убрав сервер из списка доступа на вашем клиенте:

<p>

<table>
<tr><td><tt>couch $ </tt><b>xhost - golf.foc</b></td></tr>
<tr><td>golf.foc being removed from access control list</td></tr>
<tr><td><tt>couch $</tt>
</td></tr></table>


<p>
Вы видите, как здорово разделять ресурсы компьютеров. Но будьте осторожны, вы можете быть хостом многих X программ для многих удалённых компьютеров, и даже не знать этого.

<p>
     <h3><a name="tth_sEc4.3.6">
4.3.6</a>&nbsp;&nbsp;Итог</h3>

<p>
В этом разделе вы научились настраивать X Window систему при помощи <b>xf86config</b> и <b>XF86Setup</b>. Вы так же должны были разобраться в том, что такое окружение рабочего стола, и что такое оконный менеджер, и как выбрать, какой из них запускать. В добавок вы должны знать, как экспортировать экран.  Теперь у вас должна быть запущенна работающая графическая среда.

<hr />
<table width="100%"  CELLSPACING="1" CELLPADDING="1" >
<tr>
<td align="left"><a href="conf_2.html">Предыдущий</a></td>
<td align="center"><a href="index.html">Содержание</a></td>
<td align="right"><a href="conf_4.html">Следующий</a></td>
</table>
<hr /><small>File translated from
T<sub><font size="-1">E</font></sub>X
by <a href="http://hutchinson.belmont.ma.us/tth/">
T<sub><font size="-1">T</font></sub>H</a>,
version 2.89.<br />On 24 Apr 2001, 16:43.</small>
</html>