 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html LANG=ru>
<meta name="GENERATOR" content="TtH 2.89">
<table width="100%"  CELLSPACING="1" CELLPADDING="1" >
<tr>
<td align="left"><a href="use_6.html">Предыдущий</a></td>
<td align="center"><a href="index.html">Содержание</a></td>
<td align="right"><a href="use_8.html">Следующий</a></td>
</table>
<hr />

<p>
 <h2><a name="tth_sEc5.7">
5.7</a>&nbsp;&nbsp;Архиваторы</h2><a name="arch">
</a>

<p>
В Slackware Linux есть несколько программ, которые могут быть использованы
для сжатия и архивирования файлов. Эти программы особенно полезны для
создания резервных копий документов (backups) и для обмена файлами между
компьютерами по сети. Вы можете найти, как программы для работы со стандартными
Unix так и со стандартными Windows архивами.

<p>
     <h3><a name="tth_sEc5.7.1">
5.7.1</a>&nbsp;&nbsp;<b>gzip</b></h3>

<p>
<b>gzip</b>(1) это GNU программа сжатия. Она берёт один файл и сжимает его.
Пример обычного использования выглядит вот так:

<p>

<table>
<tr><td><tt>$ </tt><b>gzip infile</b>
</td></tr></table>


<p>
Выходной файл будет назван <tt>infile.gz</tt> и почти всегда будет меньше
входного. Обратите внимание, что <tt>infile.gz</tt> заменит <tt>infile</tt>.
Это значит, что <tt>infile</tt> прекратит своё существование. Останется только
его сжатая копия. Обычные текстовые файлы существенно сожмутся, в то время как
jpeg картинки, mp3, и другие подобные файлы почти не сожмутся, так как они уже
сжаты. Приведённый выше пример, это нечто среднее между качеством сжатия и
затраченным временем. Максимальное сжатие может быть получено при помощи такой
команды:

<p>

<table>
<tr><td><tt>$ </tt><b>gzip -9 infile</b>
</td></tr></table>


<p>
Это займёт больше времени, но выходной файл будет настолько сжатым,
насколько <b>gzip</b> вообще может его сжать. Использование меньших значений
займёт меньше времени, но соответственно и качество компрессии будет хуже.

<p>
Распаковывание gzipped (запакованных GNU zip) файлов может быть выполнено при
помощи двух команд, которые на самом деле являются одной и той же программой.
<b>gzip</b> распакует любой файл с узнаваемым им расширением. Вот
список расширений, которые узнаёт команда: <tt>.gz</tt>, <tt>-gz</tt>,
<tt>.z</tt>, <tt>-z</tt>, <tt>.Z</tt>, или <tt>-Z</tt>. Первый метод&nbsp;-
применить команду <b>gunzip</b>(1) к файлу:

<p>

<table>
<tr><td><tt>$ </tt><b>gunzip infile.gz</b>
</td></tr></table>


<p>
Выполнение этой команды приведёт к тому, что вместо указанного файла в этом же
каталоге появится его распакованная версия и <tt>.gz</tt> часть его имени
исчезнет.

<p>
Второй метод распаковывания gziped файла, это вызвать <b>gzip</b> в применении к
файлу:

<p>

<table>
<tr><td><tt>$ </tt><b>gzip -d infile.gz</b>
</td></tr></table>


<p>
Это приведёт к точно такому же результату, как и вызов <b>gunzip</b>. Объяснение
очень просто: <b>gunzip</b> это всего лишь символическая ссылка на
<tt>/bin/gzip</tt>:

<p>

<table>
<tr><td><tt>$ </tt><b>cd /usr/bin</b></td></tr>
<tr><td><tt>$ </tt><b>ls -l gunzip</b></td></tr>
<tr><td>lrwxrwxrwx   1 root  root  9 Feb  2 09:45 gunzip -&#62; /bin/gzip
</td></tr></table>


<p>
Так что выполнение <b>gunzip</b> на самом деле лишь вызов <b>gzip</b> хоть и под
другим именем. Программа может определить, по какому имени к ней обратились,
и работает в соответствии с этим. В этом случае, <b>gzip</b> увидит, что его
вызвали как <b>gunzip</b> и распакует файл. Поэтому вы можете на ваше
усмотрение пользоваться любой из команд, для распаковки gziped файлов.

<p>
     <h3><a name="tth_sEc5.7.2">
5.7.2</a>&nbsp;&nbsp;<b>bzip2</b></h3>

<p>
<b>bzip2</b>(1) это альтернативная программа сжатия, установленная в Slackware
Linux. Она использует алгоритм отличный от <b>gzip</b>, который имеет как
преимущества, так и недостатки. Главное преимущество <b>bzip2</b> это размер
сжатых файлов. <b>bzip2</b> почти всегда сожмёт лучше, чем <b>gzip</b>. Иногда
файлы получаются гораздо меньше, чем фалы сжатые <b>gzip</b>-ом. Это может быть
значительным преимуществом для людей, с медленным модемным соединением.

<p>
Недостаток <b>bzip2</b> в том, что она более интенсивно использует CPU, чем <b>
gzip</b>. А это значит, что использование <b>bzip</b> займёт больше времени и будет
более требовательно к процессору, чем <b>gzip</b>. Когда вы решаете,
каким архиватором пользоваться, надо взвесить это соотношение скорость&nbsp;-
сжатие, и выбрать, что важнее.

<p>
Использование <b>bzip2</b> очень похоже на использование <b>gzip</b>, так что мы
не станем много времени тратить на её обсуждение. Просто вызовите <b>bzip2</b>,
указав имя файла:

<p>

<table>
<tr><td><tt>$ </tt><b>bzip2 infile</b>
</td></tr></table>


<p>
Вывод обычно будет меньше, чем входной файл, и получит название <b>
infile.bz2</b>. Как и с <b>gzip</b>, входной файл будет заменён сжатым.

<p>
Вы можете так же указывать числовой аргумент, чтобы балансировать скоростью и
качеством сжатия, как и с <b>gzip</b>. Следующий пример показывает, как
достигнуть максимального сжатия при помощи <b>bzip2</b>:

<p>

<table>
<tr><td><tt>$ </tt><b>bzip2 -9 infile</b>
</td></tr></table>


<p>
Есть два способа распаковывания файлов, заканчивающихся <tt>.bz2</tt>
расширением, как и с <b>gzip</b>. Вы можете использовать <b>bzip2</b> или
<b>bunzip2</b>(1) для распаковки bzipped файлов. Использование <b>bzip2</b>
потребует указания аргумента:

<p>

<table>
<tr><td><tt>$ </tt><b>bzip2 -d infile.bz2</b>
</td></tr></table>


<p>
Эта команда распакует bziped файл и заменит его распакованной копией. Этот
результирующий файл потеряет <tt>.bz2</tt> расширение. Аналогично, вы
можете использовать <b>bunzip2</b> для распаковки файла:

<p>

<table>
<tr><td><tt>$ </tt><b>bunzip2 infile.bz2</b>
</td></tr></table>


<p>
все произведённые программой действия будут абсолютно идентичными, так как опять
мы имеем дело с символьной ссылкой. Проверка <tt>/bin/bunzip2</tt> показывает,
что это просто символьная ссылка на <tt>/bin/bzip2</tt>. Используется тот же
трюк, что и с <b>gzip</b>. Вы увидите, что вызов программ при помощи
нескольких различных имён, для получения разного их поведения, это любимый
трюк Linux программистов.

<p>

<table>
<tr><td><tt>$ </tt><b>cd /bin</b></td></tr>
<tr><td><tt>$ </tt><b>ls -l bunzip2</b></td></tr>
<tr><td>lrwxrwxrwx   1 root  root      5 Feb  2 09:45 /bunzip2 -&#62; bzip2
</td></tr></table>


<p>
     <h3><a name="tth_sEc5.7.3">
5.7.3</a>&nbsp;&nbsp;<b>tar</b></h3>

<p>
<b>tar</b>(1) это GNU ленточный архиватор. Он берёт несколько файлов или
каталогов и создаёт один большой файл. Это позволяет вам сжимать целое дерево
каталогов, чего нельзя достигнуть при простом использовании <b>gzip</b> или <b>
bzip2</b>. <b>tar</b> имеет много параметров командной строки, которые описаны в
man странице программы. В этом разделе будут рассмотрены наиболее
распространённые варианты использования <b>tar</b>.

<p>
Чаще всего <b>tar</b> используется для распаковки и раз-архивирования пакетов,
скачанных с вэб или ftp сайтов. Большинство файлов будут иметь <tt>.tar.gz</tt>
расширение. Это так называемый ''tarball''. Это означает, что несколько файлов
были помещены в архив при помощи <b>tar</b> и затем этот архив был сжат при
помощи <b>gzip</b>. Иногда они так же имеют расширение <tt>.tar.Z</tt>. Это
означает то же самое, но обычно встречается на более старых Unix системах.

<p>
Так же вы можете встретить иногда <tt>.tar.bz2</tt> файлы. Исходный текст ядра
поставляется в таком виде, потому что так вам придётся скачивать меньший файл.
Как вы уже вероятно догадались, это несколько файлов, объединённых в архив при
помощи <b>tar</b> и сжатых при помощи <b>bzip2</b>.

<p>
Вы можете получить файлы из таких архивов, при помощи <b>tar</b> команды с
определёнными аргументами командной строки. Разархивирование tarbal-а
требует указания ключа <b>-z</b>, что фактически вызовет вначале выполнение <b>
gunzip</b>, для распаковки файла. Обычно tarbal-ы распаковываются такой командой:

<p>

<table>
<tr><td><tt>$ </tt><b>tar -xvzf hejaz.tar.gz</b>
</td></tr></table>


<p>
Довольно много опций. Что же все они означают? ''-x'' значит извлечь
(extract). Это важно, так как именно этот параметр говорит <b>tar</b>-у,
что именно делать с входным файлом. В этом случае мы опять разобьём архив на
все те файлы, из которых он был составлен. ''-v'' скажет программе быть
''многословной'' (verbose). Указание этого ключа приведёт к тому, что в процессе
извлечения будет выводиться список файлов, которые извлекаются. Вы можете смело
отказаться от использования этого ключа, если вас раздражает вывод подобной
информации. Так же вы можете использовать ''-vv'', чтобы программа стала совсем
многословной, и отображала ещё больше информации о файлах, которые извлекаются.
опция ''-z'' говорит <b>tar</b>-у, вначале пропустить файл<tt>hejaz.tar.gz</tt>
через <b>gunzip</b>. Ну и наконец, ''-f'' опция указывает, что далее в
командной строке будет указанно имя файла, с которым надо работать.

<p>
Есть так же несколько других способов написания той же самой команды. На более
старых системах, в которых отсутствует приличная версия GNU tar, вы можете
встретить такой синтаксис:

<p>

<table>
<tr><td><tt>$ </tt><b>gzip -dc hejaz.tar.gz | tar -xvf -</b>
</td></tr></table>


<p>
Эта строчка команд вначале распакует файл и затем пошлёт вывод <b>tar</b>-у. Так
как <b>gzip</b> запишет вывод на стандартный вывод, если его попросить, эта
команда запишет распакованный файл в стандартный вывод. Через pipe файл будет
послан <b>tar</b>-у для раз-архивирования. ''-'' означает работать со стандартным
вводом. Программа разархивирует поток данных, который она получит от <b>gzip</b>
и запишет вывод на диск.

<p>
Другой способ записи первой команды это запись без тире перед опциями:

<p>

<table>
<tr><td><tt>$ </tt><b>tar xvzf hejaz.tar.gz</b>
</td></tr></table>


<p>
Возможно вам так же понадобится работать с bziped архивами. Версия <b>tar</b>,
поставляемая со Slackware Linux может работать с ними так же как и с gziped
архивами. Вместо ''-z'' опции вам надо воспользоваться ''-y'':

<p>

<table>
<tr><td><tt>$ </tt><b>tar -xvyf foo.tar.bz2</b>
</td></tr></table>


<p>
Следует отметить, что <b>tar</b> поместит извлечённые файлы в текущем каталоге.
Так что если ваш архив находится в <tt>/tmp</tt> каталоге, а распаковать вы его
хотите в домашний каталог, есть два варианта решения проблемы. Первая&nbsp;- архив
можно переместить в домашний каталог и затем обработан с <b>tar</b>. Или же
вы можете указать путь к архиву в командной строке:

<p>

<table>
<tr><td><tt>$ </tt><b>tar -xvzf /tmp/bar.tar.gz</b>
</td></tr></table>


<p>
Содержимое архива будет вывалено в ваш домашний каталог, а исходный архив так
и останется в <tt>/tmp</tt> каталоге.

<p>
Второй наиболее распространённый вариант использования <b>tar</b> это создание
ваших собственных архивов. Создание архива не более сложная процедура, чем
разархивирование других файлов; просто требует другого набора опций командной
строки.

<p>
Чтобы создать сжатый <b>tar</b> архив всех файлов текущего каталога (включая
поддиректории и их файлы), вам следует воспользоваться командой:

<p>

<table>
<tr><td><tt>$ </tt><b>tar -cvzf archive.tar.gz .</b>
</td></tr></table>


<p>
В этой командной строке ''-c'' опция указывает, что должен быть создан архив, а
''-z'' сжимает получившийся архив при помощи <b>gzip</b>. <tt>archive.tar.gz</tt>
это файл, который вы хотите создать. Вы можете назвать его как вам
заблагорассудится, а если вы так же укажете полный путь, то файл будет создан
в указанном каталоге. Вот пример:

<p>

<table>
<tr><td><tt>$ </tt><b>tar -cvzf /tmp/archive.tar.gz .</b>
</td></tr></table>


<p>
В этом случае архив будет создан в <tt>/tmp</tt> каталоге. Вы можете так же
указать все файлы и каталоги, которые вы хотите включить в архив, перечислив их
в конце команды. В этом случае <tt>.</tt> это каталог, который будет включён в
архив. Вы можете заменить его на список всевозможных файлов или всего того, что
захотите включить в архив.

<p>
     <h3><a name="tth_sEc5.7.4">
5.7.4</a>&nbsp;&nbsp;<b>zip</b></h3>

<p>
Ну и наконец, есть две утилиты для работы с <tt>zip</tt> файлами. Которые
являются очень популярными в мире WIndows, итак в Linux есть программы для
работы с ними. Программа для сжатия называется <b>zip</b>(1), а программа для
распаковки называется <b>unzip</b>(1).

<p>
Сжимать довольно легко:

<p>

<table>
<tr><td><tt>$ </tt><b>zip foo *</b>
</td></tr></table>


<p>
Эта команда создаст файл <tt>foo.zip</tt>, который будет содержать все
файлы в текущем каталоге. <b>zip</b> автоматически добавит <tt>.zip</tt>
расширение, так что вам не надо указывать его в командной строке. Вы так же
можете пробежаться по текущему каталогу, пакуя все каталоги, которые там
есть:

<p>

<table>
<tr><td><tt>$ </tt><b>zip -r foo *</b>
</td></tr></table>


<p>
Распаковывать файлы тоже не сложно.

<p>

<table>
<tr><td><tt>$ </tt><b>unzip foo</b>
</td></tr></table>


<p>
Это распакует все файлы из файла <tt>foo.zip</tt>, включая все
каталоги, присутствующие в архиве.

<p>
<b>zip</b> утилиты имеют несколько расширенных опций для создания
само-распаковывающихся (self-extracting) архивов, для пропуска некоторых из
файлов, управления размером сжатого файла, вывода на экран отчётов и гораздо
больше. Смотрите man страницы для <b>zip</b> и <b>unzip</b>, чтобы узнать
как использовать эти опции.

<p>
     <h3><a name="tth_sEc5.7.5">
5.7.5</a>&nbsp;&nbsp;Итог</h3>

<p>
В этом разделе обсуждались программы, которые были использованы для сжатия и
распаковывания архивных файлов. Вы должны знать, что такое файл-архив, как
создать таковой при помощи <b>tar</b> и вид сжатия на ваш выбор, как извлечь
файлы из архива и как работать с Windows-овскими архивами. Почти всегда при
скачивании и закачивании вы будете иметь дело с архивами, так что важно уметь
работать с ними.

<hr />
<table width="100%"  CELLSPACING="1" CELLPADDING="1" >
<tr>
<td align="left"><a href="use_6.html">Предыдущий</a></td>
<td align="center"><a href="index.html">Содержание</a></td>
<td align="right"><a href="use_8.html">Следующий</a></td>
</table>
<hr /><small>File translated from
T<sub><font size="-1">E</font></sub>X
by <a href="http://hutchinson.belmont.ma.us/tth/">
T<sub><font size="-1">T</font></sub>H</a>,
version 2.89.<br />On 24 Apr 2001, 16:43.</small>
</html>