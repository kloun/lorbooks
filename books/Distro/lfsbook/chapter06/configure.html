<HTML
><HEAD
><TITLE
>Configuring essential software</TITLE
><META
NAME="GENERATOR"
CONTENT="Microsoft FrontPage 4.0"/><LINK
REL="HOME"
TITLE="Linux From Scratch"
HREF="http://www.linuxfromscratch.org/view/4.0/index.html"/><LINK
REL="UP"
TITLE="Installing basic system software"
HREF="http://www.linuxfromscratch.org/view/4.0/chapter06/chapter06.html"/><LINK
REL="PREVIOUS"
TITLE="Installing LFS-Bootscripts-1.10"
HREF="http://www.linuxfromscratch.org/view/4.0/chapter06/bootscripts.html"/><LINK
REL="NEXT"
TITLE="Setting up system boot scripts"
HREF="http://www.linuxfromscratch.org/view/4.0/chapter07/chapter07.html"/></HEAD
><BODY
CLASS="sect1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#006000"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Linux From Scratch: бЕПЯХЪ 4.0</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="bootscripts.html"
ACCESSKEY="P"
>мЮГЮД</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>цКЮБЮ 6. сЯРЮМНБЙЮ НЯМНБМШУ ЙНЛОНМЕМРНБ
        ЯХЯРЕЛШ</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="../chapter07/chapter07.html"
ACCESSKEY="N"
>бОЕПЕД</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"/></DIV
><DIV
CLASS="sect1"
><H1
CLASS="sect1"
>йНМТХЦСПЮЖХЪ НЯМНБМШУ ОПНЦПЮЛЛ</H1
><P
>рЕОЕПЭ, ЙНЦДЮ БЯЕ СЯРЮМНБКЕМН, МЮДН
  ЯЙНМТХЦСПХПНБЮРЭ ОПНЦПЮЛЛШ ДКЪ ХУ
  ЙНППЕЙРМНЦН ГЮОСЯЙЮ.</P
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
>йНМТХЦСПЮЖХЪ VIM</H2
><P
>оН СЛНКВЮМХЧ vim ГЮОСЯЙЮЕРЯЪ Б ПЕФХЛЕ
    ЯНБЛЕЯРХЛНЯРХ Я vi. мЕЙНРНПШЛ ЩРН
    МПЮБХРЭЯЪ, МН МЮЛ МЮДН ГЮОСЯЙЮРЭ vim Б
    ПЕФХЛЕ vim (ХМЮВЕ ЛШ АШ МЕ БЙКЧВХКХ vim Б
    НОХЯЮМХЕ, Ю НЯРЮБХКХ АШ vi). яНГДЮИРЕ /root/.vimrc
    ГЮОСЯРХБ ЯКЕДСЧЫЕЕ:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
><TT
CLASS="userinput"
><B
>cat &gt; /root/.vimrc &lt;&lt; &quot;EOF&quot;</B
></TT
>
&quot; Begin /root/.vimrc

set nocompatible
set bs=2

&quot; End /root/.vimrc
<TT
CLASS="userinput"
><B
>EOF</B
></TT
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
>йНМТХЦСПЮЖХЪ Glibc</H2
>
    <p>мЮЛ МЮДН ЯНГДЮРЭ МНБШИ ТЮИК /etc/nsswitch.conf
    ГЮОСЯРХБ ЯКЕДСЧЫЕЕ:</p>
    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
><TT
CLASS="userinput"
><B
>cat &gt; /etc/nsswitch.conf &lt;&lt; &quot;EOF&quot;</B
></TT
>
# Begin /etc/nsswitch.conf

passwd: files
group: files
shadow: files

publickey: files

hosts: files dns
networks: files

protocols: db files
services: db files
ethers: db files
rpc: db files

netgroup: db files

# End /etc/nsswitch.conf
<TT
CLASS="userinput"
><B
>EOF</B
></TT
></PRE
></TD
></TR
></TABLE
>
    <p>яЙПХОР <tt class="userinput"><b>tzselect</b></tt> ДНКФЕМ
    АШРЭ ГЮОСЫЕМ, Х БШ ДНКФМШ НРБЕРХРЭ МЮ
    БНОПНЯ Н БЮЬЕИ БПЕЛЕММНИ ГНМЕ. йНЦДЮ
    НРБЕРХРЕ, ЯЙПХОР БНГЭЛЕР ГМЮВЕМХЕ БЮЬЕЦН
    ЛЕЯРНОНКНФЕМХЪ ХГ ТЮИКЮ.</p>
    <p>яНГДЮИРЕ <tt class="filename">/etc/localtime</tt> ЯХЛКХМЙ
    МЮ:</p>
    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
><TT
CLASS="userinput"
><B
>ln -sf ../usr/share/zoneinfo/&lt;tzselect's output&gt; /etc/localtime</B
></TT
></PRE
></TD
></TR
></TABLE
>
    <p>tzselect's ДНКФМН ХЛЕРЭ ГМЮВЕМХЕ, РХОЮ <em>EST5EDT</em>
    or <em>Canada/Eastern</em>.</p>
    <p>йНЛЛЮМДЮ МЮ ЯНГДЮМХЕ ЯХЛКХМЙЮ ДНКФМЮ
    АШРЭ РХОЮ РЮЙНИ:</p>
    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
><TT
CLASS="userinput"
><B
>ln -sf ../usr/share/zoneinfo/EST5EDT /etc/localtime</B
></TT
></PRE
></TD
></TR
></TABLE
><P
>хКХ:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
><TT
CLASS="userinput"
><B
>ln -sf ../usr/share/zoneinfo/Canada/Eastern /etc/localtime </B
></TT
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
>йНМТХЦСПЮЖХЪ Dinamic Loader</H2
>
    <p>оН СЛНКВЮМХЧ Dinamic Loader (/lib/ld-linux.so.2)
    ОПНХГБНДХР ОНХЯЙ Б /lib Х /usr/lib МЮ ОПЕДЛЕР
    МЮКХВХЪ dinamic libraries ДКЪ ОПНЦПЮЛЛ, ЙНРНПШЕ Б
    МХУ МСФДЮЧРЯЪ. нДМЮЙН, ЕЯКХ dinamic libraries
    МЮУНДЪРЯЪ Б ДПСЦХУ ДХПЕЙРНПХЪУ, БШ ДНКФМШ
    ДНАЮБХРЭ ХУ Б ТЮИК /etc/ld.so.conf, ВРН-АШ Dinamic
    Loader ЯЛНЦ ХУ МЮИРХ. дБЕ ДХПЕЙРНПХХ
    НАЫЕХГБЕЯРМШ ДКЪ ДНОНКМХРЕКЭМШУ
    АХАКХНРЕЙ: /usr/local/lib Х /opt/lib ОНЩРНЛС ЛШ
    ДНАЮБХЛ ЩРХ ДХПЕЙРНПХХ Б ОСРХ ОНХЯЙЮ Dinamic
    Loader:<br>
    яНГДЮИРЕ МНБШИ ТЮИК /etc/ld.so.conf ЯКЕДСЧЫЕИ
    ЙНЛЮМДНИ:</p>
    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
><TT
CLASS="userinput"
><B
>cat &gt; /etc/ld.so.conf &lt;&lt; &quot;EOF&quot;</B
></TT
>
# Begin /etc/ld.so.conf

/usr/local/lib
/opt/lib

# End /etc/ld.so.conf
<TT
CLASS="userinput"
><B
>EOF</B
></TT
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
>йНМТХЦСПЮЖХЪ Sysklogd</H2
><P
>яНГДЮИРЕ МНБШИ ТЮИК /etc/syslog.conf ХЯОНКЭГСЪ
    ЯКЕДСЧЫЕЕ:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
><TT
CLASS="userinput"
><B
>cat &gt; /etc/syslog.conf &lt;&lt; &quot;EOF&quot;</B
></TT
>
# Begin /etc/syslog.conf

auth,authpriv.* -/var/log/auth.log
*.*;auth,authpriv.none -/var/log/sys.log
daemon.* -/var/log/daemon.log
kern.* -/var/log/kern.log
mail.* -/var/log/mail.log
user.* -/var/log/user.log
*.emerg *

# End /etc/syslog.conf
<TT
CLASS="userinput"
><B
>EOF</B
></TT
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
>йНМТХЦСПЮЖХЪ РЕМЕБШУ ОЮПНКЕИ (Shadow Password Suite)</H2
>
    <p>щРНР ОЮЙЕР ЯНДЕПФХР СРХКХРШ ДКЪ
    ХГЛЕМЕМХЪ ОНКЭГНБЮРЕКЭЯЙХУ ОЮПНКЕИ,
    ДНАЮБКЕМХЪ ХКХ СДЮКЕМХЪ ОНКЭГНБЮРЕКЕИ Х
    ЦПСОО Х БЯЕ Б ЩРНЛ ДСУЕ. лШ МЕ УНРХЛ
    ПЮГЗЪЯМЪРЭ БЮЛ, ВРН ЕЯРЭ РЕМЕБШЕ ОЮПНКХ.
    оНКМНЕ ПЮГЗЪЯМЕМХЕ БШ ОНКСВХРЕ ОПНВХРЮБ
    ЯННРБЕРЯРБСЧЫХИ HOWTO ОНЯРЮБКЪЕЛШИ БЛЕЯРЕ
    Я Shadow Password Suite мЮДН ГЮОНЛМХРЭ РНКЭЙН НДМС
    БЕЫЭ: ЕЯКХ БШ УНРХРЕ ХЯОНКЭГНБЮРЭ РЕМЕБШЕ
    ОЮПНКХ, РН САЕДХРЕЯЭ, ВРН БЮЬХ ОПНЦПЮЛЛШ (МЮОПХЛЕП
    xdm, ftp daemons, pop3 daemons) ЯОНЯНАМШ ПЮАНРЮРЭ Я
    МХЛХ (ЪБКЪЧРЯЪ КХ ОПНЦПЮЛЛШ shadow-compliant). щРН
    БЯЕ, ВРН МЮЛ МЮДН ГМЮРЭ.<br>
    дКЪ БЙКЧВЕМХЪ ЛЕУЮМХГЛЮ РЕМЕБШУ ОЮПНКЕИ
    ГЮОСЯРХРЕ ЯКЕДСЧЫСЧ ЙНЛЛЮМДС:</p>
    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
><TT
CLASS="userinput"
><B
>/usr/sbin/pwconv</B
></TT
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
>йНМТХЦСПЮЖХЪ Sysvinit</H2
><P
>яНГДЮИРЕ МНБШИ ТЮИК /etc/inittab ГЮОСЯРХБ
    ЯКЕДСЧЫЕЕ:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
><TT
CLASS="userinput"
><B
>cat &gt; /etc/inittab &lt;&lt; &quot;EOF&quot;</B
></TT
>
# Begin /etc/inittab

id:3:initdefault:

si::sysinit:/etc/rc.d/init.d/rc sysinit

l0:0:wait:/etc/rc.d/init.d/rc 0
l1:S1:wait:/etc/rc.d/init.d/rc 1
l2:2:wait:/etc/rc.d/init.d/rc 2
l3:3:wait:/etc/rc.d/init.d/rc 3
l4:4:wait:/etc/rc.d/init.d/rc 4
l5:5:wait:/etc/rc.d/init.d/rc 5
l6:6:wait:/etc/rc.d/init.d/rc 6

ca:12345:ctrlaltdel:/sbin/shutdown -t1 -a -r now

su:S016:once:/sbin/sulogin

1:2345:respawn:/sbin/agetty tty1 9600
2:2345:respawn:/sbin/agetty tty2 9600
3:2345:respawn:/sbin/agetty tty3 9600
4:2345:respawn:/sbin/agetty tty4 9600
5:2345:respawn:/sbin/agetty tty5 9600
6:2345:respawn:/sbin/agetty tty6 9600

# End /etc/inittab
<TT
CLASS="userinput"
><B
>EOF</B
></TT
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
>йНМТХЦСПХПСЕЛ ЙКЮБХЮРСПС</H2
>
    <p>мХВЕЦН МЕ ПЮГДПЮФЮЕР Б LINUX РЮЙ, ЙЮЙ
    МЕОПЮБХКЭМН МЮЯРПНЕМЮЪ ЙКЮБХЮРСПЮ (ПЮЯЙКЮДЙЮ,
    keymap). еЯКХ БШ УНРХРЕ ХЯОНКЭГНБЮРЭ
    ПЮЯЙКЮДЙС ОН СЛНКВЮМХЧ (US keyboard) БШ ЛНФЕРЕ
    ОПНОСЯРХРЭ ЩРС ВЮЯРЭ. US keymap ХЯОНКЭГСЕРЯЪ
    ОН СЛНКВЮМХЧ.<br>
    дКЪ СЯРЮМНБЙХ keymap МСФМНИ ПЮЯЙКЮДЙХ,
    ЯНГДЮИРЕ ЯХЛКХМЙ /usr/share/kbd/keymaps/defkeymap.map.gz
    ХЯОНКЭГСЪ ЯКЕДСЧЫСЧ ЙНЛЛЮМДС:</p>
    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
><TT
CLASS="userinput"
><B
>ln -s &lt;path/to/keymap&gt; /usr/share/kbd/keymaps/defkeymap.map.gz</B
></TT
></PRE
></TD
></TR
></TABLE
>
    <p>гЮЛЕМХРЕ <PATH keymap to>
    ОСРЕЛ Й БЮЬЕЛС map ТЮИКС. дКЪ ОПХЛЕПЮ, ЕЯКХ
    С БЮЯ МЕЛЕЖЙЮЪ ПЮЯЙКЮДЙЮ ГЮОСЯРХРЕ
    ЯКЕДСЧЫЕЕ:</p>
    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
><TT
CLASS="userinput"
><B
>ln -s i386/qwerty/nl.map.gz /usr/share/kbd/keymaps/defkeymap.map.gz</B
></TT
></PRE
></TD
></TR
></TABLE
><P
>бРНПЮЪ ВЮЯРЭ ЙНМТХЦСПЮЖХХ ПЮЯЙКЮДЙХ
    ГЮЙКЧВЮЕРЯЪ Б ЙНЛОХКЪЖХХ ПЮЯЙКЮДЙХ ОПЪЛН
    Б ЪДПН. б ЩРНЛ ЯКСВЮЕ ПЮЯЙКЮДЙЮ
    ЙКЮБХЮРСПШ АСДЕР ПЮАНРЮРЭ ЙНППЕЙРМН ДЮФЕ
    Б ПЕФХЛЕ maintenance (ЙНЦДЮ ЪДПН ОКСВЮЕР
    ЙНЛЮМДС init=/bin/sh), ДКЪ ЙНРНПНЦН ЯЖЕМЮПХХ
    ГЮЦПСГЙХ МЕ БШОНКМЪЧРЯЪ.</P
><P
>гЮОСРХРЕ ЯКЕДСЧЫСЧ ЙНЛЮМДС ДКЪ РНЦН, ВРН АШ
    ОПНОЮРВХРЭ ЪДПН МЮ ОПЕДЛЕР ОПЮБХКЭМНИ
    ПЮЯЙКЮДЙХ. бШ ДНКФМШ БШОНКМХРЭ ЩРС
    ЙНЛЛЮМДС ДН РНЦН ЙЮЙ БШ ПЮЯОЮЙСЕРЕ МНБНЕ
    ЪДПН.</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
><TT
CLASS="userinput"
><B
>loadkeys -m /usr/share/kbd/keymaps/defkeymap.map.gz &gt; \
&nbsp;&nbsp;&nbsp;&nbsp;/usr/src/linux/drivers/char/defkeymap.c</B
></TT
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
>яНГДЮМХЕ ТЮИКНБ /var/run/utmp, /var/log/wtmp and /var/log/btmp</H2
><P
>рЮЙХЛ ОПНЦПЮЛЛЮЛ ЙЮЙ login, shutdown, uptime Х ДПСЦХЕ
    РПЕАСЕРЯЪ ВХРЮРЭ Х ГЮОХЯШБЮРЭ ДЮММШЕ Б /var/run/utmp,
    /var/log/btmp Х /var/log/wtmp. щРХ ТЮИКШ ЯНДЕПФЮР
    ХМТНПЛЮЖХЧ Н РНЛ, ЙРН Б РЕЙСЫХИ ЛНЛЕМР
    ГЮКНЦХМЕМ Б ЯХЯРЕЛЕ. нМХ РЮЙ ФЕ ЯНДЕПФЮР
    ХМТНПЛЮЖХЧ Н ЛНЛЕМРЕ ОНЯКЕДМЕИ ГЮЦПСГЙХ
    Х shutdown, Х ГЮОХЯХ Н МЕСДЮВМШУ ОНОШРЙЮУ
    БУНДЮ Б ЯХЯРЕЛС.</P
><P
>яНГДЮИРЕ ЩРХ ТЮИКШ Х СЯРЮМНБХРЕ МЮ МХУ
    ЯКЕДСЧЫХЕ ОПЮБЮ ДНЯРСОЮ:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
><TT
CLASS="userinput"
><B
>touch /var/run/utmp /var/log/{btmp,lastlog,wtmp} &amp;&amp;
chmod 644 /var/run/utmp /var/log/{btmp,lastlog,wtmp}</B
></TT
></PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="sect2"
><H2
CLASS="sect2"
>сЯРЮМНБЙЮ ОЮПНКЪ ОНКЭГНБЮРЕКЪ root</H2
><P
>оПХДСЛЮИРЕ ОЮПНКЭ ДКЪ ОНКЭГНБЮРЕКЪ root Х
    СЯРЮМНБХРЕ ЕЦН ЯКЕДСЧЫЕИ ЙНЛЮМДНИ:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
><TT
CLASS="userinput"
><B
>passwd root</B
></TT
></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"/><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="bootscripts.html"
ACCESSKEY="P"
>мЮГЮД</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="../index.html"
ACCESSKEY="H"
>дНЛНИ</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="../chapter07/chapter07.html"
ACCESSKEY="N"
>бОЕПЕД</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>сЯРЮМНБЙЮ LFS-Bootscripts-1.10</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="chapter06.html"
ACCESSKEY="U"
>мЮБЕПУ</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Setting up system boot scripts</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>