<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=windows-1251"><title>Installing GCC-3.2</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.73"><link rel="HOME" title="Linux From Scratch" href="http://www.linux.org.ru/books/Distro/lfsbook/chapter05/index.html"><link rel="UP" title="Preparing the LFS system" href="chapter05.html"><link rel="PREVIOUS" title="Installing Gawk-3.1.1" href="gawk.html"><link rel="NEXT" title="Installing Grep-2.5" href="grep.html"></head><body class="sect1" bgcolor="#ffffff" text="#000000" link="#0000ff" vlink="#840084" alink="#006000"><div class="NAVHEADER"><table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0"><tbody><tr><th colspan="3" align="Center">Linux From Scratch: Версия 4.0</th></tr><tr><td width="10%" align="Left" valign="Bottom"><a href="gawk.html" accesskey="P">Назад</a></td><td width="80%" align="Center" valign="Bottom">Глава 5. Подготовка системы LFS</td><td width="10%" align="Right" valign="Bottom"><a href="grep.html" accesskey="N">Вперед</a></td></tr></tbody></table><hr align="Left" width="100%"></div><div class="sect1"><h1 class="sect1"><a name="ch05-gcc">Установка GCC-3.2</a></h1><table border="0" bgcolor="#e0e0e0" width="100%"><tbody><tr><td><pre class="screen">Приблизительное время компиляции:           9.48 SBU<br>Необходимое дисковое пространство:  326 MB</pre></td></tr></tbody></table><div class="sect2"><h2 class="sect2"><a name="AEN1602">Инсталляция GCC</a></h2>
<p>Перед установкой пакета примените патч. Удостоверьтесь, что патч и пакет распакованы перед инсталляцией.</p>
<p>Этот
пакет известен своим нестабильным поведением при компиляции с измененными
опциями оптимизации (включая опции -march и -mcpu). GCC рекомендуется
компилировать с настройками по умолчанию. Следовательно, если вы задали переменные
такие как CFLAGS или CXXFLAGS, изменяющие уровень оптимизации по умолчанию,
рекомендуется убрать их при сборке пакета GCC. Изменяя оптимизации для GCC, вы действуете на свой страх и риск.</p>
<p>Для инсталляции GCC выполните:</p><p><table border="0" bgcolor="#e0e0e0" width="100%"><tbody><tr><td><pre class="screen"><tt class="userinput"><b>patch -Np1 -i ../gcc-3.2.patch &amp;&amp;<br>patch -Np1 -i ../gcc-3.2-nofixincludes-2.patch &amp;&amp;<br>mkdir ../gcc-build &amp;&amp;<br>cd ../gcc-build &amp;&amp;<br>../gcc-3.2/configure --prefix=/static --enable-languages=c \<br>	--disable-nls --disable-shared &amp;&amp;<br>echo "#define HAVE_GAS_HIDDEN 1" &gt;&gt; gcc/auto-host.h &amp;&amp;<br>make BOOT_LDFLAGS=-static bootstrap &amp;&amp;<br>make prefix=$LFS/static install &amp;&amp;<br>ln -s gcc $LFS/static/bin/cc</b></tt></pre></td></tr></tbody></table></p></div><div class="sect2"><h2 class="sect2"><a name="AEN1610">Объяснения команд</a></h2><p><tt class="userinput"><b>patch -Np1 -i ../gcc-3.2.patch:</b></tt>
Этот патч исправляет некоторые ошибки, в частности содержит "copy fix" и
"var fix", документированные на сайте <a href="http://www.zipworld.com.au/%7Egschafer/lfs-tweaks.html" target="_top">http://www.zipworld.com.au/~gschafer/lfs-tweaks.html</a>.</p><p><tt class="userinput"><b>patch -Np1 -i ../gcc-3.2-nofixincludes-2.patch:</b></tt>
Предотвращает запуск скрипта fixincludes.</p><p><tt class="userinput"><b>--prefix=/static:</b></tt>
Это НЕ опечатка. При компиляции, GCC жестко прописывает пути, и нам необходимо
передать путь /static в качестве префикса к скрипту ./configure. Реальный
путь инсталляции мы укажем команде make install.</p><p><tt class="userinput"><b>--enable-languages=c:</b></tt>
Указание собрать компилятор Си. Компилятор C++ будет собран позже, в Главе
6, когда мы будем перекомпилировать GCC. Для сборки других компиляторов,
опустите параметр --enable-languages.</p><p><tt class="userinput"><b>echo "#define HAVE_GAS_HIDDEN 1":</b></tt>
Определям директиву ассемблера .hidden, для того чтобы впоследствии скомпилировать Glibc правильно.</p><p><tt class="userinput"><b>make BOOT_LDFLAGS=-static:</b></tt>
Это эквивалент опции LDFLAGS=-static, который мы задаем для использования статическихх ссылок при компиляции.</p><p><tt class="userinput"><b>ln -s gcc $LFS/static/bin/cc:</b></tt> Создание символической ссылки $LFS/static/bin/gcc, необходимой для некоторых пакетов.</p></div><div class="sect2">
<div class="sect2"><h2 class="sect2"><a name="AEN6805">Содержимое GCC</a></h2><p>Последняя проверка: версия 3.1.</p><div class="sect3"><h3 class="sect3"><a name="AEN6808">Программы</a></h3><p>c++, c++filt, cc (link to gcc), cc1, cc1plus, collect2, cpp, cpp0, g++,
gcc, gccbug, gcov и tradcpp0</p></div><div class="sect3"><h3 class="sect3"><a name="AEN6811">Описания</a></h3><div class="sect4"><h4 class="sect4"><a name="AEN6813">cc, cc1, cc1plus, gcc</a></h4><p>Компилятор C. Компилятор переводит код из текстового формата в формат,
понятный компьютеру. После того, как исходный код скомпилирован в объектный
файл, линкер создаст исполняемый файл из одного или нескольких объектных.</p></div><div class="sect4"><h4 class="sect4"><a name="AEN6816">c++, cc1plus, g++</a></h4><p>Компилятор C++, эквивалент cc,  gcc etc.</p></div><div class="sect4"><h4 class="sect4"><a name="AEN6819">c++filt</a></h4><p>Язык C++ позволяет осуществлять перезагрузку фуннкций, делая возможным
написание многих функций с одним именем (с разным набором параметром). Все
имена фунций C++ закодированы в низкоуровневые метки ассемблера (этот процесс
известен как mangling). c++filt совершает обратное действие: низкоуровневые
имена переводятся (demangling) в имена, понятные пользователю, так что линкер
избегает конфликта между перезагруженными функциями.</p></div><div class="sect4"><h4 class="sect4"><a name="AEN6822">collect2</a></h4><p>collect2 помогает в компиляции конструкторов.</p></div><div class="sect4"><h4 class="sect4"><a name="AEN6825">cpp, cpp0</a></h4><p>cpp осуществляет препроцессинг исходных файлов, например включает в них
содержимое заголовочных файлов. Просто добавьте в ваш исходный файл строку
вроде #include &lt;filename&gt;. Препроцессор вставит содержимое заголовочного
файла.</p></div><div class="sect4"><h4 class="sect4"><a name="AEN6828">gccbug</a></h4><p>gccbug - скрипт, облегчающий создание сообщений об ошибках.</p></div><div class="sect4"><h4 class="sect4"><a name="AEN6831">gcov</a></h4><p>gcov анализирует программы, чтобы помочь в создании более эффективного
и быстрого кода путем его оптимизации.</p></div><div class="sect4"><h4 class="sect4"><a name="AEN6834">tradcpp0</a></h4><p>На данный момент описания нет.</p></div></div><div class="sect3"><h3 class="sect3"><a name="AEN6837">Библиотеки</a></h3><p>libgcc.a, libgcc_eh.a, libgcc_s.so, libiberty.a, libstdc++.[a,so],  libsupc++.a</p></div><div class="sect3"><h3 class="sect3"><a name="AEN6840">Описания</a></h3><div class="sect4"><h4 class="sect4"><a name="AEN6842">libgcc, libgcc_eh, libgcc_s</a></h4><p>Файлы поддержки gcc времени исполнения.</p></div><div class="sect4"><h4 class="sect4"><a name="AEN6845">libiberty</a></h4><p>libiberty - коллекция подпрограмм, используемых различными программами
GNU, включая getopt, obstack, strerror, strtol и strtoul.</p></div><div class="sect4"><h4 class="sect4"><a name="AEN6848">libstdc++</a></h4><p>libstdc++ - библиотека C++. Она используется программами на C++ и содержит
часто используемые функции. Таким образом, программисту не нужно писать стандартные
фунции (например, вывод строки текста на экран) с нуля при каждом создании
программы.</p></div><div class="sect4"><h4 class="sect4"><a name="AEN6851">libsupc++</a></h4><p>libsupc++ предоставляет поддержку языка программирования C++. Помимо прочего,
libsupc++ содержит функции для обработки исключений.</p></div></div></div>
<div class="sect2"><h2 class="sect2"><a name="AEN6854">Зависимости GCC</a></h2><p>Последняя проверка: версия 2.95.3.</p><p class="literallayout">Bash: sh<br>
 Binutils: ar, as, ld, nm, ranlib<br>
 Diffutils: cmp<br>
 Fileutils: chmod, cp, ln, ls, mkdir, mv, rm, touch<br>
 Find: find<br>
 Gcc: cc, cc1, collect2, cpp0, gcc<br>
 Grep: egrep, grep<br>
 Make: make<br>
 Patch: patch<br>
 Sed: sed<br>
 Sh-utils: basename, dirname, echo, expr, hostname, sleep, true, uname<br>
 Tar: tar<br>
 Texinfo: install-info, makeinfo<br>
 Textutils: cat, tail, tr</p></div>
<h2 class="sect2"></h2></div></div><div class="NAVFOOTER"><hr align="Left" width="100%"><table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0"><tbody><tr><td width="33%" align="Left" valign="Top"><a href="gawk.html" accesskey="P">Назад</a></td><td width="34%" align="Center" valign="Top"><a href="../index.html" accesskey="H">Домой</a></td><td width="33%" align="Right" valign="Top"><a href="grep.html" accesskey="N">Вперед</a></td></tr><tr><td width="33%" align="Left" valign="Top">Установка Gawk-3.1.1</td><td width="34%" align="Center" valign="Top"><a href="chapter05.html" accesskey="U">Наверх</a></td><td width="33%" align="Right" valign="Top">Установка Grep-2.5</td></tr></tbody></table></div><br>
</body></html>