<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head><title>Установка ядра Linux-2.4.19</title><meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.73" /=""><link rel="HOME" title="Linux From Scratch" href="../index.html" /=""><link rel="UP" title="Making the LFS system bootable" href="../chapter08/chapter08.html" /=""><link rel="PREVIOUS" title="Creating the /etc/fstab file" href="../chapter08/fstab.html" /=""><link rel="NEXT" title="Making the LFS system bootable" href="../chapter08/lilo.html" /=""></head><body class="sect1" bgcolor="#ffffff" text="#000000" link="#0000ff" vlink="#840084" alink="#006000"><div class="NAVHEADER"><table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0"><tbody><tr><th colspan="3" align="Center">Linux From Scratch: Версия 4.0</th></tr><tr><td width="10%" align="Left" valign="Bottom"><a href="fstab.html" accesskey="P">Назад</a></td><td width="80%" align="Center" valign="Bottom">Глава 8. Делаем систему LFS загрузочной.</td><td width="10%" align="Right" valign="Bottom"><a href="lilo.html" accesskey="N">Вперед</a></td></tr></tbody></table><hr align="Left" width="100%" /=""></div><div class="sect1"><h1 class="sect1"><a name="ch08-kernel">Установка ядра Linux-2.4.19</a></h1><table border="0" bgcolor="#e0e0e0" width="100%"><tbody><tr><td><pre class="screen">Приблизительное время компиляции со всеми опциями по умолчанию: 4.20 SBU<br>Необходимое дисковое пространство со всеми опциями по умолчанию: 181 MB</pre></td></tr></tbody></table><p>Построение ядра включает в себ несколько шагов: конфигурация и компиляция
ядра. Есть несколько путей для конфигурации ядра. Если вам не нравится путь,
 описываемый здесь, то читайте
 <tt class="filename">README</tt> поставляемый с исходниками нового ядра, и ищите другие опции.
</p><p>Необходимые телодвижения которые вы должны совершить, это взять файл
<tt class="filename">.config</tt>
из дистрибутива исходников ядра и скопировать его в 
<tt class="filename">$LFS/usr/src/linux-2.4.19</tt>.
В этом случае вам нет необходимости конфигурировать отдельные опции, и
 возпользоваться значениями по умолчанию. Если вы хотите сделать так, то сначала
 запустите комманду
<tt class="userinput"><b>make mrproper</b></tt> затем скопируйте файл
<tt class="filename">.config</tt> снова, и запустите
<tt class="userinput"><b>make menuconfig</b></tt>; далее запустите комманду
<tt class="userinput"><b>make oldconfig</b></tt> (может быть лучше в некоторых ситуациях. Смотрите 
 <tt class="filename">README</tt> для более детальной информации по использованию
 <tt class="userinput"><b>make oldconfig</b></tt>).</p><p>Если вы внимательно используете модули для ядра, то вы должны подправить файл
<tt class="filename">/etc/modules.conf</tt>. Информация имеющая отношение к модулям и конфигурации ядра в основном находится
в документации к ядру, которая находится в каталоге 
<tt class="filename">/usr/src/linux-2.4.19/Documentation</tt>. Страница man page по 
modules.conf и файлы документации kernel HOWTO в 
<a href="http://www.tldp.org/HOWTO/Kernel-HOWTO.html" target="_top">http://www.tldp.org/HOWTO/Kernel-HOWTO.html</a> могут так-же быть полезными.</p><p>Необходимо запустить следующие комманды для построения нового ядра:
</p><p><table border="0" bgcolor="#e0e0e0" width="100%"><tbody><tr><td><pre class="screen"><tt class="userinput"><b>make mrproper &amp;&amp;<br>make menuconfig &amp;&amp;<br>make dep &amp;&amp;<br>make bzImage &amp;&amp;<br>make modules &amp;&amp;<br>make modules_install &amp;&amp;<br>cp arch/i386/boot/bzImage /boot/lfskernel &amp;&amp;<br>cp System.map /boot</b></tt></pre></td></tr></tbody></table></p><p>Примечание: путь arch/i386/boot/bzImage может различаться в зависимости от платформы.
</p><div class="sect2"><h2 class="sect2"><a name="AEN5999">Зависимости Linux</a></h2><p>Последняя проверка на версии 2.4.17.</p><p class="literallayout">Bash: sh<br /="">
Binutils: ar, as, ld, nm, objcopy<br /="">
Fileutils: cp, ln, mkdir, mv, rm, touch<br /="">
Findutils: find, xargs<br /="">
Gcc: cc1, collect2, cpp0, gcc<br /="">
Grep: grep<br /="">
Gzip: gzip<br /="">
Make: make<br /="">
Gawk: awk<br /="">
Modutils: depmod, genksyms<br /="">
Net-tools: dnsdomainname, hostname<br /="">
Sed: sed<br /="">
Sh-utils: basename, date, expr, pwd, stty, uname, whoami, yes<br /="">
Textutils: cat, md5sum, sort, tail</p></div></div><div class="NAVFOOTER"><hr align="Left" width="100%" /=""><table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0"><tbody><tr><td width="33%" align="Left" valign="Top"><a href="fstab.html" accesskey="P">Назад</a></td><td width="34%" align="Center" valign="Top"><a href="../index.html" accesskey="H">Домой</a></td><td width="33%" align="Right" valign="Top"><a href="lilo.html" accesskey="N">Вперед</a></td></tr><tr><td width="33%" align="Left" valign="Top">Создание файла /etc/fstab</td><td width="34%" align="Center" valign="Top"><a href="chapter08.html" accesskey="U">Наверх</a></td><td width="33%" align="Right" valign="Top">Делаем систему LFS загрузочной</td></tr></tbody></table></div></body></html>